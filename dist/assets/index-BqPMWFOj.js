(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();function zN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yp={exports:{}},Ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb;function FN(){if(qb)return Ac;qb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,c){var d=null;if(c!==void 0&&(d=""+c),i.key!==void 0&&(d=""+i.key),"key"in i){c={};for(var m in i)m!=="key"&&(c[m]=i[m])}else c=i;return i=c.ref,{$$typeof:n,type:r,key:d,ref:i!==void 0?i:null,props:c}}return Ac.Fragment=e,Ac.jsx=t,Ac.jsxs=t,Ac}var Bb;function HN(){return Bb||(Bb=1,yp.exports=FN()),yp.exports}var o=HN(),vp={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function GN(){if(zb)return Ve;zb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function q(V,J,ne){this.props=V,this.context=J,this.refs=A,this.updater=ne||x}q.prototype.isReactComponent={},q.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},q.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function D(){}D.prototype=q.prototype;function z(V,J,ne){this.props=V,this.context=J,this.refs=A,this.updater=ne||x}var F=z.prototype=new D;F.constructor=z,R(F,q.prototype),F.isPureReactComponent=!0;var de=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},he=Object.prototype.hasOwnProperty;function M(V,J,ne,ue,be,Se){return ne=Se.ref,{$$typeof:n,type:V,key:J,ref:ne!==void 0?ne:null,props:Se}}function j(V,J){return M(V.type,J,void 0,void 0,void 0,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function L(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ne){return J[ne]})}var N=/\/+/g;function C(V,J){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):J.toString(36)}function T(){}function ee(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(T,T):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function me(V,J,ne,ue,be){var Se=typeof V;(Se==="undefined"||Se==="boolean")&&(V=null);var Ae=!1;if(V===null)Ae=!0;else switch(Se){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(V.$$typeof){case n:case e:Ae=!0;break;case v:return Ae=V._init,me(Ae(V._payload),J,ne,ue,be)}}if(Ae)return be=be(V),Ae=ue===""?"."+C(V,0):ue,de(be)?(ne="",Ae!=null&&(ne=Ae.replace(N,"$&/")+"/"),me(be,J,ne,"",function(Es){return Es})):be!=null&&(O(be)&&(be=j(be,ne+(be.key==null||V&&V.key===be.key?"":(""+be.key).replace(N,"$&/")+"/")+Ae)),J.push(be)),1;Ae=0;var ot=ue===""?".":ue+":";if(de(V))for(var Ge=0;Ge<V.length;Ge++)ue=V[Ge],Se=ot+C(ue,Ge),Ae+=me(ue,J,ne,Se,be);else if(Ge=b(V),typeof Ge=="function")for(V=Ge.call(V),Ge=0;!(ue=V.next()).done;)ue=ue.value,Se=ot+C(ue,Ge++),Ae+=me(ue,J,ne,Se,be);else if(Se==="object"){if(typeof V.then=="function")return me(ee(V),J,ne,ue,be);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Y(V,J,ne){if(V==null)return V;var ue=[],be=0;return me(V,ue,"","",function(Se){return J.call(ne,Se,be++)}),ue}function fe(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(ne){(V._status===0||V._status===-1)&&(V._status=1,V._result=ne)},function(ne){(V._status===0||V._status===-1)&&(V._status=2,V._result=ne)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var xe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ce(){}return Ve.Children={map:Y,forEach:function(V,J,ne){Y(V,function(){J.apply(this,arguments)},ne)},count:function(V){var J=0;return Y(V,function(){J++}),J},toArray:function(V){return Y(V,function(J){return J})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ve.Component=q,Ve.Fragment=t,Ve.Profiler=i,Ve.PureComponent=z,Ve.StrictMode=r,Ve.Suspense=y,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(V){return $.H.useMemoCache(V)}},Ve.cache=function(V){return function(){return V.apply(null,arguments)}},Ve.cloneElement=function(V,J,ne){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ue=R({},V.props),be=V.key,Se=void 0;if(J!=null)for(Ae in J.ref!==void 0&&(Se=void 0),J.key!==void 0&&(be=""+J.key),J)!he.call(J,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&J.ref===void 0||(ue[Ae]=J[Ae]);var Ae=arguments.length-2;if(Ae===1)ue.children=ne;else if(1<Ae){for(var ot=Array(Ae),Ge=0;Ge<Ae;Ge++)ot[Ge]=arguments[Ge+2];ue.children=ot}return M(V.type,be,void 0,void 0,Se,ue)},Ve.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Ve.createElement=function(V,J,ne){var ue,be={},Se=null;if(J!=null)for(ue in J.key!==void 0&&(Se=""+J.key),J)he.call(J,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(be[ue]=J[ue]);var Ae=arguments.length-2;if(Ae===1)be.children=ne;else if(1<Ae){for(var ot=Array(Ae),Ge=0;Ge<Ae;Ge++)ot[Ge]=arguments[Ge+2];be.children=ot}if(V&&V.defaultProps)for(ue in Ae=V.defaultProps,Ae)be[ue]===void 0&&(be[ue]=Ae[ue]);return M(V,Se,void 0,void 0,null,be)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:m,render:V}},Ve.isValidElement=O,Ve.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:fe}},Ve.memo=function(V,J){return{$$typeof:p,type:V,compare:J===void 0?null:J}},Ve.startTransition=function(V){var J=$.T,ne={};$.T=ne;try{var ue=V(),be=$.S;be!==null&&be(ne,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ce,xe)}catch(Se){xe(Se)}finally{$.T=J}},Ve.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ve.use=function(V){return $.H.use(V)},Ve.useActionState=function(V,J,ne){return $.H.useActionState(V,J,ne)},Ve.useCallback=function(V,J){return $.H.useCallback(V,J)},Ve.useContext=function(V){return $.H.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V,J){return $.H.useDeferredValue(V,J)},Ve.useEffect=function(V,J,ne){var ue=$.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(V,J)},Ve.useId=function(){return $.H.useId()},Ve.useImperativeHandle=function(V,J,ne){return $.H.useImperativeHandle(V,J,ne)},Ve.useInsertionEffect=function(V,J){return $.H.useInsertionEffect(V,J)},Ve.useLayoutEffect=function(V,J){return $.H.useLayoutEffect(V,J)},Ve.useMemo=function(V,J){return $.H.useMemo(V,J)},Ve.useOptimistic=function(V,J){return $.H.useOptimistic(V,J)},Ve.useReducer=function(V,J,ne){return $.H.useReducer(V,J,ne)},Ve.useRef=function(V){return $.H.useRef(V)},Ve.useState=function(V){return $.H.useState(V)},Ve.useSyncExternalStore=function(V,J,ne){return $.H.useSyncExternalStore(V,J,ne)},Ve.useTransition=function(){return $.H.useTransition()},Ve.version="19.1.1",Ve}var Fb;function _g(){return Fb||(Fb=1,vp.exports=GN()),vp.exports}var P=_g();const Ci=zN(P);var _p={exports:{}},Nc={},bp={exports:{}},Ep={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function $N(){return Hb||(Hb=1,function(n){function e(Y,fe){var xe=Y.length;Y.push(fe);e:for(;0<xe;){var ce=xe-1>>>1,V=Y[ce];if(0<i(V,fe))Y[ce]=fe,Y[xe]=V,xe=ce;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var fe=Y[0],xe=Y.pop();if(xe!==fe){Y[0]=xe;e:for(var ce=0,V=Y.length,J=V>>>1;ce<J;){var ne=2*(ce+1)-1,ue=Y[ne],be=ne+1,Se=Y[be];if(0>i(ue,xe))be<V&&0>i(Se,ue)?(Y[ce]=Se,Y[be]=xe,ce=be):(Y[ce]=ue,Y[ne]=xe,ce=ne);else if(be<V&&0>i(Se,xe))Y[ce]=Se,Y[be]=xe,ce=be;else break e}}return fe}function i(Y,fe){var xe=Y.sortIndex-fe.sortIndex;return xe!==0?xe:Y.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var y=[],p=[],v=1,E=null,b=3,x=!1,R=!1,A=!1,q=!1,D=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function de(Y){for(var fe=t(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=Y)r(p),fe.sortIndex=fe.expirationTime,e(y,fe);else break;fe=t(p)}}function $(Y){if(A=!1,de(Y),!R)if(t(y)!==null)R=!0,he||(he=!0,C());else{var fe=t(p);fe!==null&&me($,fe.startTime-Y)}}var he=!1,M=-1,j=5,O=-1;function L(){return q?!0:!(n.unstable_now()-O<j)}function N(){if(q=!1,he){var Y=n.unstable_now();O=Y;var fe=!0;try{e:{R=!1,A&&(A=!1,z(M),M=-1),x=!0;var xe=b;try{t:{for(de(Y),E=t(y);E!==null&&!(E.expirationTime>Y&&L());){var ce=E.callback;if(typeof ce=="function"){E.callback=null,b=E.priorityLevel;var V=ce(E.expirationTime<=Y);if(Y=n.unstable_now(),typeof V=="function"){E.callback=V,de(Y),fe=!0;break t}E===t(y)&&r(y),de(Y)}else r(y);E=t(y)}if(E!==null)fe=!0;else{var J=t(p);J!==null&&me($,J.startTime-Y),fe=!1}}break e}finally{E=null,b=xe,x=!1}fe=void 0}}finally{fe?C():he=!1}}}var C;if(typeof F=="function")C=function(){F(N)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,ee=T.port2;T.port1.onmessage=N,C=function(){ee.postMessage(null)}}else C=function(){D(N,0)};function me(Y,fe){M=D(function(){Y(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var fe=3;break;default:fe=b}var xe=b;b=fe;try{return Y()}finally{b=xe}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(Y,fe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var xe=b;b=Y;try{return fe()}finally{b=xe}},n.unstable_scheduleCallback=function(Y,fe,xe){var ce=n.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?ce+xe:ce):xe=ce,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=xe+V,Y={id:v++,callback:fe,priorityLevel:Y,startTime:xe,expirationTime:V,sortIndex:-1},xe>ce?(Y.sortIndex=xe,e(p,Y),t(y)===null&&Y===t(p)&&(A?(z(M),M=-1):A=!0,me($,xe-ce))):(Y.sortIndex=V,e(y,Y),R||x||(R=!0,he||(he=!0,C()))),Y},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Y){var fe=b;return function(){var xe=b;b=fe;try{return Y.apply(this,arguments)}finally{b=xe}}}}(Ep)),Ep}var Gb;function QN(){return Gb||(Gb=1,bp.exports=$N()),bp.exports}var xp={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function YN(){if($b)return hn;$b=1;var n=_g();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(y,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:y,containerInfo:p,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(y,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(y,p,null,v)},hn.flushSync=function(y){var p=d.T,v=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=p,r.p=v,r.d.f()}},hn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(y,p))},hn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},hn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:x}):v==="script"&&r.d.X(y,{crossOrigin:E,integrity:b,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);r.d.M(y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(y)},hn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin);r.d.L(y,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hn.preloadModule=function(y,p){if(typeof y=="string")if(p){var v=m(p.as,p.crossOrigin);r.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(y)},hn.requestFormReset=function(y){r.d.r(y)},hn.unstable_batchedUpdates=function(y,p){return y(p)},hn.useFormState=function(y,p,v){return d.H.useFormState(y,p,v)},hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},hn.version="19.1.1",hn}var Qb;function KN(){if(Qb)return xp.exports;Qb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xp.exports=YN(),xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function XN(){if(Yb)return Nc;Yb=1;var n=QN(),e=_g(),t=KN();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function d(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function m(s){if(c(s)!==s)throw Error(r(188))}function y(s){var a=s.alternate;if(!a){if(a=c(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,u=a;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return m(f),s;if(g===u)return m(f),a;g=g.sibling}throw Error(r(188))}if(l.return!==u.return)l=f,u=g;else{for(var w=!1,I=f.child;I;){if(I===l){w=!0,l=f,u=g;break}if(I===u){w=!0,u=f,l=g;break}I=I.sibling}if(!w){for(I=g.child;I;){if(I===l){w=!0,l=g,u=f;break}if(I===u){w=!0,u=g,l=f;break}I=I.sibling}if(!w)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),F=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function C(s){return s===null||typeof s!="object"?null:(s=N&&s[N]||s["@@iterator"],typeof s=="function"?s:null)}var T=Symbol.for("react.client.reference");function ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===T?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case q:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case he:return"SuspenseList";case O:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case F:return(s.displayName||"Context")+".Provider";case z:return(s._context.displayName||"Context")+".Consumer";case de:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return a=s.displayName||null,a!==null?a:ee(s.type)||"Memo";case j:a=s._payload,s=s._init;try{return ee(s(a))}catch{}}return null}var me=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},ce=[],V=-1;function J(s){return{current:s}}function ne(s){0>V||(s.current=ce[V],ce[V]=null,V--)}function ue(s,a){V++,ce[V]=s.current,s.current=a}var be=J(null),Se=J(null),Ae=J(null),ot=J(null);function Ge(s,a){switch(ue(Ae,a),ue(Se,s),ue(be,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?mb(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=mb(a),s=pb(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(be),ue(be,s)}function Es(){ne(be),ne(Se),ne(Ae)}function Br(s){s.memoizedState!==null&&ue(ot,s);var a=be.current,l=pb(a,s.type);a!==l&&(ue(Se,s),ue(be,l))}function nr(s){Se.current===s&&(ne(be),ne(Se)),ot.current===s&&(ne(ot),bc._currentValue=xe)}var qa=Object.prototype.hasOwnProperty,Ba=n.unstable_scheduleCallback,za=n.unstable_cancelCallback,yl=n.unstable_shouldYield,bu=n.unstable_requestPaint,zn=n.unstable_now,yf=n.unstable_getCurrentPriorityLevel,vl=n.unstable_ImmediatePriority,Qi=n.unstable_UserBlockingPriority,Fa=n.unstable_NormalPriority,vf=n.unstable_LowPriority,Yi=n.unstable_IdlePriority,_l=n.log,Eu=n.unstable_setDisableYieldValue,wt=null,rt=null;function jn(s){if(typeof _l=="function"&&Eu(s),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(wt,s)}catch{}}var un=Math.clz32?Math.clz32:Ha,xu=Math.log,_f=Math.LN2;function Ha(s){return s>>>=0,s===0?32:31-(xu(s)/_f|0)|0}var Ga=256,$a=4194304;function os(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ki(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var I=u&134217727;return I!==0?(u=I&~g,u!==0?f=os(u):(w&=I,w!==0?f=os(w):l||(l=I&~s,l!==0&&(f=os(l))))):(I=u&~g,I!==0?f=os(I):w!==0?f=os(w):l||(l=u&~s,l!==0&&(f=os(l)))),f===0?0:a!==0&&a!==f&&(a&g)===0&&(g=f&-f,l=a&-a,g>=l||g===32&&(l&4194048)!==0)?a:f}function Qa(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function bl(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function El(){var s=Ga;return Ga<<=1,(Ga&4194048)===0&&(Ga=256),s}function xl(){var s=$a;return $a<<=1,($a&62914560)===0&&($a=4194304),s}function sr(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function rr(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Sl(s,a,l,u,f,g){var w=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var I=s.entanglements,U=s.expirationTimes,K=s.hiddenUpdates;for(l=w&~l;0<l;){var te=31-un(l),ae=1<<te;I[te]=0,U[te]=-1;var X=K[te];if(X!==null)for(K[te]=null,te=0;te<X.length;te++){var W=X[te];W!==null&&(W.lane&=-536870913)}l&=~ae}u!==0&&xs(s,u,0),g!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=g&~(w&~a))}function xs(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-un(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function wl(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-un(l),f=1<<u;f&a|s[u]&a&&(s[u]|=a),l&=~f}}function zr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Fr(){var s=fe.p;return s!==0?s:(s=window.event,s===void 0?32:kb(s.type))}function Su(s,a){var l=fe.p;try{return fe.p=s,a()}finally{fe.p=l}}var yt=Math.random().toString(36).slice(2),Bt="__reactFiber$"+yt,Pt="__reactProps$"+yt,Fn="__reactContainer$"+yt,Al="__reactEvents$"+yt,bf="__reactListeners$"+yt,Hr="__reactHandles$"+yt,wu="__reactResources$"+yt,Ya="__reactMarker$"+yt;function Gr(s){delete s[Bt],delete s[Pt],delete s[Al],delete s[bf],delete s[Hr]}function ar(s){var a=s[Bt];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Fn]||l[Bt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=_b(s);s!==null;){if(l=s[Bt])return l;s=_b(s)}return a}s=l,l=s.parentNode}return null}function Ss(s){if(s=s[Bt]||s[Fn]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function ws(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function yn(s){var a=s[wu];return a||(a=s[wu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Tt(s){s[Ya]=!0}var Nl=new Set,Wi={};function ls(s,a){ir(s,a),ir(s+"Capture",a)}function ir(s,a){for(Wi[s]=a,s=0;s<a.length;s++)Nl.add(a[s])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nu={},Ka={};function Tu(s){return qa.call(Ka,s)?!0:qa.call(Nu,s)?!1:Au.test(s)?Ka[s]=!0:(Nu[s]=!0,!1)}function $r(s,a,l){if(Tu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function As(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function tn(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}var Xa,Cu;function or(s){if(Xa===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Xa=a&&a[1]||"",Cu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xa+s+Cu}var Zi=!1;function Ji(s,a){if(!s||Zi)return"";Zi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var X=W}Reflect.construct(s,[],ae)}else{try{ae.call()}catch(W){X=W}s.call(ae.prototype)}}else{try{throw Error()}catch(W){X=W}(ae=s())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],I=g[1];if(w&&I){var U=w.split(`
`),K=I.split(`
`);for(f=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(u===U.length||f===K.length)for(u=U.length-1,f=K.length-1;1<=u&&0<=f&&U[u]!==K[f];)f--;for(;1<=u&&0<=f;u--,f--)if(U[u]!==K[f]){if(u!==1||f!==1)do if(u--,f--,0>f||U[u]!==K[f]){var te=`
`+U[u].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=u&&0<=f);break}}}finally{Zi=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?or(l):""}function Tl(s){switch(s.tag){case 26:case 27:case 5:return or(s.type);case 16:return or("Lazy");case 13:return or("Suspense");case 19:return or("SuspenseList");case 0:case 15:return Ji(s.type,!1);case 11:return Ji(s.type.render,!1);case 1:return Ji(s.type,!0);case 31:return or("Activity");default:return""}}function eo(s){try{var a="";do a+=Tl(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function vn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Cl(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ef(s){var a=Cl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),u=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,g.call(this,w)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function to(s){s._valueTracker||(s._valueTracker=Ef(s))}function jl(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=Cl(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function Wa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xf=/[\n"\\]/g;function kt(s){return s.replace(xf,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Rn(s,a,l,u,f,g,w,I){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),a!=null?w==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+vn(a)):s.value!==""+vn(a)&&(s.value=""+vn(a)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),a!=null?Qr(s,w,vn(a)):l!=null?Qr(s,w,vn(l)):u!=null&&s.removeAttribute("value"),f==null&&g!=null&&(s.defaultChecked=!!g),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+vn(I):s.removeAttribute("name")}function Za(s,a,l,u,f,g,w,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+vn(l):"",a=a!=null?""+vn(a):l,I||a===s.value||(s.value=a),s.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=I?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function Qr(s,a,l){a==="number"&&Wa(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function lr(s,a,l,u){if(s=s.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<s.length;l++)f=a.hasOwnProperty("$"+s[l].value),s[l].selected!==f&&(s[l].selected=f),f&&u&&(s[l].defaultSelected=!0)}else{for(l=""+vn(l),a=null,f=0;f<s.length;f++){if(s[f].value===l){s[f].selected=!0,u&&(s[f].defaultSelected=!0);return}a!==null||s[f].disabled||(a=s[f])}a!==null&&(a.selected=!0)}}function lt(s,a,l){if(a!=null&&(a=""+vn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+vn(l):""}function Ja(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(r(92));if(me(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=vn(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Hn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var ei=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ju(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||ei.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Rl(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&l[f]!==u&&ju(s,f,u)}else for(var g in a)a.hasOwnProperty(g)&&ju(s,g,a[g])}function Dl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(s){return wf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var cr=null;function Gn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ur=null,dr=null;function Il(s){var a=Ss(s);if(a&&(s=a.stateNode)){var l=s[Pt]||null;e:switch(s=a.stateNode,a.type){case"input":if(Rn(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+kt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var f=u[Pt]||null;if(!f)throw Error(r(90));Rn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&jl(u)}break e;case"textarea":lt(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&lr(s,!!l.multiple,a,!1)}}}var Ns=!1;function Ru(s,a,l){if(Ns)return s(a,l);Ns=!0;try{var u=s(a);return u}finally{if(Ns=!1,(ur!==null||dr!==null)&&(Sd(),ur&&(a=ur,s=dr,dr=ur=null,Il(a),s)))for(a=0;a<s.length;a++)Il(s[a])}}function ti(s,a){var l=s.stateNode;if(l===null)return null;var u=l[Pt]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$n=!1;if(cs)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){$n=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{$n=!1}var Ts=null,Yr=null,hr=null;function Pl(){if(hr)return hr;var s,a=Yr,l=a.length,u,f="value"in Ts?Ts.value:Ts.textContent,g=f.length;for(s=0;s<l&&a[s]===f[s];s++);var w=l-s;for(u=1;u<=w&&a[l-u]===f[g-u];u++);return hr=f.slice(s,1<u?1-u:void 0)}function Cs(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function js(){return!0}function kl(){return!1}function Kt(s){function a(l,u,f,g,w){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(l=s[I],this[I]=l?l(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?js:kl,this.isPropagationStopped=kl,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),a}var nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Kt(nt),si=v({},nt,{view:0,detail:0}),Du=Kt(si),ro,ao,Rs,ri=v({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Rs&&(Rs&&s.type==="mousemove"?(ro=s.screenX-Rs.screenX,ao=s.screenY-Rs.screenY):ao=ro=0,Rs=s),ro)},movementY:function(s){return"movementY"in s?s.movementY:ao}}),Qn=Kt(ri),Iu=v({},ri,{dataTransfer:0}),Af=Kt(Iu),ai=v({},si,{relatedTarget:0}),io=Kt(ai),Ol=v({},nt,{animationName:0,elapsedTime:0,pseudoElement:0}),oo=Kt(Ol),Pu=v({},nt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lo=Kt(Pu),Nf=v({},nt,{data:0}),Ml=Kt(Nf),ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ll(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Ou[s])?!!a[s]:!1}function oi(){return Ll}var Mu=v({},si,{key:function(s){if(s.key){var a=ii[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Cs(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ku[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oi,charCode:function(s){return s.type==="keypress"?Cs(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Cs(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),co=Kt(Mu),Lu=v({},ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=Kt(Lu),fr=v({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oi}),Vu=Kt(fr),Uu=v({},nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),qu=Kt(Uu),Bu=v({},ri,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),uo=Kt(Bu),_n=v({},nt,{newState:0,oldState:0}),zu=Kt(_n),Fu=[9,13,27,32],Ds=cs&&"CompositionEvent"in window,h=null;cs&&"documentMode"in document&&(h=document.documentMode);var _=cs&&"TextEvent"in window&&!h,S=cs&&(!Ds||h&&8<h&&11>=h),k=" ",G=!1;function Z(s,a){switch(s){case"keyup":return Fu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pe(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ke=!1;function zt(s,a){switch(s){case"compositionend":return pe(a);case"keypress":return a.which!==32?null:(G=!0,k);case"textInput":return s=a.data,s===k&&G?null:s;default:return null}}function Xe(s,a){if(Ke)return s==="compositionend"||!Ds&&Z(s,a)?(s=Pl(),hr=Yr=Ts=null,Ke=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return S&&a.locale!=="ko"?null:a.data;default:return null}}var Xt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ft(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Xt[s.type]:a==="textarea"}function mr(s,a,l,u){ur?dr?dr.push(u):dr=[u]:ur=u,a=jd(a,"onChange"),0<a.length&&(l=new so("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var nn=null,Is=null;function Ul(s){cb(s,0)}function Hu(s){var a=ws(s);if(jl(a))return s}function Ry(s,a){if(s==="change")return a}var Dy=!1;if(cs){var Tf;if(cs){var Cf="oninput"in document;if(!Cf){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),Cf=typeof Iy.oninput=="function"}Tf=Cf}else Tf=!1;Dy=Tf&&(!document.documentMode||9<document.documentMode)}function Py(){nn&&(nn.detachEvent("onpropertychange",ky),Is=nn=null)}function ky(s){if(s.propertyName==="value"&&Hu(Is)){var a=[];mr(a,Is,s,Gn(s)),Ru(Ul,a)}}function vA(s,a,l){s==="focusin"?(Py(),nn=a,Is=l,nn.attachEvent("onpropertychange",ky)):s==="focusout"&&Py()}function _A(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hu(Is)}function bA(s,a){if(s==="click")return Hu(a)}function EA(s,a){if(s==="input"||s==="change")return Hu(a)}function xA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Dn=typeof Object.is=="function"?Object.is:xA;function ql(s,a){if(Dn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!qa.call(a,f)||!Dn(s[f],a[f]))return!1}return!0}function Oy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function My(s,a){var l=Oy(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Oy(l)}}function Ly(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Ly(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Vy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Wa(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=Wa(s.document)}return a}function jf(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var SA=cs&&"documentMode"in document&&11>=document.documentMode,ho=null,Rf=null,Bl=null,Df=!1;function Uy(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Df||ho==null||ho!==Wa(u)||(u=ho,"selectionStart"in u&&jf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bl&&ql(Bl,u)||(Bl=u,u=jd(Rf,"onSelect"),0<u.length&&(a=new so("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=ho)))}function li(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var fo={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},If={},qy={};cs&&(qy=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function ci(s){if(If[s])return If[s];if(!fo[s])return s;var a=fo[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in qy)return If[s]=a[l];return s}var By=ci("animationend"),zy=ci("animationiteration"),Fy=ci("animationstart"),wA=ci("transitionrun"),AA=ci("transitionstart"),NA=ci("transitioncancel"),Hy=ci("transitionend"),Gy=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function us(s,a){Gy.set(s,a),ls(a,[s])}var $y=new WeakMap;function Yn(s,a){if(typeof s=="object"&&s!==null){var l=$y.get(s);return l!==void 0?l:(a={value:s,source:a,stack:eo(a)},$y.set(s,a),a)}return{value:s,source:a,stack:eo(a)}}var Kn=[],mo=0,kf=0;function Gu(){for(var s=mo,a=kf=mo=0;a<s;){var l=Kn[a];Kn[a++]=null;var u=Kn[a];Kn[a++]=null;var f=Kn[a];Kn[a++]=null;var g=Kn[a];if(Kn[a++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}g!==0&&Qy(l,f,g)}}function $u(s,a,l,u){Kn[mo++]=s,Kn[mo++]=a,Kn[mo++]=l,Kn[mo++]=u,kf|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Of(s,a,l,u){return $u(s,a,l,u),Qu(s)}function po(s,a){return $u(s,null,null,a),Qu(s)}function Qy(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var f=!1,g=s.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(f=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,f&&a!==null&&(f=31-un(l),s=g.hiddenUpdates,u=s[f],u===null?s[f]=[a]:u.push(a),a.lane=l|536870912),g):null}function Qu(s){if(50<hc)throw hc=0,Bm=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var go={};function TA(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(s,a,l,u){return new TA(s,a,l,u)}function Mf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function pr(s,a){var l=s.alternate;return l===null?(l=In(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Yy(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Yu(s,a,l,u,f,g){var w=0;if(u=s,typeof s=="function")Mf(s)&&(w=1);else if(typeof s=="string")w=jN(s,l,be.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case O:return s=In(31,l,a,f),s.elementType=O,s.lanes=g,s;case R:return ui(l.children,f,g,a);case A:w=8,f|=24;break;case q:return s=In(12,l,a,f|2),s.elementType=q,s.lanes=g,s;case $:return s=In(13,l,a,f),s.elementType=$,s.lanes=g,s;case he:return s=In(19,l,a,f),s.elementType=he,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:case F:w=10;break e;case z:w=9;break e;case de:w=11;break e;case M:w=14;break e;case j:w=16,u=null;break e}w=29,l=Error(r(130,s===null?"null":typeof s,"")),u=null}return a=In(w,l,a,f),a.elementType=s,a.type=u,a.lanes=g,a}function ui(s,a,l,u){return s=In(7,s,u,a),s.lanes=l,s}function Lf(s,a,l){return s=In(6,s,null,a),s.lanes=l,s}function Vf(s,a,l){return a=In(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var yo=[],vo=0,Ku=null,Xu=0,Xn=[],Wn=0,di=null,gr=1,yr="";function hi(s,a){yo[vo++]=Xu,yo[vo++]=Ku,Ku=s,Xu=a}function Ky(s,a,l){Xn[Wn++]=gr,Xn[Wn++]=yr,Xn[Wn++]=di,di=s;var u=gr;s=yr;var f=32-un(u)-1;u&=~(1<<f),l+=1;var g=32-un(a)+f;if(30<g){var w=f-f%5;g=(u&(1<<w)-1).toString(32),u>>=w,f-=w,gr=1<<32-un(a)+f|l<<f|u,yr=g+s}else gr=1<<g|l<<f|u,yr=s}function Uf(s){s.return!==null&&(hi(s,1),Ky(s,1,0))}function qf(s){for(;s===Ku;)Ku=yo[--vo],yo[vo]=null,Xu=yo[--vo],yo[vo]=null;for(;s===di;)di=Xn[--Wn],Xn[Wn]=null,yr=Xn[--Wn],Xn[Wn]=null,gr=Xn[--Wn],Xn[Wn]=null}var bn=null,At=null,tt=!1,fi=null,Ps=!1,Bf=Error(r(519));function mi(s){var a=Error(r(418,""));throw Hl(Yn(a,s)),Bf}function Xy(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[Bt]=s,a[Pt]=u,l){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(l=0;l<mc.length;l++)He(mc[l],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":He("invalid",a),Za(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),to(a);break;case"select":He("invalid",a);break;case"textarea":He("invalid",a),Ja(a,u.value,u.defaultValue,u.children),to(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||fb(a.textContent,l)?(u.popover!=null&&(He("beforetoggle",a),He("toggle",a)),u.onScroll!=null&&He("scroll",a),u.onScrollEnd!=null&&He("scrollend",a),u.onClick!=null&&(a.onclick=Rd),a=!0):a=!1,a||mi(s)}function Wy(s){for(bn=s.return;bn;)switch(bn.tag){case 5:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:bn=bn.return}}function zl(s){if(s!==bn)return!1;if(!tt)return Wy(s),tt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||sp(s.type,s.memoizedProps)),l=!l),l&&At&&mi(s),Wy(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){At=hs(s.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}At=null}}else a===27?(a=At,ua(s.type)?(s=op,op=null,At=s):At=a):At=bn?hs(s.stateNode.nextSibling):null;return!0}function Fl(){At=bn=null,tt=!1}function Zy(){var s=fi;return s!==null&&(wn===null?wn=s:wn.push.apply(wn,s),fi=null),s}function Hl(s){fi===null?fi=[s]:fi.push(s)}var zf=J(null),pi=null,vr=null;function Kr(s,a,l){ue(zf,a._currentValue),a._currentValue=l}function _r(s){s._currentValue=zf.current,ne(zf)}function Ff(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function Hf(s,a,l,u){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var g=f.dependencies;if(g!==null){var w=f.child;g=g.firstContext;e:for(;g!==null;){var I=g;g=f;for(var U=0;U<a.length;U++)if(I.context===a[U]){g.lanes|=l,I=g.alternate,I!==null&&(I.lanes|=l),Ff(g.return,l,s),u||(w=null);break e}g=I.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=l,g=w.alternate,g!==null&&(g.lanes|=l),Ff(w,l,s),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Gl(s,a,l,u){s=null;for(var f=a,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=f.type;Dn(f.pendingProps.value,w.value)||(s!==null?s.push(I):s=[I])}}else if(f===ot.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(bc):s=[bc])}f=f.return}s!==null&&Hf(a,s,l,u),a.flags|=262144}function Wu(s){for(s=s.firstContext;s!==null;){if(!Dn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function gi(s){pi=s,vr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function dn(s){return Jy(pi,s)}function Zu(s,a){return pi===null&&gi(s),Jy(s,a)}function Jy(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},vr===null){if(s===null)throw Error(r(308));vr=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else vr=vr.next=a;return l}var CA=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},jA=n.unstable_scheduleCallback,RA=n.unstable_NormalPriority,Ht={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gf(){return{controller:new CA,data:new Map,refCount:0}}function $l(s){s.refCount--,s.refCount===0&&jA(RA,function(){s.controller.abort()})}var Ql=null,$f=0,_o=0,bo=null;function DA(s,a){if(Ql===null){var l=Ql=[];$f=0,_o=Ym(),bo={status:"pending",value:void 0,then:function(u){l.push(u)}}}return $f++,a.then(ev,ev),a}function ev(){if(--$f===0&&Ql!==null){bo!==null&&(bo.status="fulfilled");var s=Ql;Ql=null,_o=0,bo=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function IA(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),u}var tv=Y.S;Y.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&DA(s,a),tv!==null&&tv(s,a)};var yi=J(null);function Qf(){var s=yi.current;return s!==null?s:mt.pooledCache}function Ju(s,a){a===null?ue(yi,yi.current):ue(yi,a.pool)}function nv(){var s=Qf();return s===null?null:{parent:Ht._currentValue,pool:s}}var Yl=Error(r(460)),sv=Error(r(474)),ed=Error(r(542)),Yf={then:function(){}};function rv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function td(){}function av(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(td,td),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ov(s),s;default:if(typeof a.status=="string")a.then(td,td);else{if(s=mt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ov(s),s}throw Kl=a,Yl}}var Kl=null;function iv(){if(Kl===null)throw Error(r(459));var s=Kl;return Kl=null,s}function ov(s){if(s===Yl||s===ed)throw Error(r(483))}var Xr=!1;function Kf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xf(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Wr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Zr(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=Qu(s),Qy(s,null,l),a}return $u(s,u,a,l),Qu(s)}function Xl(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,wl(s,l)}}function Wf(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?f=g=a:g=g.next=a}else f=g=a;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Zf=!1;function Wl(){if(Zf){var s=bo;if(s!==null)throw s}}function Zl(s,a,l,u){Zf=!1;var f=s.updateQueue;Xr=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var U=I,K=U.next;U.next=null,w===null?g=K:w.next=K,w=U;var te=s.alternate;te!==null&&(te=te.updateQueue,I=te.lastBaseUpdate,I!==w&&(I===null?te.firstBaseUpdate=K:I.next=K,te.lastBaseUpdate=U))}if(g!==null){var ae=f.baseState;w=0,te=K=U=null,I=g;do{var X=I.lane&-536870913,W=X!==I.lane;if(W?(We&X)===X:(u&X)===X){X!==0&&X===_o&&(Zf=!0),te!==null&&(te=te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ke=s,Ce=I;X=a;var dt=l;switch(Ce.tag){case 1:if(ke=Ce.payload,typeof ke=="function"){ae=ke.call(dt,ae,X);break e}ae=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ce.payload,X=typeof ke=="function"?ke.call(dt,ae,X):ke,X==null)break e;ae=v({},ae,X);break e;case 2:Xr=!0}}X=I.callback,X!==null&&(s.flags|=64,W&&(s.flags|=8192),W=f.callbacks,W===null?f.callbacks=[X]:W.push(X))}else W={lane:X,tag:I.tag,payload:I.payload,callback:I.callback,next:null},te===null?(K=te=W,U=ae):te=te.next=W,w|=X;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;W=I,I=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);te===null&&(U=ae),f.baseState=U,f.firstBaseUpdate=K,f.lastBaseUpdate=te,g===null&&(f.shared.lanes=0),ia|=w,s.lanes=w,s.memoizedState=ae}}function lv(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function cv(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)lv(l[s],a)}var Eo=J(null),nd=J(0);function uv(s,a){s=Nr,ue(nd,s),ue(Eo,a),Nr=s|a.baseLanes}function Jf(){ue(nd,Nr),ue(Eo,Eo.current)}function em(){Nr=nd.current,ne(Eo),ne(nd)}var Jr=0,Be=null,ct=null,Ot=null,sd=!1,xo=!1,vi=!1,rd=0,Jl=0,So=null,PA=0;function Ct(){throw Error(r(321))}function tm(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Dn(s[l],a[l]))return!1;return!0}function nm(s,a,l,u,f,g){return Jr=g,Be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=s===null||s.memoizedState===null?Qv:Yv,vi=!1,g=l(u,f),vi=!1,xo&&(g=hv(a,l,u,f)),dv(s),g}function dv(s){Y.H=ud;var a=ct!==null&&ct.next!==null;if(Jr=0,Ot=ct=Be=null,sd=!1,Jl=0,So=null,a)throw Error(r(300));s===null||Wt||(s=s.dependencies,s!==null&&Wu(s)&&(Wt=!0))}function hv(s,a,l,u){Be=s;var f=0;do{if(xo&&(So=null),Jl=0,xo=!1,25<=f)throw Error(r(301));if(f+=1,Ot=ct=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Y.H=qA,g=a(l,u)}while(xo);return g}function kA(){var s=Y.H,a=s.useState()[0];return a=typeof a.then=="function"?ec(a):a,s=s.useState()[0],(ct!==null?ct.memoizedState:null)!==s&&(Be.flags|=1024),a}function sm(){var s=rd!==0;return rd=0,s}function rm(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function am(s){if(sd){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}sd=!1}Jr=0,Ot=ct=Be=null,xo=!1,Jl=rd=0,So=null}function xn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Be.memoizedState=Ot=s:Ot=Ot.next=s,Ot}function Mt(){if(ct===null){var s=Be.alternate;s=s!==null?s.memoizedState:null}else s=ct.next;var a=Ot===null?Be.memoizedState:Ot.next;if(a!==null)Ot=a,ct=s;else{if(s===null)throw Be.alternate===null?Error(r(467)):Error(r(310));ct=s,s={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ot===null?Be.memoizedState=Ot=s:Ot=Ot.next=s}return Ot}function im(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(s){var a=Jl;return Jl+=1,So===null&&(So=[]),s=av(So,s,a),a=Be,(Ot===null?a.memoizedState:Ot.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?Qv:Yv),s}function ad(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ec(s);if(s.$$typeof===F)return dn(s)}throw Error(r(438,String(s)))}function om(s){var a=null,l=Be.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=im(),Be.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=L;return a.index++,l}function br(s,a){return typeof a=="function"?a(s):a}function id(s){var a=Mt();return lm(a,ct,s)}function lm(s,a,l){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var f=s.baseQueue,g=u.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}a.baseQueue=f=g,u.pending=null}if(g=s.baseState,f===null)s.memoizedState=g;else{a=f.next;var I=w=null,U=null,K=a,te=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(We&ae)===ae:(Jr&ae)===ae){var X=K.revertLane;if(X===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===_o&&(te=!0);else if((Jr&X)===X){K=K.next,X===_o&&(te=!0);continue}else ae={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(I=U=ae,w=g):U=U.next=ae,Be.lanes|=X,ia|=X;ae=K.action,vi&&l(g,ae),g=K.hasEagerState?K.eagerState:l(g,ae)}else X={lane:ae,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(I=U=X,w=g):U=U.next=X,Be.lanes|=ae,ia|=ae;K=K.next}while(K!==null&&K!==a);if(U===null?w=g:U.next=I,!Dn(g,s.memoizedState)&&(Wt=!0,te&&(l=bo,l!==null)))throw l;s.memoizedState=g,s.baseState=w,s.baseQueue=U,u.lastRenderedState=g}return f===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function cm(s){var a=Mt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var u=l.dispatch,f=l.pending,g=a.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do g=s(g,w.action),w=w.next;while(w!==f);Dn(g,a.memoizedState)||(Wt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,u]}function fv(s,a,l){var u=Be,f=Mt(),g=tt;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var w=!Dn((ct||f).memoizedState,l);w&&(f.memoizedState=l,Wt=!0),f=f.queue;var I=gv.bind(null,u,f,s);if(tc(2048,8,I,[s]),f.getSnapshot!==a||w||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,wo(9,od(),pv.bind(null,u,f,l,a),null),mt===null)throw Error(r(349));g||(Jr&124)!==0||mv(u,a,l)}return l}function mv(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Be.updateQueue,a===null?(a=im(),Be.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function pv(s,a,l,u){a.value=l,a.getSnapshot=u,yv(a)&&vv(s)}function gv(s,a,l){return l(function(){yv(a)&&vv(s)})}function yv(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Dn(s,l)}catch{return!0}}function vv(s){var a=po(s,2);a!==null&&Ln(a,s,2)}function um(s){var a=xn();if(typeof s=="function"){var l=s;if(s=l(),vi){jn(!0);try{l()}finally{jn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:s},a}function _v(s,a,l,u){return s.baseState=l,lm(s,ct,typeof u=="function"?u:br)}function OA(s,a,l,u,f){if(cd(s))throw Error(r(485));if(s=a.action,s!==null){var g={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};Y.T!==null?l(!0):g.isTransition=!1,u(g),l=a.pending,l===null?(g.next=a.pending=g,bv(a,g)):(g.next=l.next,a.pending=l.next=g)}}function bv(s,a){var l=a.action,u=a.payload,f=s.state;if(a.isTransition){var g=Y.T,w={};Y.T=w;try{var I=l(f,u),U=Y.S;U!==null&&U(w,I),Ev(s,a,I)}catch(K){dm(s,a,K)}finally{Y.T=g}}else try{g=l(f,u),Ev(s,a,g)}catch(K){dm(s,a,K)}}function Ev(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){xv(s,a,u)},function(u){return dm(s,a,u)}):xv(s,a,l)}function xv(s,a,l){a.status="fulfilled",a.value=l,Sv(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,bv(s,l)))}function dm(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,Sv(a),a=a.next;while(a!==u)}s.action=null}function Sv(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function wv(s,a){return a}function Av(s,a){if(tt){var l=mt.formState;if(l!==null){e:{var u=Be;if(tt){if(At){t:{for(var f=At,g=Ps;f.nodeType!==8;){if(!g){f=null;break t}if(f=hs(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){At=hs(f.nextSibling),u=f.data==="F!";break e}}mi(u)}u=!1}u&&(a=l[0])}}return l=xn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wv,lastRenderedState:a},l.queue=u,l=Hv.bind(null,Be,u),u.dispatch=l,u=um(!1),g=gm.bind(null,Be,!1,u.queue),u=xn(),f={state:a,dispatch:null,action:s,pending:null},u.queue=f,l=OA.bind(null,Be,f,g,l),f.dispatch=l,u.memoizedState=s,[a,l,!1]}function Nv(s){var a=Mt();return Tv(a,ct,s)}function Tv(s,a,l){if(a=lm(s,a,wv)[0],s=id(br)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=ec(a)}catch(w){throw w===Yl?ed:w}else u=a;a=Mt();var f=a.queue,g=f.dispatch;return l!==a.memoizedState&&(Be.flags|=2048,wo(9,od(),MA.bind(null,f,l),null)),[u,g,s]}function MA(s,a){s.action=a}function Cv(s){var a=Mt(),l=ct;if(l!==null)return Tv(a,l,s);Mt(),a=a.memoizedState,l=Mt();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function wo(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=Be.updateQueue,a===null&&(a=im(),Be.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function od(){return{destroy:void 0,resource:void 0}}function jv(){return Mt().memoizedState}function ld(s,a,l,u){var f=xn();u=u===void 0?null:u,Be.flags|=s,f.memoizedState=wo(1|a,od(),l,u)}function tc(s,a,l,u){var f=Mt();u=u===void 0?null:u;var g=f.memoizedState.inst;ct!==null&&u!==null&&tm(u,ct.memoizedState.deps)?f.memoizedState=wo(a,g,l,u):(Be.flags|=s,f.memoizedState=wo(1|a,g,l,u))}function Rv(s,a){ld(8390656,8,s,a)}function Dv(s,a){tc(2048,8,s,a)}function Iv(s,a){return tc(4,2,s,a)}function Pv(s,a){return tc(4,4,s,a)}function kv(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Ov(s,a,l){l=l!=null?l.concat([s]):null,tc(4,4,kv.bind(null,a,s),l)}function hm(){}function Mv(s,a){var l=Mt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&tm(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function Lv(s,a){var l=Mt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&tm(a,u[1]))return u[0];if(u=s(),vi){jn(!0);try{s()}finally{jn(!1)}}return l.memoizedState=[u,a],u}function fm(s,a,l){return l===void 0||(Jr&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=q_(),Be.lanes|=s,ia|=s,l)}function Vv(s,a,l,u){return Dn(l,a)?l:Eo.current!==null?(s=fm(s,l,u),Dn(s,a)||(Wt=!0),s):(Jr&42)===0?(Wt=!0,s.memoizedState=l):(s=q_(),Be.lanes|=s,ia|=s,a)}function Uv(s,a,l,u,f){var g=fe.p;fe.p=g!==0&&8>g?g:8;var w=Y.T,I={};Y.T=I,gm(s,!1,a,l);try{var U=f(),K=Y.S;if(K!==null&&K(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var te=IA(U,u);nc(s,a,te,Mn(s))}else nc(s,a,u,Mn(s))}catch(ae){nc(s,a,{then:function(){},status:"rejected",reason:ae},Mn())}finally{fe.p=g,Y.T=w}}function LA(){}function mm(s,a,l,u){if(s.tag!==5)throw Error(r(476));var f=qv(s).queue;Uv(s,f,a,xe,l===null?LA:function(){return Bv(s),l(u)})}function qv(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:xe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Bv(s){var a=qv(s).next.queue;nc(s,a,{},Mn())}function pm(){return dn(bc)}function zv(){return Mt().memoizedState}function Fv(){return Mt().memoizedState}function VA(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Mn();s=Wr(l);var u=Zr(a,s,l);u!==null&&(Ln(u,a,l),Xl(u,a,l)),a={cache:Gf()},s.payload=a;return}a=a.return}}function UA(s,a,l){var u=Mn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},cd(s)?Gv(a,l):(l=Of(s,a,l,u),l!==null&&(Ln(l,s,u),$v(l,a,u)))}function Hv(s,a,l){var u=Mn();nc(s,a,l,u)}function nc(s,a,l,u){var f={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(cd(s))Gv(a,f);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var w=a.lastRenderedState,I=g(w,l);if(f.hasEagerState=!0,f.eagerState=I,Dn(I,w))return $u(s,a,f,0),mt===null&&Gu(),!1}catch{}finally{}if(l=Of(s,a,f,u),l!==null)return Ln(l,s,u),$v(l,a,u),!0}return!1}function gm(s,a,l,u){if(u={lane:2,revertLane:Ym(),action:u,hasEagerState:!1,eagerState:null,next:null},cd(s)){if(a)throw Error(r(479))}else a=Of(s,l,u,2),a!==null&&Ln(a,s,2)}function cd(s){var a=s.alternate;return s===Be||a!==null&&a===Be}function Gv(s,a){xo=sd=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function $v(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,wl(s,l)}}var ud={readContext:dn,use:ad,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},Qv={readContext:dn,use:ad,useCallback:function(s,a){return xn().memoizedState=[s,a===void 0?null:a],s},useContext:dn,useEffect:Rv,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,ld(4194308,4,kv.bind(null,a,s),l)},useLayoutEffect:function(s,a){return ld(4194308,4,s,a)},useInsertionEffect:function(s,a){ld(4,2,s,a)},useMemo:function(s,a){var l=xn();a=a===void 0?null:a;var u=s();if(vi){jn(!0);try{s()}finally{jn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=xn();if(l!==void 0){var f=l(a);if(vi){jn(!0);try{l(a)}finally{jn(!1)}}}else f=a;return u.memoizedState=u.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},u.queue=s,s=s.dispatch=UA.bind(null,Be,s),[u.memoizedState,s]},useRef:function(s){var a=xn();return s={current:s},a.memoizedState=s},useState:function(s){s=um(s);var a=s.queue,l=Hv.bind(null,Be,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:hm,useDeferredValue:function(s,a){var l=xn();return fm(l,s,a)},useTransition:function(){var s=um(!1);return s=Uv.bind(null,Be,s.queue,!0,!1),xn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=Be,f=xn();if(tt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),mt===null)throw Error(r(349));(We&124)!==0||mv(u,a,l)}f.memoizedState=l;var g={value:l,getSnapshot:a};return f.queue=g,Rv(gv.bind(null,u,g,s),[s]),u.flags|=2048,wo(9,od(),pv.bind(null,u,g,l,a),null),l},useId:function(){var s=xn(),a=mt.identifierPrefix;if(tt){var l=yr,u=gr;l=(u&~(1<<32-un(u)-1)).toString(32)+l,a=""+a+"R"+l,l=rd++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=PA++,a=""+a+"r"+l.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:pm,useFormState:Av,useActionState:Av,useOptimistic:function(s){var a=xn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=gm.bind(null,Be,!0,l),l.dispatch=a,[s,a]},useMemoCache:om,useCacheRefresh:function(){return xn().memoizedState=VA.bind(null,Be)}},Yv={readContext:dn,use:ad,useCallback:Mv,useContext:dn,useEffect:Dv,useImperativeHandle:Ov,useInsertionEffect:Iv,useLayoutEffect:Pv,useMemo:Lv,useReducer:id,useRef:jv,useState:function(){return id(br)},useDebugValue:hm,useDeferredValue:function(s,a){var l=Mt();return Vv(l,ct.memoizedState,s,a)},useTransition:function(){var s=id(br)[0],a=Mt().memoizedState;return[typeof s=="boolean"?s:ec(s),a]},useSyncExternalStore:fv,useId:zv,useHostTransitionStatus:pm,useFormState:Nv,useActionState:Nv,useOptimistic:function(s,a){var l=Mt();return _v(l,ct,s,a)},useMemoCache:om,useCacheRefresh:Fv},qA={readContext:dn,use:ad,useCallback:Mv,useContext:dn,useEffect:Dv,useImperativeHandle:Ov,useInsertionEffect:Iv,useLayoutEffect:Pv,useMemo:Lv,useReducer:cm,useRef:jv,useState:function(){return cm(br)},useDebugValue:hm,useDeferredValue:function(s,a){var l=Mt();return ct===null?fm(l,s,a):Vv(l,ct.memoizedState,s,a)},useTransition:function(){var s=cm(br)[0],a=Mt().memoizedState;return[typeof s=="boolean"?s:ec(s),a]},useSyncExternalStore:fv,useId:zv,useHostTransitionStatus:pm,useFormState:Cv,useActionState:Cv,useOptimistic:function(s,a){var l=Mt();return ct!==null?_v(l,ct,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:om,useCacheRefresh:Fv},Ao=null,sc=0;function dd(s){var a=sc;return sc+=1,Ao===null&&(Ao=[]),av(Ao,s,a)}function rc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function hd(s,a){throw a.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Kv(s){var a=s._init;return a(s._payload)}function Xv(s){function a(H,B){if(s){var Q=H.deletions;Q===null?(H.deletions=[B],H.flags|=16):Q.push(B)}}function l(H,B){if(!s)return null;for(;B!==null;)a(H,B),B=B.sibling;return null}function u(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function f(H,B){return H=pr(H,B),H.index=0,H.sibling=null,H}function g(H,B,Q){return H.index=Q,s?(Q=H.alternate,Q!==null?(Q=Q.index,Q<B?(H.flags|=67108866,B):Q):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function w(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function I(H,B,Q,se){return B===null||B.tag!==6?(B=Lf(Q,H.mode,se),B.return=H,B):(B=f(B,Q),B.return=H,B)}function U(H,B,Q,se){var _e=Q.type;return _e===R?te(H,B,Q.props.children,se,Q.key):B!==null&&(B.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===j&&Kv(_e)===B.type)?(B=f(B,Q.props),rc(B,Q),B.return=H,B):(B=Yu(Q.type,Q.key,Q.props,null,H.mode,se),rc(B,Q),B.return=H,B)}function K(H,B,Q,se){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=Vf(Q,H.mode,se),B.return=H,B):(B=f(B,Q.children||[]),B.return=H,B)}function te(H,B,Q,se,_e){return B===null||B.tag!==7?(B=ui(Q,H.mode,se,_e),B.return=H,B):(B=f(B,Q),B.return=H,B)}function ae(H,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Lf(""+B,H.mode,Q),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return Q=Yu(B.type,B.key,B.props,null,H.mode,Q),rc(Q,B),Q.return=H,Q;case x:return B=Vf(B,H.mode,Q),B.return=H,B;case j:var se=B._init;return B=se(B._payload),ae(H,B,Q)}if(me(B)||C(B))return B=ui(B,H.mode,Q,null),B.return=H,B;if(typeof B.then=="function")return ae(H,dd(B),Q);if(B.$$typeof===F)return ae(H,Zu(H,B),Q);hd(H,B)}return null}function X(H,B,Q,se){var _e=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return _e!==null?null:I(H,B,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===_e?U(H,B,Q,se):null;case x:return Q.key===_e?K(H,B,Q,se):null;case j:return _e=Q._init,Q=_e(Q._payload),X(H,B,Q,se)}if(me(Q)||C(Q))return _e!==null?null:te(H,B,Q,se,null);if(typeof Q.then=="function")return X(H,B,dd(Q),se);if(Q.$$typeof===F)return X(H,B,Zu(H,Q),se);hd(H,Q)}return null}function W(H,B,Q,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return H=H.get(Q)||null,I(B,H,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return H=H.get(se.key===null?Q:se.key)||null,U(B,H,se,_e);case x:return H=H.get(se.key===null?Q:se.key)||null,K(B,H,se,_e);case j:var ze=se._init;return se=ze(se._payload),W(H,B,Q,se,_e)}if(me(se)||C(se))return H=H.get(Q)||null,te(B,H,se,_e,null);if(typeof se.then=="function")return W(H,B,Q,dd(se),_e);if(se.$$typeof===F)return W(H,B,Q,Zu(B,se),_e);hd(B,se)}return null}function ke(H,B,Q,se){for(var _e=null,ze=null,we=B,Re=B=0,Jt=null;we!==null&&Re<Q.length;Re++){we.index>Re?(Jt=we,we=null):Jt=we.sibling;var et=X(H,we,Q[Re],se);if(et===null){we===null&&(we=Jt);break}s&&we&&et.alternate===null&&a(H,we),B=g(et,B,Re),ze===null?_e=et:ze.sibling=et,ze=et,we=Jt}if(Re===Q.length)return l(H,we),tt&&hi(H,Re),_e;if(we===null){for(;Re<Q.length;Re++)we=ae(H,Q[Re],se),we!==null&&(B=g(we,B,Re),ze===null?_e=we:ze.sibling=we,ze=we);return tt&&hi(H,Re),_e}for(we=u(we);Re<Q.length;Re++)Jt=W(we,H,Re,Q[Re],se),Jt!==null&&(s&&Jt.alternate!==null&&we.delete(Jt.key===null?Re:Jt.key),B=g(Jt,B,Re),ze===null?_e=Jt:ze.sibling=Jt,ze=Jt);return s&&we.forEach(function(pa){return a(H,pa)}),tt&&hi(H,Re),_e}function Ce(H,B,Q,se){if(Q==null)throw Error(r(151));for(var _e=null,ze=null,we=B,Re=B=0,Jt=null,et=Q.next();we!==null&&!et.done;Re++,et=Q.next()){we.index>Re?(Jt=we,we=null):Jt=we.sibling;var pa=X(H,we,et.value,se);if(pa===null){we===null&&(we=Jt);break}s&&we&&pa.alternate===null&&a(H,we),B=g(pa,B,Re),ze===null?_e=pa:ze.sibling=pa,ze=pa,we=Jt}if(et.done)return l(H,we),tt&&hi(H,Re),_e;if(we===null){for(;!et.done;Re++,et=Q.next())et=ae(H,et.value,se),et!==null&&(B=g(et,B,Re),ze===null?_e=et:ze.sibling=et,ze=et);return tt&&hi(H,Re),_e}for(we=u(we);!et.done;Re++,et=Q.next())et=W(we,H,Re,et.value,se),et!==null&&(s&&et.alternate!==null&&we.delete(et.key===null?Re:et.key),B=g(et,B,Re),ze===null?_e=et:ze.sibling=et,ze=et);return s&&we.forEach(function(BN){return a(H,BN)}),tt&&hi(H,Re),_e}function dt(H,B,Q,se){if(typeof Q=="object"&&Q!==null&&Q.type===R&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var _e=Q.key;B!==null;){if(B.key===_e){if(_e=Q.type,_e===R){if(B.tag===7){l(H,B.sibling),se=f(B,Q.props.children),se.return=H,H=se;break e}}else if(B.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===j&&Kv(_e)===B.type){l(H,B.sibling),se=f(B,Q.props),rc(se,Q),se.return=H,H=se;break e}l(H,B);break}else a(H,B);B=B.sibling}Q.type===R?(se=ui(Q.props.children,H.mode,se,Q.key),se.return=H,H=se):(se=Yu(Q.type,Q.key,Q.props,null,H.mode,se),rc(se,Q),se.return=H,H=se)}return w(H);case x:e:{for(_e=Q.key;B!==null;){if(B.key===_e)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){l(H,B.sibling),se=f(B,Q.children||[]),se.return=H,H=se;break e}else{l(H,B);break}else a(H,B);B=B.sibling}se=Vf(Q,H.mode,se),se.return=H,H=se}return w(H);case j:return _e=Q._init,Q=_e(Q._payload),dt(H,B,Q,se)}if(me(Q))return ke(H,B,Q,se);if(C(Q)){if(_e=C(Q),typeof _e!="function")throw Error(r(150));return Q=_e.call(Q),Ce(H,B,Q,se)}if(typeof Q.then=="function")return dt(H,B,dd(Q),se);if(Q.$$typeof===F)return dt(H,B,Zu(H,Q),se);hd(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,B!==null&&B.tag===6?(l(H,B.sibling),se=f(B,Q),se.return=H,H=se):(l(H,B),se=Lf(Q,H.mode,se),se.return=H,H=se),w(H)):l(H,B)}return function(H,B,Q,se){try{sc=0;var _e=dt(H,B,Q,se);return Ao=null,_e}catch(we){if(we===Yl||we===ed)throw we;var ze=In(29,we,null,H.mode);return ze.lanes=se,ze.return=H,ze}finally{}}}var No=Xv(!0),Wv=Xv(!1),Zn=J(null),ks=null;function ea(s){var a=s.alternate;ue(Gt,Gt.current&1),ue(Zn,s),ks===null&&(a===null||Eo.current!==null||a.memoizedState!==null)&&(ks=s)}function Zv(s){if(s.tag===22){if(ue(Gt,Gt.current),ue(Zn,s),ks===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(ks=s)}}else ta()}function ta(){ue(Gt,Gt.current),ue(Zn,Zn.current)}function Er(s){ne(Zn),ks===s&&(ks=null),ne(Gt)}var Gt=J(0);function fd(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||ip(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function ym(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:v({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var vm={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=Mn(),f=Wr(u);f.payload=a,l!=null&&(f.callback=l),a=Zr(s,f,u),a!==null&&(Ln(a,s,u),Xl(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=Mn(),f=Wr(u);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Zr(s,f,u),a!==null&&(Ln(a,s,u),Xl(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Mn(),u=Wr(l);u.tag=2,a!=null&&(u.callback=a),a=Zr(s,u,l),a!==null&&(Ln(a,s,l),Xl(a,s,l))}};function Jv(s,a,l,u,f,g,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,g,w):a.prototype&&a.prototype.isPureReactComponent?!ql(l,u)||!ql(f,g):!0}function e_(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&vm.enqueueReplaceState(a,a.state,null)}function _i(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=v({},l));for(var f in s)l[f]===void 0&&(l[f]=s[f])}return l}var md=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function t_(s){md(s)}function n_(s){console.error(s)}function s_(s){md(s)}function pd(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function r_(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function _m(s,a,l){return l=Wr(l),l.tag=3,l.payload={element:null},l.callback=function(){pd(s,a)},l}function a_(s){return s=Wr(s),s.tag=3,s}function i_(s,a,l,u){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;s.payload=function(){return f(g)},s.callback=function(){r_(a,l,u)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){r_(a,l,u),typeof f!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function BA(s,a,l,u,f){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Gl(a,l,f,!0),l=Zn.current,l!==null){switch(l.tag){case 13:return ks===null?Fm():l.alternate===null&&Nt===0&&(Nt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,u===Yf?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Gm(s,u,f)),!1;case 22:return l.flags|=65536,u===Yf?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Gm(s,u,f)),!1}throw Error(r(435,l.tag))}return Gm(s,u,f),Fm(),!1}if(tt)return a=Zn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==Bf&&(s=Error(r(422),{cause:u}),Hl(Yn(s,l)))):(u!==Bf&&(a=Error(r(423),{cause:u}),Hl(Yn(a,l))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,u=Yn(u,l),f=_m(s.stateNode,u,f),Wf(s,f),Nt!==4&&(Nt=2)),!1;var g=Error(r(520),{cause:u});if(g=Yn(g,l),dc===null?dc=[g]:dc.push(g),Nt!==4&&(Nt=2),a===null)return!0;u=Yn(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=f&-f,l.lanes|=s,s=_m(l.stateNode,u,s),Wf(l,s),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(oa===null||!oa.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=a_(f),i_(f,s,l,u),Wf(l,f),!1}l=l.return}while(l!==null);return!1}var o_=Error(r(461)),Wt=!1;function sn(s,a,l,u){a.child=s===null?Wv(a,null,l,u):No(a,s.child,l,u)}function l_(s,a,l,u,f){l=l.render;var g=a.ref;if("ref"in u){var w={};for(var I in u)I!=="ref"&&(w[I]=u[I])}else w=u;return gi(a),u=nm(s,a,l,w,g,f),I=sm(),s!==null&&!Wt?(rm(s,a,f),xr(s,a,f)):(tt&&I&&Uf(a),a.flags|=1,sn(s,a,u,f),a.child)}function c_(s,a,l,u,f){if(s===null){var g=l.type;return typeof g=="function"&&!Mf(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,u_(s,a,g,u,f)):(s=Yu(l.type,null,u,a,a.mode,f),s.ref=a.ref,s.return=a,a.child=s)}if(g=s.child,!Tm(s,f)){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:ql,l(w,u)&&s.ref===a.ref)return xr(s,a,f)}return a.flags|=1,s=pr(g,u),s.ref=a.ref,s.return=a,a.child=s}function u_(s,a,l,u,f){if(s!==null){var g=s.memoizedProps;if(ql(g,u)&&s.ref===a.ref)if(Wt=!1,a.pendingProps=u=g,Tm(s,f))(s.flags&131072)!==0&&(Wt=!0);else return a.lanes=s.lanes,xr(s,a,f)}return bm(s,a,l,u,f)}function d_(s,a,l){var u=a.pendingProps,f=u.children,g=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=g!==null?g.baseLanes|l:l,s!==null){for(f=a.child=s.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;a.childLanes=g&~u}else a.childLanes=0,a.child=null;return h_(s,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ju(a,g!==null?g.cachePool:null),g!==null?uv(a,g):Jf(),Zv(a);else return a.lanes=a.childLanes=536870912,h_(s,a,g!==null?g.baseLanes|l:l,l)}else g!==null?(Ju(a,g.cachePool),uv(a,g),ta(),a.memoizedState=null):(s!==null&&Ju(a,null),Jf(),ta());return sn(s,a,f,l),a.child}function h_(s,a,l,u){var f=Qf();return f=f===null?null:{parent:Ht._currentValue,pool:f},a.memoizedState={baseLanes:l,cachePool:f},s!==null&&Ju(a,null),Jf(),Zv(a),s!==null&&Gl(s,a,u,!0),null}function gd(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function bm(s,a,l,u,f){return gi(a),l=nm(s,a,l,u,void 0,f),u=sm(),s!==null&&!Wt?(rm(s,a,f),xr(s,a,f)):(tt&&u&&Uf(a),a.flags|=1,sn(s,a,l,f),a.child)}function f_(s,a,l,u,f,g){return gi(a),a.updateQueue=null,l=hv(a,u,l,f),dv(s),u=sm(),s!==null&&!Wt?(rm(s,a,g),xr(s,a,g)):(tt&&u&&Uf(a),a.flags|=1,sn(s,a,l,g),a.child)}function m_(s,a,l,u,f){if(gi(a),a.stateNode===null){var g=go,w=l.contextType;typeof w=="object"&&w!==null&&(g=dn(w)),g=new l(u,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=vm,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=u,g.state=a.memoizedState,g.refs={},Kf(a),w=l.contextType,g.context=typeof w=="object"&&w!==null?dn(w):go,g.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(ym(a,l,w,u),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&vm.enqueueReplaceState(g,g.state,null),Zl(a,u,g,f),Wl(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){g=a.stateNode;var I=a.memoizedProps,U=_i(l,I);g.props=U;var K=g.context,te=l.contextType;w=go,typeof te=="object"&&te!==null&&(w=dn(te));var ae=l.getDerivedStateFromProps;te=typeof ae=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,te||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||K!==w)&&e_(a,g,u,w),Xr=!1;var X=a.memoizedState;g.state=X,Zl(a,u,g,f),Wl(),K=a.memoizedState,I||X!==K||Xr?(typeof ae=="function"&&(ym(a,l,ae,u),K=a.memoizedState),(U=Xr||Jv(a,l,U,u,X,K,w))?(te||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=K),g.props=u,g.state=K,g.context=w,u=U):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{g=a.stateNode,Xf(s,a),w=a.memoizedProps,te=_i(l,w),g.props=te,ae=a.pendingProps,X=g.context,K=l.contextType,U=go,typeof K=="object"&&K!==null&&(U=dn(K)),I=l.getDerivedStateFromProps,(K=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==ae||X!==U)&&e_(a,g,u,U),Xr=!1,X=a.memoizedState,g.state=X,Zl(a,u,g,f),Wl();var W=a.memoizedState;w!==ae||X!==W||Xr||s!==null&&s.dependencies!==null&&Wu(s.dependencies)?(typeof I=="function"&&(ym(a,l,I,u),W=a.memoizedState),(te=Xr||Jv(a,l,te,u,X,W,U)||s!==null&&s.dependencies!==null&&Wu(s.dependencies))?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,W,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,W,U)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===s.memoizedProps&&X===s.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&X===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=W),g.props=u,g.state=W,g.context=U,u=te):(typeof g.componentDidUpdate!="function"||w===s.memoizedProps&&X===s.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&X===s.memoizedState||(a.flags|=1024),u=!1)}return g=u,gd(s,a),u=(a.flags&128)!==0,g||u?(g=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,s!==null&&u?(a.child=No(a,s.child,null,f),a.child=No(a,null,l,f)):sn(s,a,l,f),a.memoizedState=g.state,s=a.child):s=xr(s,a,f),s}function p_(s,a,l,u){return Fl(),a.flags|=256,sn(s,a,l,u),a.child}var Em={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(s){return{baseLanes:s,cachePool:nv()}}function Sm(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Jn),s}function g_(s,a,l){var u=a.pendingProps,f=!1,g=(a.flags&128)!==0,w;if((w=g)||(w=s!==null&&s.memoizedState===null?!1:(Gt.current&2)!==0),w&&(f=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,s===null){if(tt){if(f?ea(a):ta(),tt){var I=At,U;if(U=I){e:{for(U=I,I=Ps;U.nodeType!==8;){if(!I){I=null;break e}if(U=hs(U.nextSibling),U===null){I=null;break e}}I=U}I!==null?(a.memoizedState={dehydrated:I,treeContext:di!==null?{id:gr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},U=In(18,null,null,0),U.stateNode=I,U.return=a,a.child=U,bn=a,At=null,U=!0):U=!1}U||mi(a)}if(I=a.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return ip(I)?a.lanes=32:a.lanes=536870912,null;Er(a)}return I=u.children,u=u.fallback,f?(ta(),f=a.mode,I=yd({mode:"hidden",children:I},f),u=ui(u,f,l,null),I.return=a,u.return=a,I.sibling=u,a.child=I,f=a.child,f.memoizedState=xm(l),f.childLanes=Sm(s,w,l),a.memoizedState=Em,u):(ea(a),wm(a,I))}if(U=s.memoizedState,U!==null&&(I=U.dehydrated,I!==null)){if(g)a.flags&256?(ea(a),a.flags&=-257,a=Am(s,a,l)):a.memoizedState!==null?(ta(),a.child=s.child,a.flags|=128,a=null):(ta(),f=u.fallback,I=a.mode,u=yd({mode:"visible",children:u.children},I),f=ui(f,I,l,null),f.flags|=2,u.return=a,f.return=a,u.sibling=f,a.child=u,No(a,s.child,null,l),u=a.child,u.memoizedState=xm(l),u.childLanes=Sm(s,w,l),a.memoizedState=Em,a=f);else if(ea(a),ip(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var K=w.dgst;w=K,u=Error(r(419)),u.stack="",u.digest=w,Hl({value:u,source:null,stack:null}),a=Am(s,a,l)}else if(Wt||Gl(s,a,l,!1),w=(l&s.childLanes)!==0,Wt||w){if(w=mt,w!==null&&(u=l&-l,u=(u&42)!==0?1:zr(u),u=(u&(w.suspendedLanes|l))!==0?0:u,u!==0&&u!==U.retryLane))throw U.retryLane=u,po(s,u),Ln(w,s,u),o_;I.data==="$?"||Fm(),a=Am(s,a,l)}else I.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=U.treeContext,At=hs(I.nextSibling),bn=a,tt=!0,fi=null,Ps=!1,s!==null&&(Xn[Wn++]=gr,Xn[Wn++]=yr,Xn[Wn++]=di,gr=s.id,yr=s.overflow,di=a),a=wm(a,u.children),a.flags|=4096);return a}return f?(ta(),f=u.fallback,I=a.mode,U=s.child,K=U.sibling,u=pr(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,K!==null?f=pr(K,f):(f=ui(f,I,l,null),f.flags|=2),f.return=a,u.return=a,u.sibling=f,a.child=u,u=f,f=a.child,I=s.child.memoizedState,I===null?I=xm(l):(U=I.cachePool,U!==null?(K=Ht._currentValue,U=U.parent!==K?{parent:K,pool:K}:U):U=nv(),I={baseLanes:I.baseLanes|l,cachePool:U}),f.memoizedState=I,f.childLanes=Sm(s,w,l),a.memoizedState=Em,u):(ea(a),l=s.child,s=l.sibling,l=pr(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(w=a.deletions,w===null?(a.deletions=[s],a.flags|=16):w.push(s)),a.child=l,a.memoizedState=null,l)}function wm(s,a){return a=yd({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function yd(s,a){return s=In(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Am(s,a,l){return No(a,s.child,null,l),s=wm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function y_(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),Ff(s.return,a,l)}function Nm(s,a,l,u,f){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=f)}function v_(s,a,l){var u=a.pendingProps,f=u.revealOrder,g=u.tail;if(sn(s,a,u.children,l),u=Gt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&y_(s,l,a);else if(s.tag===19)y_(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(ue(Gt,u),f){case"forwards":for(l=a.child,f=null;l!==null;)s=l.alternate,s!==null&&fd(s)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),Nm(a,!1,f,l,g);break;case"backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(s=f.alternate,s!==null&&fd(s)===null){a.child=f;break}s=f.sibling,f.sibling=l,l=f,f=s}Nm(a,!0,l,null,g);break;case"together":Nm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function xr(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),ia|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Gl(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=pr(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=pr(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Tm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Wu(s)))}function zA(s,a,l){switch(a.tag){case 3:Ge(a,a.stateNode.containerInfo),Kr(a,Ht,s.memoizedState.cache),Fl();break;case 27:case 5:Br(a);break;case 4:Ge(a,a.stateNode.containerInfo);break;case 10:Kr(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(ea(a),a.flags|=128,null):(l&a.child.childLanes)!==0?g_(s,a,l):(ea(a),s=xr(s,a,l),s!==null?s.sibling:null);ea(a);break;case 19:var f=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Gl(s,a,l,!1),u=(l&a.childLanes)!==0),f){if(u)return v_(s,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Gt,Gt.current),u)break;return null;case 22:case 23:return a.lanes=0,d_(s,a,l);case 24:Kr(a,Ht,s.memoizedState.cache)}return xr(s,a,l)}function __(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Wt=!0;else{if(!Tm(s,l)&&(a.flags&128)===0)return Wt=!1,zA(s,a,l);Wt=(s.flags&131072)!==0}else Wt=!1,tt&&(a.flags&1048576)!==0&&Ky(a,Xu,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var u=a.elementType,f=u._init;if(u=f(u._payload),a.type=u,typeof u=="function")Mf(u)?(s=_i(u,s),a.tag=1,a=m_(null,a,u,s,l)):(a.tag=0,a=bm(null,a,u,s,l));else{if(u!=null){if(f=u.$$typeof,f===de){a.tag=11,a=l_(null,a,u,s,l);break e}else if(f===M){a.tag=14,a=c_(null,a,u,s,l);break e}}throw a=ee(u)||u,Error(r(306,a,""))}}return a;case 0:return bm(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,f=_i(u,a.pendingProps),m_(s,a,u,f,l);case 3:e:{if(Ge(a,a.stateNode.containerInfo),s===null)throw Error(r(387));u=a.pendingProps;var g=a.memoizedState;f=g.element,Xf(s,a),Zl(a,u,null,l);var w=a.memoizedState;if(u=w.cache,Kr(a,Ht,u),u!==g.cache&&Hf(a,[Ht],l,!0),Wl(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=p_(s,a,u,l);break e}else if(u!==f){f=Yn(Error(r(424)),a),Hl(f),a=p_(s,a,u,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(At=hs(s.firstChild),bn=a,tt=!0,fi=null,Ps=!0,l=Wv(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Fl(),u===f){a=xr(s,a,l);break e}sn(s,a,u,l)}a=a.child}return a;case 26:return gd(s,a),s===null?(l=Sb(a.type,null,a.pendingProps,null))?a.memoizedState=l:tt||(l=a.type,s=a.pendingProps,u=Dd(Ae.current).createElement(l),u[Bt]=a,u[Pt]=s,an(u,l,s),Tt(u),a.stateNode=u):a.memoizedState=Sb(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Br(a),s===null&&tt&&(u=a.stateNode=bb(a.type,a.pendingProps,Ae.current),bn=a,Ps=!0,f=At,ua(a.type)?(op=f,At=hs(u.firstChild)):At=f),sn(s,a,a.pendingProps.children,l),gd(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&tt&&((f=u=At)&&(u=gN(u,a.type,a.pendingProps,Ps),u!==null?(a.stateNode=u,bn=a,At=hs(u.firstChild),Ps=!1,f=!0):f=!1),f||mi(a)),Br(a),f=a.type,g=a.pendingProps,w=s!==null?s.memoizedProps:null,u=g.children,sp(f,g)?u=null:w!==null&&sp(f,w)&&(a.flags|=32),a.memoizedState!==null&&(f=nm(s,a,kA,null,null,l),bc._currentValue=f),gd(s,a),sn(s,a,u,l),a.child;case 6:return s===null&&tt&&((s=l=At)&&(l=yN(l,a.pendingProps,Ps),l!==null?(a.stateNode=l,bn=a,At=null,s=!0):s=!1),s||mi(a)),null;case 13:return g_(s,a,l);case 4:return Ge(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=No(a,null,u,l):sn(s,a,u,l),a.child;case 11:return l_(s,a,a.type,a.pendingProps,l);case 7:return sn(s,a,a.pendingProps,l),a.child;case 8:return sn(s,a,a.pendingProps.children,l),a.child;case 12:return sn(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Kr(a,a.type,u.value),sn(s,a,u.children,l),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,gi(a),f=dn(f),u=u(f),a.flags|=1,sn(s,a,u,l),a.child;case 14:return c_(s,a,a.type,a.pendingProps,l);case 15:return u_(s,a,a.type,a.pendingProps,l);case 19:return v_(s,a,l);case 31:return u=a.pendingProps,l=a.mode,u={mode:u.mode,children:u.children},s===null?(l=yd(u,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=pr(s.child,u),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return d_(s,a,l);case 24:return gi(a),u=dn(Ht),s===null?(f=Qf(),f===null&&(f=mt,g=Gf(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),a.memoizedState={parent:u,cache:f},Kf(a),Kr(a,Ht,f)):((s.lanes&l)!==0&&(Xf(s,a),Zl(a,null,null,l),Wl()),f=s.memoizedState,g=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Kr(a,Ht,u)):(u=g.cache,Kr(a,Ht,u),u!==f.cache&&Hf(a,[Ht],l,!0))),sn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Sr(s){s.flags|=4}function b_(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Cb(a)){if(a=Zn.current,a!==null&&((We&4194048)===We?ks!==null:(We&62914560)!==We&&(We&536870912)===0||a!==ks))throw Kl=Yf,sv;s.flags|=8192}}function vd(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?xl():536870912,s.lanes|=a,Ro|=a)}function ac(s,a){if(!tt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function xt(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var f=s.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function FA(s,a,l){var u=a.pendingProps;switch(qf(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(a),null;case 1:return xt(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),_r(Ht),Es(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(zl(a)?Sr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Zy())),xt(a),null;case 26:return l=a.memoizedState,s===null?(Sr(a),l!==null?(xt(a),b_(a,l)):(xt(a),a.flags&=-16777217)):l?l!==s.memoizedState?(Sr(a),xt(a),b_(a,l)):(xt(a),a.flags&=-16777217):(s.memoizedProps!==u&&Sr(a),xt(a),a.flags&=-16777217),null;case 27:nr(a),l=Ae.current;var f=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Sr(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return xt(a),null}s=be.current,zl(a)?Xy(a):(s=bb(f,u,l),a.stateNode=s,Sr(a))}return xt(a),null;case 5:if(nr(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Sr(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return xt(a),null}if(s=be.current,zl(a))Xy(a);else{switch(f=Dd(Ae.current),s){case 1:s=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=f.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?f.createElement(l,{is:u.is}):f.createElement(l)}}s[Bt]=a,s[Pt]=u;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)s.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=s;e:switch(an(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Sr(a)}}return xt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&Sr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(s=Ae.current,zl(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,f=bn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}s[Bt]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||fb(s.nodeValue,l)),s||mi(a)}else s=Dd(s).createTextNode(u),s[Bt]=a,a.stateNode=s}return xt(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=zl(a),u!==null&&u.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Bt]=a}else Fl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xt(a),f=!1}else f=Zy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Er(a),a):(Er(a),null)}if(Er(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),vd(a,a.updateQueue),xt(a),null;case 4:return Es(),s===null&&Zm(a.stateNode.containerInfo),xt(a),null;case 10:return _r(a.type),xt(a),null;case 19:if(ne(Gt),f=a.memoizedState,f===null)return xt(a),null;if(u=(a.flags&128)!==0,g=f.rendering,g===null)if(u)ac(f,!1);else{if(Nt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(g=fd(s),g!==null){for(a.flags|=128,ac(f,!1),s=g.updateQueue,a.updateQueue=s,vd(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Yy(l,s),l=l.sibling;return ue(Gt,Gt.current&1|2),a.child}s=s.sibling}f.tail!==null&&zn()>Ed&&(a.flags|=128,u=!0,ac(f,!1),a.lanes=4194304)}else{if(!u)if(s=fd(g),s!==null){if(a.flags|=128,u=!0,s=s.updateQueue,a.updateQueue=s,vd(a,s),ac(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!tt)return xt(a),null}else 2*zn()-f.renderingStartTime>Ed&&l!==536870912&&(a.flags|=128,u=!0,ac(f,!1),a.lanes=4194304);f.isBackwards?(g.sibling=a.child,a.child=g):(s=f.last,s!==null?s.sibling=g:a.child=g,f.last=g)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=zn(),a.sibling=null,s=Gt.current,ue(Gt,u?s&1|2:s&1),a):(xt(a),null);case 22:case 23:return Er(a),em(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(xt(a),a.subtreeFlags&6&&(a.flags|=8192)):xt(a),l=a.updateQueue,l!==null&&vd(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&ne(yi),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),_r(Ht),xt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function HA(s,a){switch(qf(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return _r(Ht),Es(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return nr(a),null;case 13:if(Er(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Fl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ne(Gt),null;case 4:return Es(),null;case 10:return _r(a.type),null;case 22:case 23:return Er(a),em(),s!==null&&ne(yi),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return _r(Ht),null;case 25:return null;default:return null}}function E_(s,a){switch(qf(a),a.tag){case 3:_r(Ht),Es();break;case 26:case 27:case 5:nr(a);break;case 4:Es();break;case 13:Er(a);break;case 19:ne(Gt);break;case 10:_r(a.type);break;case 22:case 23:Er(a),em(),s!==null&&ne(yi);break;case 24:_r(Ht)}}function ic(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&s)===s){u=void 0;var g=l.create,w=l.inst;u=g(),w.destroy=u}l=l.next}while(l!==f)}}catch(I){ht(a,a.return,I)}}function na(s,a,l){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&s)===s){var w=u.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,f=a;var U=l,K=I;try{K()}catch(te){ht(f,U,te)}}}u=u.next}while(u!==g)}}catch(te){ht(a,a.return,te)}}function x_(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{cv(a,l)}catch(u){ht(s,s.return,u)}}}function S_(s,a,l){l.props=_i(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ht(s,a,u)}}function oc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(f){ht(s,a,f)}}function Os(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(f){ht(s,a,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){ht(s,a,f)}else l.current=null}function w_(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(f){ht(s,s.return,f)}}function Cm(s,a,l){try{var u=s.stateNode;dN(u,s.type,l,a),u[Pt]=a}catch(f){ht(s,s.return,f)}}function A_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ua(s.type)||s.tag===4}function jm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ua(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Rm(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Rd));else if(u!==4&&(u===27&&ua(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Rm(s,a,l),s=s.sibling;s!==null;)Rm(s,a,l),s=s.sibling}function _d(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&ua(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(_d(s,a,l),s=s.sibling;s!==null;)_d(s,a,l),s=s.sibling}function N_(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);an(a,u,l),a[Bt]=s,a[Pt]=l}catch(g){ht(s,s.return,g)}}var wr=!1,jt=!1,Dm=!1,T_=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function GA(s,a){if(s=s.containerInfo,tp=Ld,s=Vy(s),jf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,I=-1,U=-1,K=0,te=0,ae=s,X=null;t:for(;;){for(var W;ae!==l||f!==0&&ae.nodeType!==3||(I=w+f),ae!==g||u!==0&&ae.nodeType!==3||(U=w+u),ae.nodeType===3&&(w+=ae.nodeValue.length),(W=ae.firstChild)!==null;)X=ae,ae=W;for(;;){if(ae===s)break t;if(X===l&&++K===f&&(I=w),X===g&&++te===u&&(U=w),(W=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=W}l=I===-1||U===-1?null:{start:I,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(np={focusedElem:s,selectionRange:l},Ld=!1,Zt=a;Zt!==null;)if(a=Zt,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Zt=s;else for(;Zt!==null;){switch(a=Zt,g=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,l=a,f=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var ke=_i(l.type,f,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(ke,g),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ce){ht(l,l.return,Ce)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)ap(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ap(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Zt=s;break}Zt=a.return}}function C_(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:sa(s,l),u&4&&ic(5,l);break;case 1:if(sa(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(w){ht(l,l.return,w)}else{var f=_i(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(f,a,s.__reactInternalSnapshotBeforeUpdate)}catch(w){ht(l,l.return,w)}}u&64&&x_(l),u&512&&oc(l,l.return);break;case 3:if(sa(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{cv(s,a)}catch(w){ht(l,l.return,w)}}break;case 27:a===null&&u&4&&N_(l);case 26:case 5:sa(s,l),a===null&&u&4&&w_(l),u&512&&oc(l,l.return);break;case 12:sa(s,l);break;case 13:sa(s,l),u&4&&D_(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=eN.bind(null,l),vN(s,l))));break;case 22:if(u=l.memoizedState!==null||wr,!u){a=a!==null&&a.memoizedState!==null||jt,f=wr;var g=jt;wr=u,(jt=a)&&!g?ra(s,l,(l.subtreeFlags&8772)!==0):sa(s,l),wr=f,jt=g}break;case 30:break;default:sa(s,l)}}function j_(s){var a=s.alternate;a!==null&&(s.alternate=null,j_(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Gr(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var vt=null,Sn=!1;function Ar(s,a,l){for(l=l.child;l!==null;)R_(s,a,l),l=l.sibling}function R_(s,a,l){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(wt,l)}catch{}switch(l.tag){case 26:jt||Os(l,a),Ar(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:jt||Os(l,a);var u=vt,f=Sn;ua(l.type)&&(vt=l.stateNode,Sn=!1),Ar(s,a,l),gc(l.stateNode),vt=u,Sn=f;break;case 5:jt||Os(l,a);case 6:if(u=vt,f=Sn,vt=null,Ar(s,a,l),vt=u,Sn=f,vt!==null)if(Sn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(l.stateNode)}catch(g){ht(l,a,g)}else try{vt.removeChild(l.stateNode)}catch(g){ht(l,a,g)}break;case 18:vt!==null&&(Sn?(s=vt,vb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),wc(s)):vb(vt,l.stateNode));break;case 4:u=vt,f=Sn,vt=l.stateNode.containerInfo,Sn=!0,Ar(s,a,l),vt=u,Sn=f;break;case 0:case 11:case 14:case 15:jt||na(2,l,a),jt||na(4,l,a),Ar(s,a,l);break;case 1:jt||(Os(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&S_(l,a,u)),Ar(s,a,l);break;case 21:Ar(s,a,l);break;case 22:jt=(u=jt)||l.memoizedState!==null,Ar(s,a,l),jt=u;break;default:Ar(s,a,l)}}function D_(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{wc(s)}catch(l){ht(a,a.return,l)}}function $A(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new T_),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new T_),a;default:throw Error(r(435,s.tag))}}function Im(s,a){var l=$A(s);a.forEach(function(u){var f=tN.bind(null,s,u);l.has(u)||(l.add(u),u.then(f,f))})}function Pn(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u],g=s,w=a,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(ua(I.type)){vt=I.stateNode,Sn=!1;break e}break;case 5:vt=I.stateNode,Sn=!1;break e;case 3:case 4:vt=I.stateNode.containerInfo,Sn=!0;break e}I=I.return}if(vt===null)throw Error(r(160));R_(g,w,f),vt=null,Sn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)I_(a,s),a=a.sibling}var ds=null;function I_(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Pn(a,s),kn(s),u&4&&(na(3,s,s.return),ic(3,s),na(5,s,s.return));break;case 1:Pn(a,s),kn(s),u&512&&(jt||l===null||Os(l,l.return)),u&64&&wr&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var f=ds;if(Pn(a,s),kn(s),u&512&&(jt||l===null||Os(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ya]||g[Bt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),an(g,u,l),g[Bt]=s,Tt(g),u=g;break e;case"link":var w=Nb("link","href",f).get(u+(l.href||""));if(w){for(var I=0;I<w.length;I++)if(g=w[I],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(I,1);break t}}g=f.createElement(u),an(g,u,l),f.head.appendChild(g);break;case"meta":if(w=Nb("meta","content",f).get(u+(l.content||""))){for(I=0;I<w.length;I++)if(g=w[I],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(I,1);break t}}g=f.createElement(u),an(g,u,l),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[Bt]=s,Tt(g),u=g}s.stateNode=u}else Tb(f,s.type,s.stateNode);else s.stateNode=Ab(f,u,s.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?Tb(f,s.type,s.stateNode):Ab(f,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Cm(s,s.memoizedProps,l.memoizedProps)}break;case 27:Pn(a,s),kn(s),u&512&&(jt||l===null||Os(l,l.return)),l!==null&&u&4&&Cm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Pn(a,s),kn(s),u&512&&(jt||l===null||Os(l,l.return)),s.flags&32){f=s.stateNode;try{Hn(f,"")}catch(W){ht(s,s.return,W)}}u&4&&s.stateNode!=null&&(f=s.memoizedProps,Cm(s,f,l!==null?l.memoizedProps:f)),u&1024&&(Dm=!0);break;case 6:if(Pn(a,s),kn(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(W){ht(s,s.return,W)}}break;case 3:if(kd=null,f=ds,ds=Id(a.containerInfo),Pn(a,s),ds=f,kn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{wc(a.containerInfo)}catch(W){ht(s,s.return,W)}Dm&&(Dm=!1,P_(s));break;case 4:u=ds,ds=Id(s.stateNode.containerInfo),Pn(a,s),kn(s),ds=u;break;case 12:Pn(a,s),kn(s);break;case 13:Pn(a,s),kn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Vm=zn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Im(s,u)));break;case 22:f=s.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,K=wr,te=jt;if(wr=K||f,jt=te||U,Pn(a,s),jt=te,wr=K,kn(s),u&8192)e:for(a=s.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||U||wr||jt||bi(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){U=l=a;try{if(g=U.stateNode,f)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=U.stateNode;var ae=U.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;I.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(W){ht(U,U.return,W)}}}else if(a.tag===6){if(l===null){U=a;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(W){ht(U,U.return,W)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Im(s,l))));break;case 19:Pn(a,s),kn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Im(s,u)));break;case 30:break;case 21:break;default:Pn(a,s),kn(s)}}function kn(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(A_(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var f=l.stateNode,g=jm(s);_d(s,g,f);break;case 5:var w=l.stateNode;l.flags&32&&(Hn(w,""),l.flags&=-33);var I=jm(s);_d(s,I,w);break;case 3:case 4:var U=l.stateNode.containerInfo,K=jm(s);Rm(s,K,U);break;default:throw Error(r(161))}}catch(te){ht(s,s.return,te)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function P_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;P_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function sa(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)C_(s,a.alternate,a),a=a.sibling}function bi(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:na(4,a,a.return),bi(a);break;case 1:Os(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&S_(a,a.return,l),bi(a);break;case 27:gc(a.stateNode);case 26:case 5:Os(a,a.return),bi(a);break;case 22:a.memoizedState===null&&bi(a);break;case 30:bi(a);break;default:bi(a)}s=s.sibling}}function ra(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=s,g=a,w=g.flags;switch(g.tag){case 0:case 11:case 15:ra(f,g,l),ic(4,g);break;case 1:if(ra(f,g,l),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){ht(u,u.return,K)}if(u=g,f=u.updateQueue,f!==null){var I=u.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)lv(U[f],I)}catch(K){ht(u,u.return,K)}}l&&w&64&&x_(g),oc(g,g.return);break;case 27:N_(g);case 26:case 5:ra(f,g,l),l&&u===null&&w&4&&w_(g),oc(g,g.return);break;case 12:ra(f,g,l);break;case 13:ra(f,g,l),l&&w&4&&D_(f,g);break;case 22:g.memoizedState===null&&ra(f,g,l),oc(g,g.return);break;case 30:break;default:ra(f,g,l)}a=a.sibling}}function Pm(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&$l(l))}function km(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$l(s))}function Ms(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)k_(s,a,l,u),a=a.sibling}function k_(s,a,l,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Ms(s,a,l,u),f&2048&&ic(9,a);break;case 1:Ms(s,a,l,u);break;case 3:Ms(s,a,l,u),f&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$l(s)));break;case 12:if(f&2048){Ms(s,a,l,u),s=a.stateNode;try{var g=a.memoizedProps,w=g.id,I=g.onPostCommit;typeof I=="function"&&I(w,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){ht(a,a.return,U)}}else Ms(s,a,l,u);break;case 13:Ms(s,a,l,u);break;case 23:break;case 22:g=a.stateNode,w=a.alternate,a.memoizedState!==null?g._visibility&2?Ms(s,a,l,u):lc(s,a):g._visibility&2?Ms(s,a,l,u):(g._visibility|=2,To(s,a,l,u,(a.subtreeFlags&10256)!==0)),f&2048&&Pm(w,a);break;case 24:Ms(s,a,l,u),f&2048&&km(a.alternate,a);break;default:Ms(s,a,l,u)}}function To(s,a,l,u,f){for(f=f&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=s,w=a,I=l,U=u,K=w.flags;switch(w.tag){case 0:case 11:case 15:To(g,w,I,U,f),ic(8,w);break;case 23:break;case 22:var te=w.stateNode;w.memoizedState!==null?te._visibility&2?To(g,w,I,U,f):lc(g,w):(te._visibility|=2,To(g,w,I,U,f)),f&&K&2048&&Pm(w.alternate,w);break;case 24:To(g,w,I,U,f),f&&K&2048&&km(w.alternate,w);break;default:To(g,w,I,U,f)}a=a.sibling}}function lc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,f=u.flags;switch(u.tag){case 22:lc(l,u),f&2048&&Pm(u.alternate,u);break;case 24:lc(l,u),f&2048&&km(u.alternate,u);break;default:lc(l,u)}a=a.sibling}}var cc=8192;function Co(s){if(s.subtreeFlags&cc)for(s=s.child;s!==null;)O_(s),s=s.sibling}function O_(s){switch(s.tag){case 26:Co(s),s.flags&cc&&s.memoizedState!==null&&DN(ds,s.memoizedState,s.memoizedProps);break;case 5:Co(s);break;case 3:case 4:var a=ds;ds=Id(s.stateNode.containerInfo),Co(s),ds=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=cc,cc=16777216,Co(s),cc=a):Co(s));break;default:Co(s)}}function M_(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function uc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Zt=u,V_(u,s)}M_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)L_(s),s=s.sibling}function L_(s){switch(s.tag){case 0:case 11:case 15:uc(s),s.flags&2048&&na(9,s,s.return);break;case 3:uc(s);break;case 12:uc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,bd(s)):uc(s);break;default:uc(s)}}function bd(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Zt=u,V_(u,s)}M_(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:na(8,a,a.return),bd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,bd(a));break;default:bd(a)}s=s.sibling}}function V_(s,a){for(;Zt!==null;){var l=Zt;switch(l.tag){case 0:case 11:case 15:na(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:$l(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Zt=u;else e:for(l=s;Zt!==null;){u=Zt;var f=u.sibling,g=u.return;if(j_(u),u===l){Zt=null;break e}if(f!==null){f.return=g,Zt=f;break e}Zt=g}}}var QA={getCacheForType:function(s){var a=dn(Ht),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},YA=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Fe=null,We=0,it=0,On=null,aa=!1,jo=!1,Om=!1,Nr=0,Nt=0,ia=0,Ei=0,Mm=0,Jn=0,Ro=0,dc=null,wn=null,Lm=!1,Vm=0,Ed=1/0,xd=null,oa=null,rn=0,la=null,Do=null,Io=0,Um=0,qm=null,U_=null,hc=0,Bm=null;function Mn(){if((at&2)!==0&&We!==0)return We&-We;if(Y.T!==null){var s=_o;return s!==0?s:Ym()}return Fr()}function q_(){Jn===0&&(Jn=(We&536870912)===0||tt?El():536870912);var s=Zn.current;return s!==null&&(s.flags|=32),Jn}function Ln(s,a,l){(s===mt&&(it===2||it===9)||s.cancelPendingCommit!==null)&&(Po(s,0),ca(s,We,Jn,!1)),rr(s,l),((at&2)===0||s!==mt)&&(s===mt&&((at&2)===0&&(Ei|=l),Nt===4&&ca(s,We,Jn,!1)),Ls(s))}function B_(s,a,l){if((at&6)!==0)throw Error(r(327));var u=!l&&(a&124)===0&&(a&s.expiredLanes)===0||Qa(s,a),f=u?WA(s,a):Hm(s,a,!0),g=u;do{if(f===0){jo&&!u&&ca(s,a,0,!1);break}else{if(l=s.current.alternate,g&&!KA(l)){f=Hm(s,a,!1),g=!1;continue}if(f===2){if(g=a,s.errorRecoveryDisabledLanes&g)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var I=s;f=dc;var U=I.current.memoizedState.isDehydrated;if(U&&(Po(I,w).flags|=256),w=Hm(I,w,!1),w!==2){if(Om&&!U){I.errorRecoveryDisabledLanes|=g,Ei|=g,f=4;break e}g=wn,wn=f,g!==null&&(wn===null?wn=g:wn.push.apply(wn,g))}f=w}if(g=!1,f!==2)continue}}if(f===1){Po(s,0),ca(s,a,0,!0);break}e:{switch(u=s,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ca(u,a,Jn,!aa);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=Vm+300-zn(),10<f)){if(ca(u,a,Jn,!aa),Ki(u,0,!0)!==0)break e;u.timeoutHandle=gb(z_.bind(null,u,l,wn,xd,Lm,a,Jn,Ei,Ro,aa,g,2,-0,0),f);break e}z_(u,l,wn,xd,Lm,a,Jn,Ei,Ro,aa,g,0,-0,0)}}break}while(!0);Ls(s)}function z_(s,a,l,u,f,g,w,I,U,K,te,ae,X,W){if(s.timeoutHandle=-1,ae=a.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(_c={stylesheets:null,count:0,unsuspend:RN},O_(a),ae=IN(),ae!==null)){s.cancelPendingCommit=ae(K_.bind(null,s,a,g,l,u,f,w,I,U,te,1,X,W)),ca(s,g,w,!K);return}K_(s,a,g,l,u,f,w,I,U)}function KA(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var f=l[u],g=f.getSnapshot;f=f.value;try{if(!Dn(g(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ca(s,a,l,u){a&=~Mm,a&=~Ei,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var f=a;0<f;){var g=31-un(f),w=1<<g;u[g]=-1,f&=~w}l!==0&&xs(s,l,a)}function Sd(){return(at&6)===0?(fc(0),!1):!0}function zm(){if(Fe!==null){if(it===0)var s=Fe.return;else s=Fe,vr=pi=null,am(s),Ao=null,sc=0,s=Fe;for(;s!==null;)E_(s.alternate,s),s=s.return;Fe=null}}function Po(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,fN(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),zm(),mt=s,Fe=l=pr(s.current,null),We=a,it=0,On=null,aa=!1,jo=Qa(s,a),Om=!1,Ro=Jn=Mm=Ei=ia=Nt=0,wn=dc=null,Lm=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var f=31-un(u),g=1<<f;a|=s[f],u&=~g}return Nr=a,Gu(),l}function F_(s,a){Be=null,Y.H=ud,a===Yl||a===ed?(a=iv(),it=3):a===sv?(a=iv(),it=4):it=a===o_?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,On=a,Fe===null&&(Nt=1,pd(s,Yn(a,s.current)))}function H_(){var s=Y.H;return Y.H=ud,s===null?ud:s}function G_(){var s=Y.A;return Y.A=QA,s}function Fm(){Nt=4,aa||(We&4194048)!==We&&Zn.current!==null||(jo=!0),(ia&134217727)===0&&(Ei&134217727)===0||mt===null||ca(mt,We,Jn,!1)}function Hm(s,a,l){var u=at;at|=2;var f=H_(),g=G_();(mt!==s||We!==a)&&(xd=null,Po(s,a)),a=!1;var w=Nt;e:do try{if(it!==0&&Fe!==null){var I=Fe,U=On;switch(it){case 8:zm(),w=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(a=!0);var K=it;if(it=0,On=null,ko(s,I,U,K),l&&jo){w=0;break e}break;default:K=it,it=0,On=null,ko(s,I,U,K)}}XA(),w=Nt;break}catch(te){F_(s,te)}while(!0);return a&&s.shellSuspendCounter++,vr=pi=null,at=u,Y.H=f,Y.A=g,Fe===null&&(mt=null,We=0,Gu()),w}function XA(){for(;Fe!==null;)$_(Fe)}function WA(s,a){var l=at;at|=2;var u=H_(),f=G_();mt!==s||We!==a?(xd=null,Ed=zn()+500,Po(s,a)):jo=Qa(s,a);e:do try{if(it!==0&&Fe!==null){a=Fe;var g=On;t:switch(it){case 1:it=0,On=null,ko(s,a,g,1);break;case 2:case 9:if(rv(g)){it=0,On=null,Q_(a);break}a=function(){it!==2&&it!==9||mt!==s||(it=7),Ls(s)},g.then(a,a);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:rv(g)?(it=0,On=null,Q_(a)):(it=0,On=null,ko(s,a,g,7));break;case 5:var w=null;switch(Fe.tag){case 26:w=Fe.memoizedState;case 5:case 27:var I=Fe;if(!w||Cb(w)){it=0,On=null;var U=I.sibling;if(U!==null)Fe=U;else{var K=I.return;K!==null?(Fe=K,wd(K)):Fe=null}break t}}it=0,On=null,ko(s,a,g,5);break;case 6:it=0,On=null,ko(s,a,g,6);break;case 8:zm(),Nt=6;break e;default:throw Error(r(462))}}ZA();break}catch(te){F_(s,te)}while(!0);return vr=pi=null,Y.H=u,Y.A=f,at=l,Fe!==null?0:(mt=null,We=0,Gu(),Nt)}function ZA(){for(;Fe!==null&&!yl();)$_(Fe)}function $_(s){var a=__(s.alternate,s,Nr);s.memoizedProps=s.pendingProps,a===null?wd(s):Fe=a}function Q_(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=f_(l,a,a.pendingProps,a.type,void 0,We);break;case 11:a=f_(l,a,a.pendingProps,a.type.render,a.ref,We);break;case 5:am(a);default:E_(l,a),a=Fe=Yy(a,Nr),a=__(l,a,Nr)}s.memoizedProps=s.pendingProps,a===null?wd(s):Fe=a}function ko(s,a,l,u){vr=pi=null,am(a),Ao=null,sc=0;var f=a.return;try{if(BA(s,f,a,l,We)){Nt=1,pd(s,Yn(l,s.current)),Fe=null;return}}catch(g){if(f!==null)throw Fe=f,g;Nt=1,pd(s,Yn(l,s.current)),Fe=null;return}a.flags&32768?(tt||u===1?s=!0:jo||(We&536870912)!==0?s=!1:(aa=s=!0,(u===2||u===9||u===3||u===6)&&(u=Zn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Y_(a,s)):wd(a)}function wd(s){var a=s;do{if((a.flags&32768)!==0){Y_(a,aa);return}s=a.return;var l=FA(a.alternate,a,Nr);if(l!==null){Fe=l;return}if(a=a.sibling,a!==null){Fe=a;return}Fe=a=s}while(a!==null);Nt===0&&(Nt=5)}function Y_(s,a){do{var l=HA(s.alternate,s);if(l!==null){l.flags&=32767,Fe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Fe=s;return}Fe=s=l}while(s!==null);Nt=6,Fe=null}function K_(s,a,l,u,f,g,w,I,U){s.cancelPendingCommit=null;do Ad();while(rn!==0);if((at&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(g=a.lanes|a.childLanes,g|=kf,Sl(s,l,g,w,I,U),s===mt&&(Fe=mt=null,We=0),Do=a,la=s,Io=l,Um=g,qm=f,U_=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,nN(Fa,function(){return eb(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=fe.p,fe.p=2,w=at,at|=4;try{GA(s,a,l)}finally{at=w,fe.p=f,Y.T=u}}rn=1,X_(),W_(),Z_()}}function X_(){if(rn===1){rn=0;var s=la,a=Do,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var u=fe.p;fe.p=2;var f=at;at|=4;try{I_(a,s);var g=np,w=Vy(s.containerInfo),I=g.focusedElem,U=g.selectionRange;if(w!==I&&I&&I.ownerDocument&&Ly(I.ownerDocument.documentElement,I)){if(U!==null&&jf(I)){var K=U.start,te=U.end;if(te===void 0&&(te=K),"selectionStart"in I)I.selectionStart=K,I.selectionEnd=Math.min(te,I.value.length);else{var ae=I.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var W=X.getSelection(),ke=I.textContent.length,Ce=Math.min(U.start,ke),dt=U.end===void 0?Ce:Math.min(U.end,ke);!W.extend&&Ce>dt&&(w=dt,dt=Ce,Ce=w);var H=My(I,Ce),B=My(I,dt);if(H&&B&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var Q=ae.createRange();Q.setStart(H.node,H.offset),W.removeAllRanges(),Ce>dt?(W.addRange(Q),W.extend(B.node,B.offset)):(Q.setEnd(B.node,B.offset),W.addRange(Q))}}}}for(ae=[],W=I;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ae.length;I++){var se=ae[I];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Ld=!!tp,np=tp=null}finally{at=f,fe.p=u,Y.T=l}}s.current=a,rn=2}}function W_(){if(rn===2){rn=0;var s=la,a=Do,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var u=fe.p;fe.p=2;var f=at;at|=4;try{C_(s,a.alternate,a)}finally{at=f,fe.p=u,Y.T=l}}rn=3}}function Z_(){if(rn===4||rn===3){rn=0,bu();var s=la,a=Do,l=Io,u=U_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?rn=5:(rn=0,Do=la=null,J_(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(oa=null),Xi(l),a=a.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(wt,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=Y.T,f=fe.p,fe.p=2,Y.T=null;try{for(var g=s.onRecoverableError,w=0;w<u.length;w++){var I=u[w];g(I.value,{componentStack:I.stack})}}finally{Y.T=a,fe.p=f}}(Io&3)!==0&&Ad(),Ls(s),f=s.pendingLanes,(l&4194090)!==0&&(f&42)!==0?s===Bm?hc++:(hc=0,Bm=s):hc=0,fc(0)}}function J_(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,$l(a)))}function Ad(s){return X_(),W_(),Z_(),eb()}function eb(){if(rn!==5)return!1;var s=la,a=Um;Um=0;var l=Xi(Io),u=Y.T,f=fe.p;try{fe.p=32>l?32:l,Y.T=null,l=qm,qm=null;var g=la,w=Io;if(rn=0,Do=la=null,Io=0,(at&6)!==0)throw Error(r(331));var I=at;if(at|=4,L_(g.current),k_(g,g.current,w,l),at=I,fc(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(wt,g)}catch{}return!0}finally{fe.p=f,Y.T=u,J_(s,a)}}function tb(s,a,l){a=Yn(l,a),a=_m(s.stateNode,a,2),s=Zr(s,a,2),s!==null&&(rr(s,2),Ls(s))}function ht(s,a,l){if(s.tag===3)tb(s,s,l);else for(;a!==null;){if(a.tag===3){tb(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(oa===null||!oa.has(u))){s=Yn(l,s),l=a_(2),u=Zr(a,l,2),u!==null&&(i_(l,u,a,s),rr(u,2),Ls(u));break}}a=a.return}}function Gm(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new YA;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(l)||(Om=!0,f.add(l),s=JA.bind(null,s,a,l),a.then(s,s))}function JA(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,mt===s&&(We&l)===l&&(Nt===4||Nt===3&&(We&62914560)===We&&300>zn()-Vm?(at&2)===0&&Po(s,0):Mm|=l,Ro===We&&(Ro=0)),Ls(s)}function nb(s,a){a===0&&(a=xl()),s=po(s,a),s!==null&&(rr(s,a),Ls(s))}function eN(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),nb(s,l)}function tN(s,a){var l=0;switch(s.tag){case 13:var u=s.stateNode,f=s.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),nb(s,l)}function nN(s,a){return Ba(s,a)}var Nd=null,Oo=null,$m=!1,Td=!1,Qm=!1,xi=0;function Ls(s){s!==Oo&&s.next===null&&(Oo===null?Nd=Oo=s:Oo=Oo.next=s),Td=!0,$m||($m=!0,rN())}function fc(s,a){if(!Qm&&Td){Qm=!0;do for(var l=!1,u=Nd;u!==null;){if(s!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var w=u.suspendedLanes,I=u.pingedLanes;g=(1<<31-un(42|s)+1)-1,g&=f&~(w&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,ib(u,g))}else g=We,g=Ki(u,u===mt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Qa(u,g)||(l=!0,ib(u,g));u=u.next}while(l);Qm=!1}}function sN(){sb()}function sb(){Td=$m=!1;var s=0;xi!==0&&(hN()&&(s=xi),xi=0);for(var a=zn(),l=null,u=Nd;u!==null;){var f=u.next,g=rb(u,a);g===0?(u.next=null,l===null?Nd=f:l.next=f,f===null&&(Oo=l)):(l=u,(s!==0||(g&3)!==0)&&(Td=!0)),u=f}fc(s)}function rb(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,f=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var w=31-un(g),I=1<<w,U=f[w];U===-1?((I&l)===0||(I&u)!==0)&&(f[w]=bl(I,a)):U<=a&&(s.expiredLanes|=I),g&=~I}if(a=mt,l=We,l=Ki(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(it===2||it===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&za(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Qa(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&za(u),Xi(l)){case 2:case 8:l=Qi;break;case 32:l=Fa;break;case 268435456:l=Yi;break;default:l=Fa}return u=ab.bind(null,s),l=Ba(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&za(u),s.callbackPriority=2,s.callbackNode=null,2}function ab(s,a){if(rn!==0&&rn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Ad()&&s.callbackNode!==l)return null;var u=We;return u=Ki(s,s===mt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(B_(s,u,a),rb(s,zn()),s.callbackNode!=null&&s.callbackNode===l?ab.bind(null,s):null)}function ib(s,a){if(Ad())return null;B_(s,a,!0)}function rN(){mN(function(){(at&6)!==0?Ba(vl,sN):sb()})}function Ym(){return xi===0&&(xi=El()),xi}function ob(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:no(""+s)}function lb(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function aN(s,a,l,u,f){if(a==="submit"&&l&&l.stateNode===f){var g=ob((f[Pt]||null).action),w=u.submitter;w&&(a=(a=w[Pt]||null)?ob(a.formAction):w.getAttribute("formAction"),a!==null&&(g=a,w=null));var I=new so("action","action",null,u,f);s.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(xi!==0){var U=w?lb(f,w):new FormData(f);mm(l,{pending:!0,data:U,method:f.method,action:g},null,U)}}else typeof g=="function"&&(I.preventDefault(),U=w?lb(f,w):new FormData(f),mm(l,{pending:!0,data:U,method:f.method,action:g},g,U))},currentTarget:f}]})}}for(var Km=0;Km<Pf.length;Km++){var Xm=Pf[Km],iN=Xm.toLowerCase(),oN=Xm[0].toUpperCase()+Xm.slice(1);us(iN,"on"+oN)}us(By,"onAnimationEnd"),us(zy,"onAnimationIteration"),us(Fy,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(wA,"onTransitionRun"),us(AA,"onTransitionStart"),us(NA,"onTransitionCancel"),us(Hy,"onTransitionEnd"),ir("onMouseEnter",["mouseout","mouseover"]),ir("onMouseLeave",["mouseout","mouseover"]),ir("onPointerEnter",["pointerout","pointerover"]),ir("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function cb(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],f=u.event;u=u.listeners;e:{var g=void 0;if(a)for(var w=u.length-1;0<=w;w--){var I=u[w],U=I.instance,K=I.currentTarget;if(I=I.listener,U!==g&&f.isPropagationStopped())break e;g=I,f.currentTarget=K;try{g(f)}catch(te){md(te)}f.currentTarget=null,g=U}else for(w=0;w<u.length;w++){if(I=u[w],U=I.instance,K=I.currentTarget,I=I.listener,U!==g&&f.isPropagationStopped())break e;g=I,f.currentTarget=K;try{g(f)}catch(te){md(te)}f.currentTarget=null,g=U}}}}function He(s,a){var l=a[Al];l===void 0&&(l=a[Al]=new Set);var u=s+"__bubble";l.has(u)||(ub(a,s,2,!1),l.add(u))}function Wm(s,a,l){var u=0;a&&(u|=4),ub(l,s,u,a)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function Zm(s){if(!s[Cd]){s[Cd]=!0,Nl.forEach(function(l){l!=="selectionchange"&&(lN.has(l)||Wm(l,!1,s),Wm(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Cd]||(a[Cd]=!0,Wm("selectionchange",!1,a))}}function ub(s,a,l,u){switch(kb(a)){case 2:var f=ON;break;case 8:f=MN;break;default:f=hp}l=f.bind(null,a,l,s),f=void 0,!$n||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?s.addEventListener(a,l,{capture:!0,passive:f}):s.addEventListener(a,l,!0):f!==void 0?s.addEventListener(a,l,{passive:f}):s.addEventListener(a,l,!1)}function Jm(s,a,l,u,f){var g=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var I=u.stateNode.containerInfo;if(I===f)break;if(w===4)for(w=u.return;w!==null;){var U=w.tag;if((U===3||U===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;I!==null;){if(w=ar(I),w===null)return;if(U=w.tag,U===5||U===6||U===26||U===27){u=g=w;continue e}I=I.parentNode}}u=u.return}Ru(function(){var K=g,te=Gn(l),ae=[];e:{var X=Gy.get(s);if(X!==void 0){var W=so,ke=s;switch(s){case"keypress":if(Cs(l)===0)break e;case"keydown":case"keyup":W=co;break;case"focusin":ke="focus",W=io;break;case"focusout":ke="blur",W=io;break;case"beforeblur":case"afterblur":W=io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Vu;break;case By:case zy:case Fy:W=oo;break;case Hy:W=qu;break;case"scroll":case"scrollend":W=Du;break;case"wheel":W=uo;break;case"copy":case"cut":case"paste":W=lo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Vl;break;case"toggle":case"beforetoggle":W=zu}var Ce=(a&4)!==0,dt=!Ce&&(s==="scroll"||s==="scrollend"),H=Ce?X!==null?X+"Capture":null:X;Ce=[];for(var B=K,Q;B!==null;){var se=B;if(Q=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Q===null||H===null||(se=ti(B,H),se!=null&&Ce.push(pc(B,se,Q))),dt)break;B=B.return}0<Ce.length&&(X=new W(X,ke,null,l,te),ae.push({event:X,listeners:Ce}))}}if((a&7)===0){e:{if(X=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",X&&l!==cr&&(ke=l.relatedTarget||l.fromElement)&&(ar(ke)||ke[Fn]))break e;if((W||X)&&(X=te.window===te?te:(X=te.ownerDocument)?X.defaultView||X.parentWindow:window,W?(ke=l.relatedTarget||l.toElement,W=K,ke=ke?ar(ke):null,ke!==null&&(dt=c(ke),Ce=ke.tag,ke!==dt||Ce!==5&&Ce!==27&&Ce!==6)&&(ke=null)):(W=null,ke=K),W!==ke)){if(Ce=Qn,se="onMouseLeave",H="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=Vl,se="onPointerLeave",H="onPointerEnter",B="pointer"),dt=W==null?X:ws(W),Q=ke==null?X:ws(ke),X=new Ce(se,B+"leave",W,l,te),X.target=dt,X.relatedTarget=Q,se=null,ar(te)===K&&(Ce=new Ce(H,B+"enter",ke,l,te),Ce.target=Q,Ce.relatedTarget=dt,se=Ce),dt=se,W&&ke)t:{for(Ce=W,H=ke,B=0,Q=Ce;Q;Q=Mo(Q))B++;for(Q=0,se=H;se;se=Mo(se))Q++;for(;0<B-Q;)Ce=Mo(Ce),B--;for(;0<Q-B;)H=Mo(H),Q--;for(;B--;){if(Ce===H||H!==null&&Ce===H.alternate)break t;Ce=Mo(Ce),H=Mo(H)}Ce=null}else Ce=null;W!==null&&db(ae,X,W,Ce,!1),ke!==null&&dt!==null&&db(ae,dt,ke,Ce,!0)}}e:{if(X=K?ws(K):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var _e=Ry;else if(Ft(X))if(Dy)_e=EA;else{_e=_A;var ze=vA}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&Dl(K.elementType)&&(_e=Ry):_e=bA;if(_e&&(_e=_e(s,K))){mr(ae,_e,l,te);break e}ze&&ze(s,X,K),s==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&Qr(X,"number",X.value)}switch(ze=K?ws(K):window,s){case"focusin":(Ft(ze)||ze.contentEditable==="true")&&(ho=ze,Rf=K,Bl=null);break;case"focusout":Bl=Rf=ho=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,Uy(ae,l,te);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":Uy(ae,l,te)}var we;if(Ds)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ke?Z(s,l)&&(Re="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(S&&l.locale!=="ko"&&(Ke||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ke&&(we=Pl()):(Ts=te,Yr="value"in Ts?Ts.value:Ts.textContent,Ke=!0)),ze=jd(K,Re),0<ze.length&&(Re=new Ml(Re,s,null,l,te),ae.push({event:Re,listeners:ze}),we?Re.data=we:(we=pe(l),we!==null&&(Re.data=we)))),(we=_?zt(s,l):Xe(s,l))&&(Re=jd(K,"onBeforeInput"),0<Re.length&&(ze=new Ml("onBeforeInput","beforeinput",null,l,te),ae.push({event:ze,listeners:Re}),ze.data=we)),aN(ae,s,K,l,te)}cb(ae,a)})}function pc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function jd(s,a){for(var l=a+"Capture",u=[];s!==null;){var f=s,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ti(s,l),f!=null&&u.unshift(pc(s,f,g)),f=ti(s,a),f!=null&&u.push(pc(s,f,g))),s.tag===3)return u;s=s.return}return[]}function Mo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function db(s,a,l,u,f){for(var g=a._reactName,w=[];l!==null&&l!==u;){var I=l,U=I.alternate,K=I.stateNode;if(I=I.tag,U!==null&&U===u)break;I!==5&&I!==26&&I!==27||K===null||(U=K,f?(K=ti(l,g),K!=null&&w.unshift(pc(l,K,U))):f||(K=ti(l,g),K!=null&&w.push(pc(l,K,U)))),l=l.return}w.length!==0&&s.push({event:a,listeners:w})}var cN=/\r\n?/g,uN=/\u0000|\uFFFD/g;function hb(s){return(typeof s=="string"?s:""+s).replace(cN,`
`).replace(uN,"")}function fb(s,a){return a=hb(a),hb(s)===a}function Rd(){}function ut(s,a,l,u,f,g){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Hn(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Hn(s,""+u);break;case"className":As(s,"class",u);break;case"tabIndex":As(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":As(s,l,u);break;case"style":Rl(s,u,g);break;case"data":if(a!=="object"){As(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=no(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&ut(s,a,"name",f.name,f,null),ut(s,a,"formEncType",f.formEncType,f,null),ut(s,a,"formMethod",f.formMethod,f,null),ut(s,a,"formTarget",f.formTarget,f,null)):(ut(s,a,"encType",f.encType,f,null),ut(s,a,"method",f.method,f,null),ut(s,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=no(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Rd);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=no(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":He("beforetoggle",s),He("toggle",s),$r(s,"popover",u);break;case"xlinkActuate":tn(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":tn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":tn(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":tn(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":tn(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":tn(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":tn(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":tn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":tn(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$r(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Sf.get(l)||l,$r(s,l,u))}}function ep(s,a,l,u,f,g){switch(l){case"style":Rl(s,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Hn(s,u):(typeof u=="number"||typeof u=="bigint")&&Hn(s,""+u);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Rd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wi.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),g=s[Pt]||null,g=g!=null?g[l]:null,typeof g=="function"&&s.removeEventListener(a,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,f);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):$r(s,l,u)}}}function an(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",s),He("load",s);var u=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var w=l[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ut(s,a,g,w,l,null)}}f&&ut(s,a,"srcSet",l.srcSet,l,null),u&&ut(s,a,"src",l.src,l,null);return;case"input":He("invalid",s);var I=g=w=f=null,U=null,K=null;for(u in l)if(l.hasOwnProperty(u)){var te=l[u];if(te!=null)switch(u){case"name":f=te;break;case"type":w=te;break;case"checked":U=te;break;case"defaultChecked":K=te;break;case"value":g=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,a));break;default:ut(s,a,u,te,l,null)}}Za(s,g,I,U,K,w,f,!1),to(s);return;case"select":He("invalid",s),u=w=g=null;for(f in l)if(l.hasOwnProperty(f)&&(I=l[f],I!=null))switch(f){case"value":g=I;break;case"defaultValue":w=I;break;case"multiple":u=I;default:ut(s,a,f,I,l,null)}a=g,l=w,s.multiple=!!u,a!=null?lr(s,!!u,a,!1):l!=null&&lr(s,!!u,l,!0);return;case"textarea":He("invalid",s),g=f=u=null;for(w in l)if(l.hasOwnProperty(w)&&(I=l[w],I!=null))switch(w){case"value":u=I;break;case"defaultValue":f=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:ut(s,a,w,I,l,null)}Ja(s,u,f,g),to(s);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(u=l[U],u!=null))switch(U){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ut(s,a,U,u,l,null)}return;case"dialog":He("beforetoggle",s),He("toggle",s),He("cancel",s),He("close",s);break;case"iframe":case"object":He("load",s);break;case"video":case"audio":for(u=0;u<mc.length;u++)He(mc[u],s);break;case"image":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"embed":case"source":case"link":He("error",s),He("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(u=l[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ut(s,a,K,u,l,null)}return;default:if(Dl(a)){for(te in l)l.hasOwnProperty(te)&&(u=l[te],u!==void 0&&ep(s,a,te,u,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(u=l[I],u!=null&&ut(s,a,I,u,l,null))}function dN(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,w=null,I=null,U=null,K=null,te=null;for(W in l){var ae=l[W];if(l.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":U=ae;default:u.hasOwnProperty(W)||ut(s,a,W,null,u,ae)}}for(var X in u){var W=u[X];if(ae=l[X],u.hasOwnProperty(X)&&(W!=null||ae!=null))switch(X){case"type":g=W;break;case"name":f=W;break;case"checked":K=W;break;case"defaultChecked":te=W;break;case"value":w=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,a));break;default:W!==ae&&ut(s,a,X,W,u,ae)}}Rn(s,w,I,U,K,te,g,f);return;case"select":W=w=I=X=null;for(g in l)if(U=l[g],l.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":W=U;default:u.hasOwnProperty(g)||ut(s,a,g,null,u,U)}for(f in u)if(g=u[f],U=l[f],u.hasOwnProperty(f)&&(g!=null||U!=null))switch(f){case"value":X=g;break;case"defaultValue":I=g;break;case"multiple":w=g;default:g!==U&&ut(s,a,f,g,u,U)}a=I,l=w,u=W,X!=null?lr(s,!!l,X,!1):!!u!=!!l&&(a!=null?lr(s,!!l,a,!0):lr(s,!!l,l?[]:"",!1));return;case"textarea":W=X=null;for(I in l)if(f=l[I],l.hasOwnProperty(I)&&f!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ut(s,a,I,null,u,f)}for(w in u)if(f=u[w],g=l[w],u.hasOwnProperty(w)&&(f!=null||g!=null))switch(w){case"value":X=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&ut(s,a,w,f,u,g)}lt(s,X,W);return;case"option":for(var ke in l)if(X=l[ke],l.hasOwnProperty(ke)&&X!=null&&!u.hasOwnProperty(ke))switch(ke){case"selected":s.selected=!1;break;default:ut(s,a,ke,null,u,X)}for(U in u)if(X=u[U],W=l[U],u.hasOwnProperty(U)&&X!==W&&(X!=null||W!=null))switch(U){case"selected":s.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ut(s,a,U,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in l)X=l[Ce],l.hasOwnProperty(Ce)&&X!=null&&!u.hasOwnProperty(Ce)&&ut(s,a,Ce,null,u,X);for(K in u)if(X=u[K],W=l[K],u.hasOwnProperty(K)&&X!==W&&(X!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:ut(s,a,K,X,u,W)}return;default:if(Dl(a)){for(var dt in l)X=l[dt],l.hasOwnProperty(dt)&&X!==void 0&&!u.hasOwnProperty(dt)&&ep(s,a,dt,void 0,u,X);for(te in u)X=u[te],W=l[te],!u.hasOwnProperty(te)||X===W||X===void 0&&W===void 0||ep(s,a,te,X,u,W);return}}for(var H in l)X=l[H],l.hasOwnProperty(H)&&X!=null&&!u.hasOwnProperty(H)&&ut(s,a,H,null,u,X);for(ae in u)X=u[ae],W=l[ae],!u.hasOwnProperty(ae)||X===W||X==null&&W==null||ut(s,a,ae,X,u,W)}var tp=null,np=null;function Dd(s){return s.nodeType===9?s:s.ownerDocument}function mb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pb(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function sp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rp=null;function hN(){var s=window.event;return s&&s.type==="popstate"?s===rp?!1:(rp=s,!0):(rp=null,!1)}var gb=typeof setTimeout=="function"?setTimeout:void 0,fN=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,mN=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(s){return yb.resolve(null).then(s).catch(pN)}:gb;function pN(s){setTimeout(function(){throw s})}function ua(s){return s==="head"}function vb(s,a){var l=a,u=0,f=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<u&&8>u){l=u;var w=s.ownerDocument;if(l&1&&gc(w.documentElement),l&2&&gc(w.body),l&4)for(l=w.head,gc(l),w=l.firstChild;w;){var I=w.nextSibling,U=w.nodeName;w[Ya]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=I}}if(f===0){s.removeChild(g),wc(a);return}f--}else l==="$"||l==="$?"||l==="$!"?f++:u=l.charCodeAt(0)-48;else u=0;l=g}while(l);wc(a)}function ap(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ap(l),Gr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function gN(s,a,l,u){for(;s.nodeType===1;){var f=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Ya])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=hs(s.nextSibling),s===null)break}return null}function yN(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=hs(s.nextSibling),s===null))return null;return s}function ip(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function vN(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function hs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var op=null;function _b(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function bb(s,a,l){switch(a=Dd(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function gc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Gr(s)}var es=new Map,Eb=new Set;function Id(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Tr=fe.d;fe.d={f:_N,r:bN,D:EN,C:xN,L:SN,m:wN,X:NN,S:AN,M:TN};function _N(){var s=Tr.f(),a=Sd();return s||a}function bN(s){var a=Ss(s);a!==null&&a.tag===5&&a.type==="form"?Bv(a):Tr.r(s)}var Lo=typeof document>"u"?null:document;function xb(s,a,l){var u=Lo;if(u&&typeof a=="string"&&a){var f=kt(a);f='link[rel="'+s+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),Eb.has(f)||(Eb.add(f),s={rel:s,crossOrigin:l,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),an(a,"link",s),Tt(a),u.head.appendChild(a)))}}function EN(s){Tr.D(s),xb("dns-prefetch",s,null)}function xN(s,a){Tr.C(s,a),xb("preconnect",s,a)}function SN(s,a,l){Tr.L(s,a,l);var u=Lo;if(u&&s&&a){var f='link[rel="preload"][as="'+kt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+kt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+kt(l.imageSizes)+'"]')):f+='[href="'+kt(s)+'"]';var g=f;switch(a){case"style":g=Vo(s);break;case"script":g=Uo(s)}es.has(g)||(s=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),es.set(g,s),u.querySelector(f)!==null||a==="style"&&u.querySelector(yc(g))||a==="script"&&u.querySelector(vc(g))||(a=u.createElement("link"),an(a,"link",s),Tt(a),u.head.appendChild(a)))}}function wN(s,a){Tr.m(s,a);var l=Lo;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+kt(u)+'"][href="'+kt(s)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Uo(s)}if(!es.has(g)&&(s=v({rel:"modulepreload",href:s},a),es.set(g,s),l.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vc(g)))return}u=l.createElement("link"),an(u,"link",s),Tt(u),l.head.appendChild(u)}}}function AN(s,a,l){Tr.S(s,a,l);var u=Lo;if(u&&s){var f=yn(u).hoistableStyles,g=Vo(s);a=a||"default";var w=f.get(g);if(!w){var I={loading:0,preload:null};if(w=u.querySelector(yc(g)))I.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},l),(l=es.get(g))&&lp(s,l);var U=w=u.createElement("link");Tt(U),an(U,"link",s),U._p=new Promise(function(K,te){U.onload=K,U.onerror=te}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Pd(w,a,u)}w={type:"stylesheet",instance:w,count:1,state:I},f.set(g,w)}}}function NN(s,a){Tr.X(s,a);var l=Lo;if(l&&s){var u=yn(l).hoistableScripts,f=Uo(s),g=u.get(f);g||(g=l.querySelector(vc(f)),g||(s=v({src:s,async:!0},a),(a=es.get(f))&&cp(s,a),g=l.createElement("script"),Tt(g),an(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function TN(s,a){Tr.M(s,a);var l=Lo;if(l&&s){var u=yn(l).hoistableScripts,f=Uo(s),g=u.get(f);g||(g=l.querySelector(vc(f)),g||(s=v({src:s,async:!0,type:"module"},a),(a=es.get(f))&&cp(s,a),g=l.createElement("script"),Tt(g),an(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function Sb(s,a,l,u){var f=(f=Ae.current)?Id(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Vo(l.href),l=yn(f).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Vo(l.href);var g=yn(f).hoistableStyles,w=g.get(s);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,w),(g=f.querySelector(yc(s)))&&!g._p&&(w.instance=g,w.state.loading=5),es.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},es.set(s,l),g||CN(f,s,l,w.state))),a&&u===null)throw Error(r(528,""));return w}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Uo(l),l=yn(f).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Vo(s){return'href="'+kt(s)+'"'}function yc(s){return'link[rel="stylesheet"]['+s+"]"}function wb(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function CN(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),an(a,"link",l),Tt(a),s.head.appendChild(a))}function Uo(s){return'[src="'+kt(s)+'"]'}function vc(s){return"script[async]"+s}function Ab(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+kt(l.href)+'"]');if(u)return a.instance=u,Tt(u),u;var f=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Tt(u),an(u,"style",f),Pd(u,l.precedence,s),a.instance=u;case"stylesheet":f=Vo(l.href);var g=s.querySelector(yc(f));if(g)return a.state.loading|=4,a.instance=g,Tt(g),g;u=wb(l),(f=es.get(f))&&lp(u,f),g=(s.ownerDocument||s).createElement("link"),Tt(g);var w=g;return w._p=new Promise(function(I,U){w.onload=I,w.onerror=U}),an(g,"link",u),a.state.loading|=4,Pd(g,l.precedence,s),a.instance=g;case"script":return g=Uo(l.src),(f=s.querySelector(vc(g)))?(a.instance=f,Tt(f),f):(u=l,(f=es.get(g))&&(u=v({},l),cp(u,f)),s=s.ownerDocument||s,f=s.createElement("script"),Tt(f),an(f,"link",u),s.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Pd(u,l.precedence,s));return a.instance}function Pd(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,w=0;w<u.length;w++){var I=u[w];if(I.dataset.precedence===a)g=I;else if(g!==f)break}g?g.parentNode.insertBefore(s,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function lp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function cp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var kd=null;function Nb(s,a,l){if(kd===null){var u=new Map,f=kd=new Map;f.set(l,u)}else f=kd,u=f.get(l),u||(u=new Map,f.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),f=0;f<l.length;f++){var g=l[f];if(!(g[Ya]||g[Bt]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(a)||"";w=s+w;var I=u.get(w);I?I.push(g):u.set(w,[g])}}return u}function Tb(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function jN(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Cb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var _c=null;function RN(){}function DN(s,a,l){if(_c===null)throw Error(r(475));var u=_c;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Vo(l.href),g=s.querySelector(yc(f));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Od.bind(u),s.then(u,u)),a.state.loading|=4,a.instance=g,Tt(g);return}g=s.ownerDocument||s,l=wb(l),(f=es.get(f))&&lp(l,f),g=g.createElement("link"),Tt(g);var w=g;w._p=new Promise(function(I,U){w.onload=I,w.onerror=U}),an(g,"link",l),a.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=Od.bind(u),s.addEventListener("load",a),s.addEventListener("error",a))}}function IN(){if(_c===null)throw Error(r(475));var s=_c;return s.stylesheets&&s.count===0&&up(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&up(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Od(){if(this.count--,this.count===0){if(this.stylesheets)up(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Md=null;function up(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Md=new Map,a.forEach(PN,s),Md=null,Od.call(s))}function PN(s,a){if(!(a.state.loading&4)){var l=Md.get(s);if(l)var u=l.get(null);else{l=new Map,Md.set(s,l);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var w=f[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),u=w)}u&&l.set(null,u)}f=a.instance,w=f.getAttribute("data-precedence"),g=l.get(w)||u,g===u&&l.set(null,f),l.set(w,f),this.count++,u=Od.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),a.state.loading|=4}}var bc={$$typeof:F,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function kN(s,a,l,u,f,g,w,I){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function jb(s,a,l,u,f,g,w,I,U,K,te,ae){return s=new kN(s,a,l,w,I,U,K,ae),a=1,g===!0&&(a|=24),g=In(3,null,null,a),s.current=g,g.stateNode=s,a=Gf(),a.refCount++,s.pooledCache=a,a.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:a},Kf(g),s}function Rb(s){return s?(s=go,s):go}function Db(s,a,l,u,f,g){f=Rb(f),u.context===null?u.context=f:u.pendingContext=f,u=Wr(a),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Zr(s,u,a),l!==null&&(Ln(l,s,a),Xl(l,s,a))}function Ib(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function dp(s,a){Ib(s,a),(s=s.alternate)&&Ib(s,a)}function Pb(s){if(s.tag===13){var a=po(s,67108864);a!==null&&Ln(a,s,67108864),dp(s,67108864)}}var Ld=!0;function ON(s,a,l,u){var f=Y.T;Y.T=null;var g=fe.p;try{fe.p=2,hp(s,a,l,u)}finally{fe.p=g,Y.T=f}}function MN(s,a,l,u){var f=Y.T;Y.T=null;var g=fe.p;try{fe.p=8,hp(s,a,l,u)}finally{fe.p=g,Y.T=f}}function hp(s,a,l,u){if(Ld){var f=fp(u);if(f===null)Jm(s,a,u,Vd,l),Ob(s,u);else if(VN(f,s,a,l,u))u.stopPropagation();else if(Ob(s,u),a&4&&-1<LN.indexOf(s)){for(;f!==null;){var g=Ss(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=os(g.pendingLanes);if(w!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var U=1<<31-un(w);I.entanglements[1]|=U,w&=~U}Ls(g),(at&6)===0&&(Ed=zn()+500,fc(0))}}break;case 13:I=po(g,2),I!==null&&Ln(I,g,2),Sd(),dp(g,2)}if(g=fp(u),g===null&&Jm(s,a,u,Vd,l),g===f)break;f=g}f!==null&&u.stopPropagation()}else Jm(s,a,u,null,l)}}function fp(s){return s=Gn(s),mp(s)}var Vd=null;function mp(s){if(Vd=null,s=ar(s),s!==null){var a=c(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=d(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Vd=s,null}function kb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yf()){case vl:return 2;case Qi:return 8;case Fa:case vf:return 32;case Yi:return 268435456;default:return 32}default:return 32}}var pp=!1,da=null,ha=null,fa=null,Ec=new Map,xc=new Map,ma=[],LN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ob(s,a){switch(s){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Ec.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(a.pointerId)}}function Sc(s,a,l,u,f,g){return s===null||s.nativeEvent!==g?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},a!==null&&(a=Ss(a),a!==null&&Pb(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),s)}function VN(s,a,l,u,f){switch(a){case"focusin":return da=Sc(da,s,a,l,u,f),!0;case"dragenter":return ha=Sc(ha,s,a,l,u,f),!0;case"mouseover":return fa=Sc(fa,s,a,l,u,f),!0;case"pointerover":var g=f.pointerId;return Ec.set(g,Sc(Ec.get(g)||null,s,a,l,u,f)),!0;case"gotpointercapture":return g=f.pointerId,xc.set(g,Sc(xc.get(g)||null,s,a,l,u,f)),!0}return!1}function Mb(s){var a=ar(s.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){s.blockedOn=a,Su(s.priority,function(){if(l.tag===13){var u=Mn();u=zr(u);var f=po(l,u);f!==null&&Ln(f,l,u),dp(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ud(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=fp(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);cr=u,l.target.dispatchEvent(u),cr=null}else return a=Ss(l),a!==null&&Pb(a),s.blockedOn=l,!1;a.shift()}return!0}function Lb(s,a,l){Ud(s)&&l.delete(a)}function UN(){pp=!1,da!==null&&Ud(da)&&(da=null),ha!==null&&Ud(ha)&&(ha=null),fa!==null&&Ud(fa)&&(fa=null),Ec.forEach(Lb),xc.forEach(Lb)}function qd(s,a){s.blockedOn===a&&(s.blockedOn=null,pp||(pp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UN)))}var Bd=null;function Vb(s){Bd!==s&&(Bd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bd===s&&(Bd=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],f=s[a+2];if(typeof u!="function"){if(mp(u||l)===null)continue;break}var g=Ss(l);g!==null&&(s.splice(a,3),a-=3,mm(g,{pending:!0,data:f,method:l.method,action:u},u,f))}}))}function wc(s){function a(U){return qd(U,s)}da!==null&&qd(da,s),ha!==null&&qd(ha,s),fa!==null&&qd(fa,s),Ec.forEach(a),xc.forEach(a);for(var l=0;l<ma.length;l++){var u=ma[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<ma.length&&(l=ma[0],l.blockedOn===null);)Mb(l),l.blockedOn===null&&ma.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],w=f[Pt]||null;if(typeof g=="function")w||Vb(l);else if(w){var I=null;if(g&&g.hasAttribute("formAction")){if(f=g,w=g[Pt]||null)I=w.formAction;else if(mp(f)!==null)continue}else I=w.action;typeof I=="function"?l[u+1]=I:(l.splice(u,3),u-=3),Vb(l)}}}function gp(s){this._internalRoot=s}zd.prototype.render=gp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,u=Mn();Db(l,u,s,a,null,null)},zd.prototype.unmount=gp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Db(s.current,2,null,s,null,null),Sd(),a[Fn]=null}};function zd(s){this._internalRoot=s}zd.prototype.unstable_scheduleHydration=function(s){if(s){var a=Fr();s={blockedOn:null,target:s,priority:a};for(var l=0;l<ma.length&&a!==0&&a<ma[l].priority;l++);ma.splice(l,0,s),l===0&&Mb(s)}};var Ub=e.version;if(Ub!=="19.1.1")throw Error(r(527,Ub,"19.1.1"));fe.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=y(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var qN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{wt=Fd.inject(qN),rt=Fd}catch{}}return Nc.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,u="",f=t_,g=n_,w=s_,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks)),a=jb(s,1,!1,null,null,l,u,f,g,w,I,null),s[Fn]=a.current,Zm(s),new gp(a)},Nc.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var u=!1,f="",g=t_,w=n_,I=s_,U=null,K=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(U=l.unstable_transitionCallbacks),l.formState!==void 0&&(K=l.formState)),a=jb(s,1,!0,a,l??null,u,f,g,w,I,U,K),a.context=Rb(null),l=a.current,u=Mn(),u=zr(u),f=Wr(u),f.callback=null,Zr(l,f,u),l=u,a.current.lanes=l,rr(a,l),Ls(a),s[Fn]=a.current,Zm(s),new zd(a)},Nc.version="19.1.1",Nc}var Kb;function WN(){if(Kb)return _p.exports;Kb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_p.exports=XN(),_p.exports}var ZN=WN();const JN=()=>{};var Xb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},eT=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const c=n[t++];e[r++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=n[t++],d=n[t++],m=n[t++],y=((i&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=n[t++],d=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(c&63)<<6|d&63)}}return e.join("")},ox={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const c=n[i],d=i+1<n.length,m=d?n[i+1]:0,y=i+2<n.length,p=y?n[i+2]:0,v=c>>2,E=(c&3)<<4|m>>4;let b=(m&15)<<2|p>>6,x=p&63;y||(x=64,d||(b=64)),r.push(t[v],t[E],t[b],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ix(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const c=t[n.charAt(i++)],m=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const E=i<n.length?t[n.charAt(i)]:64;if(++i,c==null||m==null||p==null||E==null)throw new tT;const b=c<<2|m>>4;if(r.push(b),p!==64){const x=m<<4&240|p>>2;if(r.push(x),E!==64){const R=p<<6&192|E;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nT=function(n){const e=ix(n);return ox.encodeByteArray(e,!0)},dh=function(n){return nT(n).replace(/\./g,"")},lx=function(n){try{return ox.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=()=>sT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>"u"||typeof Xb>"u")return;const n=Xb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lx(n[1]);return e&&JSON.parse(e)},Vh=()=>{try{return JN()||rT()||aT()||iT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cx=n=>Vh()?.emulatorHosts?.[n],ux=n=>{const e=cx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},dx=()=>Vh()?.config,hx=n=>Vh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dh(JSON.stringify(t)),dh(JSON.stringify(d)),""].join(".")}const Mc={};function lT(){const n={prod:[],emulator:[]};for(const e of Object.keys(Mc))Mc[e]?n.emulator.push(e):n.prod.push(e);return n}function cT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Wb=!1;function Eg(n,e){if(typeof window>"u"||typeof document>"u"||!qi(window.location.host)||Mc[n]===e||Mc[n]||Wb)return;Mc[n]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",c=lT().prod.length>0;function d(){const b=document.getElementById(r);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function y(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Wb=!0,d()},b}function v(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=cT(r),x=t("text"),R=document.getElementById(x)||document.createElement("span"),A=t("learnmore"),q=document.getElementById(A)||document.createElement("a"),D=t("preprendIcon"),z=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const F=b.element;m(F),v(q,A);const de=p();y(z,D),F.append(z,R,q,de),document.body.appendChild(F)}c?(R.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function dT(){const n=Vh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pT(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gT(){return!dT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yT(){try{return typeof indexedDB=="object"}catch{return!1}}function vT(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="FirebaseError";class Js extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_T,Object.setPrototypeOf(this,Js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,c=this.errors[e],d=c?bT(c,r):"Error",m=`${this.serviceName}: ${d} (${i}).`;return new Js(i,m,r)}}function bT(n,e){return n.replace(ET,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ET=/\{\$([^}]+)}/g;function xT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ii(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const c=n[i],d=e[i];if(Zb(c)&&Zb(d)){if(!Ii(c,d))return!1}else if(c!==d)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Zb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,c]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(c)}}),e}function Rc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ST(n,e){const t=new wT(n,e);return t.subscribe.bind(t)}class wT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");AT(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Sp),i.error===void 0&&(i.error=Sp),i.complete===void 0&&(i.complete=Sp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){return n&&n._delegate?n._delegate:n}class ja{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new oT;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CT(e))try{this.getOrInitializeService({instanceIdentifier:Ai})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:i});r.resolve(c)}catch{}}}}clearInstance(e=Ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ai){return this.instances.has(e)}getOptions(e=Ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const c=this.instances.get(r);return c&&e(c,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TT(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ai){return this.component?this.component.multipleInstances?e:Ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TT(n){return n===Ai?void 0:n}function CT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new NT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const RT={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},DT=$e.INFO,IT={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},PT=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=IT[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xg{constructor(e){this.name=e,this._logLevel=DT,this._logHandler=PT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const kT=(n,e)=>e.some(t=>n instanceof t);let Jb,eE;function OT(){return Jb||(Jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MT(){return eE||(eE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mx=new WeakMap,qp=new WeakMap,px=new WeakMap,wp=new WeakMap,Sg=new WeakMap;function LT(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(Aa(n.result)),i()},d=()=>{r(n.error),i()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&mx.set(t,n)}).catch(()=>{}),Sg.set(e,n),e}function VT(n){if(qp.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),i()},d=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});qp.set(n,e)}let Bp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||px.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Aa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UT(n){Bp=n(Bp)}function qT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ap(this),e,...t);return px.set(r,e.sort?e.sort():[e]),Aa(r)}:MT().includes(n)?function(...e){return n.apply(Ap(this),e),Aa(mx.get(this))}:function(...e){return Aa(n.apply(Ap(this),e))}}function BT(n){return typeof n=="function"?qT(n):(n instanceof IDBTransaction&&VT(n),kT(n,OT())?new Proxy(n,Bp):n)}function Aa(n){if(n instanceof IDBRequest)return LT(n);if(wp.has(n))return wp.get(n);const e=BT(n);return e!==n&&(wp.set(n,e),Sg.set(e,n)),e}const Ap=n=>Sg.get(n);function zT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:c}={}){const d=indexedDB.open(n,e),m=Aa(d);return r&&d.addEventListener("upgradeneeded",y=>{r(Aa(d.result),y.oldVersion,y.newVersion,Aa(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),i&&y.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const FT=["get","getKey","getAll","getAllKeys","count"],HT=["put","add","delete","clear"],Np=new Map;function tE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=HT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FT.includes(t)))return;const c=async function(d,...m){const y=this.transaction(d,i?"readwrite":"readonly");let p=y.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),i&&y.done]))[0]};return Np.set(e,c),c}UT(n=>({...n,get:(e,t,r)=>tE(e,t)||n.get(e,t,r),has:(e,t)=>!!tE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($T(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $T(n){return n.getComponent()?.type==="VERSION"}const zp="@firebase/app",nE="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new xg("@firebase/app"),QT="@firebase/app-compat",YT="@firebase/analytics-compat",KT="@firebase/analytics",XT="@firebase/app-check-compat",WT="@firebase/app-check",ZT="@firebase/auth",JT="@firebase/auth-compat",e1="@firebase/database",t1="@firebase/data-connect",n1="@firebase/database-compat",s1="@firebase/functions",r1="@firebase/functions-compat",a1="@firebase/installations",i1="@firebase/installations-compat",o1="@firebase/messaging",l1="@firebase/messaging-compat",c1="@firebase/performance",u1="@firebase/performance-compat",d1="@firebase/remote-config",h1="@firebase/remote-config-compat",f1="@firebase/storage",m1="@firebase/storage-compat",p1="@firebase/firestore",g1="@firebase/ai",y1="@firebase/firestore-compat",v1="firebase",_1="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="[DEFAULT]",b1={[zp]:"fire-core",[QT]:"fire-core-compat",[KT]:"fire-analytics",[YT]:"fire-analytics-compat",[WT]:"fire-app-check",[XT]:"fire-app-check-compat",[ZT]:"fire-auth",[JT]:"fire-auth-compat",[e1]:"fire-rtdb",[t1]:"fire-data-connect",[n1]:"fire-rtdb-compat",[s1]:"fire-fn",[r1]:"fire-fn-compat",[a1]:"fire-iid",[i1]:"fire-iid-compat",[o1]:"fire-fcm",[l1]:"fire-fcm-compat",[c1]:"fire-perf",[u1]:"fire-perf-compat",[d1]:"fire-rc",[h1]:"fire-rc-compat",[f1]:"fire-gcs",[m1]:"fire-gcs-compat",[p1]:"fire-fst",[y1]:"fire-fst-compat",[g1]:"fire-vertex","fire-js":"fire-js",[v1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new Map,Hp=new Map,Gp=new Map;function sE(n,e){try{n.container.addComponent(e)}catch(t){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pi(n){const e=n.name;if(Gp.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,n);for(const t of Wo.values())sE(t,n);for(const t of Hp.values())sE(t,n);return!0}function Uh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Na=new nu("app","Firebase",E1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Na.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=_1;function wg(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Fp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Na.create("bad-app-name",{appName:String(i)});if(t||(t=dx()),!t)throw Na.create("no-options");const c=Wo.get(i);if(c){if(Ii(t,c.options)&&Ii(r,c.config))return c;throw Na.create("duplicate-app",{appName:i})}const d=new jT(i);for(const y of Gp.values())d.addComponent(y);const m=new x1(t,r,d);return Wo.set(i,m),m}function Ag(n=Fp){const e=Wo.get(n);if(!e&&n===Fp&&dx())return wg();if(!e)throw Na.create("no-app",{appName:n});return e}async function S1(n){let e=!1;const t=n.name;Wo.has(t)?(e=!0,Wo.delete(t)):Hp.has(t)&&n.decRefCount()<=0&&(Hp.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Hs(n,e,t){let r=b1[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const d=[`Unable to register library "${r}" with version "${e}":`];i&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(d.join(" "));return}Pi(new ja(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebase-heartbeat-database",A1=1,zc="firebase-heartbeat-store";let Tp=null;function gx(){return Tp||(Tp=zT(w1,A1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Na.create("idb-open",{originalErrorMessage:n.message})})),Tp}async function N1(n){try{const t=(await gx()).transaction(zc),r=await t.objectStore(zc).get(yx(n));return await t.done,r}catch(e){if(e instanceof Js)kr.warn(e.message);else{const t=Na.create("idb-get",{originalErrorMessage:e?.message});kr.warn(t.message)}}}async function rE(n,e){try{const r=(await gx()).transaction(zc,"readwrite");await r.objectStore(zc).put(e,yx(n)),await r.done}catch(t){if(t instanceof Js)kr.warn(t.message);else{const r=Na.create("idb-set",{originalErrorMessage:t?.message});kr.warn(r.message)}}}function yx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=1024,C1=30;class j1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new D1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=aE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>C1){const i=I1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){kr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=aE(),{heartbeatsToSend:t,unsentEntries:r}=R1(this._heartbeatsCache.heartbeats),i=dh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return kr.warn(e),""}}}function aE(){return new Date().toISOString().substring(0,10)}function R1(n,e=T1){const t=[];let r=n.slice();for(const i of n){const c=t.find(d=>d.agent===i.agent);if(c){if(c.dates.push(i.date),iE(t)>e){c.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class D1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yT()?vT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await N1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iE(n){return dh(JSON.stringify({version:2,heartbeats:n})).length}function I1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n){Pi(new ja("platform-logger",e=>new GT(e),"PRIVATE")),Pi(new ja("heartbeat",e=>new j1(e),"PRIVATE")),Hs(zp,nE,n),Hs(zp,nE,"esm2020"),Hs("fire-js","")}P1("");var k1="firebase",O1="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(k1,O1,"app");function vx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M1=vx,_x=new nu("auth","Firebase",vx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new xg("@firebase/auth");function L1(n,...e){hh.logLevel<=$e.WARN&&hh.warn(`Auth (${Bi}): ${n}`,...e)}function Zd(n,...e){hh.logLevel<=$e.ERROR&&hh.error(`Auth (${Bi}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(n,...e){throw Ng(n,...e)}function Gs(n,...e){return Ng(n,...e)}function bx(n,e,t){const r={...M1(),[e]:t};return new nu("auth","Firebase",r).create(e,{appName:n.name})}function Dr(n){return bx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ng(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _x.create(n,...e)}function Ie(n,e,...t){if(!n)throw Ng(e,...t)}function jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zd(e),new Error(e)}function Or(n,e){n||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){return typeof self<"u"&&self.location?.href||""}function V1(){return oE()==="http:"||oE()==="https:"}function oE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V1()||fT()||"connection"in navigator)?navigator.onLine:!0}function q1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,Or(t>e,"Short delay should be less than long delay!"),this.isMobile=uT()||mT()}get(){return U1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(n,e){Or(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F1=new ru(3e4,6e4);function Ur(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function qr(n,e,t,r,i={}){return xx(n,i,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const m=su({key:n.config.apiKey,...d}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:y,...c};return hT()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&qi(n.emulatorConfig.host)&&(p.credentials="include"),Ex.fetch()(await Sx(n,n.config.apiHost,t,m),p)})}async function xx(n,e,t){n._canInitEmulator=!1;const r={...B1,...e};try{const i=new G1(n),c=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Hd(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[y,p]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hd(n,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Hd(n,"email-already-in-use",d);if(y==="USER_DISABLED")throw Hd(n,"user-disabled",d);const v=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw bx(n,v,p);ps(n,v)}}catch(i){if(i instanceof Js)throw i;ps(n,"network-request-failed",{message:String(i)})}}async function au(n,e,t,r,i={}){const c=await qr(n,e,t,r,i);return"mfaPendingCredential"in c&&ps(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function Sx(n,e,t,r){const i=`${e}${t}?${r}`,c=n,d=c.config.emulator?Tg(n.config,i):`${n.config.apiScheme}://${i}`;return z1.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function H1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class G1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Gs(this.auth,"network-request-failed")),F1.get())})}}function Hd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Gs(n,e,r);return i.customData._tokenResponse=t,i}function lE(n){return n!==void 0&&n.enterprise!==void 0}class $1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return H1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Q1(n,e){return qr(n,"GET","/v2/recaptchaConfig",Ur(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(n,e){return qr(n,"POST","/v1/accounts:delete",e)}async function fh(n,e){return qr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K1(n,e=!1){const t=Yt(n),r=await t.getIdToken(e),i=Cg(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,d=c?.sign_in_provider;return{claims:i,token:r,authTime:Lc(Cp(i.auth_time)),issuedAtTime:Lc(Cp(i.iat)),expirationTime:Lc(Cp(i.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Cp(n){return Number(n)*1e3}function Cg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zd("JWT malformed, contained fewer than 3 sections"),null;try{const i=lx(t);return i?JSON.parse(i):(Zd("Failed to decode base64 JWT payload"),null)}catch(i){return Zd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cE(n){const e=Cg(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Js&&X1(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function X1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lc(this.lastLoginAt),this.creationTime=Lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(n){const e=n.auth,t=await n.getIdToken(),r=await Fc(n,fh(e,{idToken:t}));Ie(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const c=i.providerUserInfo?.length?wx(i.providerUserInfo):[],d=J1(n.providerData,c),m=n.isAnonymous,y=!(n.email&&i.passwordHash)&&!d?.length,p=m?y:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new Qp(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function Z1(n){const e=Yt(n);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J1(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wx(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(n,e){const t=await xx(n,{},async()=>{const r=su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=n.config,d=await Sx(n,i,"/v1/token",`key=${c}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:r};return n.emulatorConfig&&qi(n.emulatorConfig.host)&&(y.credentials="include"),Ex.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tC(n,e){return qr(n,"POST","/v2/accounts:revokeToken",Ur(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=cE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:c}=await eC(e,t);this.updateTokensAndExpiration(r,i,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:c}=t,d=new $o;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),d.accessToken=i),c&&(Ie(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new W1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Fc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return K1(this,e)}reload(){return Z1(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await Fc(this,Y1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:x,providerData:R,stsTokenManager:A}=t;Ie(E&&A,e,"internal-error");const q=$o.fromJSON(this.name,A);Ie(typeof E=="string",e,"internal-error"),ga(r,e.name),ga(i,e.name),Ie(typeof b=="boolean",e,"internal-error"),Ie(typeof x=="boolean",e,"internal-error"),ga(c,e.name),ga(d,e.name),ga(m,e.name),ga(y,e.name),ga(p,e.name),ga(v,e.name);const D=new fs({uid:E,auth:e,email:i,emailVerified:b,displayName:r,isAnonymous:x,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:q,createdAt:p,lastLoginAt:v});return R&&Array.isArray(R)&&(D.providerData=R.map(z=>({...z}))),y&&(D._redirectEventId=y),D}static async _fromIdTokenResponse(e,t,r=!1){const i=new $o;i.updateFromServerResponse(t);const c=new fs({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mh(c),c}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ie(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?wx(i.providerUserInfo):[],d=!(i.email&&i.passwordHash)&&!c?.length,m=new $o;m.updateFromIdToken(r);const y=new fs({uid:i.localId,auth:e,stsTokenManager:m,isAnonymous:d}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Qp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;function Rr(n){Or(n instanceof Function,"Expected a class definition");let e=uE.get(n);return e?(Or(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ax.type="NONE";const dE=Ax;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n,e,t){return`firebase:${n}:${e}:${t}`}class Qo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:c}=this.auth;this.fullUserKey=Jd(this.userKey,i.apiKey,c),this.fullPersistenceKey=Jd("persistence",i.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fh(this.auth,{idToken:e}).catch(()=>{});return t?fs._fromGetAccountInfoResponse(this.auth,t,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Qo(Rr(dE),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=i[0]||Rr(dE);const d=Jd(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const v=await p._get(d);if(v){let E;if(typeof v=="string"){const b=await fh(e,{idToken:v}).catch(()=>{});if(!b)break;E=await fs._fromGetAccountInfoResponse(e,b,v)}else E=fs._fromJSON(e,v);p!==c&&(m=E),c=p;break}}catch{}const y=i.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Qo(c,e,r):(c=y[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(d)}catch{}})),new Qo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dx(e))return"Blackberry";if(Ix(e))return"Webos";if(Tx(e))return"Safari";if((e.includes("chrome/")||Cx(e))&&!e.includes("edge/"))return"Chrome";if(Rx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Nx(n=gn()){return/firefox\//i.test(n)}function Tx(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cx(n=gn()){return/crios\//i.test(n)}function jx(n=gn()){return/iemobile/i.test(n)}function Rx(n=gn()){return/android/i.test(n)}function Dx(n=gn()){return/blackberry/i.test(n)}function Ix(n=gn()){return/webos/i.test(n)}function jg(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nC(n=gn()){return jg(n)&&!!window.navigator?.standalone}function sC(){return pT()&&document.documentMode===10}function Px(n=gn()){return jg(n)||Rx(n)||Ix(n)||Dx(n)||/windows phone/i.test(n)||jx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n,e=[]){let t;switch(n){case"Browser":t=hE(gn());break;case"Worker":t=`${hE(gn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((d,m)=>{try{const y=e(c);d(y)}catch(y){m(y)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(n,e={}){return qr(n,"GET","/v2/passwordPolicy",Ur(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=6;class oC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fE(this),this.idTokenSubscription=new fE(this),this.beforeStateQueue=new rC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_x,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fh(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Dr(this));const t=e?Yt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aC(this),t=new oC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,r,i);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&L1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function La(n){return Yt(n)}class fE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ST(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cC(n){qh=n}function Ox(n){return qh.loadJS(n)}function uC(){return qh.recaptchaEnterpriseScript}function dC(){return qh.gapiScript}function hC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class fC{constructor(){this.enterprise=new mC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pC="recaptcha-enterprise",Mx="NO_RECAPTCHA";class gC{constructor(e){this.type=pC,this.auth=La(e)}async verify(e="verify",t=!1){async function r(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{Q1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new $1(y);return c.tenantId==null?c._agentRecaptchaConfig=p:c._tenantRecaptchaConfigs[c.tenantId]=p,d(p.siteKey)}}).catch(y=>{m(y)})})}function i(c,d,m){const y=window.grecaptcha;lE(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(p=>{d(p)}).catch(()=>{d(Mx)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fC().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(m=>{if(!t&&lE(window.grecaptcha))i(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=uC();y.length!==0&&(y+=m),Ox(y).then(()=>{i(m,c,d)}).catch(p=>{d(p)})}}).catch(m=>{d(m)})})}}async function mE(n,e,t,r=!1,i=!1){const c=new gC(n);let d;if(i)d=Mx;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function ph(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await mE(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await mE(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n,e){const t=Uh(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),c=t.getOptions();if(Ii(c,e??{}))return i;ps(i,"already-initialized")}return t.initialize({options:e})}function vC(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Rr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function _C(n,e,t){const r=La(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,c=Lx(e),{host:d,port:m}=bC(e),y=m===null?"":`:${m}`,p={url:`${c}//${d}${y}/`},v=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Ii(p,r.config.emulator)&&Ii(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,qi(d)?(bg(`${c}//${d}${y}`),Eg("Auth",!0)):EC()}function Lx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bC(n){const e=Lx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const c=i[1];return{host:c,port:pE(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:pE(d)}}}function pE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function EC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function xC(n,e){return qr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(n,e){return au(n,"POST","/v1/accounts:signInWithPassword",Ur(n,e))}async function wC(n,e){return qr(n,"POST","/v1/accounts:sendOobCode",Ur(n,e))}async function AC(n,e){return wC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(n,e){return au(n,"POST","/v1/accounts:signInWithEmailLink",Ur(n,e))}async function TC(n,e){return au(n,"POST","/v1/accounts:signInWithEmailLink",Ur(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends Rg{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Hc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Hc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,t,"signInWithPassword",SC);case"emailLink":return NC(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,r,"signUpPassword",xC);case"emailLink":return TC(e,{idToken:t,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(n,e){return au(n,"POST","/v1/accounts:signInWithIdp",Ur(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="http://localhost";class ki extends Rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...c}=t;if(!r||!i)return null;const d=new ki(r,i);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Yo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Yo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yo(e,t)}buildRequest(){const e={requestUri:CC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=su(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RC(n){const e=jc(Rc(n)).link,t=e?jc(Rc(e)).deep_link_id:null,r=jc(Rc(n)).deep_link_id;return(r?jc(Rc(r)).link:null)||r||t||e||n}class Dg{constructor(e){const t=jc(Rc(e)),r=t.apiKey??null,i=t.oobCode??null,c=jC(t.mode??null);Ie(r&&i&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=RC(e);try{return new Dg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(e,t){return Hc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Dg.parseLink(t);return Ie(r,"argument-error"),Hc._fromEmailAndCode(e,r.code,r.tenantId)}}ll.PROVIDER_ID="password";ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Vx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends iu{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.FACEBOOK_SIGN_IN_METHOD="facebook.com";va.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ki._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _a.credential(t,r)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends iu{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.GITHUB_SIGN_IN_METHOD="github.com";ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends iu{constructor(){super("twitter.com")}static credential(e,t){return ki._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ea.credential(t,r)}catch{return null}}}Ea.TWITTER_SIGN_IN_METHOD="twitter.com";Ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(n,e){return au(n,"POST","/v1/accounts:signUp",Ur(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const c=await fs._fromIdTokenResponse(e,r,i),d=gE(r);return new Oi({user:c,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=gE(r);return new Oi({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function gE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Js{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new gh(e,t,r,i)}}function Ux(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(n,c,e,r):c})}async function IC(n,e,t=!1){const r=await Fc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Oi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(n,e,t=!1){const{auth:r}=n;if(Vn(r.app))return Promise.reject(Dr(r));const i="reauthenticate";try{const c=await Fc(n,Ux(r,i,e,n),t);Ie(c.idToken,r,"internal-error");const d=Cg(c.idToken);Ie(d,r,"internal-error");const{sub:m}=d;return Ie(n.uid===m,r,"user-mismatch"),Oi._forOperation(n,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&ps(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(n,e,t=!1){if(Vn(n.app))return Promise.reject(Dr(n));const r="signIn",i=await Ux(n,r,e),c=await Oi._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(c.user),c}async function kC(n,e){return qx(La(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(n){const e=La(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OC(n,e,t){const r=La(n);await ph(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AC)}async function MC(n,e,t){if(Vn(n.app))return Promise.reject(Dr(n));const r=La(n),d=await ph(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DC).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Bx(n),y}),m=await Oi._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(m.user),m}function LC(n,e,t){return Vn(n.app)?Promise.reject(Dr(n)):kC(Yt(n),ll.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Bx(n),r})}function VC(n,e,t,r){return Yt(n).onIdTokenChanged(e,t,r)}function UC(n,e,t){return Yt(n).beforeAuthStateChanged(e,t)}function qC(n,e,t,r){return Yt(n).onAuthStateChanged(e,t,r)}function yE(n){return Yt(n).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=1e3,zC=10;class Fx extends zx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Px(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,y)=>{this.notifyListeners(d,y)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);sC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zC):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fx.type="LOCAL";const FC=Fx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx extends zx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hx.type="SESSION";const Gx=Hx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Bh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:c}=t.data,d=this.handlersMap[i];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const m=Array.from(d).map(async p=>p(t.origin,c)),y=await HC(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,d;return new Promise((m,y)=>{const p=Ig("",20);i.port1.start();const v=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:i,onMessage(E){const b=E;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(b.data.response);break;default:clearTimeout(v),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),i.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return window}function $C(n){$s().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return typeof $s().WorkerGlobalScope<"u"&&typeof $s().importScripts=="function"}async function QC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YC(){return navigator?.serviceWorker?.controller||null}function KC(){return $x()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="firebaseLocalStorageDb",XC=1,vh="firebaseLocalStorage",Yx="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zh(n,e){return n.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function WC(){const n=indexedDB.deleteDatabase(Qx);return new ou(n).toPromise()}function Yp(){const n=indexedDB.open(Qx,XC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vh,{keyPath:Yx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await WC(),e(await Yp()))})})}async function vE(n,e,t){const r=zh(n,!0).put({[Yx]:e,value:t});return new ou(r).toPromise()}async function ZC(n,e){const t=zh(n,!1).get(e),r=await new ou(t).toPromise();return r===void 0?null:r.value}function _E(n,e){const t=zh(n,!0).delete(e);return new ou(t).toPromise()}const JC=800,ej=3;class Kx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ej)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $x()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance(KC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QC(),!this.activeServiceWorker)return;this.sender=new GC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await vE(e,yh,"1"),await _E(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>vE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ZC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_E(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=zh(i,!1).getAll();return new ou(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kx.type="LOCAL";const tj=Kx;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(n,e){return e?Rr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends Rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sj(n){return qx(n.auth,new Pg(n),n.bypassAuthState)}function rj(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),PC(t,new Pg(n),n.bypassAuthState)}async function aj(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),IC(t,new Pg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t,r,i,c=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sj;case"linkViaPopup":case"linkViaRedirect":return aj;case"reauthViaPopup":case"reauthViaRedirect":return rj;default:ps(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new ru(2e3,1e4);class Go extends Xx{constructor(e,t,r,i,c){super(e,t,i,c),this.provider=r,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=Ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ij.get())};e()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="pendingRedirect",eh=new Map;class lj extends Xx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=eh.get(this.auth._key());if(!e){try{const r=await cj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}eh.set(this.auth._key(),e)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cj(n,e){const t=hj(e),r=dj(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function uj(n,e){eh.set(n._key(),e)}function dj(n){return Rr(n._redirectPersistence)}function hj(n){return Jd(oj,n.config.apiKey,n.name)}async function fj(n,e,t=!1){if(Vn(n.app))return Promise.reject(Dr(n));const r=La(n),i=nj(r,e),d=await new lj(r,i,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=600*1e3;class pj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Wx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Gs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mj&&this.cachedEventUids.clear(),this.cachedEventUids.has(bE(e))}saveEventToCache(e){this.cachedEventUids.add(bE(e)),this.lastProcessedEventTime=Date.now()}}function bE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Wx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function gj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(n,e={}){return qr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_j=/^https?/;async function bj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await yj(n);for(const t of e)try{if(Ej(t))return}catch{}ps(n,"unauthorized-domain")}function Ej(n){const e=$p(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!_j.test(t))return!1;if(vj.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new ru(3e4,6e4);function EE(){const n=$s().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Sj(n){return new Promise((e,t)=>{function r(){EE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EE(),t(Gs(n,"network-request-failed"))},timeout:xj.get()})}if($s().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($s().gapi?.load)r();else{const i=hC("iframefcb");return $s()[i]=()=>{gapi.load?r():t(Gs(n,"network-request-failed"))},Ox(`${dC()}?onload=${i}`).catch(c=>t(c))}}).catch(e=>{throw th=null,e})}let th=null;function wj(n){return th=th||Sj(n),th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new ru(5e3,15e3),Nj="__/auth/iframe",Tj="emulator/auth/iframe",Cj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rj(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tg(e,Tj):`https://${n.config.authDomain}/${Nj}`,r={apiKey:e.apiKey,appName:n.name,v:Bi},i=jj.get(n.config.apiHost);i&&(r.eid=i);const c=n._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${su(r).slice(1)}`}async function Dj(n){const e=await wj(n),t=$s().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:Rj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cj,dontclear:!0},r=>new Promise(async(i,c)=>{await r.restyle({setHideOnLeave:!1});const d=Gs(n,"network-request-failed"),m=$s().setTimeout(()=>{c(d)},Aj.get());function y(){$s().clearTimeout(m),i(r)}r.ping(y).then(y,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pj=500,kj=600,Oj="_blank",Mj="http://localhost";class xE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lj(n,e,t,r=Pj,i=kj){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const y={...Ij,width:r.toString(),height:i.toString(),top:c,left:d},p=gn().toLowerCase();t&&(m=Cx(p)?Oj:t),Nx(p)&&(e=e||Mj,y.scrollbars="yes");const v=Object.entries(y).reduce((b,[x,R])=>`${b}${x}=${R},`,"");if(nC(p)&&m!=="_self")return Vj(e||"",m),new xE(null);const E=window.open(e||"",m,v);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new xE(E)}function Vj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="__/auth/handler",qj="emulator/auth/handler",Bj=encodeURIComponent("fac");async function SE(n,e,t,r,i,c){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bi,eventId:i};if(e instanceof Vx){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",xT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))d[v]=E}if(e instanceof iu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(d.scopes=v.join(","))}n.tenantId&&(d.tid=n.tenantId);const m=d;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const y=await n._getAppCheckToken(),p=y?`#${Bj}=${encodeURIComponent(y)}`:"";return`${zj(n)}?${su(m).slice(1)}${p}`}function zj({config:n}){return n.emulator?Tg(n,qj):`https://${n.authDomain}/${Uj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="webStorageSupport";class Fj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gx,this._completeRedirectFn=fj,this._overrideRedirectResult=uj}async _openPopup(e,t,r,i){Or(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await SE(e,t,r,$p(),i);return Lj(e,c,Ig())}async _openRedirect(e,t,r,i){await this._originValidation(e);const c=await SE(e,t,r,$p(),i);return $C(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:c}=this.eventManagers[t];return i?Promise.resolve(i):(Or(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Dj(e),r=new pj(e);return t.register("authEvent",i=>(Ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jp,{type:jp},i=>{const c=i?.[0]?.[jp];c!==void 0&&t(!!c),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Px()||Tx()||jg()}}const Hj=Fj;var wE="@firebase/auth",AE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qj(n){Pi(new ja("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Ie(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kx(n)},p=new lC(r,i,c,y);return vC(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pi(new ja("auth-internal",e=>{const t=La(e.getProvider("auth").getImmediate());return(r=>new Gj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(wE,AE,$j(n)),Hs(wE,AE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=300,Kj=hx("authIdTokenMaxAge")||Yj;let NE=null;const Xj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Kj)return;const i=t?.token;NE!==i&&(NE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zx(n=Ag()){const e=Uh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=yC(n,{popupRedirectResolver:Hj,persistence:[tj,FC,Gx]}),r=hx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=Xj(c.toString());UC(t,d,()=>d(t.currentUser)),VC(t,m=>d(m))}}const i=cx("auth");return i&&_C(t,`http://${i}`),t}function Wj(){return document.getElementsByTagName("head")?.[0]??document}cC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const c=Gs("internal-error");c.customData=i,t(c)},r.type="text/javascript",r.charset="UTF-8",Wj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qj("Browser");var TE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ta,Jx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,j){function O(){}O.prototype=j.prototype,M.D=j.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(L,N,C){for(var T=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)T[ee-2]=arguments[ee];return j.prototype[N].apply(L,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,j,O){O||(O=0);var L=Array(16);if(typeof j=="string")for(var N=0;16>N;++N)L[N]=j.charCodeAt(O++)|j.charCodeAt(O++)<<8|j.charCodeAt(O++)<<16|j.charCodeAt(O++)<<24;else for(N=0;16>N;++N)L[N]=j[O++]|j[O++]<<8|j[O++]<<16|j[O++]<<24;j=M.g[0],O=M.g[1],N=M.g[2];var C=M.g[3],T=j+(C^O&(N^C))+L[0]+3614090360&4294967295;j=O+(T<<7&4294967295|T>>>25),T=C+(N^j&(O^N))+L[1]+3905402710&4294967295,C=j+(T<<12&4294967295|T>>>20),T=N+(O^C&(j^O))+L[2]+606105819&4294967295,N=C+(T<<17&4294967295|T>>>15),T=O+(j^N&(C^j))+L[3]+3250441966&4294967295,O=N+(T<<22&4294967295|T>>>10),T=j+(C^O&(N^C))+L[4]+4118548399&4294967295,j=O+(T<<7&4294967295|T>>>25),T=C+(N^j&(O^N))+L[5]+1200080426&4294967295,C=j+(T<<12&4294967295|T>>>20),T=N+(O^C&(j^O))+L[6]+2821735955&4294967295,N=C+(T<<17&4294967295|T>>>15),T=O+(j^N&(C^j))+L[7]+4249261313&4294967295,O=N+(T<<22&4294967295|T>>>10),T=j+(C^O&(N^C))+L[8]+1770035416&4294967295,j=O+(T<<7&4294967295|T>>>25),T=C+(N^j&(O^N))+L[9]+2336552879&4294967295,C=j+(T<<12&4294967295|T>>>20),T=N+(O^C&(j^O))+L[10]+4294925233&4294967295,N=C+(T<<17&4294967295|T>>>15),T=O+(j^N&(C^j))+L[11]+2304563134&4294967295,O=N+(T<<22&4294967295|T>>>10),T=j+(C^O&(N^C))+L[12]+1804603682&4294967295,j=O+(T<<7&4294967295|T>>>25),T=C+(N^j&(O^N))+L[13]+4254626195&4294967295,C=j+(T<<12&4294967295|T>>>20),T=N+(O^C&(j^O))+L[14]+2792965006&4294967295,N=C+(T<<17&4294967295|T>>>15),T=O+(j^N&(C^j))+L[15]+1236535329&4294967295,O=N+(T<<22&4294967295|T>>>10),T=j+(N^C&(O^N))+L[1]+4129170786&4294967295,j=O+(T<<5&4294967295|T>>>27),T=C+(O^N&(j^O))+L[6]+3225465664&4294967295,C=j+(T<<9&4294967295|T>>>23),T=N+(j^O&(C^j))+L[11]+643717713&4294967295,N=C+(T<<14&4294967295|T>>>18),T=O+(C^j&(N^C))+L[0]+3921069994&4294967295,O=N+(T<<20&4294967295|T>>>12),T=j+(N^C&(O^N))+L[5]+3593408605&4294967295,j=O+(T<<5&4294967295|T>>>27),T=C+(O^N&(j^O))+L[10]+38016083&4294967295,C=j+(T<<9&4294967295|T>>>23),T=N+(j^O&(C^j))+L[15]+3634488961&4294967295,N=C+(T<<14&4294967295|T>>>18),T=O+(C^j&(N^C))+L[4]+3889429448&4294967295,O=N+(T<<20&4294967295|T>>>12),T=j+(N^C&(O^N))+L[9]+568446438&4294967295,j=O+(T<<5&4294967295|T>>>27),T=C+(O^N&(j^O))+L[14]+3275163606&4294967295,C=j+(T<<9&4294967295|T>>>23),T=N+(j^O&(C^j))+L[3]+4107603335&4294967295,N=C+(T<<14&4294967295|T>>>18),T=O+(C^j&(N^C))+L[8]+1163531501&4294967295,O=N+(T<<20&4294967295|T>>>12),T=j+(N^C&(O^N))+L[13]+2850285829&4294967295,j=O+(T<<5&4294967295|T>>>27),T=C+(O^N&(j^O))+L[2]+4243563512&4294967295,C=j+(T<<9&4294967295|T>>>23),T=N+(j^O&(C^j))+L[7]+1735328473&4294967295,N=C+(T<<14&4294967295|T>>>18),T=O+(C^j&(N^C))+L[12]+2368359562&4294967295,O=N+(T<<20&4294967295|T>>>12),T=j+(O^N^C)+L[5]+4294588738&4294967295,j=O+(T<<4&4294967295|T>>>28),T=C+(j^O^N)+L[8]+2272392833&4294967295,C=j+(T<<11&4294967295|T>>>21),T=N+(C^j^O)+L[11]+1839030562&4294967295,N=C+(T<<16&4294967295|T>>>16),T=O+(N^C^j)+L[14]+4259657740&4294967295,O=N+(T<<23&4294967295|T>>>9),T=j+(O^N^C)+L[1]+2763975236&4294967295,j=O+(T<<4&4294967295|T>>>28),T=C+(j^O^N)+L[4]+1272893353&4294967295,C=j+(T<<11&4294967295|T>>>21),T=N+(C^j^O)+L[7]+4139469664&4294967295,N=C+(T<<16&4294967295|T>>>16),T=O+(N^C^j)+L[10]+3200236656&4294967295,O=N+(T<<23&4294967295|T>>>9),T=j+(O^N^C)+L[13]+681279174&4294967295,j=O+(T<<4&4294967295|T>>>28),T=C+(j^O^N)+L[0]+3936430074&4294967295,C=j+(T<<11&4294967295|T>>>21),T=N+(C^j^O)+L[3]+3572445317&4294967295,N=C+(T<<16&4294967295|T>>>16),T=O+(N^C^j)+L[6]+76029189&4294967295,O=N+(T<<23&4294967295|T>>>9),T=j+(O^N^C)+L[9]+3654602809&4294967295,j=O+(T<<4&4294967295|T>>>28),T=C+(j^O^N)+L[12]+3873151461&4294967295,C=j+(T<<11&4294967295|T>>>21),T=N+(C^j^O)+L[15]+530742520&4294967295,N=C+(T<<16&4294967295|T>>>16),T=O+(N^C^j)+L[2]+3299628645&4294967295,O=N+(T<<23&4294967295|T>>>9),T=j+(N^(O|~C))+L[0]+4096336452&4294967295,j=O+(T<<6&4294967295|T>>>26),T=C+(O^(j|~N))+L[7]+1126891415&4294967295,C=j+(T<<10&4294967295|T>>>22),T=N+(j^(C|~O))+L[14]+2878612391&4294967295,N=C+(T<<15&4294967295|T>>>17),T=O+(C^(N|~j))+L[5]+4237533241&4294967295,O=N+(T<<21&4294967295|T>>>11),T=j+(N^(O|~C))+L[12]+1700485571&4294967295,j=O+(T<<6&4294967295|T>>>26),T=C+(O^(j|~N))+L[3]+2399980690&4294967295,C=j+(T<<10&4294967295|T>>>22),T=N+(j^(C|~O))+L[10]+4293915773&4294967295,N=C+(T<<15&4294967295|T>>>17),T=O+(C^(N|~j))+L[1]+2240044497&4294967295,O=N+(T<<21&4294967295|T>>>11),T=j+(N^(O|~C))+L[8]+1873313359&4294967295,j=O+(T<<6&4294967295|T>>>26),T=C+(O^(j|~N))+L[15]+4264355552&4294967295,C=j+(T<<10&4294967295|T>>>22),T=N+(j^(C|~O))+L[6]+2734768916&4294967295,N=C+(T<<15&4294967295|T>>>17),T=O+(C^(N|~j))+L[13]+1309151649&4294967295,O=N+(T<<21&4294967295|T>>>11),T=j+(N^(O|~C))+L[4]+4149444226&4294967295,j=O+(T<<6&4294967295|T>>>26),T=C+(O^(j|~N))+L[11]+3174756917&4294967295,C=j+(T<<10&4294967295|T>>>22),T=N+(j^(C|~O))+L[2]+718787259&4294967295,N=C+(T<<15&4294967295|T>>>17),T=O+(C^(N|~j))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+j&4294967295,M.g[1]=M.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+C&4294967295}r.prototype.u=function(M,j){j===void 0&&(j=M.length);for(var O=j-this.blockSize,L=this.B,N=this.h,C=0;C<j;){if(N==0)for(;C<=O;)i(this,M,C),C+=this.blockSize;if(typeof M=="string"){for(;C<j;)if(L[N++]=M.charCodeAt(C++),N==this.blockSize){i(this,L),N=0;break}}else for(;C<j;)if(L[N++]=M[C++],N==this.blockSize){i(this,L),N=0;break}}this.h=N,this.o+=j},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var j=1;j<M.length-8;++j)M[j]=0;var O=8*this.o;for(j=M.length-8;j<M.length;++j)M[j]=O&255,O/=256;for(this.u(M),M=Array(16),j=O=0;4>j;++j)for(var L=0;32>L;L+=8)M[O++]=this.g[j]>>>L&255;return M};function c(M,j){var O=m;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=j(M)}function d(M,j){this.h=j;for(var O=[],L=!0,N=M.length-1;0<=N;N--){var C=M[N]|0;L&&C==j||(O[N]=C,L=!1)}this.g=O}var m={};function y(M){return-128<=M&&128>M?c(M,function(j){return new d([j|0],0>j?-1:0)}):new d([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return q(p(-M));for(var j=[],O=1,L=0;M>=O;L++)j[L]=M/O|0,O*=4294967296;return new d(j,0)}function v(M,j){if(M.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(M.charAt(0)=="-")return q(v(M.substring(1),j));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=p(Math.pow(j,8)),L=E,N=0;N<M.length;N+=8){var C=Math.min(8,M.length-N),T=parseInt(M.substring(N,N+C),j);8>C?(C=p(Math.pow(j,C)),L=L.j(C).add(p(T))):(L=L.j(O),L=L.add(p(T)))}return L}var E=y(0),b=y(1),x=y(16777216);n=d.prototype,n.m=function(){if(A(this))return-q(this).m();for(var M=0,j=1,O=0;O<this.g.length;O++){var L=this.i(O);M+=(0<=L?L:4294967296+L)*j,j*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(R(this))return"0";if(A(this))return"-"+q(this).toString(M);for(var j=p(Math.pow(M,6)),O=this,L="";;){var N=de(O,j).g;O=D(O,N.j(j));var C=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=N,R(O))return C+L;for(;6>C.length;)C="0"+C;L=C+L}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function R(M){if(M.h!=0)return!1;for(var j=0;j<M.g.length;j++)if(M.g[j]!=0)return!1;return!0}function A(M){return M.h==-1}n.l=function(M){return M=D(this,M),A(M)?-1:R(M)?0:1};function q(M){for(var j=M.g.length,O=[],L=0;L<j;L++)O[L]=~M.g[L];return new d(O,~M.h).add(b)}n.abs=function(){return A(this)?q(this):this},n.add=function(M){for(var j=Math.max(this.g.length,M.g.length),O=[],L=0,N=0;N<=j;N++){var C=L+(this.i(N)&65535)+(M.i(N)&65535),T=(C>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);L=T>>>16,C&=65535,T&=65535,O[N]=T<<16|C}return new d(O,O[O.length-1]&-2147483648?-1:0)};function D(M,j){return M.add(q(j))}n.j=function(M){if(R(this)||R(M))return E;if(A(this))return A(M)?q(this).j(q(M)):q(q(this).j(M));if(A(M))return q(this.j(q(M)));if(0>this.l(x)&&0>M.l(x))return p(this.m()*M.m());for(var j=this.g.length+M.g.length,O=[],L=0;L<2*j;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var N=0;N<M.g.length;N++){var C=this.i(L)>>>16,T=this.i(L)&65535,ee=M.i(N)>>>16,me=M.i(N)&65535;O[2*L+2*N]+=T*me,z(O,2*L+2*N),O[2*L+2*N+1]+=C*me,z(O,2*L+2*N+1),O[2*L+2*N+1]+=T*ee,z(O,2*L+2*N+1),O[2*L+2*N+2]+=C*ee,z(O,2*L+2*N+2)}for(L=0;L<j;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=j;L<2*j;L++)O[L]=0;return new d(O,0)};function z(M,j){for(;(M[j]&65535)!=M[j];)M[j+1]+=M[j]>>>16,M[j]&=65535,j++}function F(M,j){this.g=M,this.h=j}function de(M,j){if(R(j))throw Error("division by zero");if(R(M))return new F(E,E);if(A(M))return j=de(q(M),j),new F(q(j.g),q(j.h));if(A(j))return j=de(M,q(j)),new F(q(j.g),j.h);if(30<M.g.length){if(A(M)||A(j))throw Error("slowDivide_ only works with positive integers.");for(var O=b,L=j;0>=L.l(M);)O=$(O),L=$(L);var N=he(O,1),C=he(L,1);for(L=he(L,2),O=he(O,2);!R(L);){var T=C.add(L);0>=T.l(M)&&(N=N.add(O),C=T),L=he(L,1),O=he(O,1)}return j=D(M,N.j(j)),new F(N,j)}for(N=E;0<=M.l(j);){for(O=Math.max(1,Math.floor(M.m()/j.m())),L=Math.ceil(Math.log(O)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),C=p(O),T=C.j(j);A(T)||0<T.l(M);)O-=L,C=p(O),T=C.j(j);R(C)&&(C=b),N=N.add(C),M=D(M,T)}return new F(N,M)}n.A=function(M){return de(this,M).h},n.and=function(M){for(var j=Math.max(this.g.length,M.g.length),O=[],L=0;L<j;L++)O[L]=this.i(L)&M.i(L);return new d(O,this.h&M.h)},n.or=function(M){for(var j=Math.max(this.g.length,M.g.length),O=[],L=0;L<j;L++)O[L]=this.i(L)|M.i(L);return new d(O,this.h|M.h)},n.xor=function(M){for(var j=Math.max(this.g.length,M.g.length),O=[],L=0;L<j;L++)O[L]=this.i(L)^M.i(L);return new d(O,this.h^M.h)};function $(M){for(var j=M.g.length+1,O=[],L=0;L<j;L++)O[L]=M.i(L)<<1|M.i(L-1)>>>31;return new d(O,M.h)}function he(M,j){var O=j>>5;j%=32;for(var L=M.g.length-O,N=[],C=0;C<L;C++)N[C]=0<j?M.i(C+O)>>>j|M.i(C+O+1)<<32-j:M.i(C+O);return new d(N,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jx=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=v,Ta=d}).apply(typeof TE<"u"?TE:typeof self<"u"?self:typeof window<"u"?window:{});var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eS,Dc,tS,nh,Kp,nS,sS,rS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,S){return h==Array.prototype||h==Object.prototype||(h[_]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gd=="object"&&Gd];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(h,_){if(_)e:{var S=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var G=h[k];if(!(G in S))break e;S=S[G]}h=h[h.length-1],k=S[h],_=_(k),_!=k&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}function c(h,_){h instanceof String&&(h+="");var S=0,k=!1,G={next:function(){if(!k&&S<h.length){var Z=S++;return{value:_(Z,h[Z]),done:!1}}return k=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(h){return h||function(){return c(this,function(_,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,S){return h.call.apply(h.bind,arguments)}function E(h,_,S){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,k),h.apply(_,G)}}return function(){return h.apply(_,arguments)}}function b(h,_,S){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,b.apply(null,arguments)}function x(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var k=S.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function R(h,_){function S(){}S.prototype=_.prototype,h.aa=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(k,G,Z){for(var pe=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)pe[Ke-2]=arguments[Ke];return _.prototype[G].apply(k,pe)}}function A(h){const _=h.length;if(0<_){const S=Array(_);for(let k=0;k<_;k++)S[k]=h[k];return S}return[]}function q(h,_){for(let S=1;S<arguments.length;S++){const k=arguments[S];if(y(k)){const G=h.length||0,Z=k.length||0;h.length=G+Z;for(let pe=0;pe<Z;pe++)h[G+pe]=k[pe]}else h.push(k)}}class D{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function z(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function de(h){return de[" "](h),h}de[" "]=function(){};var $=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function he(h,_,S){for(const k in h)_.call(S,h[k],k,h)}function M(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function j(h){const _={};for(const S in h)_[S]=h[S];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,_){let S,k;for(let G=1;G<arguments.length;G++){k=arguments[G];for(S in k)h[S]=k[S];for(let Z=0;Z<O.length;Z++)S=O[Z],Object.prototype.hasOwnProperty.call(k,S)&&(h[S]=k[S])}}function N(h){var _=1;h=h.split(":");const S=[];for(;0<_&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function C(h){m.setTimeout(()=>{throw h},0)}function T(){var h=ce;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ee{constructor(){this.h=this.g=null}add(_,S){const k=me.get();k.set(_,S),this.h?this.h.next=k:this.g=k,this.h=k}}var me=new D(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,xe=!1,ce=new ee,V=()=>{const h=m.Promise.resolve(void 0);fe=()=>{h.then(J)}};var J=()=>{for(var h;h=T();){try{h.h.call(h.g)}catch(S){C(S)}var _=me;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}xe=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};m.addEventListener("test",S,_),m.removeEventListener("test",S,_)}catch{}return h}();function Se(h,_){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if($){e:{try{de(_.nodeName);var G=!0;break e}catch{}G=!1}G||(_=null)}}else S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement);this.relatedTarget=_,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ae[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Se.aa.h.call(this)}}R(Se,ue);var Ae={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Es(h,_,S,k,G){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!k,this.ha=G,this.key=++Ge,this.da=this.fa=!1}function Br(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function nr(h){this.src=h,this.g={},this.h=0}nr.prototype.add=function(h,_,S,k,G){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var pe=Ba(h,_,k,G);return-1<pe?(_=h[pe],S||(_.fa=!1)):(_=new Es(_,this.src,Z,!!k,G),_.fa=S,h.push(_)),_};function qa(h,_){var S=_.type;if(S in h.g){var k=h.g[S],G=Array.prototype.indexOf.call(k,_,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(k,G,1),Z&&(Br(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Ba(h,_,S,k){for(var G=0;G<h.length;++G){var Z=h[G];if(!Z.da&&Z.listener==_&&Z.capture==!!S&&Z.ha==k)return G}return-1}var za="closure_lm_"+(1e6*Math.random()|0),yl={};function bu(h,_,S,k,G){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)bu(h,_[Z],S,k,G);return null}return S=Eu(S),h&&h[ot]?h.K(_,S,p(k)?!!k.capture:!1,G):zn(h,_,S,!1,k,G)}function zn(h,_,S,k,G,Z){if(!_)throw Error("Invalid event type");var pe=p(G)?!!G.capture:!!G,Ke=Yi(h);if(Ke||(h[za]=Ke=new nr(h)),S=Ke.add(_,S,k,pe,Z),S.proxy)return S;if(k=yf(),S.proxy=k,k.src=h,k.listener=S,h.addEventListener)be||(G=pe),G===void 0&&(G=!1),h.addEventListener(_.toString(),k,G);else if(h.attachEvent)h.attachEvent(Fa(_.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return S}function yf(){function h(S){return _.call(h.src,h.listener,S)}const _=vf;return h}function vl(h,_,S,k,G){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)vl(h,_[Z],S,k,G);else k=p(k)?!!k.capture:!!k,S=Eu(S),h&&h[ot]?(h=h.i,_=String(_).toString(),_ in h.g&&(Z=h.g[_],S=Ba(Z,S,k,G),-1<S&&(Br(Z[S]),Array.prototype.splice.call(Z,S,1),Z.length==0&&(delete h.g[_],h.h--)))):h&&(h=Yi(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ba(_,S,k,G)),(S=-1<h?_[h]:null)&&Qi(S))}function Qi(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ot])qa(_.i,h);else{var S=h.type,k=h.proxy;_.removeEventListener?_.removeEventListener(S,k,h.capture):_.detachEvent?_.detachEvent(Fa(S),k):_.addListener&&_.removeListener&&_.removeListener(k),(S=Yi(_))?(qa(S,h),S.h==0&&(S.src=null,_[za]=null)):Br(h)}}}function Fa(h){return h in yl?yl[h]:yl[h]="on"+h}function vf(h,_){if(h.da)h=!0;else{_=new Se(_,this);var S=h.listener,k=h.ha||h.src;h.fa&&Qi(h),h=S.call(k,_)}return h}function Yi(h){return h=h[za],h instanceof nr?h:null}var _l="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(h){return typeof h=="function"?h:(h[_l]||(h[_l]=function(_){return h.handleEvent(_)}),h[_l])}function wt(){ne.call(this),this.i=new nr(this),this.M=this,this.F=null}R(wt,ne),wt.prototype[ot]=!0,wt.prototype.removeEventListener=function(h,_,S,k){vl(this,h,_,S,k)};function rt(h,_){var S,k=h.F;if(k)for(S=[];k;k=k.F)S.push(k);if(h=h.M,k=_.type||_,typeof _=="string")_=new ue(_,h);else if(_ instanceof ue)_.target=_.target||h;else{var G=_;_=new ue(k,h),L(_,G)}if(G=!0,S)for(var Z=S.length-1;0<=Z;Z--){var pe=_.g=S[Z];G=jn(pe,k,!0,_)&&G}if(pe=_.g=h,G=jn(pe,k,!0,_)&&G,G=jn(pe,k,!1,_)&&G,S)for(Z=0;Z<S.length;Z++)pe=_.g=S[Z],G=jn(pe,k,!1,_)&&G}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var S=h.g[_],k=0;k<S.length;k++)Br(S[k]);delete h.g[_],h.h--}}this.F=null},wt.prototype.K=function(h,_,S,k){return this.i.add(String(h),_,!1,S,k)},wt.prototype.L=function(h,_,S,k){return this.i.add(String(h),_,!0,S,k)};function jn(h,_,S,k){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var G=!0,Z=0;Z<_.length;++Z){var pe=_[Z];if(pe&&!pe.da&&pe.capture==S){var Ke=pe.listener,zt=pe.ha||pe.src;pe.fa&&qa(h.i,pe),G=Ke.call(zt,k)!==!1&&G}}return G&&!k.defaultPrevented}function un(h,_,S){if(typeof h=="function")S&&(h=b(h,S));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(h,_||0)}function xu(h){h.g=un(()=>{h.g=null,h.i&&(h.i=!1,xu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class _f extends ne{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:xu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ha(h){ne.call(this),this.h=h,this.g={}}R(Ha,ne);var Ga=[];function $a(h){he(h.g,function(_,S){this.g.hasOwnProperty(S)&&Qi(_)},h),h.g={}}Ha.prototype.N=function(){Ha.aa.N.call(this),$a(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var os=m.JSON.stringify,Ki=m.JSON.parse,Qa=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function bl(){}bl.prototype.h=null;function El(h){return h.h||(h.h=h.i())}function xl(){}var sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rr(){ue.call(this,"d")}R(rr,ue);function Sl(){ue.call(this,"c")}R(Sl,ue);var xs={},wl=null;function zr(){return wl=wl||new wt}xs.La="serverreachability";function Xi(h){ue.call(this,xs.La,h)}R(Xi,ue);function Fr(h){const _=zr();rt(_,new Xi(_))}xs.STAT_EVENT="statevent";function Su(h,_){ue.call(this,xs.STAT_EVENT,h),this.stat=_}R(Su,ue);function yt(h){const _=zr();rt(_,new Su(_,h))}xs.Ma="timingevent";function Bt(h,_){ue.call(this,xs.Ma,h),this.size=_}R(Bt,ue);function Pt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},_)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Al(h,_,S,k,G,Z){h.info(function(){if(h.g)if(Z)for(var pe="",Ke=Z.split("&"),zt=0;zt<Ke.length;zt++){var Xe=Ke[zt].split("=");if(1<Xe.length){var Xt=Xe[0];Xe=Xe[1];var Ft=Xt.split("_");pe=2<=Ft.length&&Ft[1]=="type"?pe+(Xt+"="+Xe+"&"):pe+(Xt+"=redacted&")}}else pe=null;else pe=Z;return"XMLHTTP REQ ("+k+") [attempt "+G+"]: "+_+`
`+S+`
`+pe})}function bf(h,_,S,k,G,Z,pe){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+G+"]: "+_+`
`+S+`
`+Z+" "+pe})}function Hr(h,_,S,k){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ya(h,S)+(k?" "+k:"")})}function wu(h,_){h.info(function(){return"TIMEOUT: "+_})}Fn.prototype.info=function(){};function Ya(h,_){if(!h.g)return _;if(!_)return null;try{var S=JSON.parse(_);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var k=S[h];if(!(2>k.length)){var G=k[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var pe=1;pe<G.length;pe++)G[pe]=""}}}}return os(S)}catch{return _}}var Gr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ar={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ss;function ws(){}R(ws,bl),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},Ss=new ws;function yn(h,_,S,k){this.j=h,this.i=_,this.l=S,this.R=k||1,this.U=new Ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Nl={},Wi={};function ls(h,_,S){h.L=1,h.v=Ja(Rn(_)),h.m=S,h.P=!0,ir(h,null)}function ir(h,_){h.F=Date.now(),Ka(h),h.A=Rn(h.v);var S=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),Il(S.i,"t",k),h.C=0,S=h.j.J,h.h=new Tt,h.g=qu(h.j,S?_:null,!h.m),0<h.O&&(h.M=new _f(b(h.Y,h,h.g),h.O)),_=h.U,S=h.g,k=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(Ga[0]=G.toString()),G=Ga);for(var Z=0;Z<G.length;Z++){var pe=bu(S,G[Z],k||_.handleEvent,!1,_.h||_);if(!pe)break;_.g[pe.key]=pe}_=h.H?j(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Fr(),Al(h.i,h.u,h.A,h.l,h.R,h.m)}yn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Qn(h)==3?_.j():this.Y(h)},yn.prototype.Y=function(h){try{if(h==this.g)e:{const Ft=Qn(this.g);var _=this.g.Ba();const mr=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Ft!=4||_==7||(_==8||0>=mr?Fr(3):Fr(2)),$r(this);var S=this.g.Z();this.X=S;t:if(Au(this)){var k=Iu(this.g);h="";var G=k.length,Z=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),As(this);var pe="";break t}this.h.i=new m.TextDecoder}for(_=0;_<G;_++)this.h.h=!0,h+=this.h.i.decode(k[_],{stream:!(Z&&_==G-1)});k.length=0,this.h.g+=h,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=S==200,bf(this.i,this.u,this.A,this.l,this.R,Ft,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,zt=this.g;if((Ke=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ke)){var Xe=Ke;break t}}Xe=null}if(S=Xe)Hr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xa(this,S);else{this.o=!1,this.s=3,yt(12),tn(this),As(this);break e}}if(this.P){S=!0;let nn;for(;!this.J&&this.C<pe.length;)if(nn=Nu(this,pe),nn==Wi){Ft==4&&(this.s=4,yt(14),S=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Nl){this.s=4,yt(15),Hr(this.i,this.l,pe,"[Invalid Chunk]"),S=!1;break}else Hr(this.i,this.l,nn,null),Xa(this,nn);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||pe.length!=0||this.h.h||(this.s=1,yt(16),S=!1),this.o=this.o&&S,!S)Hr(this.i,this.l,pe,"[Invalid Chunked Response]"),tn(this),As(this);else if(0<pe.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),oi(Xt),Xt.M=!0,yt(11))}}else Hr(this.i,this.l,pe,null),Xa(this,pe);Ft==4&&tn(this),this.o&&!this.J&&(Ft==4?Lu(this.j,this):(this.o=!1,Ka(this)))}else Af(this.g),S==400&&0<pe.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),tn(this),As(this)}}}catch{}finally{}};function Au(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Nu(h,_){var S=h.C,k=_.indexOf(`
`,S);return k==-1?Wi:(S=Number(_.substring(S,k)),isNaN(S)?Nl:(k+=1,k+S>_.length?Wi:(_=_.slice(k,k+S),h.C=k+S,_)))}yn.prototype.cancel=function(){this.J=!0,tn(this)};function Ka(h){h.S=Date.now()+h.I,Tu(h,h.I)}function Tu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Pt(b(h.ba,h),_)}function $r(h){h.B&&(m.clearTimeout(h.B),h.B=null)}yn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(wu(this.i,this.A),this.L!=2&&(Fr(),yt(17)),tn(this),this.s=2,As(this)):Tu(this,this.S-h)};function As(h){h.j.G==0||h.J||Lu(h.j,h)}function tn(h){$r(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,$a(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Xa(h,_){try{var S=h.j;if(S.G!=0&&(S.g==h||Tl(S.h,h))){if(!h.K&&Tl(S.h,h)&&S.G==3){try{var k=S.Da.g.parse(_)}catch{k=null}if(Array.isArray(k)&&k.length==3){var G=k;if(G[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)co(S),oo(S);else break e;Ll(S),yt(18)}}else S.za=G[1],0<S.za-S.T&&37500>G[2]&&S.F&&S.v==0&&!S.C&&(S.C=Pt(b(S.Za,S),6e3));if(1>=Ji(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else fr(S,11)}else if((h.K||S.g==h)&&co(S),!z(_))for(G=S.Da.g.parse(_),_=0;_<G.length;_++){let Xe=G[_];if(S.T=Xe[0],Xe=Xe[1],S.G==2)if(Xe[0]=="c"){S.K=Xe[1],S.ia=Xe[2];const Xt=Xe[3];Xt!=null&&(S.la=Xt,S.j.info("VER="+S.la));const Ft=Xe[4];Ft!=null&&(S.Aa=Ft,S.j.info("SVER="+S.Aa));const mr=Xe[5];mr!=null&&typeof mr=="number"&&0<mr&&(k=1.5*mr,S.L=k,S.j.info("backChannelRequestTimeoutMs_="+k)),k=S;const nn=h.g;if(nn){const Is=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var Z=k.h;Z.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(eo(Z,Z.h),Z.h=null))}if(k.D){const Ul=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ul&&(k.ya=Ul,lt(k.I,k.D,Ul))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),k=S;var pe=h;if(k.qa=Uu(k,k.J?k.ia:null,k.W),pe.K){vn(k.h,pe);var Ke=pe,zt=k.L;zt&&(Ke.I=zt),Ke.B&&($r(Ke),Ka(Ke)),k.g=pe}else Ou(k);0<S.i.length&&lo(S)}else Xe[0]!="stop"&&Xe[0]!="close"||fr(S,7);else S.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?fr(S,7):Ol(S):Xe[0]!="noop"&&S.l&&S.l.ta(Xe),S.v=0)}}Fr(4)}catch{}}var Cu=class{constructor(h,_){this.g=h,this.map=_}};function or(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ji(h){return h.h?1:h.g?h.g.size:0}function Tl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function eo(h,_){h.g?h.g.add(_):h.h=_}function vn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}or.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.D);return _}return A(h.i)}function Ef(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var _=[],S=h.length,k=0;k<S;k++)_.push(h[k]);return _}_=[],S=0;for(k in h)_[S++]=h[k];return _}function to(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var _=[];h=h.length;for(var S=0;S<h;S++)_.push(S);return _}_=[],S=0;for(const k in h)_[S++]=k;return _}}}function jl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var S=to(h),k=Ef(h),G=k.length,Z=0;Z<G;Z++)_.call(void 0,k[Z],S&&S[Z],h)}var Wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xf(h,_){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var k=h[S].indexOf("="),G=null;if(0<=k){var Z=h[S].substring(0,k);G=h[S].substring(k+1)}else Z=h[S];_(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function kt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof kt){this.h=h.h,Za(this,h.j),this.o=h.o,this.g=h.g,Qr(this,h.s),this.l=h.l;var _=h.i,S=new cr;S.i=_.i,_.g&&(S.g=new Map(_.g),S.h=_.h),lr(this,S),this.m=h.m}else h&&(_=String(h).match(Wa))?(this.h=!1,Za(this,_[1]||"",!0),this.o=Hn(_[2]||""),this.g=Hn(_[3]||"",!0),Qr(this,_[4]),this.l=Hn(_[5]||"",!0),lr(this,_[6]||"",!0),this.m=Hn(_[7]||"")):(this.h=!1,this.i=new cr(null,this.h))}kt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ei(_,Rl,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ei(_,Rl,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(ei(S,S.charAt(0)=="/"?Sf:Dl,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",ei(S,no)),h.join("")};function Rn(h){return new kt(h)}function Za(h,_,S){h.j=S?Hn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Qr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function lr(h,_,S){_ instanceof cr?(h.i=_,Ru(h.i,h.h)):(S||(_=ei(_,wf)),h.i=new cr(_,h.h))}function lt(h,_,S){h.i.set(_,S)}function Ja(h){return lt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Hn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ei(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,ju),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ju(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Rl=/[#\/\?@]/g,Dl=/[#\?:]/g,Sf=/[#\?]/g,wf=/[#\?@]/g,no=/#/g;function cr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Gn(h){h.g||(h.g=new Map,h.h=0,h.i&&xf(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}n=cr.prototype,n.add=function(h,_){Gn(this),this.i=null,h=Ns(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function ur(h,_){Gn(h),_=Ns(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function dr(h,_){return Gn(h),_=Ns(h,_),h.g.has(_)}n.forEach=function(h,_){Gn(this),this.g.forEach(function(S,k){S.forEach(function(G){h.call(_,G,k,this)},this)},this)},n.na=function(){Gn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),S=[];for(let k=0;k<_.length;k++){const G=h[k];for(let Z=0;Z<G.length;Z++)S.push(_[k])}return S},n.V=function(h){Gn(this);let _=[];if(typeof h=="string")dr(this,h)&&(_=_.concat(this.g.get(Ns(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)_=_.concat(h[S])}return _},n.set=function(h,_){return Gn(this),this.i=null,h=Ns(this,h),dr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Il(h,_,S){ur(h,_),0<S.length&&(h.i=null,h.g.set(Ns(h,_),A(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var S=0;S<_.length;S++){var k=_[S];const Z=encodeURIComponent(String(k)),pe=this.V(k);for(k=0;k<pe.length;k++){var G=Z;pe[k]!==""&&(G+="="+encodeURIComponent(String(pe[k]))),h.push(G)}}return this.i=h.join("&")};function Ns(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ru(h,_){_&&!h.j&&(Gn(h),h.i=null,h.g.forEach(function(S,k){var G=k.toLowerCase();k!=G&&(ur(this,k),Il(this,G,S))},h)),h.j=_}function ti(h,_){const S=new Fn;if(m.Image){const k=new Image;k.onload=x($n,S,"TestLoadImage: loaded",!0,_,k),k.onerror=x($n,S,"TestLoadImage: error",!1,_,k),k.onabort=x($n,S,"TestLoadImage: abort",!1,_,k),k.ontimeout=x($n,S,"TestLoadImage: timeout",!1,_,k),m.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else _(!1)}function cs(h,_){const S=new Fn,k=new AbortController,G=setTimeout(()=>{k.abort(),$n(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:k.signal}).then(Z=>{clearTimeout(G),Z.ok?$n(S,"TestPingServer: ok",!0,_):$n(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),$n(S,"TestPingServer: error",!1,_)})}function $n(h,_,S,k,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),k(S)}catch{}}function ni(){this.g=new Qa}function Ts(h,_,S){const k=S||"";try{jl(h,function(G,Z){let pe=G;p(G)&&(pe=os(G)),_.push(k+Z+"="+encodeURIComponent(pe))})}catch(G){throw _.push(k+"type="+encodeURIComponent("_badmap")),G}}function Yr(h){this.l=h.Ub||null,this.j=h.eb||!1}R(Yr,bl),Yr.prototype.g=function(){return new hr(this.l,this.j)},Yr.prototype.i=function(h){return function(){return h}}({});function hr(h,_){wt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(hr,wt),n=hr.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,js(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Cs(this):js(this),this.readyState==3&&Pl(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Cs(this))},n.Qa=function(h){this.g&&(this.response=h,Cs(this))},n.ga=function(){this.g&&Cs(this)};function Cs(h){h.readyState=4,h.l=null,h.j=null,h.v=null,js(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function js(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function kl(h){let _="";return he(h,function(S,k){_+=k,_+=":",_+=S,_+=`\r
`}),_}function Kt(h,_,S){e:{for(k in S){var k=!1;break e}k=!0}k||(S=kl(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):lt(h,_,S))}function nt(h){wt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(nt,wt);var so=/^https?$/i,si=["POST","PUT"];n=nt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,S,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ss.g(),this.v=this.o?El(this.o):El(Ss),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Z){Du(this,Z);return}if(h=S||"",S=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var G in k)S.set(G,k[G]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Z of k.keys())S.set(Z,k.get(Z));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(S.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(si,_,void 0))||k||G||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pe]of S)this.g.setRequestHeader(Z,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ri(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Du(this,Z)}};function Du(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,ro(h),Rs(h)}function ro(h){h.A||(h.A=!0,rt(h,"complete"),rt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,rt(this,"complete"),rt(this,"abort"),Rs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rs(this,!0)),nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ao(this):this.bb())},n.bb=function(){ao(this)};function ao(h){if(h.h&&typeof d<"u"&&(!h.v[1]||Qn(h)!=4||h.Z()!=2)){if(h.u&&Qn(h)==4)un(h.Ea,0,h);else if(rt(h,"readystatechange"),Qn(h)==4){h.h=!1;try{const pe=h.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var k;if(k=pe===0){var G=String(h.D).match(Wa)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),k=!so.test(G?G.toLowerCase():"")}S=k}if(S)rt(h,"complete"),rt(h,"success");else{h.m=6;try{var Z=2<Qn(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",ro(h)}}finally{Rs(h)}}}}function Rs(h,_){if(h.g){ri(h);const S=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||rt(h,"ready");try{S.onreadystatechange=k}catch{}}}function ri(h){h.I&&(m.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Qn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Ki(_)}};function Iu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Af(h){const _={};h=(h.g&&2<=Qn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(z(h[k]))continue;var S=N(h[k]);const G=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Z=_[G]||[];_[G]=Z,Z.push(S)}M(_,function(k){return k.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function io(h){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,h),this.cb=ai("retryDelaySeedMs",1e4,h),this.Wa=ai("forwardChannelMaxRetries",2,h),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new or(h&&h.concurrentRequestLimit),this.Da=new ni,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=io.prototype,n.la=8,n.G=1,n.connect=function(h,_,S,k){yt(0),this.W=h,this.H=_||{},S&&k!==void 0&&(this.H.OSID=S,this.H.OAID=k),this.F=this.X,this.I=Uu(this,null,this.W),lo(this)};function Ol(h){if(Pu(h),h.G==3){var _=h.U++,S=Rn(h.I);if(lt(S,"SID",h.K),lt(S,"RID",_),lt(S,"TYPE","terminate"),ii(h,S),_=new yn(h,h.j,_),_.L=2,_.v=Ja(Rn(S)),S=!1,m.navigator&&m.navigator.sendBeacon)try{S=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!S&&m.Image&&(new Image().src=_.v,S=!0),S||(_.g=qu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ka(_)}Vu(h)}function oo(h){h.g&&(oi(h),h.g.cancel(),h.g=null)}function Pu(h){oo(h),h.u&&(m.clearTimeout(h.u),h.u=null),co(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function lo(h){if(!Zi(h.h)&&!h.s){h.s=!0;var _=h.Ga;fe||V(),xe||(fe(),xe=!0),ce.add(_,h),h.B=0}}function Nf(h,_){return Ji(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Pt(b(h.Ga,h,_),Vl(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new yn(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=j(Z),L(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var k=this.i[S];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(_+=k,4096<_){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=ku(this,G,_),S=Rn(this.I),lt(S,"RID",h),lt(S,"CVER",22),this.D&&lt(S,"X-HTTP-Session-Id",this.D),ii(this,S),Z&&(this.O?_="headers="+encodeURIComponent(String(kl(Z)))+"&"+_:this.m&&Kt(S,this.m,Z)),eo(this.h,G),this.Ua&&lt(S,"TYPE","init"),this.P?(lt(S,"$req",_),lt(S,"SID","null"),G.T=!0,ls(G,S,null)):ls(G,S,_),this.G=2}}else this.G==3&&(h?Ml(this,h):this.i.length==0||Zi(this.h)||Ml(this))};function Ml(h,_){var S;_?S=_.l:S=h.U++;const k=Rn(h.I);lt(k,"SID",h.K),lt(k,"RID",S),lt(k,"AID",h.T),ii(h,k),h.m&&h.o&&Kt(k,h.m,h.o),S=new yn(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),_&&(h.i=_.D.concat(h.i)),_=ku(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),eo(h.h,S),ls(S,k,_)}function ii(h,_){h.H&&he(h.H,function(S,k){lt(_,k,S)}),h.l&&jl({},function(S,k){lt(_,k,S)})}function ku(h,_,S){S=Math.min(h.i.length,S);var k=h.l?b(h.l.Na,h.l,h):null;e:{var G=h.i;let Z=-1;for(;;){const pe=["count="+S];Z==-1?0<S?(Z=G[0].g,pe.push("ofs="+Z)):Z=0:pe.push("ofs="+Z);let Ke=!0;for(let zt=0;zt<S;zt++){let Xe=G[zt].g;const Xt=G[zt].map;if(Xe-=Z,0>Xe)Z=Math.max(0,G[zt].g-100),Ke=!1;else try{Ts(Xt,pe,"req"+Xe+"_")}catch{k&&k(Xt)}}if(Ke){k=pe.join("&");break e}}}return h=h.i.splice(0,S),_.D=h,k}function Ou(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;fe||V(),xe||(fe(),xe=!0),ce.add(_,h),h.v=0}}function Ll(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Pt(b(h.Fa,h),Vl(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Pt(b(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),oo(this),Mu(this))};function oi(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function Mu(h){h.g=new yn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Rn(h.qa);lt(_,"RID","rpc"),lt(_,"SID",h.K),lt(_,"AID",h.T),lt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&lt(_,"TO",h.ja),lt(_,"TYPE","xmlhttp"),ii(h,_),h.m&&h.o&&Kt(_,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Ja(Rn(_)),S.m=null,S.P=!0,ir(S,h)}n.Za=function(){this.C!=null&&(this.C=null,oo(this),Ll(this),yt(19))};function co(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function Lu(h,_){var S=null;if(h.g==_){co(h),oi(h),h.g=null;var k=2}else if(Tl(h.h,_))S=_.D,vn(h.h,_),k=1;else return;if(h.G!=0){if(_.o)if(k==1){S=_.m?_.m.length:0,_=Date.now()-_.F;var G=h.B;k=zr(),rt(k,new Bt(k,S)),lo(h)}else Ou(h);else if(G=_.s,G==3||G==0&&0<_.X||!(k==1&&Nf(h,_)||k==2&&Ll(h)))switch(S&&0<S.length&&(_=h.h,_.i=_.i.concat(S)),G){case 1:fr(h,5);break;case 4:fr(h,10);break;case 3:fr(h,6);break;default:fr(h,2)}}}function Vl(h,_){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*_}function fr(h,_){if(h.j.info("Error code "+_),_==2){var S=b(h.fb,h),k=h.Xa;const G=!k;k=new kt(k||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Za(k,"https"),Ja(k),G?ti(k.toString(),S):cs(k.toString(),S)}else yt(2);h.G=0,h.l&&h.l.sa(_),Vu(h),Pu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Vu(h){if(h.G=0,h.ka=[],h.l){const _=Cl(h.h);(_.length!=0||h.i.length!=0)&&(q(h.ka,_),q(h.ka,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.ra()}}function Uu(h,_,S){var k=S instanceof kt?Rn(S):new kt(S);if(k.g!="")_&&(k.g=_+"."+k.g),Qr(k,k.s);else{var G=m.location;k=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;var Z=new kt(null);k&&Za(Z,k),_&&(Z.g=_),G&&Qr(Z,G),S&&(Z.l=S),k=Z}return S=h.D,_=h.ya,S&&_&&lt(k,S,_),lt(k,"VER",h.la),ii(h,k),k}function qu(h,_,S){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new nt(new Yr({eb:S})):new nt(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}n=Bu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uo(){}uo.prototype.g=function(h,_){return new _n(h,_)};function _n(h,_){wt.call(this),this.g=new io(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!z(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!z(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ds(this)}R(_n,wt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Ol(this.g)},_n.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=os(h),h=S);_.i.push(new Cu(_.Ya++,h)),_.G==3&&lo(_)},_n.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,_n.aa.N.call(this)};function zu(h){rr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}R(zu,rr);function Fu(){Sl.call(this),this.status=1}R(Fu,Sl);function Ds(h){this.g=h}R(Ds,Bu),Ds.prototype.ua=function(){rt(this.g,"a")},Ds.prototype.ta=function(h){rt(this.g,new zu(h))},Ds.prototype.sa=function(h){rt(this.g,new Fu)},Ds.prototype.ra=function(){rt(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,rS=function(){return new uo},sS=function(){return zr()},nS=xs,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gr.NO_ERROR=0,Gr.TIMEOUT=8,Gr.HTTP_ERROR=6,nh=Gr,ar.COMPLETE="complete",tS=ar,xl.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Dc=xl,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,eS=nt}).apply(typeof Gd<"u"?Gd:typeof self<"u"?self:typeof window<"u"?window:{});const CE="@firebase/firestore",jE="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new xg("@firebase/firestore");function Bo(){return Mi.logLevel}function ve(n,...e){if(Mi.logLevel<=$e.DEBUG){const t=e.map(kg);Mi.debug(`Firestore (${cl}): ${n}`,...t)}}function Mr(n,...e){if(Mi.logLevel<=$e.ERROR){const t=e.map(kg);Mi.error(`Firestore (${cl}): ${n}`,...t)}}function Zo(n,...e){if(Mi.logLevel<=$e.WARN){const t=e.map(kg);Mi.warn(`Firestore (${cl}): ${n}`,...t)}}function kg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,aS(n,r,t)}function aS(n,e,t){let r=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Mr(r),new Error(r)}function st(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||aS(e,i,r)}function Le(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Js{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class Jj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eR{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let r=this.i;const i=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let c=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ir,e.enqueueRetryable(()=>i(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await i(this.currentUser)})},m=y=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ir)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new iS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class tR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new tR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const r=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const i=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>i(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new RE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new RE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=rR(40);for(let c=0;c<i.length;++c)r.length<20&&i[c]<t&&(r+=e.charAt(i[c]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function Xp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),c=e.charAt(r);if(i!==c)return Rp(i)===Rp(c)?Qe(i,c):Rp(i)?1:-1}return Qe(n.length,e.length)}const aR=55296,iR=57343;function Rp(n){const e=n.charCodeAt(0);return e>=aR&&e<=iR}function Jo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="__name__";class Vs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const c=Vs.compareSegments(e.get(i),t.get(i));if(c!==0)return c}return Qe(e.length,t.length)}static compareSegments(e,t){const r=Vs.isNumericId(e),i=Vs.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Vs.extractNumericId(e).compare(Vs.extractNumericId(t)):Xp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ta.fromString(e.substring(4,e.length-2))}}class pt extends Vs{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pt(t)}static emptyPath(){return new pt([])}}const oR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Vs{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return oR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DE}static keyField(){return new ln([DE])}static fromServerFormat(e){const t=[];let r="",i=0;const c=()=>{if(r.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const m=e[i];if(m==="\\"){if(i+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else m==="`"?(d=!d,i++):m!=="."||d?(r+=m,i++):(c(),i++)}if(c(),d)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(pt.fromString(e))}static fromName(e){return new Ne(pt.fromString(e).popFirst(5))}static empty(){return new Ne(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(n,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lR(n,e,t,r){if(e===!0&&r===!0)throw new ye(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IE(n){if(!Ne.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PE(n){if(Ne.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Fh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fh(n);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function lu(n,e){if(!lS(n))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const d=n[r];if(i&&typeof d!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new ye(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=-62135596800,OE=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*OE);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kE)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OE}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:qt("string",gt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new gt(0,0))}static max(){return new Me(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function cR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new Ra(i,Ne.empty(),e)}function uR(n){return new Ra(n.readTime,n.key,Gc)}class Ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ra(Me.min(),Ne.empty(),Gc)}static max(){return new Ra(Me.max(),Ne.empty(),Gc)}}function dR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==hR)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,i)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,c=0,d=!1;e.forEach(m=>{++i,m.next(()=>{++c,d&&c===i&&t()},y=>r(y))}),d=!0,c===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,c)=>{r.push(t.call(this,i,c))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const c=e.length,d=new Array(c);let m=0;for(let y=0;y<c;y++){const p=y;t(e[p]).next(v=>{d[p]=v,++m,m===c&&r(d)},v=>i(v))}})}static doWhile(e,t){return new ie((r,i)=>{const c=()=>{e()===!0?t().next(()=>{c()},i):r()};c()})}}function mR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=-1;function Gh(n){return n==null}function _h(n){return n===0&&1/n==-1/0}function pR(n){return typeof n=="number"&&Number.isInteger(n)&&!_h(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="";function gR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ME(e)),e=yR(n.get(t),e);return ME(e)}function yR(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const c=n.charAt(i);switch(c){case"\0":t+="";break;case cS:t+="";break;default:t+=c}}return t}function ME(n){return n+cS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Va(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $d(this.root,e,this.comparator,!1)}getReverseIterator(){return new $d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $d(this.root,e,this.comparator,!0)}}class $d{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,r,i,c){this.key=e,this.value=t,this.color=r??on.RED,this.left=i??on.EMPTY,this.right=c??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,c){return new on(e??this.key,t??this.value,r??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const c=r(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,t,r),null):c===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return on.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,r,i,c){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=r.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Un([])}unionWith(e){let t=new Qt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new dS("Invalid base64 string: "+c):c}}(e);return new cn(t)}static fromUint8Array(e){const t=function(i){let c="";for(let d=0;d<i.length;++d)c+=String.fromCharCode(i[d]);return c}(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const vR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(n){if(st(!!n,39018),typeof n=="string"){let e=0;const t=vR.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ia(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="server_timestamp",fS="__type__",mS="__previous_value__",pS="__local_write_time__";function Lg(n){return(n?.mapValue?.fields||{})[fS]?.stringValue===hS}function $h(n){const e=n.mapValue.fields[mS];return Lg(e)?$h(e):e}function $c(n){const e=Da(n.mapValue.fields[pS].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,r,i,c,d,m,y,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=v}}const bh="(default)";class Qc{constructor(e,t){this.projectId=e,this.database=t||bh}static empty(){return new Qc("","")}get isDefaultDatabase(){return this.database===bh}isEqual(e){return e instanceof Qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="__type__",bR="__max__",Qd={mapValue:{}},yS="__vector__",Eh="value";function Pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lg(n)?4:xR(n)?9007199254740991:ER(n)?10:11:Pe(28295,{value:n})}function Ws(n,e){if(n===e)return!0;const t=Pa(n);if(t!==Pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $c(n).isEqual($c(e));case 3:return function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const d=Da(i.timestampValue),m=Da(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,c){return Ia(i.bytesValue).isEqual(Ia(c.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,c){return Rt(i.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(i.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)}(n,e);case 2:return function(i,c){if("integerValue"in i&&"integerValue"in c)return Rt(i.integerValue)===Rt(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const d=Rt(i.doubleValue),m=Rt(c.doubleValue);return d===m?_h(d)===_h(m):isNaN(d)&&isNaN(m)}return!1}(n,e);case 9:return Jo(n.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return function(i,c){const d=i.mapValue.fields||{},m=c.mapValue.fields||{};if(LE(d)!==LE(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!Ws(d[y],m[y])))return!1;return!0}(n,e);default:return Pe(52216,{left:n})}}function Yc(n,e){return(n.values||[]).find(t=>Ws(t,e))!==void 0}function el(n,e){if(n===e)return 0;const t=Pa(n),r=Pa(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return function(c,d){const m=Rt(c.integerValue||c.doubleValue),y=Rt(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(n,e);case 3:return UE(n.timestampValue,e.timestampValue);case 4:return UE($c(n),$c(e));case 5:return Xp(n.stringValue,e.stringValue);case 6:return function(c,d){const m=Ia(c),y=Ia(d);return m.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),y=d.split("/");for(let p=0;p<m.length&&p<y.length;p++){const v=Qe(m[p],y[p]);if(v!==0)return v}return Qe(m.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Qe(Rt(c.latitude),Rt(d.latitude));return m!==0?m:Qe(Rt(c.longitude),Rt(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qE(n.arrayValue,e.arrayValue);case 10:return function(c,d){const m=c.fields||{},y=d.fields||{},p=m[Eh]?.arrayValue,v=y[Eh]?.arrayValue,E=Qe(p?.values?.length||0,v?.values?.length||0);return E!==0?E:qE(p,v)}(n.mapValue,e.mapValue);case 11:return function(c,d){if(c===Qd.mapValue&&d===Qd.mapValue)return 0;if(c===Qd.mapValue)return 1;if(d===Qd.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),p=d.fields||{},v=Object.keys(p);y.sort(),v.sort();for(let E=0;E<y.length&&E<v.length;++E){const b=Xp(y[E],v[E]);if(b!==0)return b;const x=el(m[y[E]],p[v[E]]);if(x!==0)return x}return Qe(y.length,v.length)}(n.mapValue,e.mapValue);default:throw Pe(23264,{he:t})}}function UE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=Da(n),r=Da(e),i=Qe(t.seconds,r.seconds);return i!==0?i:Qe(t.nanos,r.nanos)}function qE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const c=el(t[i],r[i]);if(c)return c}return Qe(t.length,r.length)}function tl(n){return Wp(n)}function Wp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Da(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ia(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ne.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const c of t.values||[])i?i=!1:r+=",",r+=Wp(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",c=!0;for(const d of r)c?c=!1:i+=",",i+=`${d}:${Wp(t.fields[d])}`;return i+"}"}(n.mapValue):Pe(61005,{value:n})}function sh(n){switch(Pa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$h(n);return e?16+sh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ia(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,c)=>i+sh(c),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Va(r.fields,(c,d)=>{i+=c.length+sh(d)}),i}(n.mapValue);default:throw Pe(13486,{value:n})}}function BE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zp(n){return!!n&&"integerValue"in n}function Vg(n){return!!n&&"arrayValue"in n}function zE(n){return!!n&&"nullValue"in n}function FE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function ER(n){return(n?.mapValue?.fields||{})[gS]?.stringValue===yS}function Vc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Va(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vc(n.arrayValue.values[t]);return e}return{...n}}function xR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(t)}setAll(e){let t=ln.emptyPath(),r={},i=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=m.popLast()}d?r[m.lastSegment()]=Vc(d):i.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,i)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Va(t,(i,c)=>e[i]=c);for(const i of r)delete e[i]}clone(){return new Nn(Vc(this.value))}}function vS(n){const e=[];return Va(n.fields,(t,r)=>{const i=new ln([t]);if(rh(r)){const c=vS(r.mapValue).fields;if(c.length===0)e.push(i);else for(const d of c)e.push(i.child(d))}else e.push(i)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,r,i,c,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new pn(e,0,Me.min(),Me.min(),Me.min(),Nn.empty(),0)}static newFoundDocument(e,t,r,i){return new pn(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new pn(e,2,t,Me.min(),Me.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Me.min(),Me.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.position=e,this.inclusive=t}}function HE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const c=e[i],d=n.position[i];if(c.field.isKeyField()?r=Ne.comparator(Ne.fromName(d.referenceValue),t.key):r=el(d,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function GE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ws(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function SR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{}class Ut extends _S{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AR(e,t,r):t==="array-contains"?new CR(e,r):t==="in"?new jR(e,r):t==="not-in"?new RR(e,r):t==="array-contains-any"?new DR(e,r):new Ut(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new NR(e,r):new TR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(el(t,this.value)):t!==null&&Pa(this.value)===Pa(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ys extends _S{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ys(e,t)}matches(e){return bS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bS(n){return n.op==="and"}function ES(n){return wR(n)&&bS(n)}function wR(n){for(const e of n.filters)if(e instanceof ys)return!1;return!0}function Jp(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+tl(n.value);if(ES(n))return n.filters.map(e=>Jp(e)).join(",");{const e=n.filters.map(t=>Jp(t)).join(",");return`${n.op}(${e})`}}function xS(n,e){return n instanceof Ut?function(r,i){return i instanceof Ut&&r.op===i.op&&r.field.isEqual(i.field)&&Ws(r.value,i.value)}(n,e):n instanceof ys?function(r,i){return i instanceof ys&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((c,d,m)=>c&&xS(d,i.filters[m]),!0):!1}(n,e):void Pe(19439)}function SS(n){return n instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${tl(t.value)}`}(n):n instanceof ys?function(t){return t.op.toString()+" {"+t.getFilters().map(SS).join(" ,")+"}"}(n):"Filter"}class AR extends Ut{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class NR extends Ut{constructor(e,t){super(e,"in",t),this.keys=wS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class TR extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=wS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wS(n,e){return(e.arrayValue?.values||[]).map(t=>Ne.fromName(t.referenceValue))}class CR extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vg(t)&&Yc(t.arrayValue,this.value)}}class jR extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yc(this.value.arrayValue,t)}}class RR extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yc(this.value.arrayValue,t)}}class DR extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t=null,r=[],i=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function $E(n,e=null,t=[],r=[],i=null,c=null,d=null){return new IR(n,e,t,r,i,c,d)}function Ug(n){const e=Le(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),Gh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tl(r)).join(",")),e.Te=t}return e.Te}function qg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GE(n.startAt,e.startAt)&&GE(n.endAt,e.endAt)}function eg(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t=null,r=[],i=[],c=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function PR(n,e,t,r,i,c,d,m){return new hl(n,e,t,r,i,c,d,m)}function Bg(n){return new hl(n)}function QE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function AS(n){return n.collectionGroup!==null}function Uc(n){const e=Le(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Qt(ln.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(p=>{p.isInequality()&&(m=m.add(p.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Kc(c,r))}),t.has(ln.keyField().canonicalString())||e.Ie.push(new Kc(ln.keyField(),r))}return e.Ie}function Qs(n){const e=Le(n);return e.Ee||(e.Ee=kR(e,Uc(n))),e.Ee}function kR(n,e){if(n.limitType==="F")return $E(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const c=i.dir==="desc"?"asc":"desc";return new Kc(i.field,c)});const t=n.endAt?new xh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xh(n.startAt.position,n.startAt.inclusive):null;return $E(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function tg(n,e){const t=n.filters.concat([e]);return new hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ng(n,e,t){return new hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qh(n,e){return qg(Qs(n),Qs(e))&&n.limitType===e.limitType}function NS(n){return`${Ug(Qs(n))}|lt:${n.limitType}`}function zo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SS(i)).join(", ")}]`),Gh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>tl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>tl(i)).join(",")),`Target(${r})`}(Qs(n))}; limitType=${n.limitType})`}function Yh(n,e){return e.isFoundDocument()&&function(r,i){const c=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ne.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(n,e)&&function(r,i){for(const c of Uc(r))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const c of r.filters)if(!c.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(d,m,y){const p=HE(d,m,y);return d.inclusive?p<=0:p<0}(r.startAt,Uc(r),i)||r.endAt&&!function(d,m,y){const p=HE(d,m,y);return d.inclusive?p>=0:p>0}(r.endAt,Uc(r),i))}(n,e)}function OR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TS(n){return(e,t)=>{let r=!1;for(const i of Uc(n)){const c=MR(i,e,t);if(c!==0)return c;r=r||i.field.isKeyField()}return 0}}function MR(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):function(c,d,m){const y=d.data.field(c),p=m.data.field(c);return y!==null&&p!==null?el(y,p):Pe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,c]of r)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Va(this.inner,(t,r)=>{for(const[i,c]of r)e(i,c)})}isEmpty(){return uS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new St(Ne.comparator);function Lr(){return LR}const CS=new St(Ne.comparator);function Ic(...n){let e=CS;for(const t of n)e=e.insert(t.key,t);return e}function jS(n){let e=CS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ti(){return qc()}function RS(){return qc()}function qc(){return new zi(n=>n.toString(),(n,e)=>n.isEqual(e))}const VR=new St(Ne.comparator),UR=new Qt(Ne.comparator);function Ye(...n){let e=UR;for(const t of n)e=e.add(t);return e}const qR=new Qt(Qe);function BR(){return qR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function DS(n){return{integerValue:""+n}}function zR(n,e){return pR(e)?DS(e):zg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function FR(n,e,t){return n instanceof Sh?function(i,c){const d={fields:{[fS]:{stringValue:hS},[pS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Lg(c)&&(c=$h(c)),c&&(d.fields[mS]=c),{mapValue:d}}(t,e):n instanceof Xc?PS(n,e):n instanceof Wc?kS(n,e):function(i,c){const d=IS(i,c),m=YE(d)+YE(i.Ae);return Zp(d)&&Zp(i.Ae)?DS(m):zg(i.serializer,m)}(n,e)}function HR(n,e,t){return n instanceof Xc?PS(n,e):n instanceof Wc?kS(n,e):t}function IS(n,e){return n instanceof wh?function(r){return Zp(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class Sh extends Kh{}class Xc extends Kh{constructor(e){super(),this.elements=e}}function PS(n,e){const t=OS(e);for(const r of n.elements)t.some(i=>Ws(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wc extends Kh{constructor(e){super(),this.elements=e}}function kS(n,e){let t=OS(e);for(const r of n.elements)t=t.filter(i=>!Ws(i,r));return{arrayValue:{values:t}}}class wh extends Kh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function YE(n){return Rt(n.integerValue||n.doubleValue)}function OS(n){return Vg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Xc&&i instanceof Xc||r instanceof Wc&&i instanceof Wc?Jo(r.elements,i.elements,Ws):r instanceof wh&&i instanceof wh?Ws(r.Ae,i.Ae):r instanceof Sh&&i instanceof Sh}(n.transform,e.transform)}class $R{constructor(e,t){this.version=e,this.transformResults=t}}class ns{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xh{}function MS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fg(n.key,ns.none()):new cu(n.key,n.data,ns.none());{const t=n.data,r=Nn.empty();let i=new Qt(ln.comparator);for(let c of e.fields)if(!i.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?r.delete(c):r.set(c,d),i=i.add(c)}return new Ua(n.key,r,new Un(i.toArray()),ns.none())}}function QR(n,e,t){n instanceof cu?function(i,c,d){const m=i.value.clone(),y=XE(i.fieldTransforms,c,d.transformResults);m.setAll(y),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(n,e,t):n instanceof Ua?function(i,c,d){if(!ah(i.precondition,c))return void c.convertToUnknownDocument(d.version);const m=XE(i.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(LS(i)),y.setAll(m),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(n,e,t):function(i,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function Bc(n,e,t,r){return n instanceof cu?function(c,d,m,y){if(!ah(c.precondition,d))return m;const p=c.value.clone(),v=WE(c.fieldTransforms,y,d);return p.setAll(v),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ua?function(c,d,m,y){if(!ah(c.precondition,d))return m;const p=WE(c.fieldTransforms,y,d),v=d.data;return v.setAll(LS(c)),v.setAll(p),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(c,d,m){return ah(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(n,e,t)}function YR(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),c=IS(r.transform,i||null);c!=null&&(t===null&&(t=Nn.empty()),t.set(r.field,c))}return t||null}function KE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jo(r,i,(c,d)=>GR(c,d))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cu extends Xh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ua extends Xh{constructor(e,t,r,i,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function LS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function XE(n,e,t){const r=new Map;st(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const c=n[i],d=c.transform,m=e.data.field(c.field);r.set(c.field,HR(d,m,t[i]))}return r}function WE(n,e,t){const r=new Map;for(const i of n){const c=i.transform,d=t.data.field(i.field);r.set(i.field,FR(c,d,e))}return r}class Fg extends Xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KR extends Xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&QR(c,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RS();return this.mutations.forEach(i=>{const c=e.get(i.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(i.key)?null:m;const y=MS(d,m);y!==null&&r.set(i.key,y),d.isValidDocument()||d.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(t,r)=>KE(t,r))&&Jo(this.baseMutations,e.baseMutations,(t,r)=>KE(t,r))}}class Hg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){st(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return VR}();const c=e.mutations;for(let d=0;d<c.length;d++)i=i.insert(c[d].key,r[d].version);return new Hg(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ze;function JR(n){switch(n){case re.OK:return Pe(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function VS(n){if(n===void 0)return Mr("GRPC error has no .code"),re.UNKNOWN;switch(n){case Vt.OK:return re.OK;case Vt.CANCELLED:return re.CANCELLED;case Vt.UNKNOWN:return re.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return re.INTERNAL;case Vt.UNAVAILABLE:return re.UNAVAILABLE;case Vt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Vt.NOT_FOUND:return re.NOT_FOUND;case Vt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Vt.ABORTED:return re.ABORTED;case Vt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Vt.DATA_LOSS:return re.DATA_LOSS;default:return Pe(39323,{code:n})}}(Ze=Vt||(Vt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new Ta([4294967295,4294967295],0);function ZE(n){const e=eD().encode(n),t=new Jx;return t.update(e),new Uint8Array(t.digest())}function JE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ta([t,r],0),new Ta([i,c],0)]}class Gg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pc(`Invalid padding: ${t}`);if(r<0)throw new Pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ta.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ta.fromNumber(r)));return i.compare(tD)===1&&(i=new Ta([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ZE(e),[r,i]=JE(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,i,c);if(!this.we(d))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Gg(c,i,t);return r.forEach(m=>d.insert(m)),d}insert(e){if(this.ge===0)return;const t=ZE(e),[r,i]=JE(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,i,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t,r,i,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wh(Me.min(),i,new St(Qe),Lr(),Ye())}}class uu{constructor(e,t,r,i,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new uu(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class US{constructor(e,t){this.targetId=e,this.Ce=t}}class qS{constructor(e,t,r=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class e0{constructor(){this.ve=0,this.Fe=t0(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:c})}}),new uu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=t0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Lr(),this.Je=Yd(),this.He=Yd(),this.Ye=new St(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const c=i.target;if(eg(c))if(r===0){const d=new Ne(c.path);this.et(t,d,pn.newNoDocument(d,Me.min()))}else st(r===1,20013,{expectedCount:r});else{const d=this._t(t);if(d!==r){const m=this.ut(e),y=m?this.ct(m,e,d):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:c=0}=t;let d,m;try{d=Ia(r).toUint8Array()}catch(y){if(y instanceof dS)return Zo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Gg(d,i,c)}catch(y){return Zo(y instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((c,d)=>{const m=this.ot(d);if(m){if(c.current&&eg(m.target)){const y=new Ne(m.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,pn.newNoDocument(y,e))}c.Be&&(t.set(d,c.ke()),c.qe())}});let r=Ye();this.He.forEach((c,d)=>{let m=!0;d.forEachWhile(y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(c))}),this.je.forEach((c,d)=>d.setReadTime(e));const i=new Wh(e,t,this.Ye,this.je,r);return this.je=Lr(),this.Je=Yd(),this.He=Yd(),this.Ye=new St(Qe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new e0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new e0),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yd(){return new St(Ne.comparator)}function t0(){return new St(Ne.comparator)}const sD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aD={and:"AND",or:"OR"};class iD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sg(n,e){return n.useProto3Json||Gh(e)?e:{value:e}}function Ah(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oD(n,e){return Ah(n,e.toTimestamp())}function Ys(n){return st(!!n,49232),Me.fromTimestamp(function(t){const r=Da(t);return new gt(r.seconds,r.nanos)}(n))}function $g(n,e){return rg(n,e).canonicalString()}function rg(n,e){const t=function(i){return new pt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function zS(n){const e=pt.fromString(n);return st(QS(e),10190,{key:e.toString()}),e}function ag(n,e){return $g(n.databaseId,e.path)}function Dp(n,e){const t=zS(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(HS(t))}function FS(n,e){return $g(n.databaseId,e)}function lD(n){const e=zS(n);return e.length===4?pt.emptyPath():HS(e)}function ig(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HS(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function n0(n,e,t){return{name:ag(n,e),fields:t.value.mapValue.fields}}function cD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Pe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=function(p,v){return p.useProto3Json?(st(v===void 0||typeof v=="string",58123),cn.fromBase64String(v||"")):(st(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),cn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(p){const v=p.code===void 0?re.UNKNOWN:VS(p.code);return new ye(v,p.message||"")}(d);t=new qS(r,i,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Dp(n,r.document.name),c=Ys(r.document.updateTime),d=r.document.createTime?Ys(r.document.createTime):Me.min(),m=new Nn({mapValue:{fields:r.document.fields}}),y=pn.newFoundDocument(i,c,d,m),p=r.targetIds||[],v=r.removedTargetIds||[];t=new ih(p,v,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Dp(n,r.document),c=r.readTime?Ys(r.readTime):Me.min(),d=pn.newNoDocument(i,c),m=r.removedTargetIds||[];t=new ih([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Dp(n,r.document),c=r.removedTargetIds||[];t=new ih([],c,i,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:c}=r,d=new ZR(i,c),m=r.targetId;t=new US(m,d)}}return t}function uD(n,e){let t;if(e instanceof cu)t={update:n0(n,e.key,e.value)};else if(e instanceof Fg)t={delete:ag(n,e.key)};else if(e instanceof Ua)t={update:n0(n,e.key,e.data),updateMask:_D(e.fieldMask)};else{if(!(e instanceof KR))return Pe(16599,{Vt:e.type});t={verify:ag(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(c,d){const m=d.transform;if(m instanceof Sh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Xc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Wc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wh)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Pe(20930,{transform:d.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,c){return c.updateTime!==void 0?{updateTime:oD(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pe(27497)}(n,e.precondition)),t}function dD(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map(t=>function(i,c){let d=i.updateTime?Ys(i.updateTime):Ys(c);return d.isEqual(Me.min())&&(d=Ys(c)),new $R(d,i.transformResults||[])}(t,e))):[]}function hD(n,e){return{documents:[FS(n,e.path)]}}function fD(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FS(n,i);const c=function(p){if(p.length!==0)return $S(ys.create(p,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(p){if(p.length!==0)return p.map(v=>function(b){return{field:Fo(b.field),direction:gD(b.dir)}}(v))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=sg(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:t,parent:i}}function mD(n){let e=lD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){st(r===1,65062);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=function(E){const b=GS(E);return b instanceof ys&&ES(b)?b.getFilters():[b]}(t.where));let d=[];t.orderBy&&(d=function(E){return E.map(b=>function(R){return new Kc(Ho(R.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(b))}(t.orderBy));let m=null;t.limit&&(m=function(E){let b;return b=typeof E=="object"?E.value:E,Gh(b)?null:b}(t.limit));let y=null;t.startAt&&(y=function(E){const b=!!E.before,x=E.values||[];return new xh(x,b)}(t.startAt));let p=null;return t.endAt&&(p=function(E){const b=!E.before,x=E.values||[];return new xh(x,b)}(t.endAt)),PR(e,i,d,c,m,"F",y,p)}function pD(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ho(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ho(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ho(t.unaryFilter.field);return Ut.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ho(t.unaryFilter.field);return Ut.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ut.create(Ho(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ys.create(t.compositeFilter.filters.map(r=>GS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(t.compositeFilter.op))}(n):Pe(30097,{filter:n})}function gD(n){return sD[n]}function yD(n){return rD[n]}function vD(n){return aD[n]}function Fo(n){return{fieldPath:n.canonicalString()}}function Ho(n){return ln.fromServerFormat(n.fieldPath)}function $S(n){return n instanceof Ut?function(t){if(t.op==="=="){if(FE(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if(zE(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FE(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NAN"}};if(zE(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:yD(t.op),value:t.value}}}(n):n instanceof ys?function(t){const r=t.getFilters().map(i=>$S(i));return r.length===1?r[0]:{compositeFilter:{op:vD(t.op),filters:r}}}(n):Pe(54877,{filter:n})}function _D(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t,r,i,c=Me.min(),d=Me.min(),m=cn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.yt=e}}function ED(n){const e=mD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ng(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.Cn=new SD}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ra.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ra.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class SD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Qt(pt.comparator),c=!i.has(r);return this.index[t]=i.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YS=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(YS,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="LruGarbageCollector",wD=1048576;function a0([n,e],[t,r]){const i=Qe(n,t);return i===0?Qe(e,r):i}class AD{constructor(e){this.Ir=e,this.buffer=new Qt(a0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();a0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ND{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(r0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dl(t)?ve(r0,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)})}}class TD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Hh.ce);const r=new AD(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(s0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s0):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,c,d,m,y,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,d=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,m=Date.now(),this.removeTargets(e,r,t))).next(E=>(c=E,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(p=Date.now(),Bo()<=$e.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${i} in `+(m-d)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${E} documents in `+(p-y)+`ms
Total Duration: ${p-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:E})))}}function CD(n,e){return new TD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.changes=new zi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Bc(r.mutation,i,Un.empty(),gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){const i=Ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(c=>{let d=Ic();return c.forEach((m,y)=>{d=d.insert(m,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Ti();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){const i=[];return r.forEach(c=>{t.has(c)||i.push(c)}),this.documentOverlayCache.getOverlays(e,i).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,i){let c=Lr();const d=qc(),m=function(){return qc()}();return t.forEach((y,p)=>{const v=r.get(p.key);i.has(p.key)&&(v===void 0||v.mutation instanceof Ua)?c=c.insert(p.key,p):v!==void 0?(d.set(p.key,v.mutation.getFieldMask()),Bc(v.mutation,p,v.mutation.getFieldMask(),gt.now())):d.set(p.key,Un.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((p,v)=>d.set(p,v)),t.forEach((p,v)=>m.set(p,new RD(v,d.get(p)??null))),m))}recalculateAndSaveOverlays(e,t){const r=qc();let i=new St((d,m)=>d-m),c=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(y=>{const p=t.get(y);if(p===null)return;let v=r.get(y)||Un.empty();v=m.applyToLocalView(p,v),r.set(y,v);const E=(i.get(m.batchId)||Ye()).add(y);i=i.insert(m.batchId,E)})}).next(()=>{const d=[],m=i.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),p=y.key,v=y.value,E=RS();v.forEach(b=>{if(!c.has(b)){const x=MS(t.get(b),r.get(b));x!==null&&E.set(b,x),c=c.add(b)}}),d.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ie.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(d){return Ne.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(c=>{const d=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-c.size):ie.resolve(Ti());let m=Gc,y=c;return d.next(p=>ie.forEach(p,(v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next(b=>{y=y.insert(v,b)}))).next(()=>this.populateOverlays(e,p,c)).next(()=>this.computeViews(e,y,p,Ye())).next(v=>({batchId:m,changes:jS(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next(r=>{let i=Ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const c=t.collectionGroup;let d=Ic();return this.indexManager.getCollectionParents(e,c).next(m=>ie.forEach(m,y=>{const p=function(E,b){return new hl(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(v=>{v.forEach((E,b)=>{d=d.insert(E,b)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,r,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,i))).next(d=>{c.forEach((y,p)=>{const v=p.getKey();d.get(v)===null&&(d=d.insert(v,pn.newInvalidDocument(v)))});let m=Ic();return d.forEach((y,p)=>{const v=c.get(y);v!==void 0&&Bc(v.mutation,p,Un.empty(),gt.now()),Yh(t,p)&&(m=m.insert(y,p))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ys(i.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:ED(i.bundledQuery),readTime:Ys(i.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.overlays=new St(Ne.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ti();return ie.forEach(t,i=>this.getOverlay(e,i).next(c=>{c!==null&&r.set(i,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,c)=>{this.St(e,t,c)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=Ti(),c=t.length+1,d=new Ne(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let c=new St((p,v)=>p-v);const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=c.get(p.largestBatchId);v===null&&(v=Ti(),c=c.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=Ti(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((p,v)=>m.set(p,v)),!(m.size()>=i)););return ie.resolve(m)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const d=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new WR(t,r));let c=this.qr.get(t);c===void 0&&(c=Ye(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.Qr=new Qt(en.$r),this.Ur=new Qt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new en(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Ne(new pt([])),r=new en(t,e),i=new en(t,e+1),c=[];return this.Ur.forEachInRange([r,i],d=>{this.Gr(d),c.push(d.key)}),c}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new pt([])),r=new en(t,e),i=new en(t,e+1);let c=Ye();return this.Ur.forEachInRange([r,i],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new en(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(en.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new XR(c,t,r,i);this.mutationQueue.push(d);for(const m of i)this.Zr=this.Zr.add(new en(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),c=i<0?0:i;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Mg:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new en(t,0),i=new en(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,i],d=>{const m=this.Xr(d.Yr);c.push(m)}),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qt(Qe);return t.forEach(i=>{const c=new en(i,0),d=new en(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],m=>{r=r.add(m.Yr)})}),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let c=r;Ne.isDocumentKey(c)||(c=c.child(""));const d=new en(new Ne(c),0);let m=new Qt(Qe);return this.Zr.forEachWhile(y=>{const p=y.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(m=m.add(y.Yr)),!0)},d),ie.resolve(this.ti(m))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){st(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,i=>{const c=new en(i.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new en(t,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.ri=e,this.docs=function(){return new St(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),c=i?i.size:0,d=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=Lr();return t.forEach(i=>{const c=this.docs.get(i);r=r.insert(i,c?c.document.mutableCopy():pn.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let c=Lr();const d=t.path,m=new Ne(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:p,value:{document:v}}=y.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||dR(uR(v),r)<=0||(i.has(v.key)||Yh(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ie.resolve(c)}getAllFromCollectionGroup(e,t,r,i){Pe(9500)}ii(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LD(this)}getSize(e){return ie.resolve(this.size)}}class LD extends jD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.persistence=e,this.si=new zi(t=>Ug(t),qg),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Qg,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const c=[];return this.si.forEach((d,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ie.waitFor(c).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,c=[];return i&&t.forEach(d=>{c.push(i.markPotentiallyOrphaned(e,d))}),ie.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hh(0),this.li=!1,this.li=!0,this.hi=new kD,this.referenceDelegate=e(this),this.Pi=new VD(this),this.indexManager=new xD,this.remoteDocumentCache=function(i){return new MD(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new bD(t),this.Ii=new ID(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new OD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new UD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(c=>this.referenceDelegate.di(i).next(()=>c)).toPromise().then(c=>(i.raiseOnCommittedEvent(),c))}Ai(e,t){return ie.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class UD extends fR{constructor(e){super(),this.currentSequenceNumber=e}}class Yg{constructor(e){this.persistence=e,this.Ri=new Qg,this.Vi=null}static mi(e){return new Yg(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(c=>this.fi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,r=>{const i=Ne.fromPath(r);return this.gi(e,i).next(c=>{c||t.removeEntry(i,Me.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Nh{constructor(e,t){this.persistence=e,this.pi=new zi(r=>gR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=CD(this,t)}static mi(e,t){return new Nh(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ie.forEach(this.pi,(r,i)=>this.br(e,r,i).next(c=>c?ie.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ii(e,d=>this.br(e,d,t).next(m=>{m||(r++,c.removeEntry(d,Me.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sh(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ye(),i=Ye();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new Kg(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gT()?8:mR(gn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const c={result:null};return this.ys(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ws(e,t,i,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new qD;return this.Ss(e,t,d).next(m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)})}).next(()=>c.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Bo()<=$e.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Bo()<=$e.DEBUG&&ve("QueryEngine","Query:",zo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Bo()<=$e.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qs(t))):ie.resolve())}ys(e,t){if(QE(t))return ie.resolve(null);let r=Qs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ng(t,null,"F"),r=Qs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const d=Ye(...c);return this.ps.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(y=>{const p=this.Ds(t,m);return this.Cs(t,p,d,y.readTime)?this.ys(e,ng(t,null,"F")):this.vs(e,p,t,y)}))})))}ws(e,t,r,i){return QE(t)||i.isEqual(Me.min())?ie.resolve(null):this.ps.getDocuments(e,r).next(c=>{const d=this.Ds(t,c);return this.Cs(t,d,r,i)?ie.resolve(null):(Bo()<=$e.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zo(t)),this.vs(e,d,t,cR(i,Gc)).next(m=>m))})}Ds(e,t){let r=new Qt(TS(e));return t.forEach((i,c)=>{Yh(e,c)&&(r=r.add(c))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}Ss(e,t,r){return Bo()<=$e.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ra.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="LocalStore",zD=3e8;class FD{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new St(Qe),this.xs=new zi(c=>Ug(c),qg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function HD(n,e,t,r){return new FD(n,e,t,r)}async function XS(n,e){const t=Le(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(c=>(i=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let y=Ye();for(const p of i){d.push(p.batchId);for(const v of p.mutations)y=y.add(v.key)}for(const p of c){m.push(p.batchId);for(const v of p.mutations)y=y.add(v.key)}return t.localDocuments.getDocuments(r,y).next(p=>({Ls:p,removedBatchIds:d,addedBatchIds:m}))})})}function GD(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return function(m,y,p,v){const E=p.batch,b=E.keys();let x=ie.resolve();return b.forEach(R=>{x=x.next(()=>v.getEntry(y,R)).next(A=>{const q=p.docVersions.get(R);st(q!==null,48541),A.version.compareTo(q)<0&&(E.applyToRemoteDocument(A,p),A.isValidDocument()&&(A.setReadTime(p.commitVersion),v.addEntry(A)))})}),x.next(()=>m.mutationQueue.removeMutationBatch(y,E))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Ye();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(y=y.add(m.batch.mutations[p].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function WS(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function $D(n,e){const t=Le(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const m=[];e.targetChanges.forEach((v,E)=>{const b=i.get(E);if(!b)return;m.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,E).next(()=>t.Pi.addMatchingKeys(c,v.addedDocuments,E)));let x=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(cn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,r)),i=i.insert(E,x),function(A,q,D){return A.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=zD?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(b,x,v)&&m.push(t.Pi.updateTargetData(c,x))});let y=Lr(),p=Ye();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))}),m.push(QD(c,d,e.documentUpdates).next(v=>{y=v.ks,p=v.qs})),!r.isEqual(Me.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next(E=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(v)}return ie.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,y,p)).next(()=>y)}).then(c=>(t.Ms=i,c))}function QD(n,e,t){let r=Ye(),i=Ye();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let d=Lr();return t.forEach((m,y)=>{const p=c.get(m);y.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(m)),y.isNoDocument()&&y.version.isEqual(Me.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):ve(Xg,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",y.version)}),{ks:d,qs:i}})}function YD(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KD(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(c=>c?(i=c,ie.resolve(i)):t.Pi.allocateTargetId(r).next(d=>(i=new xa(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function og(n,e,t){const r=Le(n),i=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,i))}catch(d){if(!dl(d))throw d;ve(Xg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function i0(n,e,t){const r=Le(n);let i=Me.min(),c=Ye();return r.persistence.runTransaction("Execute query","readwrite",d=>function(y,p,v){const E=Le(y),b=E.xs.get(v);return b!==void 0?ie.resolve(E.Ms.get(b)):E.Pi.getTargetData(p,v)}(r,d,Qs(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,m.targetId).next(y=>{c=y})}).next(()=>r.Fs.getDocumentsMatchingQuery(d,e,t?i:Me.min(),t?c:Ye())).next(m=>(XD(r,OR(e),m),{documents:m,Qs:c})))}function XD(n,e,t){let r=n.Os.get(e)||Me.min();t.forEach((i,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Os.set(e,r)}class o0{constructor(){this.activeTargetIds=BR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WD{constructor(){this.Mo=new o0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new o0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="ConnectivityMonitor";class c0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(l0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(l0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd=null;function lg(){return Kd===null?Kd=function(){return 268435456+Math.round(2147483648*Math.random())}():Kd++,"0x"+Kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="RestConnection",JD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===bh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,c){const d=lg(),m=this.zo(e,t.toUriEncodedString());ve(Ip,`Sending RPC '${e}' ${d}:`,m,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,i,c);const{host:p}=new URL(m),v=qi(p);return this.Jo(e,m,y,r,v).then(E=>(ve(Ip,`Received RPC '${e}' ${d}: `,E),E),E=>{throw Zo(Ip,`RPC '${e}' ${d} failed with error: `,E,"url: ",m,"request:",r),E})}Ho(e,t,r,i,c,d){return this.Go(e,t,r,i,c)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,c)=>e[c]=i),r&&r.headers.forEach((i,c)=>e[c]=i)}zo(e,t){const r=JD[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class nI extends eI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,c){const d=lg();return new Promise((m,y)=>{const p=new eS;p.setWithCredentials(!0),p.listenOnce(tS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case nh.NO_ERROR:const E=p.getResponseJson();ve(fn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),m(E);break;case nh.TIMEOUT:ve(fn,`RPC '${e}' ${d} timed out`),y(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const b=p.getStatus();if(ve(fn,`RPC '${e}' ${d} failed with status:`,b,"response text:",p.getResponseText()),b>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const R=x?.error;if(R&&R.status&&R.message){const A=function(D){const z=D.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(z)>=0?z:re.UNKNOWN}(R.status);y(new ye(A,R.message))}else y(new ye(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new ye(re.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ve(fn,`RPC '${e}' ${d} completed.`)}});const v=JSON.stringify(i);ve(fn,`RPC '${e}' ${d} sending request:`,i),p.send(t,"POST",v,r,15)})}T_(e,t,r){const i=lg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=rS(),m=sS(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const v=c.join("");ve(fn,`Creating RPC '${e}' stream ${i}: ${v}`,y);const E=d.createWebChannel(v,y);this.I_(E);let b=!1,x=!1;const R=new tI({Yo:q=>{x?ve(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,q):(b||(ve(fn,`Opening RPC '${e}' stream ${i} transport.`),E.open(),b=!0),ve(fn,`RPC '${e}' stream ${i} sending:`,q),E.send(q))},Zo:()=>E.close()}),A=(q,D,z)=>{q.listen(D,F=>{try{z(F)}catch(de){setTimeout(()=>{throw de},0)}})};return A(E,Dc.EventType.OPEN,()=>{x||(ve(fn,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),A(E,Dc.EventType.CLOSE,()=>{x||(x=!0,ve(fn,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(E))}),A(E,Dc.EventType.ERROR,q=>{x||(x=!0,Zo(fn,`RPC '${e}' stream ${i} transport errored. Name:`,q.name,"Message:",q.message),R.a_(new ye(re.UNAVAILABLE,"The operation could not be completed")))}),A(E,Dc.EventType.MESSAGE,q=>{if(!x){const D=q.data[0];st(!!D,16349);const z=D,F=z?.error||z[0]?.error;if(F){ve(fn,`RPC '${e}' stream ${i} received error:`,F);const de=F.status;let $=function(j){const O=Vt[j];if(O!==void 0)return VS(O)}(de),he=F.message;$===void 0&&($=re.INTERNAL,he="Unknown error status: "+de+" with message "+F.message),x=!0,R.a_(new ye($,he)),E.close()}else ve(fn,`RPC '${e}' stream ${i} received:`,D),R.u_(D)}}),A(m,nS.STAT_EVENT,q=>{q.stat===Kp.PROXY?ve(fn,`RPC '${e}' stream ${i} detected buffering proxy`):q.stat===Kp.NOPROXY&&ve(fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){return new iD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,r=1e3,i=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="PersistentStream";class JS{constructor(e,t,r,i,c,d,m,y){this.Mi=e,this.S_=r,this.b_=i,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new ye(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ve(u0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ve(u0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sI extends JS{constructor(e,t,r,i,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=cD(this.serializer,e),r=function(c){if(!("targetChange"in c))return Me.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Me.min():d.readTime?Ys(d.readTime):Me.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=ig(this.serializer),t.addTarget=function(c,d){let m;const y=d.target;if(m=eg(y)?{documents:hD(c,y)}:{query:fD(c,y).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=BS(c,d.resumeToken);const p=sg(c,d.expectedCount);p!==null&&(m.expectedCount=p)}else if(d.snapshotVersion.compareTo(Me.min())>0){m.readTime=Ah(c,d.snapshotVersion.toTimestamp());const p=sg(c,d.expectedCount);p!==null&&(m.expectedCount=p)}return m}(this.serializer,e);const r=pD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=ig(this.serializer),t.removeTarget=e,this.q_(t)}}class rI extends JS{constructor(e,t,r,i,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dD(e.writeResults,e.commitTime),r=Ys(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ig(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>uD(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{}class iI extends aI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Go(e,rg(t,r),i,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(re.UNKNOWN,c.toString())})}Ho(e,t,r,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Ho(e,rg(t,r),i,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(re.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class oI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mr(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="RemoteStore";class lI{constructor(e,t,r,i,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(d=>{r.enqueueAndForget(async()=>{Fi(this)&&(ve(Li,"Restarting streams for network reachability change."),await async function(y){const p=Le(y);p.Ea.add(4),await du(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Jh(p)}(this))})}),this.Ra=new oI(r,i)}}async function Jh(n){if(Fi(n))for(const e of n.da)await e(!0)}async function du(n){for(const e of n.da)await e(!1)}function ew(n,e){const t=Le(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ey(t)?Jg(t):fl(t).O_()&&Zg(t,e))}function Wg(n,e){const t=Le(n),r=fl(t);t.Ia.delete(e),r.O_()&&tw(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fi(t)&&t.Ra.set("Unknown"))}function Zg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(n).Y_(e)}function tw(n,e){n.Va.Ue(e),fl(n).Z_(e)}function Jg(n){n.Va=new nD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fl(n).start(),n.Ra.ua()}function ey(n){return Fi(n)&&!fl(n).x_()&&n.Ia.size>0}function Fi(n){return Le(n).Ea.size===0}function nw(n){n.Va=void 0}async function cI(n){n.Ra.set("Online")}async function uI(n){n.Ia.forEach((e,t)=>{Zg(n,e)})}async function dI(n,e){nw(n),ey(n)?(n.Ra.ha(e),Jg(n)):n.Ra.set("Unknown")}async function hI(n,e,t){if(n.Ra.set("Online"),e instanceof qS&&e.state===2&&e.cause)try{await async function(i,c){const d=c.cause;for(const m of c.targetIds)i.Ia.has(m)&&(await i.remoteSyncer.rejectListen(m,d),i.Ia.delete(m),i.Va.removeTarget(m))}(n,e)}catch(r){ve(Li,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Th(n,r)}else if(e instanceof ih?n.Va.Ze(e):e instanceof US?n.Va.st(e):n.Va.tt(e),!t.isEqual(Me.min()))try{const r=await WS(n.localStore);t.compareTo(r)>=0&&await function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const v=c.Ia.get(p);v&&c.Ia.set(p,v.withResumeToken(y.resumeToken,d))}}),m.targetMismatches.forEach((y,p)=>{const v=c.Ia.get(y);if(!v)return;c.Ia.set(y,v.withResumeToken(cn.EMPTY_BYTE_STRING,v.snapshotVersion)),tw(c,y);const E=new xa(v.target,y,p,v.sequenceNumber);Zg(c,E)}),c.remoteSyncer.applyRemoteEvent(m)}(n,t)}catch(r){ve(Li,"Failed to raise snapshot:",r),await Th(n,r)}}async function Th(n,e,t){if(!dl(e))throw e;n.Ea.add(1),await du(n),n.Ra.set("Offline"),t||(t=()=>WS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ve(Li,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Jh(n)})}function sw(n,e){return e().catch(t=>Th(n,t,e))}async function ef(n){const e=Le(n),t=ka(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mg;for(;fI(e);)try{const i=await YD(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,mI(e,i)}catch(i){await Th(e,i)}rw(e)&&aw(e)}function fI(n){return Fi(n)&&n.Ta.length<10}function mI(n,e){n.Ta.push(e);const t=ka(n);t.O_()&&t.X_&&t.ea(e.mutations)}function rw(n){return Fi(n)&&!ka(n).x_()&&n.Ta.length>0}function aw(n){ka(n).start()}async function pI(n){ka(n).ra()}async function gI(n){const e=ka(n);for(const t of n.Ta)e.ea(t.mutations)}async function yI(n,e,t){const r=n.Ta.shift(),i=Hg.from(r,e,t);await sw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await ef(n)}async function vI(n,e){e&&ka(n).X_&&await async function(r,i){if(function(d){return JR(d)&&d!==re.ABORTED}(i.code)){const c=r.Ta.shift();ka(r).B_(),await sw(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),await ef(r)}}(n,e),rw(n)&&aw(n)}async function d0(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),ve(Li,"RemoteStore received new credentials");const r=Fi(t);t.Ea.add(3),await du(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Jh(t)}async function _I(n,e){const t=Le(n);e?(t.Ea.delete(2),await Jh(t)):e||(t.Ea.add(2),await du(t),t.Ra.set("Unknown"))}function fl(n){return n.ma||(n.ma=function(t,r,i){const c=Le(t);return c.sa(),new sI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)}(n.datastore,n.asyncQueue,{Xo:cI.bind(null,n),t_:uI.bind(null,n),r_:dI.bind(null,n),H_:hI.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),ey(n)?Jg(n):n.Ra.set("Unknown")):(await n.ma.stop(),nw(n))})),n.ma}function ka(n){return n.fa||(n.fa=function(t,r,i){const c=Le(t);return c.sa(),new rI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pI.bind(null,n),r_:vI.bind(null,n),ta:gI.bind(null,n),na:yI.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await ef(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(Li,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t,r,i,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=c,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,c){const d=Date.now()+r,m=new ty(e,t,d,i,c);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),dl(n))return new ye(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=Ic(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=r.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ko;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.ga=new St(Ne.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class sl{constructor(e,t,r,i,c,d,m,y,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new sl(e,t,Ko.emptySet(t),d,r,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class EI{constructor(){this.queries=f0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Le(t),c=i.queries;i.queries=f0(),c.forEach((d,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function f0(){return new zi(n=>NS(n),Qh)}async function iw(n,e){const t=Le(n);let r=3;const i=e.query;let c=t.queries.get(i);c?!c.ba()&&e.Da()&&(r=2):(c=new bI,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(i,!0);break;case 1:c.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(d){const m=ny(d,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(m)}t.queries.set(i,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&sy(t)}async function ow(n,e){const t=Le(n),r=e.query;let i=3;const c=t.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?i=e.Da()?0:1:!c.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function xI(n,e){const t=Le(n);let r=!1;for(const i of e){const c=i.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(i)&&(r=!0);d.wa=i}}r&&sy(t)}function SI(n,e,t){const r=Le(n),i=r.queries.get(e);if(i)for(const c of i.Sa)c.onError(t);r.queries.delete(e)}function sy(n){n.Ca.forEach(e=>{e.next()})}var cg,m0;(m0=cg||(cg={})).Ma="default",m0.Cache="cache";class lw{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.key=e}}class uw{constructor(e){this.key=e}}class wI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=TS(e),this.tu=new Ko(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new h0,i=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=i,m=!1;const y=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,E)=>{const b=i.get(v),x=Yh(this.query,E)?E:null,R=!!b&&this.mutatedKeys.has(b.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let q=!1;b&&x?b.data.isEqual(x.data)?R!==A&&(r.track({type:3,doc:x}),q=!0):this.su(b,x)||(r.track({type:2,doc:x}),q=!0,(y&&this.eu(x,y)>0||p&&this.eu(x,p)<0)&&(m=!0)):!b&&x?(r.track({type:0,doc:x}),q=!0):b&&!x&&(r.track({type:1,doc:b}),q=!0,(y||p)&&(m=!0)),q&&(x?(d=d.add(x),c=A?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{tu:d,iu:r,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort((v,E)=>function(x,R){const A=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:q})}};return A(x)-A(R)}(v.type,E.type)||this.eu(v.doc,E.doc)),this.ou(r),i=i??!1;const m=t&&!i?this._u():[],y=this.Xa.size===0&&this.current&&!i?1:0,p=y!==this.Za;return this.Za=y,d.length!==0||p?{snapshot:new sl(this.query,e.tu,c,d,e.mutatedKeys,y===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new h0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new uw(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new cw(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ry="SyncEngine";class AI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class NI{constructor(e){this.key=e,this.hu=!1}}class TI{constructor(e,t,r,i,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new zi(m=>NS(m),Qh),this.Iu=new Map,this.Eu=new Set,this.du=new St(Ne.comparator),this.Au=new Map,this.Ru=new Qg,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CI(n,e,t=!0){const r=gw(n);let i;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await dw(r,e,t,!0),i}async function jI(n,e){const t=gw(n);await dw(t,e,!0,!1)}async function dw(n,e,t,r){const i=await KD(n.localStore,Qs(e)),c=i.targetId,d=n.sharedClientState.addLocalQueryTarget(c,t);let m;return r&&(m=await RI(n,e,c,d==="current",i.resumeToken)),n.isPrimaryClient&&t&&ew(n.remoteStore,i),m}async function RI(n,e,t,r,i){n.pu=(E,b,x)=>async function(A,q,D,z){let F=q.view.ru(D);F.Cs&&(F=await i0(A.localStore,q.query,!1).then(({documents:M})=>q.view.ru(M,F)));const de=z&&z.targetChanges.get(q.targetId),$=z&&z.targetMismatches.get(q.targetId)!=null,he=q.view.applyChanges(F,A.isPrimaryClient,de,$);return g0(A,q.targetId,he.au),he.snapshot}(n,E,b,x);const c=await i0(n.localStore,e,!0),d=new wI(e,c.Qs),m=d.ru(c.documents),y=uu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=d.applyChanges(m,n.isPrimaryClient,y);g0(n,t,p.au);const v=new AI(e,t,d);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function DI(n,e,t){const r=Le(n),i=r.Tu.get(e),c=r.Iu.get(i.targetId);if(c.length>1)return r.Iu.set(i.targetId,c.filter(d=>!Qh(d,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await og(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Wg(r.remoteStore,i.targetId),ug(r,i.targetId)}).catch(ul)):(ug(r,i.targetId),await og(r.localStore,i.targetId,!0))}async function II(n,e){const t=Le(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wg(t.remoteStore,r.targetId))}async function PI(n,e,t){const r=qI(n);try{const i=await function(d,m){const y=Le(d),p=gt.now(),v=m.reduce((x,R)=>x.add(R.key),Ye());let E,b;return y.persistence.runTransaction("Locally write mutations","readwrite",x=>{let R=Lr(),A=Ye();return y.Ns.getEntries(x,v).next(q=>{R=q,R.forEach((D,z)=>{z.isValidDocument()||(A=A.add(D))})}).next(()=>y.localDocuments.getOverlayedDocuments(x,R)).next(q=>{E=q;const D=[];for(const z of m){const F=YR(z,E.get(z.key).overlayedDocument);F!=null&&D.push(new Ua(z.key,F,vS(F.value.mapValue),ns.exists(!0)))}return y.mutationQueue.addMutationBatch(x,p,D,m)}).next(q=>{b=q;const D=q.applyToLocalDocumentSet(E,A);return y.documentOverlayCache.saveOverlays(x,q.batchId,D)})}).then(()=>({batchId:b.batchId,changes:jS(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(d,m,y){let p=d.Vu[d.currentUser.toKey()];p||(p=new St(Qe)),p=p.insert(m,y),d.Vu[d.currentUser.toKey()]=p}(r,i.batchId,t),await hu(r,i.changes),await ef(r.remoteStore)}catch(i){const c=ny(i,"Failed to persist write");t.reject(c)}}async function hw(n,e){const t=Le(n);try{const r=await $D(t.localStore,e);e.targetChanges.forEach((i,c)=>{const d=t.Au.get(c);d&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?d.hu=!0:i.modifiedDocuments.size>0?st(d.hu,14607):i.removedDocuments.size>0&&(st(d.hu,42227),d.hu=!1))}),await hu(t,r,e)}catch(r){await ul(r)}}function p0(n,e,t){const r=Le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((c,d)=>{const m=d.view.va(e);m.snapshot&&i.push(m.snapshot)}),function(d,m){const y=Le(d);y.onlineState=m;let p=!1;y.queries.forEach((v,E)=>{for(const b of E.Sa)b.va(m)&&(p=!0)}),p&&sy(y)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kI(n,e,t){const r=Le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),c=i&&i.key;if(c){let d=new St(Ne.comparator);d=d.insert(c,pn.newNoDocument(c,Me.min()));const m=Ye().add(c),y=new Wh(Me.min(),new Map,new St(Qe),d,m);await hw(r,y),r.du=r.du.remove(c),r.Au.delete(e),ay(r)}else await og(r.localStore,e,!1).then(()=>ug(r,e,t)).catch(ul)}async function OI(n,e){const t=Le(n),r=e.batch.batchId;try{const i=await GD(t.localStore,e);mw(t,r,null),fw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await hu(t,i)}catch(i){await ul(i)}}async function MI(n,e,t){const r=Le(n);try{const i=await function(d,m){const y=Le(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return y.mutationQueue.lookupMutationBatch(p,m).next(E=>(st(E!==null,37113),v=E.keys(),y.mutationQueue.removeMutationBatch(p,E))).next(()=>y.mutationQueue.performConsistencyCheck(p)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(p,v,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>y.localDocuments.getDocuments(p,v))})}(r.localStore,e);mw(r,e,t),fw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await hu(r,i)}catch(i){await ul(i)}}function fw(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function mw(n,e,t){const r=Le(n);let i=r.Vu[r.currentUser.toKey()];if(i){const c=i.get(e);c&&(t?c.reject(t):c.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ug(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||pw(n,r)})}function pw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Wg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ay(n))}function g0(n,e,t){for(const r of t)r instanceof cw?(n.Ru.addReference(r.key,e),LI(n,r)):r instanceof uw?(ve(ry,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||pw(n,r.key)):Pe(19791,{wu:r})}function LI(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ve(ry,"New document in limbo: "+t),n.Eu.add(r),ay(n))}function ay(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(pt.fromString(e)),r=n.fu.next();n.Au.set(r,new NI(t)),n.du=n.du.insert(t,r),ew(n.remoteStore,new xa(Qs(Bg(t.path)),r,"TargetPurposeLimboResolution",Hh.ce))}}async function hu(n,e,t){const r=Le(n),i=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach((m,y)=>{d.push(r.pu(y,e,t).then(p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,v?"current":"not-current")}if(p){i.push(p);const v=Kg.As(y.targetId,p);c.push(v)}}))}),await Promise.all(d),r.Pu.H_(i),await async function(y,p){const v=Le(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ie.forEach(p,b=>ie.forEach(b.Es,x=>v.persistence.referenceDelegate.addReference(E,b.targetId,x)).next(()=>ie.forEach(b.ds,x=>v.persistence.referenceDelegate.removeReference(E,b.targetId,x)))))}catch(E){if(!dl(E))throw E;ve(Xg,"Failed to update sequence numbers: "+E)}for(const E of p){const b=E.targetId;if(!E.fromCache){const x=v.Ms.get(b),R=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(R);v.Ms=v.Ms.insert(b,A)}}}(r.localStore,c))}async function VI(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){ve(ry,"User change. New user:",e.toKey());const r=await XS(t.localStore,e);t.currentUser=e,function(c,d){c.mu.forEach(m=>{m.forEach(y=>{y.reject(new ye(re.CANCELLED,d))})}),c.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hu(t,r.Ls)}}function UI(n,e){const t=Le(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let i=Ye();const c=t.Iu.get(e);if(!c)return i;for(const d of c){const m=t.Tu.get(d);i=i.unionWith(m.view.nu)}return i}}function gw(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kI.bind(null,e),e.Pu.H_=xI.bind(null,e.eventManager),e.Pu.yu=SI.bind(null,e.eventManager),e}function qI(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MI.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return HD(this.persistence,new BD,e.initialUser,this.serializer)}Cu(e){return new KS(Yg.mi,this.serializer)}Du(e){return new WD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class BI extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){st(this.persistence.referenceDelegate instanceof Nh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ND(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new KS(r=>Nh.mi(r,t),this.serializer)}}class dg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VI.bind(null,this.syncEngine),await _I(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EI}()}createDatastore(e){const t=Zh(e.databaseInfo.databaseId),r=function(c){return new nI(c)}(e.databaseInfo);return function(c,d,m,y){return new iI(c,d,m,y)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,c,d,m){return new lI(r,i,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>p0(this.syncEngine,t,0),function(){return c0.v()?new c0:new ZD}())}createSyncEngine(e,t){return function(i,c,d,m,y,p,v){const E=new TI(i,c,d,m,y,p);return v&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const r=Le(t);ve(Li,"RemoteStore shutting down."),r.Ea.add(5),await du(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dg.provider={build:()=>new dg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="FirestoreClient";class zI{constructor(e,t,r,i,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mn.UNAUTHENTICATED,this.clientId=Og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async d=>{ve(Oa,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(ve(Oa,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ny(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kp(n,e){n.asyncQueue.verifyOperationInProgress(),ve(Oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function y0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await FI(n);ve(Oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>d0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>d0(e.remoteStore,i)),n._onlineComponents=e}async function FI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(Oa,"Using user provided OfflineComponentProvider");try{await kp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Zo("Error using user provided cache. Falling back to memory cache: "+t),await kp(n,new Ch)}}else ve(Oa,"Using default OfflineComponentProvider"),await kp(n,new BI(void 0));return n._offlineComponents}async function vw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(Oa,"Using user provided OnlineComponentProvider"),await y0(n,n._uninitializedComponentsProvider._online)):(ve(Oa,"Using default OnlineComponentProvider"),await y0(n,new dg))),n._onlineComponents}function HI(n){return vw(n).then(e=>e.syncEngine)}async function _w(n){const e=await vw(n),t=e.eventManager;return t.onListen=CI.bind(null,e.syncEngine),t.onUnlisten=DI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=II.bind(null,e.syncEngine),t}function GI(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget(async()=>function(c,d,m,y,p){const v=new yw({next:b=>{v.Nu(),d.enqueueAndForget(()=>ow(c,E));const x=b.docs.has(m);!x&&b.fromCache?p.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&b.fromCache&&y&&y.source==="server"?p.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),E=new lw(Bg(m.path),v,{includeMetadataChanges:!0,qa:!0});return iw(c,E)}(await _w(n),n.asyncQueue,e,t,r)),r.promise}function $I(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget(async()=>function(c,d,m,y,p){const v=new yw({next:b=>{v.Nu(),d.enqueueAndForget(()=>ow(c,E)),b.fromCache&&y.source==="server"?p.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),E=new lw(m,v,{includeMetadataChanges:!0,qa:!0});return iw(c,E)}(await _w(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="firestore.googleapis.com",_0=!0;class b0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ew,this.ssl=_0}else this.host=e.host,this.ssl=e.ssl??_0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wD)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Zj;switch(r.type){case"firstParty":return new nR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=v0.get(t);r&&(ve("ComponentProvider","Removing Datastore"),v0.delete(t),r.terminate())}(this),Promise.resolve()}}function QI(n,e,t,r={}){n=gs(n,tf);const i=qi(e),c=n._getSettings(),d={...c,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;i&&(bg(`https://${m}`),Eg("Firestore",!0)),c.host!==Ew&&c.host!==m&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:m,ssl:i,emulatorOptions:r};if(!Ii(y,d)&&(n._setSettings(y),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=mn.MOCK_USER;else{p=fx(r.mockUserToken,n._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new mn(E)}n._authCredentials=new Jj(new iS(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Dt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(lu(t,Dt._jsonSchema))return new Dt(e,r||null,new Ne(pt.fromString(t.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:qt("string",Dt._jsonSchemaVersion),referencePath:qt("string")};class Ca extends Hi{constructor(e,t,r){super(e,t,Bg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new Ne(e))}withConverter(e){return new Ca(this.firestore,e,this._path)}}function Ee(n,e,...t){if(n=Yt(n),oS("collection","path",e),n instanceof tf){const r=pt.fromString(e,...t);return PE(r),new Ca(n,null,r)}{if(!(n instanceof Dt||n instanceof Ca))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return PE(r),new Ca(n.firestore,null,r)}}function Oe(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=Og.newId()),oS("doc","path",e),n instanceof tf){const r=pt.fromString(e,...t);return IE(r),new Dt(n,null,new Ne(r))}{if(!(n instanceof Dt||n instanceof Ca))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return IE(r),new Dt(n.firestore,n instanceof Ca?n.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="AsyncQueue";class x0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZS(this,"async_queue_retry"),this._c=()=>{const r=Pp();r&&ve(E0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Pp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ir;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dl(e))throw e;ve(E0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Mr("INTERNAL UNHANDLED ERROR: ",S0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=ty.createAndSchedule(this,e,t,r,c=>this.hc(c));return this.tc.push(i),i}uc(){this.nc&&Pe(47125,{Pc:S0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function S0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Gi extends tf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new x0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x0(e),this._firestoreClient=void 0,await e}}}function YI(n,e){const t=typeof n=="object"?n:Ag(),r=typeof n=="string"?n:bh,i=Uh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const c=ux("firestore");c&&QI(i,...c)}return i}function iy(n){if(n._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KI(n),n._firestoreClient}function KI(n){const e=n._freezeSettings(),t=function(i,c,d,m){return new _R(i,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,bw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new zI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){const c=i?._online.build();return{_offline:i?._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(cn.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ts(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:qt("string",ts._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ks._jsonSchemaVersion}}static fromJSON(e){if(lu(e,Ks._jsonSchema))return new Ks(e.latitude,e.longitude)}}Ks._jsonSchemaVersion="firestore/geoPoint/1.0",Ks._jsonSchema={type:qt("string",Ks._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==i[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,Xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Xs(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xs._jsonSchemaVersion="firestore/vectorValue/1.0",Xs._jsonSchema={type:qt("string",Xs._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=/^__.*__$/;class WI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}class xw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:n})}}class ly{constructor(e,t,r,i,c,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ly({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Sw(this.Ac)&&XI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zh(e)}Cc(e,t,r,i=!1){return new ly({Ac:e,methodName:t,Dc:r,path:ln.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(n){const e=n._freezeSettings(),t=Zh(n._databaseId);return new ZI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ww(n,e,t,r,i,c={}){const d=n.Cc(c.merge||c.mergeFields?2:0,e,t,i);cy("Data must be an object, but it was:",d,r);const m=Aw(r,d);let y,p;if(c.merge)y=new Un(d.fieldMask),p=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const E of c.mergeFields){const b=hg(e,E,t);if(!d.contains(b))throw new ye(re.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Tw(v,b)||v.push(b)}y=new Un(v),p=d.fieldTransforms.filter(E=>y.covers(E.field))}else y=null,p=d.fieldTransforms;return new WI(new Nn(m),y,p)}class rf extends oy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rf}}function JI(n,e,t,r){const i=n.Cc(1,e,t);cy("Data must be an object, but it was:",i,r);const c=[],d=Nn.empty();Va(r,(y,p)=>{const v=uy(e,y,t);p=Yt(p);const E=i.yc(v);if(p instanceof rf)c.push(v);else{const b=fu(p,E);b!=null&&(c.push(v),d.set(v,b))}});const m=new Un(c);return new xw(d,m,i.fieldTransforms)}function e2(n,e,t,r,i,c){const d=n.Cc(1,e,t),m=[hg(e,r,t)],y=[i];if(c.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)m.push(hg(e,c[b])),y.push(c[b+1]);const p=[],v=Nn.empty();for(let b=m.length-1;b>=0;--b)if(!Tw(p,m[b])){const x=m[b];let R=y[b];R=Yt(R);const A=d.yc(x);if(R instanceof rf)p.push(x);else{const q=fu(R,A);q!=null&&(p.push(x),v.set(x,q))}}const E=new Un(p);return new xw(v,E,d.fieldTransforms)}function t2(n,e,t,r=!1){return fu(t,n.Cc(r?4:3,e))}function fu(n,e){if(Nw(n=Yt(n)))return cy("Unsupported field value:",e,n),Aw(n,e);if(n instanceof oy)return function(r,i){if(!Sw(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(i);c&&i.fieldTransforms.push(c)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const c=[];let d=0;for(const m of r){let y=fu(m,i.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}}(n,e)}return function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=gt.fromDate(r);return{timestampValue:Ah(i.serializer,c)}}if(r instanceof gt){const c=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(i.serializer,c)}}if(r instanceof Ks)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:BS(i.serializer,r._byteString)};if(r instanceof Dt){const c=i.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw i.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:$g(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xs)return function(d,m){return{mapValue:{fields:{[gS]:{stringValue:yS},[Eh]:{arrayValue:{values:d.toArray().map(p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return zg(m.serializer,p)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Fh(r)}`)}(n,e)}function Aw(n,e){const t={};return uS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Va(n,(r,i)=>{const c=fu(i,e.mc(r));c!=null&&(t[r]=c)}),{mapValue:{fields:t}}}function Nw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Ks||n instanceof ts||n instanceof Dt||n instanceof oy||n instanceof Xs)}function cy(n,e,t){if(!Nw(t)||!lS(t)){const r=Fh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function hg(n,e,t){if((e=Yt(e))instanceof nf)return e._internalPath;if(typeof e=="string")return uy(n,e);throw jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const n2=new RegExp("[~\\*/\\[\\]]");function uy(n,e,t){if(e.search(n2)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nf(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jh(n,e,t,r,i){const c=r&&!r.isEmpty(),d=i!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${r}`),d&&(y+=` in document ${i}`),y+=")"),new ye(re.INVALID_ARGUMENT,m+n+y)}function Tw(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,r,i,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(af("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class s2 extends Cw{data(){return super.data()}}function af(n,e){return typeof e=="string"?uy(n,e):e instanceof nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class jw extends dy{}function Te(n,e,...t){let r=[];e instanceof dy&&r.push(e),r=r.concat(t),function(c){const d=c.filter(y=>y instanceof hy).length,m=c.filter(y=>y instanceof of).length;if(d>1||d>0&&m>0)throw new ye(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class of extends jw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new of(e,t,r)}_apply(e){const t=this._parse(e);return Rw(e._query,t),new Hi(e.firestore,e.converter,tg(e._query,t))}_parse(e){const t=sf(e.firestore);return function(c,d,m,y,p,v,E){let b;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){A0(E,v);const R=[];for(const A of E)R.push(w0(y,c,A));b={arrayValue:{values:R}}}else b=w0(y,c,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||A0(E,v),b=t2(m,d,E,v==="in"||v==="not-in");return Ut.create(p,v,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function De(n,e,t){const r=e,i=af("where",n);return of._create(i,r,t)}class hy extends dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ys.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,c){let d=i;const m=c.getFlattenedFilters();for(const y of m)Rw(d,y),d=tg(d,y)}(e._query,t),new Hi(e.firestore,e.converter,tg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fy extends jw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fy(e,t)}_apply(e){const t=function(i,c,d){if(i.startAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kc(c,d)}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(i,c){const d=i.explicitOrderBy.concat([c]);return new hl(i.path,i.collectionGroup,d,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Ue(n,e="asc"){const t=e,r=af("orderBy",n);return fy._create(r,t)}function w0(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new ye(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AS(e)&&t.indexOf("/")!==-1)throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!Ne.isDocumentKey(r))throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return BE(n,new Ne(r))}if(t instanceof Dt)return BE(n,t._key);throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(t)}.`)}function A0(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rw(n,e){const t=function(i,c){for(const d of i)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class a2{convertValue(e,t="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Va(e,(i,c)=>{r[i]=this.convertValue(c,t)}),r}convertVectorValue(e){const t=e.fields?.[Eh].arrayValue?.values?.map(r=>Rt(r.doubleValue));return new Xs(t)}convertGeoPoint(e){return new Ks(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$h(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const t=Da(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);st(QS(r),9688,{name:e});const i=new Qc(r.get(1),r.get(3)),c=new Ne(r.popFirst(5));return i.isEqual(t)||Mr(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class kc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ji extends Cw{constructor(e,t,r,i,c,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(af("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ji._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",ji._jsonSchema={type:qt("string",ji._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class oh extends ji{data(e={}){return super.data(e)}}class Xo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oh(this._firestore,this._userDataWriter,r.key,r,new kc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,c){if(i._snapshot.oldDocs.isEmpty()){let d=0;return i._snapshot.docChanges.map(m=>{const y=new oh(i._firestore,i._userDataWriter,m.doc.key,m.doc,new kc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new oh(i._firestore,i._userDataWriter,m.doc.key,m.doc,new kc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,v=-1;return m.type!==0&&(p=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),v=d.indexOf(m.doc.key)),{type:i2(m.type),doc:y,oldIndex:p,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function i2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(n){n=gs(n,Dt);const e=gs(n.firestore,Gi);return GI(iy(e),n._key).then(t=>o2(e,n,t))}Xo._jsonSchemaVersion="firestore/querySnapshot/1.0",Xo._jsonSchema={type:qt("string",Xo._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class Iw extends a2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,t)}}function je(n){n=gs(n,Hi);const e=gs(n.firestore,Gi),t=iy(e),r=new Iw(e);return r2(n._query),$I(t,n._query).then(i=>new Xo(e,r,n,i))}function Vi(n,e,t){n=gs(n,Dt);const r=gs(n.firestore,Gi),i=Dw(n.converter,e,t);return lf(r,[ww(sf(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ns.none())])}function as(n,e,t,...r){n=gs(n,Dt);const i=gs(n.firestore,Gi),c=sf(i);let d;return d=typeof(e=Yt(e))=="string"||e instanceof nf?e2(c,"updateDoc",n._key,e,t,r):JI(c,"updateDoc",n._key,e),lf(i,[d.toMutation(n._key,ns.exists(!0))])}function is(n){return lf(gs(n.firestore,Gi),[new Fg(n._key,ns.none())])}function ss(n,e){const t=gs(n.firestore,Gi),r=Oe(n),i=Dw(n.converter,e);return lf(t,[ww(sf(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ns.exists(!1))]).then(()=>r)}function lf(n,e){return function(r,i){const c=new Ir;return r.asyncQueue.enqueueAndForget(async()=>PI(await HI(r),i,c)),c.promise}(iy(n),e)}function o2(n,e,t){const r=t.docs.get(e._key),i=new Iw(n);return new ji(n,i,e._key,r,new kc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){cl=i})(Bi),Pi(new ja("firestore",(r,{instanceIdentifier:i,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new Gi(new eR(r.getProvider("auth-internal")),new sR(d,r.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(p.options.projectId,v)}(d,i),d);return c={useFetchStreams:t,...c},m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Hs(CE,jE,e),Hs(CE,jE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="firebasestorage.googleapis.com",l2="storageBucket",c2=120*1e3,u2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Js{constructor(e,t,r=0){super(Op(e),`Firebase Storage: ${t} (${Op(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,er.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Op(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zs||(Zs={}));function Op(n){return"storage/"+n}function d2(){const n="An unknown error occurred, please check the error payload for server response.";return new er(Zs.UNKNOWN,n)}function h2(){return new er(Zs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function f2(){return new er(Zs.CANCELED,"User canceled the upload/download.")}function m2(n){return new er(Zs.INVALID_URL,"Invalid URL '"+n+"'.")}function p2(n){return new er(Zs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function N0(n){return new er(Zs.INVALID_ARGUMENT,n)}function kw(){return new er(Zs.APP_DELETED,"The Firebase app was deleted.")}function g2(n){return new er(Zs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ms.makeFromUrl(e,t)}catch{return new ms(e,"")}if(r.path==="")return r;throw p2(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function c(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+i+d,"i"),y={bucket:1,path:3};function p(de){de.path_=decodeURIComponent(de.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",x=new RegExp(`^https?://${E}/${v}/b/${i}/o${b}`,"i"),R={bucket:1,path:3},A=t===Pw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,q="([^?#]*)",D=new RegExp(`^https?://${A}/${i}/${q}`,"i"),F=[{regex:m,indices:y,postModify:c},{regex:x,indices:R,postModify:p},{regex:D,indices:{bucket:1,path:2},postModify:p}];for(let de=0;de<F.length;de++){const $=F[de],he=$.regex.exec(e);if(he){const M=he[$.indices.bucket];let j=he[$.indices.path];j||(j=""),r=new ms(M,j),$.postModify(r);break}}if(r==null)throw m2(e);return r}}class y2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n,e,t){let r=1,i=null,c=null,d=!1,m=0;function y(){return m===2}let p=!1;function v(...q){p||(p=!0,e.apply(null,q))}function E(q){i=setTimeout(()=>{i=null,n(x,y())},q)}function b(){c&&clearTimeout(c)}function x(q,...D){if(p){b();return}if(q){b(),v.call(null,q,...D);return}if(y()||d){b(),v.call(null,q,...D);return}r<64&&(r*=2);let F;m===1?(m=2,F=0):F=(r+Math.random())*1e3,E(F)}let R=!1;function A(q){R||(R=!0,b(),!p&&(i!==null?(q||(m=2),clearTimeout(i),E(0)):q||(m=1)))}return E(0),c=setTimeout(()=>{d=!0,A(!0)},t),A}function _2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(n){return n!==void 0}function T0(n,e,t,r){if(r<e)throw N0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw N0(`Invalid value for '${n}'. Expected ${t} or less.`)}function E2(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Rh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Rh||(Rh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,c=e.indexOf(n)!==-1;return t||i||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,t,r,i,c,d,m,y,p,v,E,b=!0,x=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=E,this.retry=b,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,A)=>{this.resolve_=R,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Xd(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const y=m.loaded,p=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,p)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Rh.NO_ERROR,y=c.getStatus();if(!m||x2(y,this.additionalRetryCodes_)&&this.retry){const v=c.getErrorCode()===Rh.ABORT;r(!1,new Xd(!1,null,v));return}const p=this.successCodes_.indexOf(y)!==-1;r(!0,new Xd(p,c))})},t=(r,i)=>{const c=this.resolve_,d=this.reject_,m=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());b2(y)?c(y):c()}catch(y){d(y)}else if(m!==null){const y=d2();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(i.canceled){const y=this.appDelete_?kw():f2();d(y)}else{const y=h2();d(y)}};this.canceled_?t(!1,new Xd(!1,null,!0)):this.backoffId_=v2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function w2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function A2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function N2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function T2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function C2(n,e,t,r,i,c,d=!0,m=!1){const y=E2(n.urlParams),p=n.url+y,v=Object.assign({},n.headers);return N2(v,e),w2(v,t),A2(v,c),T2(v,r),new S2(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function R2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t){this._service=e,t instanceof ms?this._location=t:this._location=ms.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Dh(e,t)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R2(this._location.path)}get storage(){return this._service}get parent(){const e=j2(this._location.path);if(e===null)return null;const t=new ms(this._location.bucket,e);return new Dh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw g2(e)}}function C0(n,e){const t=e?.[l2];return t==null?null:ms.makeFromBucketSpec(t,n)}function D2(n,e,t,r={}){n.host=`${e}:${t}`;const i=qi(e);i&&(bg(`https://${n.host}/b`),Eg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:c}=r;c&&(n._overrideAuthToken=typeof c=="string"?c:fx(c,n.app.options.projectId))}class I2{constructor(e,t,r,i,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=Pw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=c2,this._maxUploadRetryTime=u2,this._requests=new Set,i!=null?this._bucket=ms.makeFromBucketSpec(i,this._host):this._bucket=C0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ms.makeFromBucketSpec(this._url,e):this._bucket=C0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){T0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){T0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dh(this,e)}_makeRequest(e,t,r,i,c=!0){if(this._deleted)return new y2(kw());{const d=C2(e,this._appId,r,i,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const j0="@firebase/storage",R0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="storage";function P2(n=Ag(),e){n=Yt(n);const r=Uh(n,Ow).getImmediate({identifier:e}),i=ux("storage");return i&&k2(r,...i),r}function k2(n,e,t,r={}){D2(n,e,t,r)}function O2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new I2(t,r,i,e,Bi)}function M2(){Pi(new ja(Ow,O2,"PUBLIC").setMultipleInstances(!0)),Hs(j0,R0,""),Hs(j0,R0,"esm2020")}M2();const L2={apiKey:"AIzaSyDp1wZPZpR82WfGEY7u94RBijlprtfl33Q",authDomain:"dentist-b178b.firebaseapp.com",projectId:"dentist-b178b",storageBucket:"dentist-b178b.firebasestorage.app",messagingSenderId:"289207314447",appId:"1:289207314447:web:780ce9797588d1bf971b7a"},cf=wg(L2),lh=Zx(cf),oe=YI(cf);P2(cf);const Ni={async logOut(){try{await yE(lh)}catch(n){throw new Error("Failed to log out"+n)}},async login(n){try{const t=(await LC(lh,n.email,n.password)).user,r=await En(Oe(oe,"users",t.uid));let i;if(!r.exists())i={uid:t.uid,email:t.email??"",role:"admin",allowedPaths:["admin"]},await Vi(Oe(oe,"users",t.uid),i);else{const c=r.data();i={uid:t.uid,email:c.email??t.email??"",role:c.role??"partial",allowedPaths:Array.isArray(c.allowedPaths)?c.allowedPaths:[]}}return i}catch(e){if(console.error("Login error:",e),e.code)switch(e.code){case"auth/user-not-found":throw new Error("No user found with this email address");case"auth/wrong-password":throw new Error("Incorrect password");case"auth/invalid-email":throw new Error("Invalid email address");case"auth/user-disabled":throw new Error("This user account has been disabled");case"auth/too-many-requests":throw new Error("Too many failed attempts. Please try again later");case"auth/network-request-failed":throw new Error("Network error. Please check your connection");default:throw new Error(`Authentication failed: ${e.message}`)}throw new Error(`Login failed: ${e.message||e}`)}},async register(n){const e=`secondary-${Date.now()}`,t=wg(cf.options,e),r=Zx(t);try{const c=(await MC(r,n.email,n.password)).user,d={uid:c.uid,email:c.email??n.email,displayName:n.displayName,role:n.role,allowedPaths:n.allowedPaths||[]};return await Vi(Oe(oe,"users",c.uid),d),d}catch(i){throw new Error("Failed to register: "+(i instanceof Error?i.message:String(i)))}finally{await yE(r).catch(()=>{}),await S1(t).catch(()=>{})}},observeAuthState(n){try{return qC(lh,async e=>{if(e)try{const t=await En(Oe(oe,"users",e.uid));if(t.exists()){const r=t.data();n(r)}else n(null)}catch(t){console.error("Erro ao buscar dados do usurio:",t),n(null)}else n(null)})}catch(e){throw new Error("Erro ao observar estado de autenticao: "+e)}}},Mw=P.createContext(void 0);function V2({children:n}){const[e,t]=P.useState(null),[r,i]=P.useState(!0),[c,d]=P.useState(null);P.useEffect(()=>{const x=Ni.observeAuthState(R=>{t(R),i(!1)});return()=>x()},[]);const b={user:e,loading:r,error:c,login:async x=>{try{i(!0),d(null);const R=await Ni.login(x);t(R),i(!1)}catch(R){d(R instanceof Error?R.message:"An error occurred"),i(!1)}},register:async x=>{try{d(null),i(!0);const R=await Ni.register(x);t(R),i(!1)}catch(R){d(R instanceof Error?R.message:"An error occurred"),i(!1)}},registerForAdmin:async x=>{try{i(!0),d(null);const R=await Ni.register(x);return i(!1),R}catch(R){throw d(R instanceof Error?R.message:"An error occurred"),i(!1),R}},logout:async()=>{try{await Ni.logOut(),t(null)}catch(x){d(x instanceof Error?x.message:"An error occurred")}},clearError:()=>{d(null)}};return o.jsx(Mw.Provider,{value:b,children:n})}/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var D0="popstate";function U2(n={}){function e(r,i){let{pathname:c,search:d,hash:m}=r.location;return fg("",{pathname:c,search:d,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Zc(i)}return B2(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function rs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q2(){return Math.random().toString(36).substring(2,10)}function I0(n,e){return{usr:n.state,key:n.key,idx:e}}function fg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ml(e):e,state:t,key:e&&e.key||r||q2()}}function Zc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ml(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function B2(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:c=!1}=r,d=i.history,m="POP",y=null,p=v();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function v(){return(d.state||{idx:null}).idx}function E(){m="POP";let q=v(),D=q==null?null:q-p;p=q,y&&y({action:m,location:A.location,delta:D})}function b(q,D){m="PUSH";let z=fg(A.location,q,D);p=v()+1;let F=I0(z,p),de=A.createHref(z);try{d.pushState(F,"",de)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(de)}c&&y&&y({action:m,location:A.location,delta:1})}function x(q,D){m="REPLACE";let z=fg(A.location,q,D);p=v();let F=I0(z,p),de=A.createHref(z);d.replaceState(F,"",de),c&&y&&y({action:m,location:A.location,delta:0})}function R(q){return z2(q)}let A={get action(){return m},get location(){return n(i,d)},listen(q){if(y)throw new Error("A history only accepts one active listener");return i.addEventListener(D0,E),y=q,()=>{i.removeEventListener(D0,E),y=null}},createHref(q){return e(i,q)},createURL:R,encodeLocation(q){let D=R(q);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:b,replace:x,go(q){return d.go(q)}};return A}function z2(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Zc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Lw(n,e,t="/"){return F2(n,e,t,!1)}function F2(n,e,t,r){let i=typeof e=="string"?ml(e):e,c=Vr(i.pathname||"/",t);if(c==null)return null;let d=Vw(n);H2(d);let m=null;for(let y=0;m==null&&y<d.length;++y){let p=tP(c);m=J2(d[y],p,r)}return m}function Vw(n,e=[],t=[],r=""){let i=(c,d,m)=>{let y={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};y.relativePath.startsWith("/")&&(Et(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length));let p=Pr([r,y.relativePath]),v=t.concat(y);c.children&&c.children.length>0&&(Et(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Vw(c.children,e,v,p)),!(c.path==null&&!c.index)&&e.push({path:p,score:W2(p,c.index),routesMeta:v})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))i(c,d);else for(let m of Uw(c.path))i(c,d,m)}),e}function Uw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),c=t.replace(/\?$/,"");if(r.length===0)return i?[c,""]:[c];let d=Uw(r.join("/")),m=[];return m.push(...d.map(y=>y===""?c:[c,y].join("/"))),i&&m.push(...d),m.map(y=>n.startsWith("/")&&y===""?"/":y)}function H2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Z2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var G2=/^:[\w-]+$/,$2=3,Q2=2,Y2=1,K2=10,X2=-2,P0=n=>n==="*";function W2(n,e){let t=n.split("/"),r=t.length;return t.some(P0)&&(r+=X2),e&&(r+=Q2),t.filter(i=>!P0(i)).reduce((i,c)=>i+(G2.test(c)?$2:c===""?Y2:K2),r)}function Z2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function J2(n,e,t=!1){let{routesMeta:r}=n,i={},c="/",d=[];for(let m=0;m<r.length;++m){let y=r[m],p=m===r.length-1,v=c==="/"?e:e.slice(c.length)||"/",E=Ih({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},v),b=y.route;if(!E&&p&&t&&!r[r.length-1].route.index&&(E=Ih({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},v)),!E)return null;Object.assign(i,E.params),d.push({params:i,pathname:Pr([c,E.pathname]),pathnameBase:aP(Pr([c,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(c=Pr([c,E.pathnameBase]))}return d}function Ih(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=eP(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let c=i[0],d=c.replace(/(.)\/+$/,"$1"),m=i.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:E},b)=>{if(v==="*"){let R=m[b]||"";d=c.slice(0,c.length-R.length).replace(/(.)\/+$/,"$1")}const x=m[b];return E&&!x?p[v]=void 0:p[v]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:n}}function eP(n,e=!1,t=!0){rs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,y)=>(r.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function tP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Vr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function nP(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ml(n):n;return{pathname:t?t.startsWith("/")?t:sP(t,e):e,search:iP(r),hash:oP(i)}}function sP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Mp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function my(n){let e=rP(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function py(n,e,t,r=!1){let i;typeof n=="string"?i=ml(n):(i={...n},Et(!i.pathname||!i.pathname.includes("?"),Mp("?","pathname","search",i)),Et(!i.pathname||!i.pathname.includes("#"),Mp("#","pathname","hash",i)),Et(!i.search||!i.search.includes("#"),Mp("#","search","hash",i)));let c=n===""||i.pathname==="",d=c?"/":i.pathname,m;if(d==null)m=t;else{let E=e.length-1;if(!r&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),E-=1;i.pathname=b.join("/")}m=E>=0?e[E]:"/"}let y=nP(i,m),p=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(p||v)&&(y.pathname+="/"),y}var Pr=n=>n.join("/").replace(/\/\/+/g,"/"),aP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),iP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,oP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function lP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var qw=["POST","PUT","PATCH","DELETE"];new Set(qw);var cP=["GET",...qw];new Set(cP);var pl=P.createContext(null);pl.displayName="DataRouter";var uf=P.createContext(null);uf.displayName="DataRouterState";P.createContext(!1);var Bw=P.createContext({isTransitioning:!1});Bw.displayName="ViewTransition";var uP=P.createContext(new Map);uP.displayName="Fetchers";var dP=P.createContext(null);dP.displayName="Await";var _s=P.createContext(null);_s.displayName="Navigation";var mu=P.createContext(null);mu.displayName="Location";var bs=P.createContext({outlet:null,matches:[],isDataRoute:!1});bs.displayName="Route";var gy=P.createContext(null);gy.displayName="RouteError";function hP(n,{relative:e}={}){Et(gl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(_s),{hash:i,pathname:c,search:d}=pu(n,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:Pr([t,c])),r.createHref({pathname:m,search:d,hash:i})}function gl(){return P.useContext(mu)!=null}function tr(){return Et(gl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(mu).location}var zw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fw(n){P.useContext(_s).static||P.useLayoutEffect(n)}function Bn(){let{isDataRoute:n}=P.useContext(bs);return n?TP():fP()}function fP(){Et(gl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(pl),{basename:e,navigator:t}=P.useContext(_s),{matches:r}=P.useContext(bs),{pathname:i}=tr(),c=JSON.stringify(my(r)),d=P.useRef(!1);return Fw(()=>{d.current=!0}),P.useCallback((y,p={})=>{if(rs(d.current,zw),!d.current)return;if(typeof y=="number"){t.go(y);return}let v=py(y,JSON.parse(c),i,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Pr([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,c,i,n])}var mP=P.createContext(null);function pP(n){let e=P.useContext(bs).outlet;return e&&P.createElement(mP.Provider,{value:n},e)}function pu(n,{relative:e}={}){let{matches:t}=P.useContext(bs),{pathname:r}=tr(),i=JSON.stringify(my(t));return P.useMemo(()=>py(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function gP(n,e){return Hw(n,e)}function Hw(n,e,t,r){Et(gl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(_s),{matches:c}=P.useContext(bs),d=c[c.length-1],m=d?d.params:{},y=d?d.pathname:"/",p=d?d.pathnameBase:"/",v=d&&d.route;{let D=v&&v.path||"";Gw(y,!v||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let E=tr(),b;if(e){let D=typeof e=="string"?ml(e):e;Et(p==="/"||D.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${D.pathname}" was given in the \`location\` prop.`),b=D}else b=E;let x=b.pathname||"/",R=x;if(p!=="/"){let D=p.replace(/^\//,"").split("/");R="/"+x.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=Lw(n,{pathname:R});rs(v||A!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),rs(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=EP(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},m,D.params),pathname:Pr([p,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?p:Pr([p,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),c,t,r);return e&&q?P.createElement(mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},q):q}function yP(){let n=NP(),e=lP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:c},"ErrorBoundary")," or"," ",P.createElement("code",{style:c},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,d)}var vP=P.createElement(yP,null),_P=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(bs.Provider,{value:this.props.routeContext},P.createElement(gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bP({routeContext:n,match:e,children:t}){let r=P.useContext(pl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(bs.Provider,{value:n},t)}function EP(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,c=t?.errors;if(c!=null){let y=i.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);Et(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),i=i.slice(0,Math.min(i.length,y+1))}let d=!1,m=-1;if(t)for(let y=0;y<i.length;y++){let p=i[y];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=y),p.route.id){let{loaderData:v,errors:E}=t,b=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||b){d=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((y,p,v)=>{let E,b=!1,x=null,R=null;t&&(E=c&&p.route.id?c[p.route.id]:void 0,x=p.route.errorElement||vP,d&&(m<0&&v===0?(Gw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,R=null):m===v&&(b=!0,R=p.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,v+1)),q=()=>{let D;return E?D=x:b?D=R:p.route.Component?D=P.createElement(p.route.Component,null):p.route.element?D=p.route.element:D=y,P.createElement(bP,{match:p,routeContext:{outlet:y,matches:A,isDataRoute:t!=null},children:D})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?P.createElement(_P,{location:t.location,revalidation:t.revalidation,component:x,error:E,children:q(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):q()},null)}function yy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xP(n){let e=P.useContext(pl);return Et(e,yy(n)),e}function SP(n){let e=P.useContext(uf);return Et(e,yy(n)),e}function wP(n){let e=P.useContext(bs);return Et(e,yy(n)),e}function vy(n){let e=wP(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function AP(){return vy("useRouteId")}function NP(){let n=P.useContext(gy),e=SP("useRouteError"),t=vy("useRouteError");return n!==void 0?n:e.errors?.[t]}function TP(){let{router:n}=xP("useNavigate"),e=vy("useNavigate"),t=P.useRef(!1);return Fw(()=>{t.current=!0}),P.useCallback(async(i,c={})=>{rs(t.current,zw),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...c}))},[n,e])}var k0={};function Gw(n,e,t){!e&&!k0[n]&&(k0[n]=!0,rs(!1,t))}P.memo(CP);function CP({routes:n,future:e,state:t}){return Hw(n,void 0,t,e)}function Lp({to:n,replace:e,state:t,relative:r}){Et(gl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(_s);rs(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=P.useContext(bs),{pathname:d}=tr(),m=Bn(),y=py(n,my(c),d,r==="path"),p=JSON.stringify(y);return P.useEffect(()=>{m(JSON.parse(p),{replace:e,state:t,relative:r})},[m,p,r,e,t]),null}function jP(n){return pP(n.context)}function Je(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RP({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:c=!1}){Et(!gl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:i,static:c,future:{}}),[d,i,c]);typeof t=="string"&&(t=ml(t));let{pathname:y="/",search:p="",hash:v="",state:E=null,key:b="default"}=t,x=P.useMemo(()=>{let R=Vr(y,d);return R==null?null:{location:{pathname:R,search:p,hash:v,state:E,key:b},navigationType:r}},[d,y,p,v,E,b,r]);return rs(x!=null,`<Router basename="${d}"> is not able to match the URL "${y}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:P.createElement(_s.Provider,{value:m},P.createElement(mu.Provider,{children:e,value:x}))}function $w({children:n,location:e}){return gP(mg(n),e)}function mg(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let c=[...e,i];if(r.type===P.Fragment){t.push.apply(t,mg(r.props.children,c));return}Et(r.type===Je,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=mg(r.props.children,c)),t.push(d)}),t}var ch="get",uh="application/x-www-form-urlencoded";function df(n){return n!=null&&typeof n.tagName=="string"}function DP(n){return df(n)&&n.tagName.toLowerCase()==="button"}function IP(n){return df(n)&&n.tagName.toLowerCase()==="form"}function PP(n){return df(n)&&n.tagName.toLowerCase()==="input"}function kP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function OP(n,e){return n.button===0&&(!e||e==="_self")&&!kP(n)}function pg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function MP(n,e){let t=pg(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(c=>{t.append(i,c)})}),t}var Wd=null;function LP(){if(Wd===null)try{new FormData(document.createElement("form"),0),Wd=!1}catch{Wd=!0}return Wd}var VP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vp(n){return n!=null&&!VP.has(n)?(rs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uh}"`),null):n}function UP(n,e){let t,r,i,c,d;if(IP(n)){let m=n.getAttribute("action");r=m?Vr(m,e):null,t=n.getAttribute("method")||ch,i=Vp(n.getAttribute("enctype"))||uh,c=new FormData(n)}else if(DP(n)||PP(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||m.getAttribute("action");if(r=y?Vr(y,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||ch,i=Vp(n.getAttribute("formenctype"))||Vp(m.getAttribute("enctype"))||uh,c=new FormData(m,n),!LP()){let{name:p,type:v,value:E}=n;if(v==="image"){let b=p?`${p}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else p&&c.append(p,E)}}else{if(df(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ch,r=null,i=uh,d=n}return c&&i==="text/plain"&&(d=c,c=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _y(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qP(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Vr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function BP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function FP(n,e,t){let r=await Promise.all(n.map(async i=>{let c=e.routes[i.route.id];if(c){let d=await BP(c,t);return d.links?d.links():[]}return[]}));return QP(r.flat(1).filter(zP).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function O0(n,e,t,r,i,c){let d=(y,p)=>t[p]?y.route.id!==t[p].route.id:!0,m=(y,p)=>t[p].pathname!==y.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==y.params["*"];return c==="assets"?e.filter((y,p)=>d(y,p)||m(y,p)):c==="data"?e.filter((y,p)=>{let v=r.routes[y.route.id];if(!v||!v.hasLoader)return!1;if(d(y,p)||m(y,p))return!0;if(y.route.shouldRevalidate){let E=y.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function HP(n,e,{includeHydrateFallback:t}={}){return GP(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function GP(n){return[...new Set(n)]}function $P(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function QP(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let c=JSON.stringify($P(i));return t.has(c)||(t.add(c),r.push({key:c,link:i})),r},[])}function Qw(){let n=P.useContext(pl);return _y(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function YP(){let n=P.useContext(uf);return _y(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var by=P.createContext(void 0);by.displayName="FrameworkContext";function Yw(){let n=P.useContext(by);return _y(n,"You must render this element inside a <HydratedRouter> element"),n}function KP(n,e){let t=P.useContext(by),[r,i]=P.useState(!1),[c,d]=P.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:p,onMouseLeave:v,onTouchStart:E}=e,b=P.useRef(null);P.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let A=D=>{D.forEach(z=>{d(z.isIntersecting)})},q=new IntersectionObserver(A,{threshold:.5});return b.current&&q.observe(b.current),()=>{q.disconnect()}}},[n]),P.useEffect(()=>{if(r){let A=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(A)}}},[r]);let x=()=>{i(!0)},R=()=>{i(!1),d(!1)};return t?n!=="intent"?[c,b,{}]:[c,b,{onFocus:Tc(m,x),onBlur:Tc(y,R),onMouseEnter:Tc(p,x),onMouseLeave:Tc(v,R),onTouchStart:Tc(E,x)}]:[!1,b,{}]}function Tc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function XP({page:n,...e}){let{router:t}=Qw(),r=P.useMemo(()=>Lw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(ZP,{page:n,matches:r,...e}):null}function WP(n){let{manifest:e,routeModules:t}=Yw(),[r,i]=P.useState([]);return P.useEffect(()=>{let c=!1;return FP(n,e,t).then(d=>{c||i(d)}),()=>{c=!0}},[n,e,t]),r}function ZP({page:n,matches:e,...t}){let r=tr(),{manifest:i,routeModules:c}=Yw(),{basename:d}=Qw(),{loaderData:m,matches:y}=YP(),p=P.useMemo(()=>O0(n,e,y,i,r,"data"),[n,e,y,i,r]),v=P.useMemo(()=>O0(n,e,y,i,r,"assets"),[n,e,y,i,r]),E=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,A=!1;if(e.forEach(D=>{let z=i.routes[D.route.id];!z||!z.hasLoader||(!p.some(F=>F.route.id===D.route.id)&&D.route.id in m&&c[D.route.id]?.shouldRevalidate||z.hasClientLoader?A=!0:R.add(D.route.id))}),R.size===0)return[];let q=qP(n,d,"data");return A&&R.size>0&&q.searchParams.set("_routes",e.filter(D=>R.has(D.route.id)).map(D=>D.route.id).join(",")),[q.pathname+q.search]},[d,m,r,i,p,e,n,c]),b=P.useMemo(()=>HP(v,i),[v,i]),x=WP(v);return P.createElement(P.Fragment,null,E.map(R=>P.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),b.map(R=>P.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),x.map(({key:R,link:A})=>P.createElement("link",{key:R,nonce:t.nonce,...A})))}function JP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kw&&(window.__reactRouterVersion="7.8.0")}catch{}function ek({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=U2({window:t,v5Compat:!0}));let i=r.current,[c,d]=P.useState({action:i.action,location:i.location}),m=P.useCallback(y=>{P.startTransition(()=>d(y))},[d]);return P.useLayoutEffect(()=>i.listen(m),[i,m]),P.createElement(RP,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:i})}var Xw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ww=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:c,replace:d,state:m,target:y,to:p,preventScrollReset:v,viewTransition:E,...b},x){let{basename:R}=P.useContext(_s),A=typeof p=="string"&&Xw.test(p),q,D=!1;if(typeof p=="string"&&A&&(q=p,Kw))try{let O=new URL(window.location.href),L=p.startsWith("//")?new URL(O.protocol+p):new URL(p),N=Vr(L.pathname,R);L.origin===O.origin&&N!=null?p=N+L.search+L.hash:D=!0}catch{rs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=hP(p,{relative:i}),[F,de,$]=KP(r,b),he=sk(p,{replace:d,state:m,target:y,preventScrollReset:v,relative:i,viewTransition:E});function M(O){e&&e(O),O.defaultPrevented||he(O)}let j=P.createElement("a",{...b,...$,href:q||z,onClick:D||c?e:M,ref:JP(x,de),target:y,"data-discover":!A&&t==="render"?"true":void 0});return F&&!A?P.createElement(P.Fragment,null,j,P.createElement(XP,{page:z})):j});Ww.displayName="Link";var Zw=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:c,to:d,viewTransition:m,children:y,...p},v){let E=pu(d,{relative:p.relative}),b=tr(),x=P.useContext(uf),{navigator:R,basename:A}=P.useContext(_s),q=x!=null&&lk(E)&&m===!0,D=R.encodeLocation?R.encodeLocation(E).pathname:E.pathname,z=b.pathname,F=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(z=z.toLowerCase(),F=F?F.toLowerCase():null,D=D.toLowerCase()),F&&A&&(F=Vr(F,A)||F);const de=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let $=z===D||!i&&z.startsWith(D)&&z.charAt(de)==="/",he=F!=null&&(F===D||!i&&F.startsWith(D)&&F.charAt(D.length)==="/"),M={isActive:$,isPending:he,isTransitioning:q},j=$?e:void 0,O;typeof r=="function"?O=r(M):O=[r,$?"active":null,he?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(M):c;return P.createElement(Ww,{...p,"aria-current":j,className:O,ref:v,style:L,to:d,viewTransition:m},typeof y=="function"?y(M):y)});Zw.displayName="NavLink";var tk=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:c,method:d=ch,action:m,onSubmit:y,relative:p,preventScrollReset:v,viewTransition:E,...b},x)=>{let R=ik(),A=ok(m,{relative:p}),q=d.toLowerCase()==="get"?"get":"post",D=typeof m=="string"&&Xw.test(m),z=F=>{if(y&&y(F),F.defaultPrevented)return;F.preventDefault();let de=F.nativeEvent.submitter,$=de?.getAttribute("formmethod")||d;R(de||F.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:i,state:c,relative:p,preventScrollReset:v,viewTransition:E})};return P.createElement("form",{ref:x,method:q,action:A,onSubmit:r?y:z,...b,"data-discover":!D&&n==="render"?"true":void 0})});tk.displayName="Form";function nk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jw(n){let e=P.useContext(pl);return Et(e,nk(n)),e}function sk(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:c,viewTransition:d}={}){let m=Bn(),y=tr(),p=pu(n,{relative:c});return P.useCallback(v=>{if(OP(v,e)){v.preventDefault();let E=t!==void 0?t:Zc(y)===Zc(p);m(n,{replace:E,state:r,preventScrollReset:i,relative:c,viewTransition:d})}},[y,m,p,t,r,e,n,i,c,d])}function Ey(n){rs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(pg(n)),t=P.useRef(!1),r=tr(),i=P.useMemo(()=>MP(r.search,t.current?null:e.current),[r.search]),c=Bn(),d=P.useCallback((m,y)=>{const p=pg(typeof m=="function"?m(new URLSearchParams(i)):m);t.current=!0,c("?"+p,y)},[c,i]);return[i,d]}var rk=0,ak=()=>`__${String(++rk)}__`;function ik(){let{router:n}=Jw("useSubmit"),{basename:e}=P.useContext(_s),t=AP();return P.useCallback(async(r,i={})=>{let{action:c,method:d,encType:m,formData:y,body:p}=UP(r,e);if(i.navigate===!1){let v=i.fetcherKey||ak();await n.fetch(v,t,i.action||c,{preventScrollReset:i.preventScrollReset,formData:y,body:p,formMethod:i.method||d,formEncType:i.encType||m,flushSync:i.flushSync})}else await n.navigate(i.action||c,{preventScrollReset:i.preventScrollReset,formData:y,body:p,formMethod:i.method||d,formEncType:i.encType||m,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function ok(n,{relative:e}={}){let{basename:t}=P.useContext(_s),r=P.useContext(bs);Et(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),c={...pu(n||".",{relative:e})},d=tr();if(n==null){c.search=d.search;let m=new URLSearchParams(c.search),y=m.getAll("index");if(y.some(v=>v==="")){m.delete("index"),y.filter(E=>E).forEach(E=>m.append("index",E));let v=m.toString();c.search=v?`?${v}`:""}}return(!n||n===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Pr([t,c.pathname])),Zc(c)}function lk(n,{relative:e}={}){let t=P.useContext(Bw);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Jw("useViewTransitionState"),i=pu(n,{relative:e});if(!t.isTransitioning)return!1;let c=Vr(t.currentLocation.pathname,r)||t.currentLocation.pathname,d=Vr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ih(i.pathname,d)!=null||Ih(i.pathname,c)!=null}const Oc={home:"/",login:"/login",register:"/register",forgotPassword:"/forgot-password"};function gu(){const n=P.useContext(Mw);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function eA(){const n=Bn();return{goTo:i=>{n(i)},goBack:()=>{n(-1)},replace:i=>{n(i,{replace:!0})}}}const ft=({children:n,type:e="button",variant:t="primary",size:r="medium",disabled:i=!1,loading:c=!1,onClick:d,className:m=""})=>{const y=["button",t,r,m].filter(Boolean).join(" ");return o.jsxs("button",{type:e,disabled:i||c,onClick:d,className:y,children:[n,c&&o.jsx("div",{className:"loading-spinner"})]})},le=({label:n,type:e="text",value:t,onChange:r,placeholder:i,required:c=!1,error:d,disabled:m=!1,className:y="",min:p,max:v})=>{const E=["input-field",d?"error":"",y].filter(Boolean).join(" ");return o.jsxs("div",{className:"input-group",children:[o.jsxs("label",{className:"input-label",children:[n,c&&o.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),o.jsx("input",{type:e,value:t,onChange:b=>r(b.target.value),placeholder:i,disabled:m,className:E,required:c,min:p,max:v}),d&&o.jsx("div",{className:"input-error",children:d})]})},ck=({onLogin:n})=>{const[e,t]=P.useState(""),[r,i]=P.useState(""),[c,d]=P.useState(!1),[m,y]=P.useState({}),p=()=>{const E={};return e.trim()?/\S+@\S+\.\S+/.test(e)||(E.email="Please enter a valid email"):E.email="Email is required",r.trim()?r.length<6&&(E.password="Password must be at least 6 characters"):E.password="Password is required",y(E),Object.keys(E).length===0},v=async E=>{if(E.preventDefault(),!!p()){d(!0);try{await n(e,r)}catch(b){console.error("Login failed:",b)}finally{d(!1)}}};return o.jsxs("form",{onSubmit:v,className:"login-form",children:[o.jsx(le,{label:"Email",type:"text",value:e,onChange:t,placeholder:"Enter your email",required:!0,error:m.email,disabled:c}),o.jsx(le,{label:"Password",type:"password",value:r,onChange:i,placeholder:"Enter your password",required:!0,error:m.password,disabled:c}),o.jsx(ft,{type:"submit",variant:"primary",size:"full",loading:c,disabled:c,className:"login-button",children:c?"":"Login"})]})},Up=()=>{const{login:n}=gu(),{goTo:e}=eA(),t=async(i,c)=>{await n({email:i,password:c}),e("/admin")},r=()=>{e(Oc.forgotPassword)};return o.jsx("div",{className:"login-container",children:o.jsx("div",{className:"login-card",children:o.jsxs("div",{className:"login-header",children:[o.jsxs("div",{className:"company-logo",children:["LUNDER",o.jsx("br",{}),"UNDERGROUND SERVICES",o.jsx("br",{}),"CORP"]}),o.jsx("div",{className:"company-subtitle",children:"Engineering Excellence Underground"}),o.jsx(ck,{onLogin:t}),o.jsx("div",{className:"login-footer",children:o.jsx("button",{type:"button",onClick:r,className:"forgot-password",children:"Forgot password?"})})]})})})};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dk=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),M0=n=>{const e=dk(n);return e.charAt(0).toUpperCase()+e.slice(1)},tA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),hk=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:d,...m},y)=>P.createElement("svg",{ref:y,...fk,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:tA("lucide",i),...!c&&!hk(m)&&{"aria-hidden":"true"},...m},[...d.map(([p,v])=>P.createElement(p,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(n,e)=>{const t=P.forwardRef(({className:r,...i},c)=>P.createElement(mk,{ref:c,iconNode:e,className:tA(`lucide-${uk(M0(n))}`,`lucide-${n}`,r),...i}));return t.displayName=M0(n),t};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],gk=qe("arrow-down",pk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],L0=qe("arrow-left",yk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],_k=qe("arrow-up",vk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],gg=qe("bell",bk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],xk=qe("book",Ek);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Jc=qe("calendar",Sk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],rl=qe("car",wk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],nA=qe("chart-column",Ak);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ph=qe("circle-alert",Nk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],qn=qe("circle-check-big",Tk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],al=qe("circle-x",Ck);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Rk=qe("clipboard-list",jk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yu=qe("clock",Dk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ma=qe("credit-card",Ik);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],$i=qe("dollar-sign",Pk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ok=qe("download",kk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sA=qe("eye",Mk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Sa=qe("file-text",Lk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],Uk=qe("files",Vk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Bk=qe("gauge",qk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],Fk=qe("handshake",zk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],xy=qe("house",Hk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],V0=qe("info",Gk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Qk=qe("layout-dashboard",$k);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kk=qe("log-out",Yk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wk=qe("plus",Xk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jk=qe("refresh-cw",Zk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vu=qe("search",eO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],kh=qe("server",tO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],sO=qe("shield-alert",nO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],aO=qe("square-pen",rO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oO=qe("trash",iO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yg=qe("trending-up",lO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Cn=qe("triangle-alert",cO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],dO=qe("truck",uO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Us=qe("user-plus",hO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rA=qe("user",fO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],eu=qe("users",mO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Sy=qe("wallet",pO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wy=qe("x",gO),yO=()=>{const n=Bn(),[e,t]=P.useState(""),[r,i]=P.useState(!1),[c,d]=P.useState(null),[m,y]=P.useState(!1),p=b=>b.trim()?/\S+@\S+\.\S+/.test(b)?!0:(d("Please enter a valid email address"),!1):(d("Email is required"),!1),v=async b=>{if(b.preventDefault(),d(null),y(!1),!!p(e)){i(!0);try{await OC(lh,e),y(!0),t("")}catch(x){if(console.error("Password reset error:",x),x.code)switch(x.code){case"auth/user-not-found":d("No account found with this email address");break;case"auth/invalid-email":d("Invalid email address");break;case"auth/too-many-requests":d("Too many requests. Please try again later");break;case"auth/network-request-failed":d("Network error. Please check your connection");break;default:d("Failed to send password reset email. Please try again")}else d("An unexpected error occurred. Please try again")}finally{i(!1)}}},E=()=>{n("/login")};return o.jsx("div",{className:"forgot-password-container",children:o.jsxs("div",{className:"forgot-password-card",children:[o.jsxs("div",{className:"forgot-password-header",children:[o.jsxs("div",{className:"company-logo",children:["LUNDER",o.jsx("br",{}),"UNDERGROUND SERVICES",o.jsx("br",{}),"CORP"]}),o.jsx("div",{className:"company-subtitle",children:"Engineering Excellence Underground"})]}),m?o.jsxs("div",{className:"success-message",children:[o.jsx("div",{className:"success-icon",children:o.jsx(qn,{})}),o.jsx("h2",{children:"Email Sent!"}),o.jsx("p",{children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions to reset your password."}),o.jsx("p",{className:"success-note",children:"If you don't see the email, please check your spam folder."}),o.jsxs(ft,{type:"button",variant:"primary",size:"full",onClick:E,className:"back-to-login-button",children:[o.jsx(L0,{className:"button-icon"}),"Back to Login"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"forgot-password-content",children:[o.jsx("h1",{children:"Forgot Password?"}),o.jsx("p",{className:"forgot-password-description",children:"Enter your email address below and we'll send you a link to reset your password."}),c&&o.jsxs("div",{className:"error-message",children:[o.jsx(Ph,{className:"error-icon"}),o.jsx("span",{children:c})]}),o.jsxs("form",{onSubmit:v,className:"forgot-password-form",children:[o.jsx(le,{label:"Email Address",type:"email",value:e,onChange:b=>{t(b),d(null)},placeholder:"Enter your email",required:!0,disabled:r}),o.jsx(ft,{type:"submit",variant:"primary",size:"full",loading:r,disabled:r,className:"reset-button",children:r?"":"Send Reset Link"})]})]}),o.jsx("div",{className:"forgot-password-footer",children:o.jsxs("button",{type:"button",onClick:E,className:"back-link",disabled:r,children:[o.jsx(L0,{className:"back-icon"}),"Back to Login"]})})]})]})})},ge={DASHBOARD:"dashboard",MANAGEMENT:"management",REPORTS:"reports",CADASTROS:"cadastros",REGISTER_USER:"cadastro-usuario",REGISTER_SERVICE:"cadastro-servico",REGISTER_CLIENT:"cadastro-clientes",REGISTER_EMPLOYEE:"cadastro-funcionario",REGISTER_SUBCONTRACTOR:"cadastro-subcontratados",REGISTER_CONTRACT_SERVICE:"cadastro-servicos-contratados",REGISTER_FINANCING:"cadastro-financiamentos",REGISTER_VEHICLE:"cadastro-veiculos",REGISTER_BANK_ACCOUNT:"cadastro-conta-bancaria",REGISTER_CREDIT_CARD:"cadastro-cartao-credito",REGISTER_EXPENSE_TYPE:"cadastro-tipo-despesa",REGISTER_SERVICE_PRICING:"cadastro-preco-servico",ALERTS:"avisos",ALERT_VEHICLE:"manutencao-veiculos",ALERT_PROJECT:"termino-projeto",ALERT_SUBCONTRACTOR:"pagamento-subcontratados",ALERT_CLIENT:"recebimento-cliente",ALERT_CONTRACT_SERVICE:"pagamento-servicos-contratados",USERS:"users"},vO={[ge.DASHBOARD]:"Dashboard",[ge.MANAGEMENT]:"Gerenciamento",[ge.REPORTS]:"Relatrios",[ge.CADASTROS]:"Pgina de Cadastros",[ge.REGISTER_USER]:"Cadastro de Usurios",[ge.REGISTER_SERVICE]:"Cadastro de Servios",[ge.REGISTER_CLIENT]:"Cadastro de Clientes",[ge.REGISTER_EMPLOYEE]:"Cadastro de Funcionrios",[ge.REGISTER_SUBCONTRACTOR]:"Cadastro de Subcontratados",[ge.REGISTER_CONTRACT_SERVICE]:"Cadastro de Servios Contratados",[ge.REGISTER_FINANCING]:"Cadastro de Financiamentos",[ge.REGISTER_VEHICLE]:"Cadastro de Veculos",[ge.REGISTER_BANK_ACCOUNT]:"Cadastro de Contas Bancrias",[ge.REGISTER_CREDIT_CARD]:"Cadastro de Cartes de Crdito",[ge.REGISTER_EXPENSE_TYPE]:"Cadastro de Tipos de Despesa",[ge.REGISTER_SERVICE_PRICING]:"Cadastro de Preos de Servios",[ge.ALERTS]:"Pgina de Avisos",[ge.ALERT_VEHICLE]:"Alerta de Manuteno de Veculos",[ge.ALERT_PROJECT]:"Alerta de Trmino de Projeto",[ge.ALERT_SUBCONTRACTOR]:"Alerta de Pagamento de Subcontratados",[ge.ALERT_CLIENT]:"Alerta de Recebimento de Cliente",[ge.ALERT_CONTRACT_SERVICE]:"Alerta de Pagamento de Servios Contratados",[ge.USERS]:"Gerenciamento de Usurios"};function aA(n,e){return e?n?n.role==="admin"?!0:!!n.allowedPaths?.includes(e):!1:!0}function _O(n,e){return n?n.role==="admin"?!0:e.some(t=>n.allowedPaths?.includes(t)):!1}function bO(n,e){return n?n.role==="admin"?!0:e.every(t=>n.allowedPaths?.includes(t)):!1}function iA(){return Object.values(ge)}function EO(n){return n?n.role==="admin"?iA():n.allowedPaths||[]:[]}const xO=[{value:"dashboard",label:"Dashboard",icon:o.jsx(Qk,{}),permission:ge.DASHBOARD},{value:"Managment",label:"Managment",icon:o.jsx(Uk,{}),permission:ge.MANAGEMENT},{value:"cadastros",label:"Registration",icon:o.jsx(Us,{}),permission:ge.CADASTROS},{value:"avisos",label:"Alerts",icon:o.jsx(gg,{}),permission:ge.ALERTS},{value:"users/",label:"Users",icon:o.jsx(rA,{}),permission:ge.USERS},{value:"relatorios",label:"Reports",icon:o.jsx(nA,{}),permission:ge.REPORTS}];function Ay(){const{user:n}=gu(),e=P.useMemo(()=>n?.role==="admin",[n]),t=P.useMemo(()=>d=>aA(n,d),[n]),r=P.useMemo(()=>d=>_O(n,d),[n]),i=P.useMemo(()=>d=>bO(n,d),[n]),c=P.useMemo(()=>EO(n),[n]);return{isAdmin:e,checkPermission:t,checkAnyPermission:r,checkAllPermissions:i,userPermissions:c,hasPermission:t}}const SO=({Logo:n,className:e})=>{const t=tr(),{checkPermission:r}=Ay(),i=P.useMemo(()=>xO.filter(c=>c.permission?r(c.permission):!0),[r]);return o.jsxs("aside",{className:`sidebar ${e||""}`,children:[o.jsx(n,{}),o.jsx("nav",{className:"sidebar-nav",children:o.jsx("ul",{className:"nav-list",children:i.map(c=>o.jsx("li",{className:"nav-item",children:o.jsxs(Zw,{to:c.value,end:!1,className:({isActive:d})=>`nav-link ${d||t.pathname.endsWith(`/${c.value}`)?"active":""}`,children:[c.icon,c.label]})},c.value))})})]})},wO=()=>o.jsxs("div",{className:"logo",children:[o.jsx("div",{className:"logo-icon",children:o.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsxs("div",{className:"logo-text",children:[o.jsx("h2",{className:"company-name",children:"Underground Engineering"}),o.jsx("p",{className:"company-tagline",children:"Admin Panel"})]})]});function AO(){const{user:n}=gu(),e=n?.displayName||n?.email||"User",t=n?.role==="admin"?"Administrator":"Partial Access",r=e.trim().split(" ").map(i=>i[0]?.toUpperCase()).slice(0,2).join("");return o.jsxs("header",{className:"admin-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("h1",{className:"header-title",children:"Admin Panel"}),o.jsx("p",{className:"header-subtitle",children:"Manage registrations and settings"})]}),o.jsxs("div",{className:"header-right",children:[o.jsx("div",{className:"logout-container",children:o.jsx("button",{className:"logout-button",onClick:()=>Ni.logOut(),children:o.jsx(Kk,{})})}),o.jsxs("div",{className:"user-info",children:[o.jsx("div",{className:"avatar","aria-hidden":!0,children:r}),o.jsxs("div",{className:"user-texts",children:[o.jsx("div",{className:"user-name",title:e,children:e}),o.jsx("span",{className:`user-role ${n?.role||"partial"}`,children:t})]})]})]})]})}function NO(){return o.jsxs("div",{className:"admin-layout",children:[o.jsx(SO,{Logo:wO}),o.jsxs("main",{className:"admin-content",children:[o.jsx(AO,{}),o.jsx(jP,{})]})]})}const TO="modulepreload",CO=function(n){return"/"+n},U0={},Lt=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let p=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var d=p;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=m?.nonce||m?.getAttribute("nonce");i=p(t.map(v=>{if(v=CO(v),v in U0)return;U0[v]=!0;const E=v.endsWith(".css"),b=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":TO,E||(x.as="script"),x.crossOrigin="",x.href=v,y&&x.setAttribute("nonce",y),document.head.appendChild(x),E)return new Promise((R,A)=>{x.addEventListener("load",R),x.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(m){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=m,window.dispatchEvent(y),!y.defaultPrevented)throw m}return i.then(m=>{for(const y of m||[])y.status==="rejected"&&c(y.reason);return e().catch(c)})};function jO({columns:n,data:e,onView:t,onEdit:r,onDelete:i,loading:c=!1,emptyMessage:d="No records found"}){return c?o.jsx("div",{className:"data-table",children:o.jsxs("div",{className:"table-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading..."})]})}):e.length===0?o.jsx("div",{className:"data-table",children:o.jsx("div",{className:"table-empty",children:o.jsx("p",{children:d})})}):o.jsx("div",{className:"data-table",children:o.jsx("div",{className:"table-container",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[n.map(m=>o.jsx("th",{style:{width:m.width},className:"table-header-cell",children:m.label},m.key)),(t||r||i)&&o.jsx("th",{className:"table-header-cell actions-header",children:"Actions"})]})}),o.jsx("tbody",{children:e.map((m,y)=>o.jsxs("tr",{className:"table-row",children:[n.map(p=>o.jsx("td",{className:"table-cell",children:p.render?p.render(m[p.key],m):m[p.key]},p.key)),(t||r||i)&&o.jsx("td",{className:"table-cell actions-cell",children:o.jsxs("div",{className:"action-buttons",children:[t&&o.jsx("button",{className:"action-btn view-btn",onClick:()=>t(m),title:"View",children:o.jsx(sA,{})}),r&&o.jsx("button",{className:"action-btn edit-btn",onClick:()=>r(m),title:"Edit",children:o.jsx(aO,{})}),i&&o.jsx("button",{className:"action-btn delete-btn",onClick:()=>i(m),title:"Delete",children:o.jsx(oO,{})})]})})]},m.id||y))})]})})})}const RO=({isOpen:n,onClose:e,title:t,data:r,loading:i=!1})=>{if(!n)return null;const c=v=>v==null?"N/A":typeof v=="boolean"?v?"Yes":"No":v instanceof Date?v.toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):typeof v=="object"?v.toDate&&typeof v.toDate=="function"?v.toDate().toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):Array.isArray(v)?v.length>0?v.join(", "):"N/A":JSON.stringify(v,null,2):String(v),d=v=>v.replace(/([A-Z])/g," $1").replace(/^./,E=>E.toUpperCase()).trim(),m=v=>["id","uid"].includes(v.toLowerCase()),y=v=>({name:1,displayName:1,fullName:1,email:2,phone:3,company:4,status:5,role:6,createdAt:999,updatedAt:1e3})[v]||100,p=Object.entries(r).sort((v,E)=>{const b=y(v[0]),x=y(E[0]);return b!==x?b-x:v[0].localeCompare(E[0])});return o.jsx("div",{className:"view-modal-overlay",onClick:e,children:o.jsxs("div",{className:"view-modal-content",onClick:v=>v.stopPropagation(),children:[o.jsxs("div",{className:"view-modal-header",children:[o.jsx("h2",{children:t}),o.jsx("button",{className:"view-modal-close",onClick:e,children:o.jsx(wy,{})})]}),o.jsx("div",{className:"view-modal-body",children:i?o.jsxs("div",{className:"view-modal-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading details..."})]}):p.length===0?o.jsx("div",{className:"view-modal-empty",children:o.jsx("p",{children:"No data available"})}):o.jsx("div",{className:"view-modal-fields",children:p.map(([v,E])=>m(v)?null:o.jsxs("div",{className:"view-modal-field",children:[o.jsx("div",{className:"view-modal-label",children:d(v)}),o.jsx("div",{className:"view-modal-value",children:c(E)})]},v))})}),o.jsx("div",{className:"view-modal-footer",children:o.jsx("button",{className:"view-modal-button",onClick:e,children:"Close"})})]})})},Ri={async getAllUsers(){try{const n=Ee(oe,"users");return(await je(n)).docs.map(r=>{const i=r.data();return{id:r.id,uid:i.uid||r.id,email:i.email||"",displayName:i.displayName||"",role:i.role||"partial",allowedPaths:i.allowedPaths||[],createdAt:i.createdAt?.toDate()||new Date,updatedAt:i.updatedAt?.toDate()||new Date}}).sort((r,i)=>i.createdAt.getTime()-r.createdAt.getTime())}catch(n){throw console.error("Error fetching users:",n),n}},async getUserById(n){const e=Oe(oe,"users",n),t=await En(e);if(!t.exists())return null;const r=t.data();return{id:t.id,uid:r.uid||t.id,email:r.email||"",displayName:r.displayName||"",role:r.role||"user",allowedPaths:r.allowedPaths||[],createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}},async updateUser(n,e){const t=Oe(oe,"users",n),i={...e,updatedAt:new Date};await as(t,i)},async deleteUser(n){const e=Oe(oe,"users",n);await is(e)},async getUsersByRole(n){const e=Ee(oe,"users"),t=Te(e,De("role","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,uid:d.uid||c.id,email:d.email||"",displayName:d.displayName||"",role:d.role||"user",allowedPaths:d.allowedPaths||[],createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},q0=Object.freeze(Object.defineProperty({__proto__:null,userService:Ri},Symbol.toStringTag,{value:"Module"})),Tn={async createClient(n){const e=new Date,t={...n,createdAt:e,updatedAt:e},r=Ee(oe,"clients");return{id:(await ss(r,t)).id,...n,createdAt:e,updatedAt:e}},async getAllClients(){const n=Ee(oe,"clients"),e=Te(n,Ue("createdAt","desc"));return(await je(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getClientById(n){const e=Oe(oe,"clients",n),t=await En(e);if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}},async updateClient(n,e){const t=Oe(oe,"clients",n),i={...e,updatedAt:new Date};await as(t,i)},async deleteClient(n){const e=Oe(oe,"clients",n);await is(e)},async getClientsByState(n){const e=Ee(oe,"clients"),t=Te(e,De("state","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getClientsByCity(n){const e=Ee(oe,"clients");return(await je(Te(e,De("city","==",n),Ue("createdAt","desc")))).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})}},B0=Object.freeze(Object.defineProperty({__proto__:null,clientService:Tn},Symbol.toStringTag,{value:"Module"})),hf={async createService(n){const e=new Date,t={...n,createdAt:e,updatedAt:e},r=Ee(oe,"services"),i=await ss(r,t),c={ft:{value:"ft",label:"Foot (ft)"},box:{value:"box",label:"Box"},fixed:{value:"fixed",label:"Fixed Price"},"":{value:"",label:""}};return{id:i.id,...t,billingUnit:c[n.billingUnit]}},async getAllServices(){const n=Ee(oe,"services"),e=Te(n,Ue("createdAt","desc"));return(await je(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getServiceById(n){const e=Oe(oe,"services",n),t=await En(e);if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}},async updateService(n,e){const t=Oe(oe,"services",n),i={...e,updatedAt:new Date};await as(t,i)},async deleteService(n){const e=Oe(oe,"services",n);await is(e)}},z0=Object.freeze(Object.defineProperty({__proto__:null,serviceService:hf},Symbol.toStringTag,{value:"Module"})),Di={async createEmployee(n){const e=new Date;let t;n.driverLicenseDocument&&(t=void 0);const{driverLicenseDocument:r,...i}=n,d={...Object.fromEntries(Object.entries(i).filter(([,m])=>m!==void 0)),...t!==void 0&&{driverLicenseDocument:t},createdAt:e,updatedAt:e};try{return{id:(await ss(Ee(oe,"employees"),d)).id,...d}}catch(m){throw console.error("Error creating employee:",m),new Error("Failed to create employee")}},async getAllEmployees(){try{const n=Te(Ee(oe,"employees"),Ue("createdAt","desc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error getting employees:",n),new Error("Failed to get employees")}},async getEmployeeById(n){try{const e=Oe(oe,"employees",n),t=await En(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}:null}catch(e){throw console.error("Error getting employee:",e),new Error("Failed to get employee")}},async getEmployeesByName(n){try{const e=Te(Ee(oe,"employees"),De("name",">=",n),De("name","<=",n+""),Ue("name"));return(await je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error searching employees by name:",e),new Error("Failed to search employees")}},async getEmployeeByItin(n){try{const e=Te(Ee(oe,"employees"),De("itinNumber","==",n)),t=await je(e);if(t.empty)return null;{const r=t.docs[0];return{id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}}}catch(e){throw console.error("Error getting employee by ITIN:",e),new Error("Failed to get employee by ITIN")}},async getEmployeeByDriverLicense(n){try{const e=Te(Ee(oe,"employees"),De("driverLicenseNumber","==",n)),t=await je(e);if(t.empty)return null;{const r=t.docs[0];return{id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}}}catch(e){throw console.error("Error getting employee by driver license:",e),new Error("Failed to get employee by driver license")}},async updateEmployee(n,e){try{const t=Oe(oe,"employees",n);let r;e.driverLicenseDocument&&(r=void 0);const{driverLicenseDocument:i,...c}=e,d=Object.fromEntries(Object.entries(c).filter(([,v])=>v!==void 0)),y={...Object.fromEntries(Object.entries(d).filter(([,v])=>v!==void 0)),...r!==void 0&&{driverLicenseDocument:r},updatedAt:new Date};await as(t,y);const p=await this.getEmployeeById(n);if(!p)throw new Error("Employee not found after update");return p}catch(t){throw console.error("Error updating employee:",t),new Error("Failed to update employee")}},async deleteEmployee(n){try{const e=Oe(oe,"employees",n);await is(e)}catch(e){throw console.error("Error deleting employee:",e),new Error("Failed to delete employee")}},async checkItinExists(n,e){try{const t=Te(Ee(oe,"employees"),De("itinNumber","==",n)),r=await je(t);return e?r.docs.some(i=>i.id!==e):!r.empty}catch(t){throw console.error("Error checking ITIN existence:",t),new Error("Failed to check ITIN existence")}},async checkDriverLicenseExists(n,e){try{const t=Te(Ee(oe,"employees"),De("driverLicenseNumber","==",n)),r=await je(t);return e?r.docs.some(i=>i.id!==e):!r.empty}catch(t){throw console.error("Error checking driver license existence:",t),new Error("Failed to check driver license existence")}},async searchEmployees(n){try{let e=Te(Ee(oe,"employees"));return n.name&&(e=Te(e,De("name",">=",n.name),De("name","<=",n.name+""))),n.itinNumber&&(e=Te(e,De("itinNumber","==",n.itinNumber))),n.driverLicenseNumber&&(e=Te(e,De("driverLicenseNumber","==",n.driverLicenseNumber))),n.phone&&(e=Te(e,De("phone","==",n.phone))),e=Te(e,Ue("createdAt","desc")),(await je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error searching employees:",e),new Error("Failed to search employees")}},async getEmployeeCount(){try{return(await je(Ee(oe,"employees"))).size}catch(n){throw console.error("Error getting employee count:",n),new Error("Failed to get employee count")}}},F0=Object.freeze(Object.defineProperty({__proto__:null,employeeService:Di},Symbol.toStringTag,{value:"Module"})),ff={async createSubcontractor(n){const e=new Date;let t=[];n.insuranceDocuments&&n.insuranceDocuments.length>0&&(t=[]);const{insuranceDocuments:r,...i}=n,d={...Object.fromEntries(Object.entries(i).filter(([,p])=>p!==void 0)),insuranceDocuments:t,createdAt:e,updatedAt:e},m=Ee(oe,"subcontractors");return{id:(await ss(m,d)).id,...i,insuranceDocuments:t,createdAt:e,updatedAt:e}},async getAllSubcontractors(){const n=Ee(oe,"subcontractors"),e=Te(n,Ue("createdAt","desc"));return(await je(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getSubcontractorById(n){const e=Oe(oe,"subcontractors",n),t=await En(e);if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}},async updateSubcontractor(n,e){const t=Oe(oe,"subcontractors",n),i={...e,updatedAt:new Date};await as(t,i)},async deleteSubcontractor(n){const e=Oe(oe,"subcontractors",n);await is(e)},async getSubcontractorsByState(n){const e=Ee(oe,"subcontractors"),t=Te(e,De("state","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getSubcontractorsByCity(n){const e=Ee(oe,"subcontractors");return(await je(Te(e,De("city","==",n),Ue("createdAt","desc")))).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getSubcontractorsByAvailability(n){const e=Ee(oe,"subcontractors"),t=Te(e,De("availability","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getSubcontractorsByService(n){const e=Ee(oe,"subcontractors"),t=Te(e,De("services","array-contains",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},H0=Object.freeze(Object.defineProperty({__proto__:null,subcontractorService:ff},Symbol.toStringTag,{value:"Module"})),$t={async createContractService(n){const e=new Date,r={...Object.fromEntries(Object.entries(n).filter(([d,m])=>m!==void 0)),createdAt:e,updatedAt:e},i=Ee(oe,"contractServices");return{id:(await ss(i,r)).id,...n,createdAt:e,updatedAt:e}},async getAllContractServices(){const n=Ee(oe,"contractServices"),e=Te(n,Ue("createdAt","desc"));return(await je(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getContractServiceById(n){const e=Oe(oe,"contractServices",n),t=await En(e);if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}},async updateContractService(n,e){const t=Oe(oe,"contractServices",n),i={...e,updatedAt:new Date};await as(t,i)},async deleteContractService(n){const e=Oe(oe,"contractServices",n);await is(e)},async getContractServicesByClient(n){const e=Ee(oe,"contractServices"),t=Te(e,De("clientId","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getContractServicesBySubcontractor(n){const e=Ee(oe,"contractServices"),t=Te(e,De("subcontractorId","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getContractServicesByStatus(n){const e=Ee(oe,"contractServices"),t=Te(e,De("status","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getContractServicesByType(n){const e=Ee(oe,"contractServices"),t=Te(e,De("serviceType","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},G0=Object.freeze(Object.defineProperty({__proto__:null,contractServiceService:$t},Symbol.toStringTag,{value:"Module"})),Ny={async createFinancing(n){const e=new Date,r={...Object.fromEntries(Object.entries(n).filter(([d,m])=>m!==void 0)),createdAt:e,updatedAt:e},i=Ee(oe,"financings");return{id:(await ss(i,r)).id,...n,createdAt:e,updatedAt:e}},async getAllFinancings(){const n=Ee(oe,"financings"),e=Te(n,Ue("createdAt","desc"));return(await je(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getFinancingById(n){const e=Oe(oe,"financings",n),t=await En(e);if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}},async updateFinancing(n,e){const t=Oe(oe,"financings",n),i={...e,updatedAt:new Date};await as(t,i)},async deleteFinancing(n){const e=Oe(oe,"financings",n);await is(e)},async getFinancingsByProject(n){const e=Ee(oe,"financings"),t=Te(e,De("projectId","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getFinancingsByClient(n){const e=Ee(oe,"financings"),t=Te(e,De("clientId","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getFinancingsByStatus(n){const e=Ee(oe,"financings"),t=Te(e,De("status","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getFinancingsByType(n){const e=Ee(oe,"financings"),t=Te(e,De("financingType","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},$0=Object.freeze(Object.defineProperty({__proto__:null,financingService:Ny},Symbol.toStringTag,{value:"Module"})),Fs={async createVehicle(n){const e=new Date,r={...Object.fromEntries(Object.entries(n).filter(([d,m])=>m!==void 0)),createdAt:e,updatedAt:e},i=Ee(oe,"vehicles");return{id:(await ss(i,r)).id,...n,createdAt:e,updatedAt:e}},async getAllVehicles(){const n=Ee(oe,"vehicles"),e=Te(n,Ue("createdAt","desc"));return(await je(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getVehicleById(n){const e=Oe(oe,"vehicles",n),t=await En(e);if(!t.exists())return null;const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}},async updateVehicle(n,e){const t=Oe(oe,"vehicles",n),i={...e,updatedAt:new Date};await as(t,i)},async deleteVehicle(n){const e=Oe(oe,"vehicles",n);await is(e)},async getVehiclesByType(n){const e=Ee(oe,"vehicles"),t=Te(e,De("vehicleType","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getVehiclesByStatus(n){const e=Ee(oe,"vehicles"),t=Te(e,De("status","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getVehiclesByLocation(n){const e=Ee(oe,"vehicles"),t=Te(e,De("location","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getVehiclesByMake(n){const e=Ee(oe,"vehicles"),t=Te(e,De("make","==",n),Ue("createdAt","desc"));return(await je(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},Q0=Object.freeze(Object.defineProperty({__proto__:null,vehicleService:Fs},Symbol.toStringTag,{value:"Module"})),qo="bankAccounts",Ty={async createBankAccount(n){try{return{id:(await ss(Ee(oe,qo),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating bank account:",e),new Error("Failed to create bank account")}},async getAllBankAccounts(){try{const n=Te(Ee(oe,qo),Ue("createdAt","desc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching bank accounts:",n),new Error("Failed to fetch bank accounts")}},async getBankAccountById(n){try{const e=Te(Ee(oe,qo),De("__name__","==",n)),t=await je(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching bank account:",e),new Error("Failed to fetch bank account")}},async updateBankAccount(n,e){try{const t=Oe(oe,qo,n);await as(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating bank account:",t),new Error("Failed to update bank account")}},async deleteBankAccount(n){try{const e=Oe(oe,qo,n);await is(e)}catch(e){throw console.error("Error deleting bank account:",e),new Error("Failed to delete bank account")}},async getActiveBankAccounts(){try{const n=Te(Ee(oe,qo),De("isActive","==",!0),Ue("accountName","asc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching active bank accounts:",n),new Error("Failed to fetch active bank accounts")}}},DO=Object.freeze(Object.defineProperty({__proto__:null,bankAccountService:Ty},Symbol.toStringTag,{value:"Module"})),Si="creditCards",Cy={async createCreditCard(n){try{return{id:(await ss(Ee(oe,Si),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating credit card:",e),new Error("Failed to create credit card")}},async getAllCreditCards(){try{const n=Te(Ee(oe,Si),Ue("createdAt","desc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching credit cards:",n),new Error("Failed to fetch credit cards")}},async getCreditCardById(n){try{const e=Te(Ee(oe,Si),De("__name__","==",n)),t=await je(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching credit card:",e),new Error("Failed to fetch credit card")}},async updateCreditCard(n,e){try{const t=Oe(oe,Si,n);await as(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating credit card:",t),new Error("Failed to update credit card")}},async deleteCreditCard(n){try{const e=Oe(oe,Si,n);await is(e)}catch(e){throw console.error("Error deleting credit card:",e),new Error("Failed to delete credit card")}},async getActiveCreditCards(){try{const n=Te(Ee(oe,Si),De("isActive","==",!0),Ue("cardName","asc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching active credit cards:",n),new Error("Failed to fetch active credit cards")}},async getCreditCardsByTeam(n){try{const e=Te(Ee(oe,Si),De("assignedTo","==",n),De("isActive","==",!0),Ue("cardName","asc"));return(await je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching credit cards by team:",e),new Error("Failed to fetch credit cards by team")}}},IO=Object.freeze(Object.defineProperty({__proto__:null,creditCardService:Cy},Symbol.toStringTag,{value:"Module"})),wi="expenseTypes",mf={async createExpenseType(n){try{return{id:(await ss(Ee(oe,wi),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating expense type:",e),new Error("Failed to create expense type")}},async getAllExpenseTypes(){try{const n=Te(Ee(oe,wi),Ue("name","asc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching expense types:",n),new Error("Failed to fetch expense types")}},async getExpenseTypeById(n){try{const e=Te(Ee(oe,wi),De("__name__","==",n)),t=await je(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching expense type:",e),new Error("Failed to fetch expense type")}},async updateExpenseType(n,e){try{const t=Oe(oe,wi,n);await as(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating expense type:",t),new Error("Failed to update expense type")}},async deleteExpenseType(n){try{const e=Oe(oe,wi,n);await is(e)}catch(e){throw console.error("Error deleting expense type:",e),new Error("Failed to delete expense type")}},async getActiveExpenseTypes(){try{const n=Te(Ee(oe,wi),De("isActive","==",!0),Ue("name","asc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching active expense types:",n),new Error("Failed to fetch active expense types")}},async getExpenseTypesByCategory(n){try{const e=Te(Ee(oe,wi),De("category","==",n),De("isActive","==",!0),Ue("name","asc"));return(await je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching expense types by category:",e),new Error("Failed to fetch expense types by category")}}},PO=Object.freeze(Object.defineProperty({__proto__:null,expenseTypeService:mf},Symbol.toStringTag,{value:"Module"})),ya="servicePricing",Y0="pricingHistory",jy={async createServicePricing(n){try{return{id:(await ss(Ee(oe,ya),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating service pricing:",e),new Error("Failed to create service pricing")}},async getAllServicePricing(){try{const n=Te(Ee(oe,ya),Ue("createdAt","desc"));return(await je(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching service pricing:",n),new Error("Failed to fetch service pricing")}},async getServicePricingById(n){try{const e=Te(Ee(oe,ya),De("__name__","==",n)),t=await je(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching service pricing:",e),new Error("Failed to fetch service pricing")}},async getPricingByService(n){try{const e=Te(Ee(oe,ya),De("serviceId","==",n),De("isActive","==",!0),Ue("effectiveDate","desc"));return(await je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching pricing by service:",e),new Error("Failed to fetch pricing by service")}},async getPricingByClient(n){try{const e=Te(Ee(oe,ya),De("clientId","==",n),De("isActive","==",!0),Ue("effectiveDate","desc"));return(await je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching pricing by client:",e),new Error("Failed to fetch pricing by client")}},async getPricingForServiceAndClient(n,e){try{const t=Te(Ee(oe,ya),De("serviceId","==",n),De("clientId","==",e),De("isActive","==",!0),Ue("effectiveDate","desc")),r=await je(t);if(r.empty)return null;const i=r.docs[0];return{id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()||new Date,updatedAt:i.data().updatedAt?.toDate()||new Date}}catch(t){throw console.error("Error fetching pricing for service and client:",t),new Error("Failed to fetch pricing for service and client")}},async updateServicePricing(n,e){try{const t=Oe(oe,ya,n);await as(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating service pricing:",t),new Error("Failed to update service pricing")}},async deleteServicePricing(n){try{const e=Oe(oe,ya,n);await is(e)}catch(e){throw console.error("Error deleting service pricing:",e),new Error("Failed to delete service pricing")}},async createPricingHistory(n){try{return{id:(await ss(Ee(oe,Y0),{...n,createdAt:new Date})).id,...n,createdAt:new Date}}catch(e){throw console.error("Error creating pricing history:",e),new Error("Failed to create pricing history")}},async getPricingHistory(n,e){try{const t=Te(Ee(oe,Y0),De("serviceId","==",n),De("clientId","==",e),Ue("changeDate","desc"));return(await je(t)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()||new Date}))}catch(t){throw console.error("Error fetching pricing history:",t),new Error("Failed to fetch pricing history")}}},kO=Object.freeze(Object.defineProperty({__proto__:null,servicePricingService:jy},Symbol.toStringTag,{value:"Module"})),oA=()=>{const[n,e]=P.useState({users:[],clients:[],services:[],employees:[],subcontractors:[],contractServices:[],financings:[],vehicles:[],bankAccounts:[],creditCards:[],expenseTypes:[],servicePricing:[]}),[t,r]=P.useState(!0),[i,c]=P.useState(null),d=async()=>{try{r(!0),c(null);const m=new Promise(($,he)=>{setTimeout(()=>he(new Error("Request timeout")),1e4)}),y=Promise.all([Ri.getAllUsers(),Tn.getAllClients(),hf.getAllServices(),Di.getAllEmployees(),ff.getAllSubcontractors(),$t.getAllContractServices(),Ny.getAllFinancings(),Fs.getAllVehicles(),Ty.getAllBankAccounts(),Cy.getAllCreditCards(),mf.getAllExpenseTypes(),jy.getAllServicePricing()]),[p,v,E,b,x,R,A,q,D,z,F,de]=await Promise.race([y,m]);e({users:p,clients:v,services:E,employees:b,subcontractors:x,contractServices:R,financings:A,vehicles:q,bankAccounts:D,creditCards:z,expenseTypes:F,servicePricing:de})}catch(m){console.error("Error fetching dashboard data:",m),c(m instanceof Error?m.message:"Failed to fetch data"),e({users:[],clients:[],services:[],employees:[],subcontractors:[],contractServices:[],financings:[],vehicles:[],bankAccounts:[],creditCards:[],expenseTypes:[],servicePricing:[]})}finally{r(!1)}};return P.useEffect(()=>{d()},[]),{data:n,loading:t,error:i,refreshData:d}},lA=P.createContext(void 0),cA=()=>{const n=P.useContext(lA);if(n===void 0)throw new Error("useToast must be used within a ToastProvider");return n},uA=({isOpen:n,onClose:e,onConfirm:t,title:r,message:i,confirmText:c="Confirm",cancelText:d="Cancel",type:m="danger",loading:y=!1})=>{if(!n)return null;const p=E=>{E.target===E.currentTarget&&e()},v=E=>{E.key==="Escape"&&e()};return o.jsx("div",{className:"confirmation-modal-overlay",onClick:p,onKeyDown:v,tabIndex:-1,children:o.jsxs("div",{className:"confirmation-modal",children:[o.jsxs("div",{className:"confirmation-modal-header",children:[o.jsx("div",{className:"confirmation-modal-icon",children:o.jsx(Cn,{className:`icon-${m}`})}),o.jsx("h3",{className:"confirmation-modal-title",children:r}),o.jsx("button",{className:"confirmation-modal-close",onClick:e,disabled:y,"aria-label":"Fechar modal",children:o.jsx(wy,{})})]}),o.jsx("div",{className:"confirmation-modal-body",children:o.jsx("p",{className:"confirmation-modal-message",children:i})}),o.jsxs("div",{className:"confirmation-modal-footer",children:[o.jsx("button",{className:"confirmation-modal-button cancel",onClick:e,disabled:y,children:d}),o.jsx("button",{className:"confirmation-modal-button confirm",onClick:t,disabled:y,children:y?o.jsx("div",{className:"loading-spinner"}):c})]})]})})},OO=[{id:"users",title:"Users",icon:o.jsx(Us,{}),description:"Manage system users and their permissions",route:"/dashboard/users",permission:ge.REGISTER_USER},{id:"services",title:"Services",icon:o.jsx(kh,{}),description:"Manage available services",route:"/dashboard/services",permission:ge.REGISTER_SERVICE},{id:"clients",title:"Clients",icon:o.jsx(eu,{}),description:"Manage client information and records",route:"/dashboard/clients",permission:ge.REGISTER_CLIENT},{id:"employees",title:"Employees",icon:o.jsx(Us,{}),description:"Manage employee profiles and information",route:"/dashboard/employees",permission:ge.REGISTER_EMPLOYEE},{id:"subcontractors",title:"Subcontractors",icon:o.jsx(Us,{}),description:"Manage subcontractor information",route:"/dashboard/subcontractors",permission:ge.REGISTER_SUBCONTRACTOR},{id:"contract-services",title:"Contract Services",icon:o.jsx(kh,{}),description:"Manage contracted services",route:"/dashboard/contract-services",permission:ge.REGISTER_CONTRACT_SERVICE},{id:"financings",title:"Financings",icon:o.jsx(Ma,{}),description:"Manage financing information",route:"/dashboard/financings",permission:ge.REGISTER_FINANCING},{id:"vehicles",title:"Vehicles",icon:o.jsx(rl,{}),description:"Manage vehicle fleet and information",route:"/dashboard/vehicles",permission:ge.REGISTER_VEHICLE},{id:"bank-accounts",title:"Bank Accounts",icon:o.jsx(xy,{}),description:"Manage bank accounts and financial information",route:"/dashboard/bank-accounts",permission:ge.REGISTER_BANK_ACCOUNT},{id:"credit-cards",title:"Credit Cards",icon:o.jsx(Sy,{}),description:"Manage credit cards for teams and operations",route:"/dashboard/credit-cards",permission:ge.REGISTER_CREDIT_CARD},{id:"expense-types",title:"Expense Types",icon:o.jsx(Sa,{}),description:"Manage expense categories and types",route:"/dashboard/expense-types",permission:ge.REGISTER_EXPENSE_TYPE},{id:"service-pricing",title:"Service Pricing",icon:o.jsx($i,{}),description:"Manage service pricing by client",route:"/dashboard/service-pricing",permission:ge.REGISTER_SERVICE_PRICING}];function MO(){const[n,e]=P.useState(null),{data:t,loading:r,refreshData:i}=oA(),{showSuccess:c,showError:d}=cA(),{checkPermission:m}=Ay(),[y,p]=P.useState({isOpen:!1,record:null}),[v,E]=P.useState({isOpen:!1,data:null,title:"",loading:!1}),b=P.useMemo(()=>OO.filter(M=>m(M.permission)),[m]),x=M=>{e(n===M?null:M)},R=M=>({users:"cadastro-usuario",services:"cadastro-servico",clients:"cadastro-clientes",employees:"cadastro-funcionario",subcontractors:"cadastro-subcontratados","contract-services":"cadastro-servicos-contratados",financings:"cadastro-financiamentos",vehicles:"cadastro-veiculos","bank-accounts":"cadastro-conta-bancaria","credit-cards":"cadastro-cartao-credito","expense-types":"cadastro-tipo-despesa","service-pricing":"cadastro-preco-servico"})[M]||"",A=M=>{const O={users:"users",services:"services",clients:"clients",employees:"employees",subcontractors:"subcontractors","contract-services":"contractServices",financings:"financings",vehicles:"vehicles","bank-accounts":"bankAccounts","credit-cards":"creditCards","expense-types":"expenseTypes","service-pricing":"servicePricing"}[M];return(O?t[O]||[]:[]).map(N=>{const C={id:N.id||N.uid||"N/A",name:N.name||N.displayName||N.fullName||"N/A",status:N.status||"active",created:N.createdAt&&typeof N.createdAt=="object"&&"toDate"in N.createdAt?N.createdAt.toDate().toLocaleDateString():"N/A"};switch(M){case"users":return{...C,email:N.email||"N/A",role:N.role||"N/A"};case"clients":return{...C,company:N.company||"N/A",phone:N.phone||"N/A"};case"services":return{...C,description:N.description||"N/A",price:N.price||"N/A"};case"subcontractors":return{...C,company:N.company||"N/A",phone:N.phone||"N/A"};case"contractServices":return{...C,service:N.serviceName||"N/A",client:N.clientName||"N/A"};case"employees":return{...C,driverLicenseDocument:N.driverLicenseDocument||"N/A"};case"financings":return{...C,amount:N.amount||"N/A",status:N.financingStatus||"N/A"};case"vehicles":return{...C,make:N.make||"N/A",model:N.model||"N/A",license:N.licensePlate||"N/A"};default:return C}})},q=M=>{const j=[{key:"id",label:"ID",width:"80px"},{key:"name",label:"Name"},{key:"status",label:"Status",width:"120px",render:O=>o.jsx("span",{className:`status-badge ${O}`,children:O.charAt(0).toUpperCase()+O.slice(1)})},{key:"created",label:"Created",width:"120px"}];switch(M){case"users":return[...j,{key:"email",label:"Email"},{key:"role",label:"Role",width:"120px"}];case"clients":return[...j,{key:"company",label:"Company"},{key:"phone",label:"Phone",width:"140px"}];case"services":return[...j,{key:"description",label:"Description"},{key:"price",label:"Price",width:"100px"}];case"subcontractors":return[...j,{key:"company",label:"Company"},{key:"phone",label:"Phone",width:"140px"}];case"contractServices":return[...j,{key:"service",label:"Service"},{key:"client",label:"Client"}];case"financings":return[...j,{key:"amount",label:"Amount",width:"120px"},{key:"status",label:"Status",width:"120px"}];case"vehicles":return[...j,{key:"make",label:"Make",width:"100px"},{key:"model",label:"Model",width:"100px"},{key:"license",label:"License",width:"100px"}];default:return j}},D=async M=>{if(!n){d("Erro","Seo no selecionada");return}const j=String(M.id),O=String(M.name||M.displayName||M.fullName||"Record");E({isOpen:!0,data:null,title:`View ${O}`,loading:!0});try{let L=null;switch(n){case"users":{const{userService:C}=await Lt(async()=>{const{userService:T}=await Promise.resolve().then(()=>q0);return{userService:T}},[]);L=await C.getUserById(j);break}case"clients":{const{clientService:C}=await Lt(async()=>{const{clientService:T}=await Promise.resolve().then(()=>B0);return{clientService:T}},void 0);L=await C.getClientById(j);break}case"services":{const{serviceService:C}=await Lt(async()=>{const{serviceService:T}=await Promise.resolve().then(()=>z0);return{serviceService:T}},void 0);L=await C.getServiceById(j);break}case"employees":{const{employeeService:C}=await Lt(async()=>{const{employeeService:T}=await Promise.resolve().then(()=>F0);return{employeeService:T}},void 0);L=await C.getEmployeeById(j);break}case"subcontractors":{const{subcontractorService:C}=await Lt(async()=>{const{subcontractorService:T}=await Promise.resolve().then(()=>H0);return{subcontractorService:T}},void 0);L=await C.getSubcontractorById(j);break}case"contract-services":{const{contractServiceService:C}=await Lt(async()=>{const{contractServiceService:T}=await Promise.resolve().then(()=>G0);return{contractServiceService:T}},void 0);L=await C.getContractServiceById(j);break}case"financings":{const{financingService:C}=await Lt(async()=>{const{financingService:T}=await Promise.resolve().then(()=>$0);return{financingService:T}},void 0);L=await C.getFinancingById(j);break}case"vehicles":{const{vehicleService:C}=await Lt(async()=>{const{vehicleService:T}=await Promise.resolve().then(()=>Q0);return{vehicleService:T}},void 0);L=await C.getVehicleById(j);break}case"bank-accounts":{const{bankAccountService:C}=await Lt(async()=>{const{bankAccountService:T}=await Promise.resolve().then(()=>DO);return{bankAccountService:T}},void 0);L=await C.getBankAccountById(j);break}case"credit-cards":{const{creditCardService:C}=await Lt(async()=>{const{creditCardService:T}=await Promise.resolve().then(()=>IO);return{creditCardService:T}},void 0);L=await C.getCreditCardById(j);break}case"expense-types":{const{expenseTypeService:C}=await Lt(async()=>{const{expenseTypeService:T}=await Promise.resolve().then(()=>PO);return{expenseTypeService:T}},void 0);L=await C.getExpenseTypeById(j);break}case"service-pricing":{const{servicePricingService:C}=await Lt(async()=>{const{servicePricingService:T}=await Promise.resolve().then(()=>kO);return{servicePricingService:T}},void 0);L=await C.getServicePricingById(j);break}default:throw new Error("Tipo de seo desconhecido")}if(!L)throw new Error("Registro no encontrado");const N={};for(const[C,T]of Object.entries(L))T&&typeof T=="object"&&"toDate"in T&&typeof T.toDate=="function"?N[C]=T.toDate():N[C]=T;E({isOpen:!0,data:N,title:`View ${O}`,loading:!1})}catch(L){console.error("Error loading record details:",L),d("Erro",`Falha ao carregar detalhes: ${L instanceof Error?L.message:"Erro desconhecido"}`),E({isOpen:!1,data:null,title:"",loading:!1})}},z=M=>{if(console.log("Edit record:",M),console.log("Selected section:",n),!n){alert("Por favor, selecione uma seo primeiro clicando em um dos cards acima.");return}const j=R(n);console.log("Navigating to:",j),j?window.location.href=`/admin/${j}?edit=${M.id}`:(console.error("Route not found for section:",n),alert("Rota no encontrada para a seo selecionada."))},F=async M=>{p({isOpen:!0,record:M})},de=async()=>{if(y.record)try{const{userService:M}=await Lt(async()=>{const{userService:Y}=await Promise.resolve().then(()=>q0);return{userService:Y}},void 0),{clientService:j}=await Lt(async()=>{const{clientService:Y}=await Promise.resolve().then(()=>B0);return{clientService:Y}},void 0),{serviceService:O}=await Lt(async()=>{const{serviceService:Y}=await Promise.resolve().then(()=>z0);return{serviceService:Y}},void 0),{employeeService:L}=await Lt(async()=>{const{employeeService:Y}=await Promise.resolve().then(()=>F0);return{employeeService:Y}},void 0),{subcontractorService:N}=await Lt(async()=>{const{subcontractorService:Y}=await Promise.resolve().then(()=>H0);return{subcontractorService:Y}},void 0),{contractServiceService:C}=await Lt(async()=>{const{contractServiceService:Y}=await Promise.resolve().then(()=>G0);return{contractServiceService:Y}},void 0),{financingService:T}=await Lt(async()=>{const{financingService:Y}=await Promise.resolve().then(()=>$0);return{financingService:Y}},void 0),{vehicleService:ee}=await Lt(async()=>{const{vehicleService:Y}=await Promise.resolve().then(()=>Q0);return{vehicleService:Y}},void 0),me=String(y.record.id);switch(n){case"users":await M.deleteUser(me);break;case"clients":await j.deleteClient(me);break;case"services":await O.deleteService(me);break;case"employees":await L.deleteEmployee(me);break;case"subcontractors":await N.deleteSubcontractor(me);break;case"contractServices":await C.deleteContractService(me);break;case"financings":await T.deleteFinancing(me);break;case"vehicles":await ee.deleteVehicle(me);break;default:throw new Error("Tipo de seo desconhecido")}await i(),c("Excludo!",`${y.record.name} removido com sucesso!`)}catch(M){console.error("Error deleting record:",M),d("Falha!",`Falha ao excluir ${y.record.name}: ${M instanceof Error?M.message:"Erro desconhecido"}`)}finally{p({isOpen:!1,record:null})}},$=()=>{if(console.log("Add new record"),console.log("Selected section:",n),!n){alert("Por favor, selecione uma seo primeiro clicando em um dos cards acima.");return}const M=R(n);console.log("Navigating to:",M),M?window.location.href=`/admin/${M}`:(console.error("Route not found for section:",n),alert("Rota no encontrada para a seo selecionada."))},he=M=>{const j=A(M),O=q(M);return o.jsxs("div",{className:"section-content",children:[o.jsxs("div",{className:"section-header",children:[o.jsxs("h3",{children:["Manage ",M.charAt(0).toUpperCase()+M.slice(1)]}),o.jsxs("button",{className:"add-button",onClick:$,children:[o.jsx(Wk,{}),"Add New"]})]}),o.jsx(jO,{columns:O,data:j,onView:D,onEdit:z,onDelete:F,loading:r,emptyMessage:""})]})};return o.jsxs("div",{className:"dashboard",children:[o.jsx("div",{className:"dashboard-content",children:b.length===0?o.jsx("div",{className:"empty-message",children:o.jsx("p",{children:"Voc no tem permisso para gerenciar nenhuma seo."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"sections-grid",children:b.map(M=>o.jsxs("div",{className:`section-card ${n===M.id?"active":""}`,onClick:()=>x(M.id),children:[o.jsx("div",{className:"section-icon",children:M.icon}),o.jsxs("div",{className:"section-info",children:[o.jsx("h3",{children:M.title}),o.jsx("p",{children:M.description})]})]},M.id))}),n&&o.jsx("div",{className:"section-details",children:he(n)})]})}),o.jsx(uA,{isOpen:y.isOpen,onClose:()=>p({isOpen:!1,record:null}),onConfirm:de,title:"Confirmar Excluso",message:`Tem certeza que deseja excluir "${y.record?.name}"? Esta ao no pode ser desfeita.`,confirmText:"Excluir",cancelText:"Cancelar",type:"danger"}),o.jsx(RO,{isOpen:v.isOpen,onClose:()=>E({isOpen:!1,data:null,title:"",loading:!1}),title:v.title,data:v.data||{},loading:v.loading})]})}const LO=()=>{const n=Bn(),{checkPermission:e}=Ay(),t=[{id:"cadastro-usuario",title:"Users",description:"Register and manage system users",icon:o.jsx(Us,{}),path:"cadastro-usuario",permission:ge.REGISTER_USER},{id:"cadastro-servico",title:"Services",description:"Register available services",icon:o.jsx(kh,{}),path:"cadastro-servico",permission:ge.REGISTER_SERVICE},{id:"cadastro-clientes",title:"Clients",description:"Register company clients",icon:o.jsx(eu,{}),path:"cadastro-clientes",permission:ge.REGISTER_CLIENT},{id:"cadastro-funcionario",title:"Employees",description:"Register employees",icon:o.jsx(rA,{}),path:"cadastro-funcionario",permission:ge.REGISTER_EMPLOYEE},{id:"cadastro-subcontratados",title:"Subcontractors",description:"Register service providers",icon:o.jsx(Fk,{}),path:"cadastro-subcontratados",permission:ge.REGISTER_SUBCONTRACTOR},{id:"cadastro-servicos-contratados",title:"Contract Services",description:"Register contracted services",icon:o.jsx(xk,{}),path:"cadastro-servicos-contratados",permission:ge.REGISTER_CONTRACT_SERVICE},{id:"cadastro-financiamentos",title:"Financing",description:"Register financing options",icon:o.jsx(Ma,{}),path:"cadastro-financiamentos",permission:ge.REGISTER_FINANCING},{id:"cadastro-veiculos",title:"Vehicles",description:"Register fleet vehicles",icon:o.jsx(rl,{}),path:"cadastro-veiculos",permission:ge.REGISTER_VEHICLE},{id:"cadastro-conta-bancaria",title:"Bank Accounts",description:"Register bank accounts",icon:o.jsx(xy,{}),path:"cadastro-conta-bancaria",permission:ge.REGISTER_BANK_ACCOUNT},{id:"cadastro-cartao-credito",title:"Credit Cards",description:"Register credit cards",icon:o.jsx(Sy,{}),path:"cadastro-cartao-credito",permission:ge.REGISTER_CREDIT_CARD},{id:"cadastro-tipo-despesa",title:"Expense Types",description:"Register expense categories",icon:o.jsx(Sa,{}),path:"cadastro-tipo-despesa",permission:ge.REGISTER_EXPENSE_TYPE},{id:"cadastro-preco-servico",title:"Service Pricing",description:"Register service prices",icon:o.jsx($i,{}),path:"cadastro-preco-servico",permission:ge.REGISTER_SERVICE_PRICING}],r=P.useMemo(()=>t.filter(c=>e(c.permission)),[e]),i=c=>{n(`/admin/${c}`)};return o.jsxs("div",{className:"cadastros",children:[o.jsxs("div",{className:"cadastros-header",children:[o.jsx("h1",{children:"System Registration"}),o.jsx("p",{children:"Select the type of registration you want to perform"})]}),r.length===0?o.jsx("div",{className:"cadastros-empty",children:o.jsx("p",{children:"Voc no tem permisso para acessar nenhuma rea de cadastro."})}):o.jsx("div",{className:"cadastros-grid",children:r.map(c=>o.jsxs("div",{className:"registration-card",onClick:()=>i(c.path),children:[o.jsx("div",{className:"card-icon",children:c.icon}),o.jsxs("div",{className:"card-content",children:[o.jsx("h3",{children:c.title}),o.jsx("p",{children:c.description})]})]},c.id))})]})},VO=()=>{const n=Bn(),e=[{id:"manutencao-veiculos",title:"Vehicle Maintenance",description:"Vehicle maintenance alerts",icon:o.jsx(rl,{}),path:"manutencao-veiculos"},{id:"termino-projeto",title:"Project Completion",description:"Project completion alerts",icon:o.jsx(qn,{}),path:"termino-projeto"},{id:"pagamento-subcontratados",title:"Subcontractor Payment",description:"Subcontractor payment alerts",icon:o.jsx(Ma,{}),path:"pagamento-subcontratados"},{id:"recebimento-cliente",title:"Client Payment",description:"Client payment alerts",icon:o.jsx($i,{}),path:"recebimento-cliente"},{id:"pagamento-servicos-contratados",title:"Contracted Services Payment",description:"Contracted services payment alerts",icon:o.jsx(Ma,{}),path:"pagamento-servicos-contratados"}],t=r=>{n(`/admin/${r}`)};return o.jsxs("div",{className:"avisos",children:[o.jsxs("div",{className:"avisos-header",children:[o.jsx("h1",{children:"Alerts"}),o.jsx("p",{children:"Select the type of alert you want to view"})]}),o.jsx("div",{className:"avisos-grid",children:e.map(r=>o.jsxs("div",{className:"aviso-card",onClick:()=>t(r.path),children:[o.jsx("div",{className:"aviso-card-icon",children:r.icon}),o.jsxs("div",{className:"aviso-card-content",children:[o.jsx("h3",{children:r.title}),o.jsx("p",{children:r.description})]})]},r.id))})]})},UO=()=>{const n=Bn(),[e,t]=P.useState([]),[r,i]=P.useState([]),[c,d]=P.useState(!0),[m,y]=P.useState(null),[p,v]=P.useState(null),[E,b]=P.useState(!1),[x,R]=P.useState(!1),[A,q]=P.useState(""),[D,z]=P.useState("all"),[F,de]=P.useState("all"),[$,he]=P.useState("all"),M=ce=>ce<0||ce<=7?"high":ce<=30?"medium":"low",j=ce=>{const V=new Date;V.setHours(0,0,0,0);const J=new Date(ce);return J.setHours(0,0,0,0),J<V?"overdue":"pending"},O=ce=>{const V=new Date;V.setHours(0,0,0,0);const J=new Date(ce);J.setHours(0,0,0,0);const ne=J.getTime()-V.getTime();return Math.ceil(ne/(1e3*60*60*24))},L=ce=>(new Date().setHours(0,0,0,0),new Date(ce).setHours(0,0,0,0),O(ce)<=90),N=ce=>{const V=[];let J=1;return ce.forEach(ne=>{if(!ne.id)return;const ue=`${ne.make} ${ne.model}`,be=ne.lastMaintenanceDate||"";if(ne.nextMaintenanceDate){const Se=new Date(ne.nextMaintenanceDate);if(L(Se)){const Ae=O(Se),ot=j(Se),Ge=M(Ae);V.push({id:`maintenance-${ne.id}-${J++}`,vehicleId:ne.id,vehicleName:ue,licensePlate:ne.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:ne.nextMaintenanceDate,status:ot,priority:Ge,description:"Manuteno programada",lastMaintenance:be,nextMaintenance:ne.nextMaintenanceDate})}}if(ne.licensePlateRenewalDate){const Se=new Date(ne.licensePlateRenewalDate);if(L(Se)){const Ae=O(Se),ot=j(Se),Ge=M(Ae);V.push({id:`plate-${ne.id}-${J++}`,vehicleId:ne.id,vehicleName:ue,licensePlate:ne.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:ne.licensePlateRenewalDate,status:ot,priority:Ge,description:"Renovao de placa",lastMaintenance:be,nextMaintenance:ne.nextMaintenanceDate||""})}}if(ne.dotRenewalDate){const Se=new Date(ne.dotRenewalDate);if(L(Se)){const Ae=O(Se),ot=j(Se),Ge=M(Ae);V.push({id:`dot-${ne.id}-${J++}`,vehicleId:ne.id,vehicleName:ue,licensePlate:ne.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:ne.dotRenewalDate,status:ot,priority:Ge,description:"Renovao DOT",lastMaintenance:be,nextMaintenance:ne.nextMaintenanceDate||""})}}if(ne.insuranceExpiry){const Se=new Date(ne.insuranceExpiry);if(L(Se)){const Ae=O(Se),ot=j(Se),Ge=M(Ae);V.push({id:`insurance-${ne.id}-${J++}`,vehicleId:ne.id,vehicleName:ue,licensePlate:ne.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:ne.insuranceExpiry,status:ot,priority:Ge,description:"Expirao do seguro",lastMaintenance:be,nextMaintenance:ne.nextMaintenanceDate||""})}}if(ne.registrationExpiry){const Se=new Date(ne.registrationExpiry);if(L(Se)){const Ae=O(Se),ot=j(Se),Ge=M(Ae);V.push({id:`registration-${ne.id}-${J++}`,vehicleId:ne.id,vehicleName:ue,licensePlate:ne.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:ne.registrationExpiry,status:ot,priority:Ge,description:"Expirao do registro",lastMaintenance:be,nextMaintenance:ne.nextMaintenanceDate||""})}}}),V};P.useEffect(()=>{(async()=>{try{d(!0);const V=await Fs.getAllVehicles(),J=N(V);t(J),i(J)}catch(V){console.error("Erro ao buscar alertas de veculos:",V)}finally{d(!1)}})()},[]),P.useEffect(()=>{let ce=e;A&&(ce=ce.filter(V=>V.vehicleName.toLowerCase().includes(A.toLowerCase())||V.licensePlate.toLowerCase().includes(A.toLowerCase())||V.description.toLowerCase().includes(A.toLowerCase()))),D!=="all"&&(ce=ce.filter(V=>V.alertType===D)),F!=="all"&&(ce=ce.filter(V=>V.status===F)),$!=="all"&&(ce=ce.filter(V=>V.priority===$)),i(ce)},[e,A,D,F,$]);const C=ce=>{switch(ce){case"date":return o.jsx(Jc,{});case"mileage":return o.jsx(Bk,{});case"hours":return o.jsx(yu,{});default:return o.jsx(rl,{})}},T=ce=>{switch(ce){case"completed":return o.jsx(qn,{className:"status-icon completed"});case"overdue":return o.jsx(al,{className:"status-icon overdue"});case"pending":return o.jsx(Cn,{className:"status-icon pending"});default:return o.jsx(Cn,{className:"status-icon pending"})}},ee=ce=>{switch(ce){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},me=ce=>{switch(ce.alertType){case"date":return`Due: ${new Date(ce.dueDate).toLocaleDateString()}`;case"mileage":return`${ce.currentValue.toLocaleString()} / ${ce.limitValue.toLocaleString()} km`;case"hours":return`${ce.currentValue} / ${ce.limitValue} hours`;default:return""}},Y=async ce=>{try{const V=e.find(ue=>ue.id===ce);if(!V||!V.vehicleId)return;if(V.id.startsWith("maintenance-")){const ue=new Date().toISOString().split("T")[0];await Fs.updateVehicle(V.vehicleId,{lastMaintenanceDate:ue})}else V.id.startsWith("plate-")||V.id.startsWith("dot-")||V.id.startsWith("insurance-")||V.id.startsWith("registration-");t(ue=>ue.filter(be=>be.id!==ce)),i(ue=>ue.filter(be=>be.id!==ce));const J=await Fs.getAllVehicles(),ne=N(J);t(ne)}catch(V){console.error("Erro ao marcar alerta como concludo:",V)}},fe=async ce=>{const V=e.find(J=>J.id===ce);if(V&&V.vehicleId){y(V),R(!0),b(!0);try{const J=await Fs.getVehicleById(V.vehicleId);v(J)}catch(J){console.error("Erro ao carregar detalhes do veculo:",J),v(null)}finally{R(!1)}}},xe=()=>{y(null),v(null),b(!1),R(!1)};return c?o.jsx("div",{className:"vehicle-alert",children:o.jsx("div",{className:"loading",children:"Loading alerts..."})}):o.jsxs("div",{className:"vehicle-alert",children:[o.jsxs("div",{className:"alert-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Vehicle Maintenance Alerts"}),o.jsx("p",{children:"Monitor and manage vehicle maintenance schedules"})]}),o.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),o.jsxs("div",{className:"alert-filters",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(vu,{className:"search-icon"}),o.jsx("input",{type:"text",placeholder:"Search vehicles, license plates, or descriptions...",value:A,onChange:ce=>q(ce.target.value)})]}),o.jsxs("div",{className:"filter-group",children:[o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Type:"}),o.jsxs("select",{value:D,onChange:ce=>z(ce.target.value),children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"date",children:"By Date"}),o.jsx("option",{value:"mileage",children:"By Mileage"}),o.jsx("option",{value:"hours",children:"By Hours"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Status:"}),o.jsxs("select",{value:F,onChange:ce=>de(ce.target.value),children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"overdue",children:"Overdue"}),o.jsx("option",{value:"completed",children:"Completed"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Priority:"}),o.jsxs("select",{value:$,onChange:ce=>he(ce.target.value),children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"})]})]})]})]}),o.jsx("div",{className:"alerts-grid",children:r.length===0?o.jsxs("div",{className:"no-alerts",children:[o.jsx(rl,{}),o.jsx("h3",{children:"No alerts found"}),o.jsx("p",{children:"No vehicle maintenance alerts match your current filters."})]}):r.map(ce=>o.jsxs("div",{className:"alert-card",children:[o.jsxs("div",{className:"alert-card-header",children:[o.jsxs("div",{className:"alert-type",children:[C(ce.alertType),o.jsxs("span",{className:"type-label",children:[ce.alertType==="date"&&"Date",ce.alertType==="mileage"&&"Mileage",ce.alertType==="hours"&&"Hours"]})]}),o.jsxs("div",{className:"alert-priority",children:[o.jsx("div",{className:"priority-dot",style:{backgroundColor:ee(ce.priority)}}),o.jsx("span",{className:"priority-label",children:ce.priority})]})]}),o.jsxs("div",{className:"alert-card-content",children:[o.jsxs("div",{className:"vehicle-info",children:[o.jsx("h3",{children:ce.vehicleName}),o.jsx("p",{className:"license-plate",children:ce.licensePlate})]}),o.jsxs("div",{className:"alert-details",children:[o.jsx("p",{className:"description",children:ce.description}),o.jsx("p",{className:"alert-value",children:me(ce)})]}),o.jsxs("div",{className:"alert-dates",children:[o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"Last Maintenance:"}),o.jsx("span",{className:"date-value",children:new Date(ce.lastMaintenance).toLocaleDateString()})]}),o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"Next Maintenance:"}),o.jsx("span",{className:"date-value",children:new Date(ce.nextMaintenance).toLocaleDateString()})]})]})]}),o.jsxs("div",{className:"alert-card-footer",children:[o.jsxs("div",{className:"alert-status",children:[T(ce.status),o.jsx("span",{className:"status-label",children:ce.status})]}),o.jsxs("div",{className:"alert-actions",children:[o.jsx("button",{className:"action-button secondary",onClick:()=>fe(ce.id),children:"View Details"}),ce.status!=="completed"&&o.jsx("button",{className:"action-button primary",onClick:()=>Y(ce.id),children:"Mark Complete"})]})]})]},ce.id))}),E&&m&&o.jsx("div",{className:"modal-overlay",onClick:xe,children:o.jsxs("div",{className:"modal-content",onClick:ce=>ce.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"Vehicle Alert Details"}),o.jsx("button",{className:"close-button",onClick:xe,children:"X"})]}),o.jsx("div",{className:"modal-body",children:x?o.jsxs("div",{className:"loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading vehicle details..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"vehicle-info-section",children:[o.jsx("h3",{children:m.vehicleName}),o.jsxs("p",{className:"license-info",children:["License Plate: ",m.licensePlate]}),o.jsxs("div",{className:"status-priority-row",children:[o.jsxs("div",{className:"status-badge",style:{backgroundColor:m.status==="overdue"?"#ef4444":m.status==="pending"?"#f59e0b":"#10b981"},children:[T(m.status),o.jsx("span",{children:m.status.toUpperCase()})]}),o.jsx("div",{className:"priority-badge",style:{backgroundColor:ee(m.priority)},children:m.priority.toUpperCase()})]})]}),o.jsxs("div",{className:"alert-details-grid",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Alert Type:"}),o.jsx("span",{children:m.description})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Due Date:"}),o.jsx("span",{children:new Date(m.dueDate).toLocaleDateString()})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Alert Type:"}),o.jsx("span",{children:m.alertType.toUpperCase()})]}),m.lastMaintenance&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Last Maintenance:"}),o.jsx("span",{children:new Date(m.lastMaintenance).toLocaleDateString()})]}),m.nextMaintenance&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Next Maintenance:"}),o.jsx("span",{children:new Date(m.nextMaintenance).toLocaleDateString()})]})]}),p&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"vehicle-details-section",children:[o.jsx("h4",{children:"Vehicle Information"}),o.jsxs("div",{className:"vehicle-details-grid",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Vehicle Type:"}),o.jsx("span",{children:p.vehicleType||"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Year:"}),o.jsx("span",{children:p.year||"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"VIN:"}),o.jsx("span",{children:p.vin||"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Color:"}),o.jsx("span",{children:p.color||"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Fuel Type:"}),o.jsx("span",{children:p.fuelType||"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Mileage:"}),o.jsx("span",{children:p.mileage?`${p.mileage.toLocaleString()} km`:"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Status:"}),o.jsx("span",{children:p.status||"N/A"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Location:"}),o.jsx("span",{children:p.location||"N/A"})]})]})]}),(p.insuranceExpiry||p.registrationExpiry||p.dotRenewalDate||p.licensePlateRenewalDate)&&o.jsxs("div",{className:"vehicle-dates-section",children:[o.jsx("h4",{children:"Important Dates"}),o.jsxs("div",{className:"vehicle-dates-grid",children:[p.insuranceExpiry&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Insurance Expiry:"}),o.jsx("span",{children:new Date(p.insuranceExpiry).toLocaleDateString()})]}),p.registrationExpiry&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Registration Expiry:"}),o.jsx("span",{children:new Date(p.registrationExpiry).toLocaleDateString()})]}),p.dotRenewalDate&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"DOT Renewal:"}),o.jsx("span",{children:new Date(p.dotRenewalDate).toLocaleDateString()})]}),p.licensePlateRenewalDate&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"License Plate Renewal:"}),o.jsx("span",{children:new Date(p.licensePlateRenewalDate).toLocaleDateString()})]})]})]}),p.notes&&o.jsxs("div",{className:"notes-section",children:[o.jsx("label",{children:"Notes:"}),o.jsx("p",{children:p.notes})]})]})]})}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"action-button secondary",onClick:xe,children:"Close"}),p&&o.jsx("button",{className:"action-button secondary",onClick:()=>n("/admin/cadastro-veiculos"),children:"View Vehicle"}),m&&m.status!=="completed"&&o.jsx("button",{className:"action-button primary",onClick:()=>{Y(m.id),xe()},children:"Mark Complete"})]})]})})]})};var dA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},K0=Ci.createContext&&Ci.createContext(dA),qO=["attr","size","title"];function BO(n,e){if(n==null)return{};var t=zO(n,e),r,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(i=0;i<c.length;i++)r=c[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function zO(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Oh(){return Oh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Oh.apply(this,arguments)}function X0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Mh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?X0(Object(t),!0).forEach(function(r){FO(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):X0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FO(n,e,t){return e=HO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HO(n){var e=GO(n,"string");return typeof e=="symbol"?e:e+""}function GO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hA(n){return n&&n.map((e,t)=>Ci.createElement(e.tag,Mh({key:t},e.attr),hA(e.child)))}function It(n){return e=>Ci.createElement($O,Oh({attr:Mh({},n.attr)},e),hA(n.child))}function $O(n){var e=t=>{var{attr:r,size:i,title:c}=n,d=BO(n,qO),m=i||t.size||"1em",y;return t.className&&(y=t.className),n.className&&(y=(y?y+" ":"")+n.className),Ci.createElement("svg",Oh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:y,style:Mh(Mh({color:n.color||t.color},t.style),n.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),c&&Ci.createElement("title",null,c),n.children)};return K0!==void 0?Ci.createElement(K0.Consumer,null,t=>e(t)):e(dA)}function QO(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(n)}function _u(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(n)}function YO(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(n)}function KO(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function W0(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(n)}function XO(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(n)}function Lh(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(n)}function vs(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(n)}function WO(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(n)}function ZO(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(n)}function il(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(n)}function fA(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(n)}function pf(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(n)}function mA(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(n)}function JO(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(n)}function gf(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(n)}function ol(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(n)}function pA(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(n)}function eM(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(n)}function tM(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(n)}function qs(n){return It({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}const Ui=({label:n,options:e,value:t,onChange:r,placeholder:i="Select options...",error:c,required:d=!1,disabled:m=!1})=>{const[y,p]=P.useState(!1),v=()=>{p(!y)},E=x=>{t.includes(x)?r(t.filter(R=>R!==x)):r([...t,x])},b=()=>{if(t.length===0)return i;if(t.length===1){const x=e.find(R=>R.value===t[0]);return x?x.label:t[0]}return`${t.length} items selected`};return o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[n,d&&o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("div",{className:`multiselect ${c?"error":""} ${m?"disabled":""}`,children:[o.jsxs("div",{className:"multiselect-trigger",onClick:m?void 0:v,children:[o.jsx("span",{className:"multiselect-value",children:b()}),o.jsx("span",{className:`multiselect-arrow ${y?"open":""}`,children:""})]}),y&&o.jsx("div",{className:"multiselect-dropdown",children:e.map(x=>o.jsxs("div",{className:`multiselect-option ${t.includes(x.value)?"selected":""}`,onClick:()=>E(x.value),children:[o.jsx("span",{className:"option-checkbox",children:t.includes(x.value)?o.jsx(YO,{className:"check-icon"}):""}),o.jsx("span",{className:"option-label",children:x.label})]},x.value))})]}),c&&o.jsx("span",{className:"error-message",children:c})]})},nM=()=>{const[n]=Ey(),e=n.get("edit"),t=!!e,[r,i]=P.useState({email:"",password:"",displayName:"",role:"partial",allowedPaths:[]}),c=P.useMemo(()=>iA().map(F=>({value:F,label:vO[F]})),[]),[d,m]=P.useState({}),[y,p]=P.useState(!1),[v,E]=P.useState(!1);P.useEffect(()=>{t&&e&&(E(!0),Ri.getUserById(e).then(F=>{F&&i({email:F.email||"",password:"",displayName:F.displayName||"",role:F.role||"partial",allowedPaths:F.allowedPaths||[]})}).catch(F=>{console.error("Error loading user:",F),m({submit:"Erro ao carregar dados do usurio"})}).finally(()=>{E(!1)}))},[t,e]);const[b,x]=P.useState(""),R=r.role==="admin",A=(F,de)=>{i($=>{const he={...$,[F]:de};return F==="role"&&de==="admin"&&(he.allowedPaths=[]),he}),d[F]&&m($=>({...$,[F]:""})),b&&x("")},q=()=>{const F={};return r.email?/\S+@\S+\.\S+/.test(r.email)||(F.email="Please enter a valid email"):F.email="Email is required",!t&&!r.password?F.password="Password is required":!t&&r.password&&r.password.length<6&&(F.password="Password must be at least 6 characters"),r.displayName||(F.displayName="Display name is required"),r.role==="partial"&&r.allowedPaths.length===0&&(F.allowedPaths="Please select at least one allowed path"),m(F),Object.keys(F).length===0},D=async F=>{if(F.preventDefault(),!!q()){p(!0),x(""),m({});try{if(t&&e)await Ri.updateUser(e,{email:r.email,displayName:r.displayName,role:r.role,allowedPaths:r.allowedPaths}),x("Usurio atualizado com sucesso!");else{const de={email:r.email,password:r.password,displayName:r.displayName,role:r.role,allowedPaths:r.allowedPaths};await Ni.register(de),x("Usurio criado com sucesso!")}t||i({email:"",password:"",displayName:"",role:"partial",allowedPaths:[]}),m({}),setTimeout(()=>{x("")},3e3)}catch(de){m({submit:"Failed to create user: "+(de instanceof Error?de.message:String(de))})}finally{p(!1)}}},z=()=>{i({email:"",password:"",displayName:"",role:"partial",allowedPaths:[]}),m({}),x("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:t?"Edit User":"Create New User"}),o.jsx("p",{className:"page-subtitle",children:t?"Update user information and permissions":"Add a new user to the system with specific permissions and access rights"})]}),o.jsxs("div",{className:`form-container ${y||v?"form-loading":""}`,children:[v&&o.jsx("div",{className:"status-message info-message",children:"Carregando dados do usurio..."}),b&&o.jsx("div",{className:"status-message success-message",children:b}),d.submit&&o.jsx("div",{className:"status-message error-message",children:d.submit}),o.jsxs("form",{onSubmit:D,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(qs,{className:"section-icon"}),"User Information"]}),o.jsx(le,{label:"Email Address",type:"email",value:r.email,onChange:F=>A("email",F),placeholder:"user@company.com",error:d.email,required:!0,disabled:y}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Display Name",type:"text",value:r.displayName,onChange:F=>A("displayName",F),placeholder:"John Doe",error:d.displayName,required:!0,disabled:y}),o.jsx(le,{label:t?"New Password (optional)":"Password",type:"password",value:r.password,onChange:F=>A("password",F),placeholder:t?"Leave empty to keep current password":"Enter secure password",error:d.password,required:!t,disabled:y})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(ol,{className:"section-icon"}),"Role & Permissions"]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["User Role ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:r.role,onChange:F=>A("role",F.target.value),className:"role-select",disabled:y,children:[o.jsx("option",{value:"partial",children:"Partial Access User"}),o.jsx("option",{value:"admin",children:"Administrator"})]}),o.jsx("small",{className:"form-help-text",children:R?"Administrators have full access to all system features":"Partial access users can only access selected pages"})]}),!R&&o.jsxs("div",{className:"permissions-section",children:[o.jsx(Ui,{label:"Permisses do Usurio",options:c,value:r.allowedPaths,onChange:F=>A("allowedPaths",F),placeholder:"Selecione as permisses que o usurio ter...",error:d.allowedPaths,required:!R,disabled:R||y}),o.jsx("small",{className:"form-help-text",children:"Selecione quais reas do sistema o usurio poder acessar. Administradores tm acesso total automaticamente."})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:y||v,children:y?t?"Updating User...":"Creating User...":t?"Update User":"Create User"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:z,disabled:y,children:"Cancel"})]})]})]})]})},sM=({label:n,options:e,value:t,onChange:r,placeholder:i="Select an option",error:c,required:d=!1,disabled:m=!1})=>{const[y,p]=P.useState(!1),v=()=>{p(!y)},E=x=>{r(x),p(!1)},b=()=>{if(!t)return i;const x=e.find(R=>R.value===t);return x?x.label:t};return o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[n,d&&o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("div",{className:`select-input ${c?"error":""}`,children:[o.jsxs("div",{className:"select-trigger",onClick:v,style:{cursor:m?"not-allowed":"pointer"},children:[o.jsx("span",{className:"select-value",children:b()}),o.jsx(KO,{className:`select-arrow ${y?"open":""}`})]}),y&&o.jsx("div",{className:"select-dropdown",children:e.map(x=>o.jsx("div",{className:`select-option ${t===x.value?"selected":""}`,onClick:()=>E(x.value),children:o.jsx("span",{className:"option-label",children:x.label})},x.value))})]}),c&&o.jsx("p",{className:"error-message",children:c})]})},rM=()=>{const[n,e]=P.useState({serviceCode:"",serviceName:"",billingUnit:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),y=[{value:"ft",label:"Foot (ft)"},{value:"box",label:"Box"},{value:"fixed",label:"Fixed Price"}],p=(x,R)=>{e(A=>({...A,[x]:R})),t[x]&&r(A=>({...A,[x]:""})),d&&m("")},v=()=>{const x={};return n.serviceCode.trim()||(x.serviceCode="Service Code is required"),n.serviceName.trim()||(x.serviceName="Service Name is required"),n.billingUnit||(x.billingUnit="Billing Unit is required"),r(x),Object.keys(x).length===0},E=async x=>{if(x.preventDefault(),!!v()){c(!0),m(""),r({});try{const R=await hf.createService(n);console.log("Service created:",R),m("Service registered successfully!"),e({serviceCode:"",serviceName:"",billingUnit:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(R){r({submit:"Failed to register service: "+(R instanceof Error?R.message:String(R))})}finally{c(!1)}}},b=()=>{e({serviceCode:"",serviceName:"",billingUnit:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Service"}),o.jsx("p",{className:"page-subtitle",children:"Create a new service with billing configuration and pricing details"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:E,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(gf,{className:"section-icon"}),"Service Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Service Code",type:"text",value:n.serviceCode,onChange:x=>p("serviceCode",x),placeholder:"SRV-001",error:t.serviceCode,required:!0,disabled:i}),o.jsx(le,{label:"Service Name",type:"text",value:n.serviceName,onChange:x=>p("serviceName",x),placeholder:"Enter descriptive service name",error:t.serviceName,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Billing Configuration"]}),o.jsx(sM,{label:"Billing Unit",options:y,value:n.billingUnit,onChange:x=>p("billingUnit",x),placeholder:"Select how this service is billed",error:t.billingUnit,required:!0,disabled:i}),o.jsx("small",{className:"form-help-text",children:"Choose the unit of measurement for billing this service to clients"})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Service...":"Save Service"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:b,disabled:i,children:"Cancel"})]})]})]})]})},aM=()=>{const[n]=Ey(),e=n.get("edit"),t=!!e,[r,i]=P.useState({name:"",state:"",city:"",address:"",personPhone:"",officePhone:"",projectNumber:"",projectContractDate:"",projectFinalDate:"",projectDeadline:""}),[c,d]=P.useState({}),[m,y]=P.useState(!1),[p,v]=P.useState(!1),[E,b]=P.useState("");P.useEffect(()=>{t&&e&&(v(!0),Tn.getClientById(e).then(D=>{D&&i({name:D.name||"",state:D.state||"",city:D.city||"",address:D.address||"",personPhone:D.personPhone||"",officePhone:D.officePhone||"",projectNumber:D.projectNumber||"",projectContractDate:D.projectContractDate||"",projectFinalDate:D.projectFinalDate||"",projectDeadline:D.projectDeadline||""})}).catch(D=>{console.error("Error loading client:",D),d({submit:"Erro ao carregar dados do cliente"})}).finally(()=>{v(!1)}))},[t,e]);const x=(D,z)=>{i(F=>({...F,[D]:z})),c[D]&&d(F=>({...F,[D]:""})),E&&b("")},R=()=>{const D={};return r.name.trim()||(D.name="Name is required"),r.state.trim()||(D.state="State is required"),r.city.trim()||(D.city="City is required"),r.address.trim()||(D.address="Address is required"),r.personPhone.trim()||(D.personPhone="Person Phone is required"),r.officePhone.trim()||(D.officePhone="Office Phone is required"),r.projectNumber.trim()||(D.projectNumber="Project Number is required"),r.projectContractDate||(D.projectContractDate="Contract Date is required"),r.projectFinalDate||(D.projectFinalDate="Final Date is required"),r.projectContractDate&&r.projectFinalDate&&new Date(r.projectFinalDate)<new Date(r.projectContractDate)&&(D.projectFinalDate="Final date cannot be before contract date"),d(D),Object.keys(D).length===0},A=async D=>{if(D.preventDefault(),!!R()){y(!0),b(""),d({});try{if(console.log("Client data to save:",r),t&&e)await Tn.updateClient(e,r),b("Cliente atualizado com sucesso!");else{const z=await Tn.createClient(r);console.log("New client:",z),b("Cliente registrado com sucesso!")}t||i({name:"",state:"",city:"",address:"",personPhone:"",officePhone:"",projectNumber:"",projectContractDate:"",projectFinalDate:"",projectDeadline:""}),d({}),setTimeout(()=>{b("")},6e3)}catch(z){d({submit:"Failed to register client: "+(z instanceof Error?z.message:String(z))})}finally{y(!1)}}},q=()=>{i({name:"",state:"",city:"",address:"",personPhone:"",officePhone:"",projectNumber:"",projectContractDate:new Date().toISOString().split("T")[0],projectFinalDate:new Date().toISOString().split("T")[0],projectDeadline:""}),d({}),b("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:t?"Edit Client":"Register Client"}),o.jsx("p",{className:"page-subtitle",children:t?"Update client information and project details":"Create a new client profile with project details and contact information"})]}),o.jsxs("div",{className:`form-container ${m||p?"form-loading":""}`,children:[p&&o.jsx("div",{className:"status-message info-message",children:"Carregando dados do cliente..."}),E&&o.jsx("div",{className:"status-message success-message",children:E}),c.submit&&o.jsx("div",{className:"status-message error-message",children:c.submit}),o.jsxs("form",{onSubmit:A,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(qs,{className:"section-icon"}),"Client Information"]}),o.jsx(le,{label:"Client Name",type:"text",value:r.name,onChange:D=>x("name",D),placeholder:"Enter the client's full name",error:c.name,required:!0,disabled:m})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(pf,{className:"section-icon"}),"Location Details"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"State",type:"text",value:r.state,onChange:D=>x("state",D),placeholder:"e.g., California",error:c.state,required:!0,disabled:m}),o.jsx(le,{label:"City",type:"text",value:r.city,onChange:D=>x("city",D),placeholder:"e.g., Los Angeles",error:c.city,required:!0,disabled:m})]}),o.jsx(le,{label:"Address",type:"text",value:r.address,onChange:D=>x("address",D),placeholder:"Enter the complete address",error:c.address,required:!0,disabled:m})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(mA,{className:"section-icon"}),"Contact Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Personal Phone",type:"text",value:r.personPhone,onChange:D=>x("personPhone",D),placeholder:"(555) 123-4567",error:c.personPhone,required:!0,disabled:m}),o.jsx(le,{label:"Office Phone",type:"text",value:r.officePhone,onChange:D=>x("officePhone",D),placeholder:"(555) 987-6543",error:c.officePhone,required:!0,disabled:m})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(pA,{className:"section-icon"}),"Project Details"]}),o.jsx(le,{label:"Project Number",type:"text",value:r.projectNumber,onChange:D=>x("projectNumber",D),placeholder:"PRJ-2024-001",error:c.projectNumber,required:!0,disabled:m}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Contract Date",type:"date",value:r.projectContractDate,onChange:D=>x("projectContractDate",D),error:c.projectContractDate,required:!0,disabled:m}),o.jsx(le,{label:"Final Date",type:"date",value:r.projectFinalDate,onChange:D=>x("projectFinalDate",D),error:c.projectFinalDate,required:!0,disabled:m})]}),o.jsx(le,{label:"Project Deadline",type:"text",value:r.projectDeadline,onChange:D=>x("projectDeadline",D),placeholder:"e.g., 90 days, 6 months, December 2024",error:c.projectDeadline,disabled:m})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:m||p,children:m?t?"Updating Client...":"Saving Client...":t?"Update Client":"Save Client"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:q,disabled:m,children:"Cancel"})]})]})]})]})},iM=()=>{const[n]=Ey(),e=n.get("edit"),t=!!e,[r,i]=P.useState({name:"",address:"",itinNumber:"",driverLicenseNumber:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelationship:""}),[c,d]=P.useState({}),[m,y]=P.useState(!1),[p,v]=P.useState(!1),[E,b]=P.useState(""),[x,R]=P.useState(!1);P.useEffect(()=>{t&&e&&(v(!0),Di.getEmployeeById(e).then(j=>{j&&i({name:j.name||"",address:j.address||"",itinNumber:j.itinNumber||"",driverLicenseNumber:j.driverLicenseNumber||"",phone:j.phone||"",emergencyContactName:j.emergencyContactName||"",emergencyContactPhone:j.emergencyContactPhone||"",emergencyContactRelationship:j.emergencyContactRelationship||""})}).catch(j=>{console.error("Error loading employee:",j),d({submit:"Erro ao carregar dados do funcionrio"})}).finally(()=>{v(!1)}))},[t,e]);const A=(j,O)=>{i(L=>({...L,[j]:O})),c[j]&&d(L=>({...L,[j]:""})),E&&b("")},q=j=>{const O=j.target.files?.[0];O&&i(L=>({...L,driverLicenseDocument:O})),c.driverLicenseDocument&&d(L=>({...L,driverLicenseDocument:""}))},D=j=>{j.preventDefault(),R(!0)},z=j=>{j.preventDefault(),R(!1)},F=j=>{j.preventDefault(),R(!1);const O=j.dataTransfer.files[0];O&&O.type==="application/pdf"&&i(L=>({...L,driverLicenseDocument:O}))},de=()=>{i(j=>({...j,driverLicenseDocument:void 0}))},$=()=>{const j={};return r.name.trim()||(j.name="Name is required"),r.address.trim()||(j.address="Address is required"),r.itinNumber.trim()||(j.itinNumber="ITIN Number is required"),r.driverLicenseNumber.trim()||(j.driverLicenseNumber="Driver License Number is required"),r.phone.trim()||(j.phone="Phone is required"),r.emergencyContactName.trim()||(j.emergencyContactName="Emergency Contact Name is required"),r.emergencyContactPhone.trim()||(j.emergencyContactPhone="Emergency Contact Phone is required"),r.emergencyContactRelationship.trim()||(j.emergencyContactRelationship="Relationship is required"),d(j),Object.keys(j).length===0},he=async j=>{if(j.preventDefault(),!!$()){y(!0),b(""),d({});try{console.log("Employee data to save:",r),t&&e?(await Di.updateEmployee(e,r),b("Employee updated successfully!")):(await Di.createEmployee(r),b("Employee registered successfully!"),i({name:"",address:"",itinNumber:"",driverLicenseNumber:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelationship:""}),d({})),setTimeout(()=>{b("")},3e3)}catch(O){d({submit:`Failed to ${t?"update":"register"} employee: `+(O instanceof Error?O.message:String(O))})}finally{y(!1)}}},M=()=>{i({name:"",address:"",itinNumber:"",driverLicenseNumber:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelationship:""}),d({}),b(""),v(!1)};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:t?"Edit Employee":"Register Employee"}),o.jsx("p",{className:"page-subtitle",children:t?"Update employee profile with personal details and emergency contact information":"Create a new employee profile with personal details and emergency contact information"})]}),o.jsxs("div",{className:`form-container ${m&&!p?"form-loading":""}`,children:[p&&o.jsx("div",{className:"status-message info-message",children:"Loading employee data..."}),E&&o.jsx("div",{className:"status-message success-message",children:E}),c.submit&&o.jsx("div",{className:"status-message error-message",children:c.submit}),o.jsxs("form",{onSubmit:he,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(qs,{className:"section-icon"}),"Personal Information"]}),o.jsx(le,{label:"Full Name",type:"text",value:r.name,onChange:j=>A("name",j),placeholder:"Enter employee's full name",error:c.name,required:!0,disabled:m}),o.jsx(le,{label:"Address",type:"text",value:r.address,onChange:j=>A("address",j),placeholder:"Enter complete address",error:c.address,required:!0,disabled:m}),o.jsx(le,{label:"Phone",type:"text",value:r.phone,onChange:j=>A("phone",j),placeholder:"(555) 123-4567",error:c.phone,required:!0,disabled:m})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(il,{className:"section-icon"}),"Documentation"]}),o.jsx(le,{label:"ITIN Number",type:"text",value:r.itinNumber,onChange:j=>A("itinNumber",j),placeholder:"XXX-XX-XXXX",error:c.itinNumber,required:!0,disabled:m}),o.jsx(le,{label:"Driver License Number",type:"text",value:r.driverLicenseNumber,onChange:j=>A("driverLicenseNumber",j),placeholder:"Enter driver license number",error:c.driverLicenseNumber,required:!0,disabled:m}),o.jsxs("div",{className:"file-upload-container",children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Driver License Document (PDF)"," ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("label",{className:`file-upload-label ${x?"dragover":""}`,onDragOver:D,onDragLeave:z,onDrop:F,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px 16px",border:"3px dashed #0ea5e9",borderRadius:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",minHeight:"120px",width:"100%",boxSizing:"border-box"},children:[o.jsx("div",{style:{fontSize:"32px",marginBottom:"8px",opacity:.8},children:""}),o.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:x?"#059669":"#0ea5e9",textAlign:"center"},children:x?"Drop file here to upload":"Click to upload driver license document"}),o.jsx("input",{type:"file",accept:".pdf",onChange:q,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1},disabled:m})]})]}),r.driverLicenseDocument&&o.jsxs("div",{className:"file-upload-name",children:[o.jsx("span",{children:r.driverLicenseDocument.name}),o.jsx("button",{type:"button",onClick:de,className:"file-remove-btn",disabled:m,children:""})]}),c.driverLicenseDocument&&o.jsx("span",{className:"error-message",children:c.driverLicenseDocument})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(QO,{className:"section-icon"}),"Emergency Contact"]}),o.jsx(le,{label:"Emergency Contact Name",type:"text",value:r.emergencyContactName,onChange:j=>A("emergencyContactName",j),placeholder:"Enter emergency contact's full name",error:c.emergencyContactName,required:!0,disabled:m}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Emergency Contact Phone",type:"text",value:r.emergencyContactPhone,onChange:j=>A("emergencyContactPhone",j),placeholder:"(555) 987-6543",error:c.emergencyContactPhone,required:!0,disabled:m}),o.jsx(le,{label:"Relationship",type:"text",value:r.emergencyContactRelationship,onChange:j=>A("emergencyContactRelationship",j),placeholder:"e.g., Spouse, Parent, Sibling",error:c.emergencyContactRelationship,required:!0,disabled:m})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:m||p,children:m?t?"Updating Employee...":"Saving Employee...":t?"Update Employee":"Save Employee"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:M,disabled:m,children:"Cancel"})]})]})]})]})},oM=()=>{const[n,e]=P.useState({companyName:"",contactPerson:"",email:"",phone:"",state:"",city:"",address:"",itinNumber:"",services:[],licenseNumber:"",insuranceExpiry:"",insuranceDocuments:[],certifications:[],hourlyRate:void 0,paymentTerms:"30",availability:"available",notes:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),[y,p]=P.useState(!1),v=[{value:"excavation",label:"Excavation"},{value:"trenching",label:"Trenching"},{value:"underground_utilities",label:"Underground Utilities"},{value:"concrete_work",label:"Concrete Work"},{value:"asphalt_paving",label:"Asphalt Paving"},{value:"landscaping",label:"Landscaping"},{value:"drainage",label:"Drainage Systems"},{value:"electrical",label:"Electrical Work"},{value:"plumbing",label:"Plumbing"},{value:"surveying",label:"Surveying"},{value:"equipment_rental",label:"Equipment Rental"},{value:"traffic_control",label:"Traffic Control"}],E=[{value:"osha_10",label:"OSHA 10-Hour"},{value:"osha_30",label:"OSHA 30-Hour"},{value:"confined_space",label:"Confined Space Entry"},{value:"hazmat",label:"HAZMAT Certification"},{value:"crane_operator",label:"Crane Operator"},{value:"welding",label:"Welding Certification"},{value:"electrical",label:"Electrical License"},{value:"plumbing",label:"Plumbing License"},{value:"general_contractor",label:"General Contractor License"}],b=($,he)=>{e(M=>({...M,[$]:he})),t[$]&&r(M=>({...M,[$]:""})),d&&m("")},x=$=>{const he=Array.from($.target.files||[]);he.length>0&&e(M=>({...M,insuranceDocuments:[...M.insuranceDocuments||[],...he]}))},R=$=>{$.preventDefault(),p(!0)},A=$=>{$.preventDefault(),p(!1)},q=$=>{$.preventDefault(),p(!1);const he=Array.from($.dataTransfer.files).filter(M=>M.type==="application/pdf");he.length>0&&e(M=>({...M,insuranceDocuments:[...M.insuranceDocuments||[],...he]}))},D=$=>{e(he=>({...he,insuranceDocuments:he.insuranceDocuments?.filter((M,j)=>j!==$)||[]}))},z=()=>{const $={};return n.companyName.trim()||($.companyName="Company name is required"),n.contactPerson.trim()||($.contactPerson="Contact person is required"),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||($.email="Please enter a valid email"):$.email="Email is required",n.phone.trim()||($.phone="Phone number is required"),n.state.trim()||($.state="State is required"),n.city.trim()||($.city="City is required"),n.address.trim()||($.address="Address is required"),n.itinNumber.trim()||($.itinNumber="ITIN Number is required"),n.services.length===0&&($.services="Please select at least one service"),n.paymentTerms||($.paymentTerms="Payment terms are required"),n.hourlyRate!==void 0&&n.hourlyRate<0&&($.hourlyRate="Hourly rate cannot be negative"),(!n.insuranceExpiry||!n.insuranceExpiry.trim())&&($.insuranceExpiry="Insurance expiry date is required"),r($),Object.keys($).length===0},F=async $=>{if($.preventDefault(),!!z()){c(!0),m(""),r({});try{await ff.createSubcontractor(n),m("Subcontractor registered successfully!"),e({companyName:"",contactPerson:"",email:"",phone:"",state:"",city:"",address:"",itinNumber:"",services:[],licenseNumber:"",insuranceExpiry:"",insuranceDocuments:[],certifications:[],hourlyRate:void 0,paymentTerms:"30",availability:"available",notes:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(he){r({submit:"Failed to register subcontractor: "+(he instanceof Error?he.message:String(he))})}finally{c(!1)}}},de=()=>{e({companyName:"",contactPerson:"",email:"",phone:"",state:"",city:"",address:"",itinNumber:"",services:[],licenseNumber:"",insuranceExpiry:"",insuranceDocuments:[],certifications:[],hourlyRate:void 0,paymentTerms:"30",availability:"available",notes:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Subcontractor"}),o.jsx("p",{className:"page-subtitle",children:"Add a new subcontractor to the system with their services, certifications, and contact information"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:F,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(fA,{className:"section-icon"}),"Company Information"]}),o.jsx(le,{label:"Company Name",type:"text",value:n.companyName,onChange:$=>b("companyName",$),placeholder:"Enter the company name",error:t.companyName,required:!0,disabled:i}),o.jsx(le,{label:"Contact Person",type:"text",value:n.contactPerson,onChange:$=>b("contactPerson",$),placeholder:"Enter the main contact person",error:t.contactPerson,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(mA,{className:"section-icon"}),"Contact Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Email",type:"email",value:n.email,onChange:$=>b("email",$),placeholder:"company@example.com",error:t.email,required:!0,disabled:i}),o.jsx(le,{label:"Phone",type:"text",value:n.phone,onChange:$=>b("phone",$),placeholder:"(555) 123-4567",error:t.phone,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(pf,{className:"section-icon"}),"Location Details"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"State",type:"text",value:n.state,onChange:$=>b("state",$),placeholder:"e.g., California",error:t.state,required:!0,disabled:i}),o.jsx(le,{label:"City",type:"text",value:n.city,onChange:$=>b("city",$),placeholder:"e.g., Los Angeles",error:t.city,required:!0,disabled:i})]}),o.jsx(le,{label:"Address",type:"text",value:n.address,onChange:$=>b("address",$),placeholder:"Enter the complete address",error:t.address,required:!0,disabled:i}),o.jsx(le,{label:"ITIN Number",type:"text",value:n.itinNumber,onChange:$=>b("itinNumber",$),placeholder:"XXX-XX-XXXX",error:t.itinNumber,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(pA,{className:"section-icon"}),"Services & Capabilities"]}),o.jsx(Ui,{label:"Services Offered",options:v,value:n.services,onChange:$=>b("services",$),placeholder:"Select the services this subcontractor offers...",error:t.services,required:!0,disabled:i}),o.jsx(Ui,{label:"Certifications",options:E,value:n.certifications||[],onChange:$=>b("certifications",$),placeholder:"Select relevant certifications...",disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(ol,{className:"section-icon"}),"Business Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"License Number",type:"text",value:n.licenseNumber||"",onChange:$=>b("licenseNumber",$),placeholder:"Enter license number if applicable",disabled:i}),o.jsx(le,{label:"Insurance Expiry Date",type:"date",value:n.insuranceExpiry||"",onChange:$=>b("insuranceExpiry",$),error:t.insuranceExpiry,required:!0,disabled:i})]}),o.jsxs("div",{className:"file-upload-container",children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Insurance Documents (PDF) ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("label",{className:`file-upload-label ${y?"dragover":""}`,onDragOver:R,onDragLeave:A,onDrop:q,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px 16px",border:"3px dashed #0ea5e9",borderRadius:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",minHeight:"120px",width:"100%",boxSizing:"border-box"},children:[o.jsx("div",{style:{fontSize:"32px",marginBottom:"8px",opacity:.8},children:""}),o.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:y?"#059669":"#0ea5e9",textAlign:"center"},children:y?"Drop files here to upload":"Click to upload insurance documents"}),o.jsx("input",{type:"file",accept:".pdf",multiple:!0,onChange:x,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1},disabled:i})]})]}),n.insuranceDocuments&&n.insuranceDocuments.length>0&&o.jsx("div",{className:"file-upload-list",children:n.insuranceDocuments.map(($,he)=>o.jsxs("div",{className:"file-upload-name",children:[o.jsx("span",{children:$.name}),o.jsx("button",{type:"button",onClick:()=>D(he),className:"file-remove-btn",disabled:i,children:""})]},he))})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Hourly Rate",type:"text",value:n.hourlyRate?.toString()||"",onChange:$=>b("hourlyRate",$?parseFloat($):0),placeholder:"Enter hourly rate (optional)",error:t.hourlyRate,disabled:i}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Payment Terms ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.paymentTerms,onChange:$=>b("paymentTerms",$.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"7",children:"7 days after execution"}),o.jsx("option",{value:"15",children:"15 days after execution"}),o.jsx("option",{value:"30",children:"30 days after execution"})]}),t.paymentTerms&&o.jsx("span",{className:"error-message",children:t.paymentTerms})]})]}),o.jsx("div",{className:"form-row",children:o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Availability ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.availability,onChange:$=>b("availability",$.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"available",children:"Available"}),o.jsx("option",{value:"busy",children:"Busy"}),o.jsx("option",{value:"unavailable",children:"Unavailable"})]})]})})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Additional Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Notes"}),o.jsx("textarea",{value:n.notes||"",onChange:$=>b("notes",$.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Subcontractor...":"Save Subcontractor"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:de,disabled:i,children:"Cancel"})]})]})]})]})},lM=()=>{const[n,e]=P.useState({serviceName:"",clientId:"",clientName:"",subcontractorId:"",subcontractorName:"",projectNumber:"",contractNumber:"",startDate:"",endDate:"",estimatedDuration:"",status:"pending",serviceType:"",description:"",location:{address:"",city:"",state:"",zipCode:""},budget:{estimatedCost:0,actualCost:0,currency:"USD"},requirements:[],deliverables:[],notes:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),y=[{value:"excavation",label:"Excavation"},{value:"trenching",label:"Trenching"},{value:"underground_utilities",label:"Underground Utilities"},{value:"concrete_work",label:"Concrete Work"},{value:"asphalt_paving",label:"Asphalt Paving"},{value:"landscaping",label:"Landscaping"},{value:"drainage",label:"Drainage Systems"},{value:"electrical",label:"Electrical Work"},{value:"plumbing",label:"Plumbing"},{value:"surveying",label:"Surveying"},{value:"equipment_rental",label:"Equipment Rental"},{value:"traffic_control",label:"Traffic Control"}],p=[{value:"permits",label:"Permits Required"},{value:"safety_equipment",label:"Safety Equipment"},{value:"environmental_clearance",label:"Environmental Clearance"},{value:"traffic_control",label:"Traffic Control Plan"},{value:"utility_marking",label:"Utility Marking"},{value:"soil_testing",label:"Soil Testing"},{value:"surveying",label:"Surveying Required"},{value:"inspections",label:"Regular Inspections"},{value:"insurance",label:"Insurance Coverage"},{value:"bonding",label:"Performance Bond"}],v=[{value:"excavation_complete",label:"Excavation Complete"},{value:"utilities_installed",label:"Utilities Installed"},{value:"backfill_complete",label:"Backfill Complete"},{value:"paving_complete",label:"Paving Complete"},{value:"landscaping_complete",label:"Landscaping Complete"},{value:"final_inspection",label:"Final Inspection"},{value:"as_built_drawings",label:"As-Built Drawings"},{value:"warranty_documentation",label:"Warranty Documentation"},{value:"cleanup_complete",label:"Site Cleanup Complete"},{value:"final_report",label:"Final Project Report"}],E=(D,z)=>{e(F=>({...F,[D]:z})),t[D]&&r(F=>({...F,[D]:""})),d&&m("")},b=(D,z)=>{e(F=>({...F,location:{...F.location,[D]:z}})),t[D]&&r(F=>({...F,[D]:""}))},x=(D,z)=>{e(F=>({...F,budget:{...F.budget,[D]:z}})),t[D]&&r(F=>({...F,[D]:""}))},R=()=>{const D={};return n.serviceName.trim()||(D.serviceName="Service name is required"),n.clientId.trim()||(D.clientId="Client ID is required"),n.clientName.trim()||(D.clientName="Client name is required"),n.projectNumber.trim()||(D.projectNumber="Project number is required"),n.contractNumber.trim()||(D.contractNumber="Contract number is required"),n.startDate||(D.startDate="Start date is required"),n.endDate||(D.endDate="End date is required"),n.startDate&&n.endDate&&new Date(n.endDate)<new Date(n.startDate)&&(D.endDate="End date cannot be before start date"),n.estimatedDuration.trim()||(D.estimatedDuration="Estimated duration is required"),n.serviceType.trim()||(D.serviceType="Service type is required"),n.description.trim()||(D.description="Description is required"),n.location.address.trim()||(D.address="Address is required"),n.location.city.trim()||(D.city="City is required"),n.location.state.trim()||(D.state="State is required"),n.budget.estimatedCost<=0&&(D.estimatedCost="Estimated cost must be greater than 0"),n.budget.currency.trim()||(D.currency="Currency is required"),r(D),Object.keys(D).length===0},A=async D=>{if(D.preventDefault(),!!R()){c(!0),m(""),r({});try{console.log("Contract service data to save:",n);const z=await $t.createContractService(n);console.log("New contract service:",z),m("Contract service registered successfully!"),e({serviceName:"",clientId:"",clientName:"",subcontractorId:"",subcontractorName:"",projectNumber:"",contractNumber:"",startDate:"",endDate:"",estimatedDuration:"",status:"pending",serviceType:"",description:"",location:{address:"",city:"",state:"",zipCode:""},budget:{estimatedCost:0,actualCost:0,currency:"USD"},requirements:[],deliverables:[],notes:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(z){r({submit:"Failed to register contract service: "+(z instanceof Error?z.message:String(z))})}finally{c(!1)}}},q=()=>{e({serviceName:"",clientId:"",clientName:"",subcontractorId:"",subcontractorName:"",projectNumber:"",contractNumber:"",startDate:"",endDate:"",estimatedDuration:"",status:"pending",serviceType:"",description:"",location:{address:"",city:"",state:"",zipCode:""},budget:{estimatedCost:0,actualCost:0,currency:"USD"},requirements:[],deliverables:[],notes:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Contract Service"}),o.jsx("p",{className:"page-subtitle",children:"Create a new contract service with project details, budget, and requirements"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:A,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(il,{className:"section-icon"}),"Service Information"]}),o.jsx(le,{label:"Service Name",type:"text",value:n.serviceName,onChange:D=>E("serviceName",D),placeholder:"Enter the service name",error:t.serviceName,required:!0,disabled:i}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Client ID",type:"text",value:n.clientId,onChange:D=>E("clientId",D),placeholder:"Enter client ID",error:t.clientId,required:!0,disabled:i}),o.jsx(le,{label:"Client Name",type:"text",value:n.clientName,onChange:D=>E("clientName",D),placeholder:"Enter client name",error:t.clientName,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Project Number",type:"text",value:n.projectNumber,onChange:D=>E("projectNumber",D),placeholder:"PRJ-2024-001",error:t.projectNumber,required:!0,disabled:i}),o.jsx(le,{label:"Contract Number",type:"text",value:n.contractNumber,onChange:D=>E("contractNumber",D),placeholder:"CNT-2024-001",error:t.contractNumber,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(_u,{className:"section-icon"}),"Project Timeline"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Start Date",type:"date",value:n.startDate,onChange:D=>E("startDate",D),error:t.startDate,required:!0,disabled:i}),o.jsx(le,{label:"End Date",type:"date",value:n.endDate,onChange:D=>E("endDate",D),error:t.endDate,required:!0,disabled:i})]}),o.jsx(le,{label:"Estimated Duration",type:"text",value:n.estimatedDuration,onChange:D=>E("estimatedDuration",D),placeholder:"e.g., 30 days, 3 months, 6 weeks",error:t.estimatedDuration,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(W0,{className:"section-icon"}),"Service Details"]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Service Type ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.serviceType,onChange:D=>E("serviceType",D.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"",children:"Select service type"}),y.map(D=>o.jsx("option",{value:D.value,children:D.label},D.value))]}),t.serviceType&&o.jsx("small",{className:"form-error",children:t.serviceType})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Description ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("textarea",{value:n.description,onChange:D=>E("description",D.target.value),placeholder:"Enter detailed service description...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i}),t.description&&o.jsx("small",{className:"form-error",children:t.description})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(pf,{className:"section-icon"}),"Location Information"]}),o.jsx(le,{label:"Address",type:"text",value:n.location.address,onChange:D=>b("address",D),placeholder:"Enter the complete address",error:t.address,required:!0,disabled:i}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"City",type:"text",value:n.location.city,onChange:D=>b("city",D),placeholder:"e.g., Los Angeles",error:t.city,required:!0,disabled:i}),o.jsx(le,{label:"State",type:"text",value:n.location.state,onChange:D=>b("state",D),placeholder:"e.g., California",error:t.state,required:!0,disabled:i})]}),o.jsx(le,{label:"ZIP Code",type:"text",value:n.location.zipCode||"",onChange:D=>b("zipCode",D),placeholder:"e.g., 90210",disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Budget Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Estimated Cost",type:"text",value:n.budget.estimatedCost.toString(),onChange:D=>x("estimatedCost",D?parseFloat(D):0),placeholder:"Enter estimated cost",error:t.estimatedCost,required:!0,disabled:i}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Currency ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.budget.currency,onChange:D=>x("currency",D.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"USD",children:"USD - US Dollar"}),o.jsx("option",{value:"EUR",children:"EUR - Euro"}),o.jsx("option",{value:"BRL",children:"BRL - Brazilian Real"}),o.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"})]}),t.currency&&o.jsx("small",{className:"form-error",children:t.currency})]})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(W0,{className:"section-icon"}),"Requirements & Deliverables"]}),o.jsx(Ui,{label:"Requirements",options:p,value:n.requirements,onChange:D=>E("requirements",D),placeholder:"Select project requirements...",disabled:i}),o.jsx(Ui,{label:"Deliverables",options:v,value:n.deliverables,onChange:D=>E("deliverables",D),placeholder:"Select expected deliverables...",disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(il,{className:"section-icon"}),"Additional Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Notes"}),o.jsx("textarea",{value:n.notes||"",onChange:D=>E("notes",D.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Contract Service...":"Save Contract Service"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:q,disabled:i,children:"Cancel"})]})]})]})]})},cM=()=>{const[n,e]=P.useState({projectId:"",projectName:"",clientId:"",clientName:"",financingType:"loan",lenderName:"",lenderContact:"",lenderPhone:"",lenderEmail:"",loanAmount:0,interestRate:0,termMonths:0,monthlyPayment:0,startDate:"",maturityDate:"",status:"pending",collateral:[],requirements:[],notes:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),y=[{value:"loan",label:"Business Loan"},{value:"credit_line",label:"Credit Line"},{value:"equipment_financing",label:"Equipment Financing"},{value:"working_capital",label:"Working Capital"},{value:"construction_loan",label:"Construction Loan"}],p=[{value:"real_estate",label:"Real Estate"},{value:"equipment",label:"Equipment"},{value:"vehicles",label:"Vehicles"},{value:"accounts_receivable",label:"Accounts Receivable"},{value:"inventory",label:"Inventory"},{value:"personal_guarantee",label:"Personal Guarantee"},{value:"cash_collateral",label:"Cash Collateral"},{value:"securities",label:"Securities"}],v=[{value:"financial_statements",label:"Financial Statements"},{value:"tax_returns",label:"Tax Returns"},{value:"business_plan",label:"Business Plan"},{value:"credit_report",label:"Credit Report"},{value:"insurance",label:"Insurance Documentation"},{value:"legal_documents",label:"Legal Documents"},{value:"appraisal",label:"Property/Equipment Appraisal"},{value:"environmental_assessment",label:"Environmental Assessment"}],E=(A,q)=>{e(D=>({...D,[A]:q})),t[A]&&r(D=>({...D,[A]:""})),d&&m("")},b=()=>{const A={};return n.projectId.trim()||(A.projectId="Project ID is required"),n.projectName.trim()||(A.projectName="Project name is required"),n.clientId.trim()||(A.clientId="Client ID is required"),n.clientName.trim()||(A.clientName="Client name is required"),n.lenderName.trim()||(A.lenderName="Lender name is required"),n.lenderContact.trim()||(A.lenderContact="Lender contact is required"),n.lenderPhone.trim()||(A.lenderPhone="Lender phone is required"),n.lenderEmail.trim()?/\S+@\S+\.\S+/.test(n.lenderEmail)||(A.lenderEmail="Please enter a valid email"):A.lenderEmail="Lender email is required",n.loanAmount<=0&&(A.loanAmount="Loan amount must be greater than 0"),n.interestRate<0&&(A.interestRate="Interest rate cannot be negative"),n.termMonths<=0&&(A.termMonths="Term must be greater than 0"),n.monthlyPayment<=0&&(A.monthlyPayment="Monthly payment must be greater than 0"),n.startDate||(A.startDate="Start date is required"),n.maturityDate||(A.maturityDate="Maturity date is required"),n.startDate&&n.maturityDate&&new Date(n.maturityDate)<=new Date(n.startDate)&&(A.maturityDate="Maturity date must be after start date"),r(A),Object.keys(A).length===0},x=async A=>{if(A.preventDefault(),!!b()){c(!0),m(""),r({});try{await Ny.createFinancing(n),m("Financing registered successfully!"),e({projectId:"",projectName:"",clientId:"",clientName:"",financingType:"loan",lenderName:"",lenderContact:"",lenderPhone:"",lenderEmail:"",loanAmount:0,interestRate:0,termMonths:0,monthlyPayment:0,startDate:"",maturityDate:"",status:"pending",collateral:[],requirements:[],notes:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(q){r({submit:"Failed to register financing: "+(q instanceof Error?q.message:String(q))})}finally{c(!1)}}},R=()=>{e({projectId:"",projectName:"",clientId:"",clientName:"",financingType:"loan",lenderName:"",lenderContact:"",lenderPhone:"",lenderEmail:"",loanAmount:0,interestRate:0,termMonths:0,monthlyPayment:0,startDate:"",maturityDate:"",status:"pending",collateral:[],requirements:[],notes:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Financing"}),o.jsx("p",{className:"page-subtitle",children:"Create a new financing record with loan details, terms, and requirements"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:x,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(il,{className:"section-icon"}),"Project Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Project ID",type:"text",value:n.projectId,onChange:A=>E("projectId",A),placeholder:"PRJ-2024-001",error:t.projectId,required:!0,disabled:i}),o.jsx(le,{label:"Project Name",type:"text",value:n.projectName,onChange:A=>E("projectName",A),placeholder:"Enter project name",error:t.projectName,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Client ID",type:"text",value:n.clientId,onChange:A=>E("clientId",A),placeholder:"CLI-2024-001",error:t.clientId,required:!0,disabled:i}),o.jsx(le,{label:"Client Name",type:"text",value:n.clientName,onChange:A=>E("clientName",A),placeholder:"Enter client name",error:t.clientName,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(Lh,{className:"section-icon"}),"Financing Details"]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Financing Type ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{value:n.financingType,onChange:A=>E("financingType",A.target.value),className:"role-select",disabled:i,children:y.map(A=>o.jsx("option",{value:A.value,children:A.label},A.value))})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Loan Amount",type:"text",value:n.loanAmount.toString(),onChange:A=>E("loanAmount",A?parseFloat(A):0),placeholder:"Enter loan amount",error:t.loanAmount,required:!0,disabled:i}),o.jsx(le,{label:"Interest Rate (%)",type:"text",value:n.interestRate.toString(),onChange:A=>E("interestRate",A?parseFloat(A):0),placeholder:"Enter interest rate",error:t.interestRate,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Term (Months)",type:"text",value:n.termMonths.toString(),onChange:A=>E("termMonths",A?parseInt(A):0),placeholder:"Enter term in months",error:t.termMonths,required:!0,disabled:i}),o.jsx(le,{label:"Monthly Payment",type:"text",value:n.monthlyPayment.toString(),onChange:A=>E("monthlyPayment",A?parseFloat(A):0),placeholder:"Enter monthly payment",error:t.monthlyPayment,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(qs,{className:"section-icon"}),"Lender Information"]}),o.jsx(le,{label:"Lender Name",type:"text",value:n.lenderName,onChange:A=>E("lenderName",A),placeholder:"Enter lender name",error:t.lenderName,required:!0,disabled:i}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Lender Contact",type:"text",value:n.lenderContact,onChange:A=>E("lenderContact",A),placeholder:"Enter contact person",error:t.lenderContact,required:!0,disabled:i}),o.jsx(le,{label:"Lender Phone",type:"text",value:n.lenderPhone,onChange:A=>E("lenderPhone",A),placeholder:"(555) 123-4567",error:t.lenderPhone,required:!0,disabled:i})]}),o.jsx(le,{label:"Lender Email",type:"email",value:n.lenderEmail,onChange:A=>E("lenderEmail",A),placeholder:"lender@example.com",error:t.lenderEmail,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(_u,{className:"section-icon"}),"Timeline"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Start Date",type:"date",value:n.startDate,onChange:A=>E("startDate",A),error:t.startDate,required:!0,disabled:i}),o.jsx(le,{label:"Maturity Date",type:"date",value:n.maturityDate,onChange:A=>E("maturityDate",A),error:t.maturityDate,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(ol,{className:"section-icon"}),"Collateral & Requirements"]}),o.jsx(Ui,{label:"Collateral",options:p,value:n.collateral,onChange:A=>E("collateral",A),placeholder:"Select collateral types...",disabled:i}),o.jsx(Ui,{label:"Requirements",options:v,value:n.requirements,onChange:A=>E("requirements",A),placeholder:"Select required documents...",disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Additional Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Notes"}),o.jsx("textarea",{value:n.notes||"",onChange:A=>E("notes",A.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Financing...":"Save Financing"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:R,disabled:i,children:"Cancel"})]})]})]})]})},uM=()=>{const[n,e]=P.useState({vehicleType:"truck",make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",licensePlateRenewalDate:"",color:"",fuelType:"diesel",engineSize:"",transmission:"manual",mileage:0,monthlyMileageHistory:[],financingStatus:"not_financed",dotNumber:"",dotRenewalDate:"",purchaseDate:"",purchasePrice:0,currentValue:0,insuranceProvider:"",insurancePolicyNumber:"",insuranceExpiry:"",registrationExpiry:"",maintenanceSchedule:"monthly",lastMaintenanceDate:"",nextMaintenanceDate:"",status:"active",assignedTo:"",location:"",notes:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),y=(b,x)=>{e(R=>({...R,[b]:x})),t[b]&&r(R=>({...R,[b]:""})),d&&m("")},p=()=>{const b={};return n.make.trim()||(b.make="Make is required"),n.model.trim()||(b.model="Model is required"),(n.year<1900||n.year>new Date().getFullYear()+1)&&(b.year="Please enter a valid year"),n.vin.trim()||(b.vin="VIN is required"),n.licensePlate.trim()||(b.licensePlate="License plate is required"),n.licensePlateRenewalDate||(b.licensePlateRenewalDate="License plate renewal date is required"),n.color.trim()||(b.color="Color is required"),n.engineSize.trim()||(b.engineSize="Engine size is required"),n.mileage<0&&(b.mileage="Mileage cannot be negative"),n.purchaseDate||(b.purchaseDate="Purchase date is required"),n.purchasePrice<=0&&(b.purchasePrice="Purchase price must be greater than 0"),n.currentValue<0&&(b.currentValue="Current value cannot be negative"),n.insuranceProvider.trim()||(b.insuranceProvider="Insurance provider is required"),n.insurancePolicyNumber.trim()||(b.insurancePolicyNumber="Insurance policy number is required"),n.insuranceExpiry||(b.insuranceExpiry="Insurance expiry date is required"),n.registrationExpiry||(b.registrationExpiry="Registration expiry date is required"),n.location.trim()||(b.location="Location is required"),n.dotNumber.trim()||(b.dotNumber="DOT Number is required"),n.dotRenewalDate||(b.dotRenewalDate="DOT renewal date is required"),r(b),Object.keys(b).length===0},v=async b=>{if(b.preventDefault(),!!p()){c(!0),m(""),r({});try{await Fs.createVehicle(n),m("Vehicle registered successfully!"),e({vehicleType:"truck",make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",licensePlateRenewalDate:"",color:"",fuelType:"diesel",engineSize:"",transmission:"manual",mileage:0,monthlyMileageHistory:[],financingStatus:"not_financed",dotNumber:"",dotRenewalDate:"",purchaseDate:"",purchasePrice:0,currentValue:0,insuranceProvider:"",insurancePolicyNumber:"",insuranceExpiry:"",registrationExpiry:"",maintenanceSchedule:"monthly",lastMaintenanceDate:"",nextMaintenanceDate:"",status:"active",assignedTo:"",location:"",notes:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(x){r({submit:"Failed to register vehicle: "+(x instanceof Error?x.message:String(x))})}finally{c(!1)}}},E=()=>{e({vehicleType:"truck",make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",licensePlateRenewalDate:"",color:"",fuelType:"diesel",engineSize:"",transmission:"manual",mileage:0,monthlyMileageHistory:[],financingStatus:"not_financed",dotNumber:"",dotRenewalDate:"",purchaseDate:"",purchasePrice:0,currentValue:0,insuranceProvider:"",insurancePolicyNumber:"",insuranceExpiry:"",registrationExpiry:"",maintenanceSchedule:"monthly",lastMaintenanceDate:"",nextMaintenanceDate:"",status:"active",assignedTo:"",location:"",notes:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Vehicle"}),o.jsx("p",{className:"page-subtitle",children:"Add a new vehicle to the fleet with specifications, insurance, and maintenance information"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:v,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(tM,{className:"section-icon"}),"Vehicle Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Vehicle Type ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.vehicleType,onChange:b=>y("vehicleType",b.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"truck",children:"Truck"}),o.jsx("option",{value:"excavator",children:"Excavator"}),o.jsx("option",{value:"bulldozer",children:"Bulldozer"}),o.jsx("option",{value:"crane",children:"Crane"}),o.jsx("option",{value:"loader",children:"Loader"}),o.jsx("option",{value:"compactor",children:"Compactor"}),o.jsx("option",{value:"grader",children:"Grader"}),o.jsx("option",{value:"dump_truck",children:"Dump Truck"}),o.jsx("option",{value:"concrete_mixer",children:"Concrete Mixer"}),o.jsx("option",{value:"other",children:"Other"})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Make",type:"text",value:n.make,onChange:b=>y("make",b),placeholder:"e.g., Caterpillar, John Deere",error:t.make,required:!0,disabled:i}),o.jsx(le,{label:"Model",type:"text",value:n.model,onChange:b=>y("model",b),placeholder:"e.g., 320D, 950M",error:t.model,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Year",type:"text",value:n.year.toString(),onChange:b=>y("year",b?parseInt(b):new Date().getFullYear()),placeholder:"2024",error:t.year,required:!0,disabled:i}),o.jsx(le,{label:"Color",type:"text",value:n.color,onChange:b=>y("color",b),placeholder:"e.g., Yellow, White",error:t.color,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"VIN",type:"text",value:n.vin,onChange:b=>y("vin",b),placeholder:"Enter VIN number",error:t.vin,required:!0,disabled:i}),o.jsx(le,{label:"License Plate",type:"text",value:n.licensePlate,onChange:b=>y("licensePlate",b),placeholder:"Enter license plate",error:t.licensePlate,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"License Plate Renewal Date",type:"date",value:n.licensePlateRenewalDate,onChange:b=>y("licensePlateRenewalDate",b),error:t.licensePlateRenewalDate,required:!0,disabled:i}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Financing Status ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.financingStatus,onChange:b=>y("financingStatus",b.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"not_financed",children:"Not Financed"}),o.jsx("option",{value:"financed",children:"Financed"})]}),t.financingStatus&&o.jsx("span",{className:"error-message",children:t.financingStatus})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"DOT Number",type:"text",value:n.dotNumber,onChange:b=>y("dotNumber",b),placeholder:"Enter DOT number",error:t.dotNumber,required:!0,disabled:i}),o.jsx(le,{label:"DOT Renewal Date",type:"date",value:n.dotRenewalDate,onChange:b=>y("dotRenewalDate",b),error:t.dotRenewalDate,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(gf,{className:"section-icon"}),"Technical Specifications"]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Fuel Type ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.fuelType,onChange:b=>y("fuelType",b.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"diesel",children:"Diesel"}),o.jsx("option",{value:"gasoline",children:"Gasoline"}),o.jsx("option",{value:"electric",children:"Electric"}),o.jsx("option",{value:"hybrid",children:"Hybrid"}),o.jsx("option",{value:"lpg",children:"LPG"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Transmission ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.transmission,onChange:b=>y("transmission",b.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"manual",children:"Manual"}),o.jsx("option",{value:"automatic",children:"Automatic"}),o.jsx("option",{value:"cvt",children:"CVT"})]})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Engine Size",type:"text",value:n.engineSize,onChange:b=>y("engineSize",b),placeholder:"e.g., 6.7L, 4.5L",error:t.engineSize,required:!0,disabled:i}),o.jsx(le,{label:"Mileage",type:"text",value:n.mileage.toString(),onChange:b=>y("mileage",b?parseInt(b):0),placeholder:"Enter current mileage",error:t.mileage,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Purchase Information"]}),o.jsx(le,{label:"Purchase Date",type:"date",value:n.purchaseDate,onChange:b=>y("purchaseDate",b),error:t.purchaseDate,required:!0,disabled:i}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Purchase Price",type:"text",value:n.purchasePrice.toString(),onChange:b=>y("purchasePrice",b?parseFloat(b):0),placeholder:"Enter purchase price",error:t.purchasePrice,required:!0,disabled:i}),o.jsx(le,{label:"Current Value",type:"text",value:n.currentValue.toString(),onChange:b=>y("currentValue",b?parseFloat(b):0),placeholder:"Enter current value",error:t.currentValue,required:!0,disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(ol,{className:"section-icon"}),"Insurance Information"]}),o.jsx(le,{label:"Insurance Provider",type:"text",value:n.insuranceProvider,onChange:b=>y("insuranceProvider",b),placeholder:"Enter insurance provider",error:t.insuranceProvider,required:!0,disabled:i}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Policy Number",type:"text",value:n.insurancePolicyNumber,onChange:b=>y("insurancePolicyNumber",b),placeholder:"Enter policy number",error:t.insurancePolicyNumber,required:!0,disabled:i}),o.jsx(le,{label:"Insurance Expiry",type:"date",value:n.insuranceExpiry,onChange:b=>y("insuranceExpiry",b),error:t.insuranceExpiry,required:!0,disabled:i})]}),o.jsx(le,{label:"Registration Expiry",type:"date",value:n.registrationExpiry,onChange:b=>y("registrationExpiry",b),error:t.registrationExpiry,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(_u,{className:"section-icon"}),"Maintenance Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Maintenance Schedule ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.maintenanceSchedule,onChange:b=>y("maintenanceSchedule",b.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"monthly",children:"Monthly"}),o.jsx("option",{value:"quarterly",children:"Quarterly"}),o.jsx("option",{value:"annually",children:"Annually"}),o.jsx("option",{value:"as_needed",children:"As Needed"})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Last Maintenance Date",type:"date",value:n.lastMaintenanceDate,onChange:b=>y("lastMaintenanceDate",b),disabled:i}),o.jsx(le,{label:"Next Maintenance Date",type:"date",value:n.nextMaintenanceDate,onChange:b=>y("nextMaintenanceDate",b),disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(pf,{className:"section-icon"}),"Location & Assignment"]}),o.jsx(le,{label:"Location",type:"text",value:n.location,onChange:b=>y("location",b),placeholder:"Enter current location",error:t.location,required:!0,disabled:i}),o.jsx(le,{label:"Assigned To",type:"text",value:n.assignedTo||"",onChange:b=>y("assignedTo",b),placeholder:"Enter assigned operator (optional)",disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Additional Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Notes"}),o.jsx("textarea",{value:n.notes||"",onChange:b=>y("notes",b.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Vehicle...":"Save Vehicle"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:E,disabled:i,children:"Cancel"})]})]})]})]})},dM=()=>{const[n,e]=P.useState({accountName:"",bankName:"",accountNumber:"",routingNumber:"",accountType:"checking",balance:0,currency:"USD",isActive:!0,description:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),y=[{value:"checking",label:"Checking Account"},{value:"savings",label:"Savings Account"},{value:"business",label:"Business Account"}],p=[{value:"USD",label:"USD - US Dollar"},{value:"BRL",label:"BRL - Brazilian Real"},{value:"EUR",label:"EUR - Euro"}],v=(R,A)=>{e(q=>({...q,[R]:A})),t[R]&&r(q=>({...q,[R]:""})),d&&m("")},E=()=>{const R={};return n.accountName.trim()||(R.accountName="Account name is required"),n.bankName.trim()||(R.bankName="Bank name is required"),n.accountNumber.trim()||(R.accountNumber="Account number is required"),n.routingNumber.trim()||(R.routingNumber="Routing number is required"),n.accountType||(R.accountType="Account type is required"),n.balance<0&&(R.balance="Balance cannot be negative"),n.currency||(R.currency="Currency is required"),r(R),Object.keys(R).length===0},b=async R=>{if(R.preventDefault(),!!E()){c(!0),m(""),r({});try{await Ty.createBankAccount(n),m("Bank account registered successfully!"),e({accountName:"",bankName:"",accountNumber:"",routingNumber:"",accountType:"checking",balance:0,currency:"USD",isActive:!0,description:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(A){r({submit:"Failed to register bank account: "+(A instanceof Error?A.message:String(A))})}finally{c(!1)}}},x=()=>{e({accountName:"",bankName:"",accountNumber:"",routingNumber:"",accountType:"checking",balance:0,currency:"USD",isActive:!0,description:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Bank Account"}),o.jsx("p",{className:"page-subtitle",children:"Add a new bank account to the financial management system"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:b,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(Lh,{className:"section-icon"}),"Account Information"]}),o.jsx(le,{label:"Account Name",type:"text",value:n.accountName,onChange:R=>v("accountName",R),placeholder:"e.g., Main Business Account",error:t.accountName,required:!0,disabled:i}),o.jsx(le,{label:"Bank Name",type:"text",value:n.bankName,onChange:R=>v("bankName",R),placeholder:"e.g., Bank of America",error:t.bankName,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(fA,{className:"section-icon"}),"Account Details"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Account Number",type:"text",value:n.accountNumber,onChange:R=>v("accountNumber",R),placeholder:"Enter account number",error:t.accountNumber,required:!0,disabled:i}),o.jsx(le,{label:"Routing Number",type:"text",value:n.routingNumber,onChange:R=>v("routingNumber",R),placeholder:"Enter routing number",error:t.routingNumber,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Account Type ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{value:n.accountType,onChange:R=>v("accountType",R.target.value),className:"role-select",disabled:i,children:y.map(R=>o.jsx("option",{value:R.value,children:R.label},R.value))}),t.accountType&&o.jsx("span",{className:"error-message",children:t.accountType})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Currency ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{value:n.currency,onChange:R=>v("currency",R.target.value),className:"role-select",disabled:i,children:p.map(R=>o.jsx("option",{value:R.value,children:R.label},R.value))}),t.currency&&o.jsx("span",{className:"error-message",children:t.currency})]})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Financial Information"]}),o.jsx(le,{label:"Current Balance",type:"number",value:n.balance.toString(),onChange:R=>v("balance",R?parseFloat(R):0),placeholder:"0.00",error:t.balance,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(gf,{className:"section-icon"}),"Additional Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{value:n.description||"",onChange:R=>v("description",R.target.value),placeholder:"Enter any additional notes about this account...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"form-label",children:[o.jsx("input",{type:"checkbox",checked:n.isActive,onChange:R=>v("isActive",R.target.checked),disabled:i}),o.jsx("span",{style:{marginLeft:"8px"},children:"Account is active"})]})})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Account...":"Save Account"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:x,disabled:i,children:"Cancel"})]})]})]})]})},hM=()=>{const[n,e]=P.useState({cardName:"",cardNumber:"",cardType:"visa",bankName:"",assignedTo:"",creditLimit:0,currentBalance:0,expiryDate:"",isActive:!0,monthlyLimit:0,description:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),y=[{value:"visa",label:"Visa"},{value:"mastercard",label:"Mastercard"},{value:"amex",label:"American Express"},{value:"discover",label:"Discover"}],p=(x,R)=>{e(A=>({...A,[x]:R})),t[x]&&r(A=>({...A,[x]:""})),d&&m("")},v=()=>{const x={};return n.cardName.trim()||(x.cardName="Card name is required"),n.cardNumber.trim()||(x.cardNumber="Card number is required"),n.cardType||(x.cardType="Card type is required"),n.bankName.trim()||(x.bankName="Bank name is required"),n.assignedTo.trim()||(x.assignedTo="Assigned to is required"),n.creditLimit<0&&(x.creditLimit="Credit limit cannot be negative"),n.currentBalance<0&&(x.currentBalance="Current balance cannot be negative"),n.expiryDate||(x.expiryDate="Expiry date is required"),r(x),Object.keys(x).length===0},E=async x=>{if(x.preventDefault(),!!v()){c(!0),m(""),r({});try{await Cy.createCreditCard(n),m("Credit card registered successfully!"),e({cardName:"",cardNumber:"",cardType:"visa",bankName:"",assignedTo:"",creditLimit:0,currentBalance:0,expiryDate:"",isActive:!0,monthlyLimit:0,description:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(R){r({submit:"Failed to register credit card: "+(R instanceof Error?R.message:String(R))})}finally{c(!1)}}},b=()=>{e({cardName:"",cardNumber:"",cardType:"visa",bankName:"",assignedTo:"",creditLimit:0,currentBalance:0,expiryDate:"",isActive:!0,monthlyLimit:0,description:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Credit Card"}),o.jsx("p",{className:"page-subtitle",children:"Add a new credit card for team operations"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:E,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(Lh,{className:"section-icon"}),"Card Information"]}),o.jsx(le,{label:"Card Name",type:"text",value:n.cardName,onChange:x=>p("cardName",x),placeholder:"e.g., Team 1 Operations Card",error:t.cardName,required:!0,disabled:i}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Card Number (Last 4 digits)",type:"text",value:n.cardNumber,onChange:x=>p("cardNumber",x),placeholder:"1234",error:t.cardNumber,required:!0,disabled:i}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Card Type ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{value:n.cardType,onChange:x=>p("cardType",x.target.value),className:"role-select",disabled:i,children:y.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),t.cardType&&o.jsx("span",{className:"error-message",children:t.cardType})]})]}),o.jsx(le,{label:"Bank Name",type:"text",value:n.bankName,onChange:x=>p("bankName",x),placeholder:"e.g., Bank of America",error:t.bankName,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(qs,{className:"section-icon"}),"Assignment"]}),o.jsx(le,{label:"Assigned To",type:"text",value:n.assignedTo,onChange:x=>p("assignedTo",x),placeholder:"e.g., Team 1, Operations Manager",error:t.assignedTo,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Financial Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Credit Limit",type:"number",value:n.creditLimit.toString(),onChange:x=>p("creditLimit",x?parseFloat(x):0),placeholder:"0.00",error:t.creditLimit,required:!0,disabled:i}),o.jsx(le,{label:"Current Balance",type:"number",value:n.currentBalance.toString(),onChange:x=>p("currentBalance",x?parseFloat(x):0),placeholder:"0.00",error:t.currentBalance,required:!0,disabled:i})]}),o.jsx(le,{label:"Monthly Limit (Optional)",type:"number",value:n.monthlyLimit?.toString()||"",onChange:x=>p("monthlyLimit",x?parseFloat(x):0),placeholder:"0.00",disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(_u,{className:"section-icon"}),"Expiry Information"]}),o.jsx(le,{label:"Expiry Date",type:"date",value:n.expiryDate,onChange:x=>p("expiryDate",x),error:t.expiryDate,required:!0,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(Lh,{className:"section-icon"}),"Additional Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{value:n.description||"",onChange:x=>p("description",x.target.value),placeholder:"Enter any additional notes about this card...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"form-label",children:[o.jsx("input",{type:"checkbox",checked:n.isActive,onChange:x=>p("isActive",x.target.checked),disabled:i}),o.jsx("span",{style:{marginLeft:"8px"},children:"Card is active"})]})})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Card...":"Save Card"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:b,disabled:i,children:"Cancel"})]})]})]})]})},fM=()=>{const[n,e]=P.useState({name:"",category:"operational",description:"",isActive:!0,requiresApproval:!1,maxAmount:0}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),y=[{value:"operational",label:"Operational"},{value:"administrative",label:"Administrative"},{value:"equipment",label:"Equipment"},{value:"fuel",label:"Fuel"},{value:"maintenance",label:"Maintenance"},{value:"insurance",label:"Insurance"},{value:"other",label:"Other"}],p=(x,R)=>{e(A=>({...A,[x]:R})),t[x]&&r(A=>({...A,[x]:""})),d&&m("")},v=()=>{const x={};return n.name.trim()||(x.name="Expense type name is required"),n.category||(x.category="Category is required"),n.maxAmount&&n.maxAmount<0&&(x.maxAmount="Maximum amount cannot be negative"),r(x),Object.keys(x).length===0},E=async x=>{if(x.preventDefault(),!!v()){c(!0),m(""),r({});try{await mf.createExpenseType(n),m("Expense type registered successfully!"),e({name:"",category:"operational",description:"",isActive:!0,requiresApproval:!1,maxAmount:0}),r({}),setTimeout(()=>{m("")},6e3)}catch(R){r({submit:"Failed to register expense type: "+(R instanceof Error?R.message:String(R))})}finally{c(!1)}}},b=()=>{e({name:"",category:"operational",description:"",isActive:!0,requiresApproval:!1,maxAmount:0}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Expense Type"}),o.jsx("p",{className:"page-subtitle",children:"Add a new expense type for financial management"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:E,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(il,{className:"section-icon"}),"Basic Information"]}),o.jsx(le,{label:"Expense Type Name",type:"text",value:n.name,onChange:x=>p("name",x),placeholder:"e.g., Fuel Expenses, Equipment Maintenance",error:t.name,required:!0,disabled:i}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Category ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{value:n.category,onChange:x=>p("category",x.target.value),className:"role-select",disabled:i,children:y.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),t.category&&o.jsx("span",{className:"error-message",children:t.category})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Financial Information"]}),o.jsx(le,{label:"Maximum Amount (Optional)",type:"number",value:n.maxAmount?.toString()||"",onChange:x=>p("maxAmount",x?parseFloat(x):0),placeholder:"0.00",error:t.maxAmount,disabled:i})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(gf,{className:"section-icon"}),"Settings"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{value:n.description||"",onChange:x=>p("description",x.target.value),placeholder:"Enter a description for this expense type...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"form-label",children:[o.jsx("input",{type:"checkbox",checked:n.isActive,onChange:x=>p("isActive",x.target.checked),disabled:i}),o.jsx("span",{style:{marginLeft:"8px"},children:"Expense type is active"})]})}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"form-label",children:[o.jsx("input",{type:"checkbox",checked:n.requiresApproval,onChange:x=>p("requiresApproval",x.target.checked),disabled:i}),o.jsx("span",{style:{marginLeft:"8px"},children:"Requires approval"})]})})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Expense Type...":"Save Expense Type"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:b,disabled:i,children:"Cancel"})]})]})]})]})},mM=()=>{const[n,e]=P.useState({serviceId:"",clientId:"",price:0,currency:"USD",effectiveDate:"",endDate:"",isActive:!0,notes:""}),[t,r]=P.useState({}),[i,c]=P.useState(!1),[d,m]=P.useState(""),[y,p]=P.useState([]),[v,E]=P.useState([]),b=[{value:"USD",label:"USD - US Dollar"},{value:"BRL",label:"BRL - Brazilian Real"},{value:"EUR",label:"EUR - Euro"}];P.useEffect(()=>{(async()=>{try{const[z,F]=await Promise.all([hf.getAllServices(),Tn.getAllClients()]);p(z),E(F)}catch(z){console.error("Error loading data:",z)}})()},[]);const x=(D,z)=>{e(F=>({...F,[D]:z})),t[D]&&r(F=>({...F,[D]:""})),d&&m("")},R=()=>{const D={};return n.serviceId||(D.serviceId="Service is required"),n.clientId||(D.clientId="Client is required"),n.price<=0&&(D.price="Price must be greater than 0"),n.currency||(D.currency="Currency is required"),n.effectiveDate||(D.effectiveDate="Effective date is required"),r(D),Object.keys(D).length===0},A=async D=>{if(D.preventDefault(),!!R()){c(!0),m(""),r({});try{await jy.createServicePricing(n),m("Service pricing registered successfully!"),e({serviceId:"",clientId:"",price:0,currency:"USD",effectiveDate:"",endDate:"",isActive:!0,notes:""}),r({}),setTimeout(()=>{m("")},6e3)}catch(z){r({submit:"Failed to register service pricing: "+(z instanceof Error?z.message:String(z))})}finally{c(!1)}}},q=()=>{e({serviceId:"",clientId:"",price:0,currency:"USD",effectiveDate:"",endDate:"",isActive:!0,notes:""}),r({}),m("")};return o.jsxs("div",{className:"form-page-content",children:[o.jsxs("div",{className:"content-header",children:[o.jsx("h1",{className:"page-title",children:"Register Service Pricing"}),o.jsx("p",{className:"page-subtitle",children:"Set specific pricing for services by client"})]}),o.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&o.jsx("div",{className:"status-message success-message",children:d}),t.submit&&o.jsx("div",{className:"status-message error-message",children:t.submit}),o.jsxs("form",{onSubmit:A,className:"modern-form",children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Service and Client Selection"]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Service ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.serviceId,onChange:D=>x("serviceId",D.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"",children:"Select a service"}),y.map(D=>o.jsxs("option",{value:D.id,children:[D.serviceName," (",D.serviceCode,")"]},D.id))]}),t.serviceId&&o.jsx("span",{className:"error-message",children:t.serviceId})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Client ",o.jsx("span",{className:"required",children:"*"})]}),o.jsxs("select",{value:n.clientId,onChange:D=>x("clientId",D.target.value),className:"role-select",disabled:i,children:[o.jsx("option",{value:"",children:"Select a client"}),v.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]}),t.clientId&&o.jsx("span",{className:"error-message",children:t.clientId})]})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(vs,{className:"section-icon"}),"Pricing Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Price",type:"number",value:n.price.toString(),onChange:D=>x("price",D?parseFloat(D):0),placeholder:"0.00",error:t.price,required:!0,disabled:i}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Currency ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("select",{value:n.currency,onChange:D=>x("currency",D.target.value),className:"role-select",disabled:i,children:b.map(D=>o.jsx("option",{value:D.value,children:D.label},D.value))}),t.currency&&o.jsx("span",{className:"error-message",children:t.currency})]})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(_u,{className:"section-icon"}),"Date Information"]}),o.jsxs("div",{className:"form-row",children:[o.jsx(le,{label:"Effective Date",type:"date",value:n.effectiveDate,onChange:D=>x("effectiveDate",D),error:t.effectiveDate,required:!0,disabled:i}),o.jsx(le,{label:"End Date (Optional)",type:"date",value:n.endDate||"",onChange:D=>x("endDate",D),disabled:i})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"form-section-title",children:[o.jsx(il,{className:"section-icon"}),"Additional Information"]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Notes"}),o.jsx("textarea",{value:n.notes||"",onChange:D=>x("notes",D.target.value),placeholder:"Enter any additional notes about this pricing...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"form-label",children:[o.jsx("input",{type:"checkbox",checked:n.isActive,onChange:D=>x("isActive",D.target.checked),disabled:i}),o.jsx("span",{style:{marginLeft:"8px"},children:"Pricing is active"})]})})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx(ft,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Pricing...":"Save Pricing"}),o.jsx(ft,{type:"button",variant:"secondary",onClick:q,disabled:i,children:"Cancel"})]})]})]})]})},Z0="projectProgress",pM=(n,e,t)=>{if(t>=100)return"completed";const r=new Date;r.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=new Date(e);c.setHours(0,0,0,0);const d=c.getTime()-r.getTime();if(Math.ceil(d/(1e3*60*60*24))<0)return"delayed";const y=(c.getTime()-i.getTime())/(1e3*60*60*24),p=(r.getTime()-i.getTime())/(1e3*60*60*24);if(y<=0)return t>=100?"completed":"delayed";const v=Math.max(0,Math.min(100,p/y*100));return t<v-15?"at-risk":"on-track"},gM=n=>{const e=new Date,r=new Date(n).getTime()-e.getTime(),i=Math.ceil(r/(1e3*60*60*24));return i<0||i<=7?"high":i<=30?"medium":"low"},Bs={async getProjectProgress(n){try{const e=Oe(oe,Z0,n),t=await En(e);return t.exists()?t.data().progress||0:null}catch(e){return console.error("Error getting project progress:",e),null}},async saveProjectProgress(n,e,t=new Date().toISOString().split("T")[0]){try{const r=Oe(oe,Z0,n);await Vi(r,{progress:e,lastUpdate:t,updatedAt:new Date},{merge:!0})}catch(r){throw console.error("Error saving project progress:",r),r}},async getAllProjectAlerts(){try{const n=await Tn.getAllClients(),e=await $t.getAllContractServices(),t=[];for(const r of n){if(!r.projectNumber||!r.projectDeadline)continue;const i=r.id||r.projectNumber,c=await this.getProjectProgress(i),d=e.filter(D=>D.clientId===r.id&&D.projectNumber===r.projectNumber);let m="Infrastructure",y=`Project ${r.projectNumber}`,p=`Project ${r.projectNumber}`;if(d.length>0){const D=d[0];m=D.serviceType||"Infrastructure",y=D.serviceName||y,p=D.description||p}const v=r.projectContractDate||d[0]?.startDate||new Date().toISOString().split("T")[0],E=r.projectDeadline||d[0]?.endDate||r.projectFinalDate||new Date().toISOString().split("T")[0],b=c!==null?c:0,x=pM(v,E,b),R=gM(E),A="N/A",q=r.updatedAt?r.updatedAt.toISOString().split("T")[0]:new Date().toISOString().split("T")[0];t.push({id:i,projectId:i,projectName:y,clientName:r.name,clientId:r.id||"",projectType:m,startDate:v,plannedEndDate:E,actualProgress:b,status:x,priority:R,description:p,responsiblePerson:A,lastUpdate:q})}return t}catch(n){throw console.error("Error fetching project alerts:",n),n}},async updateProjectProgress(n,e){try{const t=new Date().toISOString().split("T")[0];await this.saveProjectProgress(n,e,t)}catch(t){throw console.error("Error updating project progress:",t),t}},async markProjectAsCompleted(n){try{await this.saveProjectProgress(n,100)}catch(e){throw console.error("Error marking project as completed:",e),e}}},yM=()=>{const n=Bn(),[e,t]=P.useState([]),[r,i]=P.useState([]),[c,d]=P.useState(!0),[m,y]=P.useState(""),[p,v]=P.useState("all"),[E,b]=P.useState("all"),[x,R]=P.useState(null),[A,q]=P.useState(!1),[D,z]=P.useState(!1),[F,de]=P.useState(0);P.useEffect(()=>{(async()=>{try{d(!0);const me=await Bs.getAllProjectAlerts();t(me),i(me)}catch(me){console.error("Error fetching project alerts:",me)}finally{d(!1)}})()},[]),P.useEffect(()=>{let ee=e;m&&(ee=ee.filter(me=>me.projectName.toLowerCase().includes(m.toLowerCase())||me.clientName.toLowerCase().includes(m.toLowerCase())||me.description.toLowerCase().includes(m.toLowerCase()))),p!=="all"&&(ee=ee.filter(me=>me.status===p)),E!=="all"&&(ee=ee.filter(me=>me.priority===E)),i(ee)},[e,m,p,E]);const $=ee=>{switch(ee){case"completed":return o.jsx(qn,{className:"status-icon completed"});case"delayed":return o.jsx(Cn,{className:"status-icon delayed"});case"at-risk":return o.jsx(yu,{className:"status-icon at-risk"});case"on-track":return o.jsx(qn,{className:"status-icon on-track"});default:return o.jsx(Cn,{className:"status-icon pending"})}},he=ee=>{switch(ee){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},M=ee=>{switch(ee){case"completed":return"#10b981";case"on-track":return"#3b82f6";case"at-risk":return"#f59e0b";case"delayed":return"#ef4444";default:return"#6b7280"}},j=ee=>{const me=new Date,fe=new Date(ee).getTime()-me.getTime();return Math.ceil(fe/(1e3*60*60*24))},O=ee=>{const me=e.find(Y=>Y.id===ee);me&&(R(me),q(!0))},L=ee=>{const me=e.find(Y=>Y.id===ee);me&&(R(me),z(!0),de(me.actualProgress),q(!0))},N=()=>{R(null),z(!1),q(!1)},C=async()=>{if(x)try{await Bs.updateProjectProgress(x.projectId,F);const ee=await Bs.getAllProjectAlerts();t(ee);const me=ee.find(Y=>Y.id===x.id);me&&R(me),z(!1)}catch(ee){console.error("Error saving progress:",ee)}},T=async()=>{if(x)try{await Bs.markProjectAsCompleted(x.projectId);const ee=await Bs.getAllProjectAlerts();t(ee),i(ee),N()}catch(ee){console.error("Error marking project as completed:",ee)}};return o.jsxs("div",{className:"project-alert",children:[o.jsxs("div",{className:"alert-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Project Completion Alerts"}),o.jsx("p",{children:"Monitor and manage project completion schedules"})]}),o.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),o.jsxs("div",{className:"filters-section",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(vu,{className:"search-icon"}),o.jsx("input",{type:"text",placeholder:"Search by project name, client, or description",value:m,onChange:ee=>y(ee.target.value)})]}),o.jsxs("div",{className:"filters-group",children:[o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Status:"}),o.jsxs("select",{value:p,onChange:ee=>v(ee.target.value),children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"on-track",children:"On Track"}),o.jsx("option",{value:"at-risk",children:"At Risk"}),o.jsx("option",{value:"delayed",children:"Delayed"}),o.jsx("option",{value:"completed",children:"Completed"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Priority:"}),o.jsxs("select",{value:E,onChange:ee=>b(ee.target.value),children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"})]})]})]})]}),o.jsx("div",{className:"alerts-grid",children:c?o.jsx("div",{className:"loading",children:"Loading project alerts..."}):r.length===0?o.jsxs("div",{className:"no-alerts",children:[o.jsx(Cn,{}),o.jsx("h3",{children:"No alerts found"}),o.jsx("p",{children:"No project alerts match your current filters."})]}):r.map(ee=>{const me=j(ee.plannedEndDate),Y=me<0,fe=me<=7&&me>=0;return o.jsxs("div",{className:"alert-card",children:[o.jsxs("div",{className:"alert-header-card",children:[o.jsxs("div",{className:"project-info",children:[o.jsx("h3",{children:ee.projectName}),o.jsx("p",{className:"client-name",children:ee.clientName})]}),o.jsxs("div",{className:"status-badge",style:{backgroundColor:M(ee.status)},children:[$(ee.status),o.jsx("span",{children:ee.status.replace("-"," ").toUpperCase()})]})]}),o.jsxs("div",{className:"alert-details",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Type:"}),o.jsx("span",{className:"value",children:ee.projectType})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Progress:"}),o.jsxs("span",{className:"value",children:[ee.actualProgress,"%"]})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"End Date:"}),o.jsx("span",{className:"value",children:ee.plannedEndDate})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Responsible:"}),o.jsx("span",{className:"value",children:ee.responsiblePerson})]})]}),o.jsxs("div",{className:"alert-footer",children:[o.jsxs("div",{className:"priority-indicator",children:[o.jsx("div",{className:"priority-dot",style:{backgroundColor:he(ee.priority)}}),o.jsx("span",{children:ee.priority.toUpperCase()})]}),o.jsx("div",{className:"days-remaining",children:Y?o.jsxs("span",{className:"overdue",children:["Overdue by ",Math.abs(me)," days"]}):fe?o.jsxs("span",{className:"urgent",children:[me," days remaining"]}):o.jsxs("span",{className:"normal",children:[me," days remaining"]})})]}),o.jsxs("div",{className:"alert-actions",children:[o.jsx("button",{className:"action-btn secondary",onClick:()=>O(ee.id),children:"View Details"}),o.jsx("button",{className:"action-btn primary",onClick:()=>L(ee.id),children:"Update Progress"})]})]},ee.id)})}),A&&x&&o.jsx("div",{className:"modal-overlay",onClick:N,children:o.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"Project Details"}),o.jsx("button",{className:"close-button",onClick:N,children:"X"})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"project-info-section",children:[o.jsx("h3",{children:x.projectName}),o.jsxs("p",{className:"client-info",children:["Client: ",x.clientName]}),o.jsxs("div",{className:"status-priority-row",children:[o.jsxs("div",{className:"status-badge",style:{backgroundColor:M(x.status)},children:[$(x.status),o.jsx("span",{children:x.status.replace("-"," ").toUpperCase()})]}),o.jsx("div",{className:"priority-badge",style:{backgroundColor:he(x.priority)},children:x.priority.toUpperCase()})]})]}),o.jsxs("div",{className:"project-details-grid",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Project Type:"}),o.jsx("span",{children:x.projectType})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Responsible Person:"}),o.jsx("span",{children:x.responsiblePerson})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Start Date:"}),o.jsx("span",{children:x.startDate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Planned End Date:"}),o.jsx("span",{children:x.plannedEndDate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Last Update:"}),o.jsx("span",{children:x.lastUpdate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Days Remaining:"}),o.jsx("span",{className:j(x.plannedEndDate)<0?"overdue":j(x.plannedEndDate)<=7?"urgent":"normal",children:j(x.plannedEndDate)<0?`Overdue by ${Math.abs(j(x.plannedEndDate))} days`:`${j(x.plannedEndDate)} days remaining`})]})]}),o.jsxs("div",{className:"progress-section",children:[o.jsxs("div",{className:"progress-header",children:[o.jsx("label",{children:"Progress:"}),D?o.jsxs("div",{className:"progress-edit",children:[o.jsx("input",{type:"number",min:"0",max:"100",value:F,onChange:ee=>de(Number(ee.target.value)),className:"progress-input"}),o.jsx("button",{className:"save-button",onClick:C,children:"Save"}),o.jsx("button",{className:"cancel-button",onClick:()=>z(!1),children:"Cancel"})]}):o.jsx("button",{className:"edit-button",onClick:()=>z(!0),children:"Edit"})]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${x.actualProgress}%`}})}),o.jsxs("span",{className:"progress-text",children:[x.actualProgress,"%"]})]}),o.jsxs("div",{className:"description-section",children:[o.jsx("label",{children:"Description:"}),o.jsx("p",{children:x.description})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"action-button secondary",onClick:N,children:"Close"}),x.status!=="completed"&&o.jsx("button",{className:"action-button primary",onClick:T,children:"Mark as Completed"})]})]})})]})},vg="clientPayments",J0=(n,e)=>{if(n.projectDeadline)return n.projectDeadline;if(n.projectFinalDate)return n.projectFinalDate;if(e?.endDate)return e.endDate;{const t=new Date;return t.setDate(t.getDate()+30),t.toISOString().split("T")[0]}},ex=(n,e,t)=>{const r=new Date().getFullYear(),i=n.projectNumber||n.id?.substring(0,6)||"0000",c=e?.contractNumber?.substring(0,4)||t?.toString().padStart(3,"0")||"001";return`INV-${r}-${i}-${c}`},tx=(n,e=!1,t=!1)=>{if(t)return"cancelled";if(e)return"paid";const r=new Date;r.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=r.getTime()-i.getTime();return Math.ceil(c/(1e3*60*60*24))>0?"overdue":"pending"},nx=(n,e,t)=>{if(e==="paid"||e==="cancelled")return"low";if(e==="overdue")return"high";const r=new Date;r.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=i.getTime()-r.getTime(),d=Math.ceil(c/(1e3*60*60*24));return d<=7||t>=5e3?"high":d<=30||t>=2e3?"medium":"low"},sx=async n=>{try{const e=Oe(oe,vg,n),t=await En(e);if(t.exists()){const r=t.data();return{isPaid:r.isPaid===!0,isCancelled:r.isCancelled===!0,lastReminder:r.lastReminder,reminderCount:r.reminderCount||0}}return{isPaid:!1,isCancelled:!1,reminderCount:0}}catch(e){return console.error("Error checking payment status:",e),{isPaid:!1,isCancelled:!1,reminderCount:0}}},zs={async markPaymentAsPaid(n){try{const e=Oe(oe,vg,n);await Vi(e,{isPaid:!0,paidDate:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error marking payment as paid:",e),e}},async sendReminder(n){try{const e=Oe(oe,vg,n),t=await En(e),i=(t.exists()?t.data():{}).reminderCount||0;await Vi(e,{reminderCount:i+1,lastReminder:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error sending reminder:",e),e}},async getAllClientPaymentAlerts(){try{const n=await Tn.getAllClients(),e=await $t.getAllContractServices(),t=new Map;e.forEach(i=>{if(i.clientId){const c=t.get(i.clientId)||[];c.push(i),t.set(i.clientId,c)}});const r=[];for(const i of n){if(!i.id)continue;const c=t.get(i.id)||[];if(c.length===0&&i.projectNumber){const d=J0(i),m=ex(i),y=`client_${i.id}_project`,p=await sx(y),v=0,E=tx(d,p.isPaid,p.isCancelled);if(d&&(i.projectNumber||i.projectDeadline)){const b=nx(d,E,v);r.push({id:y,clientName:i.name,clientId:i.id,invoiceNumber:m,amount:v,dueDate:d,status:E,priority:b,paymentMethod:"transfer",description:`Payment for project ${i.projectNumber||i.id}`,lastReminder:p.lastReminder||i.updatedAt.toISOString().split("T")[0],reminderCount:p.reminderCount||0})}}else for(let d=0;d<c.length;d++){const m=c[d];if(m.status==="cancelled")continue;const y=J0(i,m),p=ex(i,m,d),v=`client_${i.id}_service_${m.id||d}`,E=m.budget.actualCost||m.budget.estimatedCost||0,b=await sx(v),x=tx(y,b.isPaid,b.isCancelled),R=nx(y,x,E);r.push({id:v,clientName:i.name,clientId:i.id,invoiceNumber:p,amount:E,dueDate:y,status:x,priority:R,paymentMethod:"transfer",description:m.description||`Payment for ${m.serviceName}`,lastReminder:b.lastReminder||m.updatedAt.toISOString().split("T")[0],reminderCount:b.reminderCount||0,contractServiceId:m.id})}}return r}catch(n){throw console.error("Error fetching client payment alerts:",n),n}},async getPaymentAlertsByClient(n){return(await this.getAllClientPaymentAlerts()).filter(t=>t.clientId===n)}},vM=()=>{const n=Bn(),[e,t]=P.useState([]),[r,i]=P.useState([]),[c,d]=P.useState(!0),[m,y]=P.useState(null),[p,v]=P.useState(!1),[E,b]=P.useState(""),[x,R]=P.useState("all"),[A,q]=P.useState("all"),[D,z]=P.useState("all");P.useEffect(()=>{(async()=>{try{d(!0);const T=await zs.getAllClientPaymentAlerts();t(T),i(T)}catch(T){console.error("Error fetching client payment alerts:",T)}finally{d(!1)}})()},[]),P.useEffect(()=>{let C=e;E&&(C=C.filter(T=>T.clientName.toLowerCase().includes(E.toLowerCase())||T.clientId.toLowerCase().includes(E.toLowerCase())||T.invoiceNumber.toLowerCase().includes(E.toLowerCase()))),x!=="all"&&(C=C.filter(T=>T.status===x)),A!=="all"&&(C=C.filter(T=>T.priority===A)),D!=="all"&&(C=C.filter(T=>T.paymentMethod===D)),i(C)},[e,E,x,A,D]);const F=C=>{switch(C){case"paid":return o.jsx(qn,{className:"status-icon"});case"overdue":return o.jsx(al,{className:"status-icon"});case"pending":return o.jsx(Cn,{className:"status-icon"});case"cancelled":return o.jsx(al,{className:"status-icon"});default:return o.jsx(Cn,{className:"status-icon"})}},de=C=>{switch(C){case"high":return"#dc2626";case"medium":return"#f59e0b";case"low":return"#059669";default:return"#6b7280"}},$=C=>{switch(C){case"paid":return"#059669";case"overdue":return"#dc2626";case"pending":return"#f59e0b";case"cancelled":return"#6b7280";default:return"#6b7280"}},he=C=>{const T=new Date,ee=new Date(C),me=T.getTime()-ee.getTime();return Math.ceil(me/(1e3*60*60*24))},M=C=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(C),j=async C=>{try{await zs.markPaymentAsPaid(C);const T=await zs.getAllClientPaymentAlerts();t(T),i(T)}catch(T){console.error("Error marking payment as paid:",T)}},O=async C=>{try{await zs.sendReminder(C);const T=await zs.getAllClientPaymentAlerts();t(T),i(T)}catch(T){console.error("Error sending reminder:",T)}},L=C=>{const T=e.find(ee=>ee.id===C);T&&(y(T),v(!0))},N=()=>{y(null),v(!1)};return c?o.jsx("div",{className:"client-payment-alert",children:o.jsx("div",{className:"loading",children:"Loading payments alerts..."})}):o.jsxs("div",{className:"client-payment-alert",children:[o.jsxs("div",{className:"alert-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Client Payment Alerts"}),o.jsx("p",{children:"Monitor and manage client payment schedules"})]}),o.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),o.jsxs("div",{className:"filters-section",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(vu,{className:"search-icon"}),o.jsx("input",{type:"text",placeholder:"Search by client name, invoice number or clientID",value:E,onChange:C=>b(C.target.value)})]}),o.jsxs("div",{className:"filters-group",children:[o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Status:"}),o.jsxs("select",{value:x,onChange:C=>R(C.target.value),children:[o.jsx("option",{value:"all",children:"All status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"overdue",children:"Overdue"}),o.jsx("option",{value:"paid",children:"Paid"}),o.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Priority:"}),o.jsxs("select",{value:A,onChange:C=>q(C.target.value),children:[o.jsx("option",{value:"all",children:"All priorities"}),o.jsx("option",{value:"low",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"high",children:"Low"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Payment Method:"}),o.jsxs("select",{value:D,onChange:C=>z(C.target.value),children:[o.jsx("option",{value:"all",children:"All methods"}),o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"transfer",children:"Transfer"}),o.jsx("option",{value:"check",children:"Check"}),o.jsx("option",{value:"pix",children:"Pix"})]})]})]})]}),o.jsx("div",{className:"alerts-container",children:r.length===0?o.jsxs("div",{className:"no-alerts",children:[o.jsx(Cn,{}),o.jsx("h3",{children:"No alerts found"}),o.jsx("p",{children:"No payment alerts match your current filters."})]}):o.jsx("div",{className:"alerts-grid",children:r.map(C=>{const T=he(C.dueDate),ee=T>0;return o.jsxs("div",{className:"alert-card",children:[o.jsxs("div",{className:"alert-header-card",children:[o.jsxs("div",{className:"client-info",children:[o.jsx("h3",{children:C.clientName}),o.jsx("p",{className:"invoice-number",children:C.invoiceNumber})]}),o.jsxs("div",{className:"status-badge",style:{backgroundColor:$(C.status)},children:[F(C.status),o.jsx("span",{children:C.status.toUpperCase()})]})]}),o.jsxs("div",{className:"alert-details",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Amount:"}),o.jsx("span",{className:"value amount",children:M(C.amount)})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Due Date:"}),o.jsx("span",{className:"value",children:C.dueDate})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Payment Method:"}),o.jsx("span",{className:"value",children:C.paymentMethod.toUpperCase()})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Client ID:"}),o.jsx("span",{className:"value",children:C.clientId})]})]}),o.jsxs("div",{className:"alert-footer",children:[o.jsxs("div",{className:"priority-indicator",children:[o.jsx("div",{className:"priority-dot",style:{backgroundColor:de(C.priority)}}),o.jsx("span",{children:C.priority.toUpperCase()})]}),o.jsx("div",{className:"overdue-info",children:ee?o.jsxs("span",{className:"overdue",children:[T," days overdue"]}):o.jsxs("span",{className:"normal",children:["Due in ",Math.abs(T)," days"]})})]}),o.jsxs("div",{className:"alert-actions",children:[o.jsx("button",{className:"action-btn secondary",onClick:()=>L(C.id),children:"View Details"}),C.status!=="paid"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"action-btn warning",onClick:()=>O(C.id),children:["Send Reminder (",C.reminderCount,")"]}),o.jsx("button",{className:"action-btn primary",onClick:()=>j(C.id),children:"Mark as Paid"})]})]})]},C.id)})})}),p&&m&&o.jsx("div",{className:"modal-overlay",onClick:N,children:o.jsxs("div",{className:"modal-content",onClick:C=>C.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"Payment Details"}),o.jsx("button",{className:"close-button",onClick:N,children:"X"})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"client-info-section",children:[o.jsx("h3",{children:m.clientName}),o.jsxs("p",{className:"invoice-info",children:["Invoice: ",m.invoiceNumber]}),o.jsxs("div",{className:"status-priority-row",children:[o.jsxs("div",{className:"status-badge",style:{backgroundColor:$(m.status)},children:[F(m.status),o.jsx("span",{children:m.status.toUpperCase()})]}),o.jsx("div",{className:"priority-badge",style:{backgroundColor:de(m.priority)},children:m.priority.toUpperCase()})]})]}),o.jsxs("div",{className:"payment-details-grid",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Amount:"}),o.jsx("span",{className:"amount-large",children:M(m.amount)})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Due Date:"}),o.jsx("span",{children:m.dueDate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Payment Method:"}),o.jsx("span",{children:m.paymentMethod.toUpperCase()})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Client ID:"}),o.jsx("span",{children:m.clientId})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Days Overdue:"}),o.jsx("span",{className:he(m.dueDate)>0?"overdue":"normal",children:he(m.dueDate)>0?`${he(m.dueDate)} days`:`Due in ${Math.abs(he(m.dueDate))} days`})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Reminder Count:"}),o.jsx("span",{children:m.reminderCount||0})]}),m.lastReminder&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Last Reminder:"}),o.jsx("span",{children:m.lastReminder})]}),m.contractServiceId&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Contract Service ID:"}),o.jsx("span",{children:m.contractServiceId})]})]}),m.description&&o.jsxs("div",{className:"description-section",children:[o.jsx("label",{children:"Description:"}),o.jsx("p",{children:m.description})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"action-button secondary",onClick:N,children:"Close"}),o.jsx("button",{className:"action-button secondary",onClick:()=>n("/admin/cadastro-clientes"),children:"View Client"}),m.status!=="paid"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"action-button warning",onClick:()=>{O(m.id)},children:"Send Reminder"}),o.jsx("button",{className:"action-button primary",onClick:()=>{j(m.id),N()},children:"Mark as Paid"})]})]})]})})]})},gA="subcontractorPayments",_M=(n,e)=>{const t=new Date(n),r=parseInt(e);return t.setDate(t.getDate()+r),t.toISOString().split("T")[0]},bM=(n,e=!1)=>{if(e)return"paid";const t=new Date;t.setHours(0,0,0,0);const r=new Date(n);r.setHours(0,0,0,0);const i=r.getTime()-t.getTime(),c=Math.ceil(i/(1e3*60*60*24));return c<0?"overdue":c===0?"due-today":"pending"},EM=(n,e)=>{if(e==="paid")return"low";if(e==="overdue"||e==="due-today")return"high";const t=new Date;t.setHours(0,0,0,0);const r=new Date(n);r.setHours(0,0,0,0);const i=r.getTime()-t.getTime(),c=Math.ceil(i/(1e3*60*60*24));return c<=3?"high":c<=7?"medium":"low"},xM=async n=>{try{const e=Oe(oe,gA,n),t=await En(e);return t.exists()?t.data().isPaid===!0:!1}catch(e){return console.error("Error checking payment status:",e),!1}},wa={async markPaymentAsPaid(n){try{const e=Oe(oe,gA,n);await Vi(e,{isPaid:!0,paidDate:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error marking payment as paid:",e),e}},async getAllSubcontractorPaymentAlerts(){try{const n=await $t.getAllContractServices(),e=await ff.getAllSubcontractors(),t=new Map;e.forEach(c=>{c.id&&t.set(c.id,c)});const r=[],i=n.filter(c=>c.subcontractorId&&c.status!=="cancelled");for(const c of i){if(!c.subcontractorId)continue;const d=t.get(c.subcontractorId);if(!d)continue;const m=`${c.id}_${c.subcontractorId}`,y=await xM(m),p=_M(c.endDate,d.paymentTerms),v=c.budget.actualCost||c.budget.estimatedCost||0,E=bM(p,y),b=EM(p,E),x=c.updatedAt?c.updatedAt.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],R=c.endDate||x;r.push({id:m,subcontractorId:c.subcontractorId,subcontractor:d,contractServiceId:c.id||"",lastServiceDate:R,nextPaymentDate:p,amountDue:v,currency:c.budget.currency,status:E,priority:b,description:c.description,responsiblePerson:"N/A",lastUpdate:x,serviceDescription:c.description,projectReference:c.projectNumber})}return r}catch(n){throw console.error("Error fetching subcontractor payment alerts:",n),n}},async getPaymentAlertsBySubcontractor(n){return(await this.getAllSubcontractorPaymentAlerts()).filter(t=>t.subcontractorId===n)}},SM=()=>{const n=Bn(),[e,t]=P.useState([]),[r,i]=P.useState([]),[c,d]=P.useState(!0),[m,y]=P.useState(""),[p,v]=P.useState("all"),[E,b]=P.useState("all"),[x,R]=P.useState("all"),[A,q]=P.useState(null),[D,z]=P.useState(!1);P.useEffect(()=>{(async()=>{try{d(!0);const C=await wa.getAllSubcontractorPaymentAlerts();t(C),i(C)}catch(C){console.error("Error fetching subcontractor payment alerts:",C)}finally{d(!1)}})()},[]),P.useEffect(()=>{let N=e;m&&(N=N.filter(C=>C.subcontractor.companyName.toLowerCase().includes(m.toLowerCase())||C.subcontractor.contactPerson.toLowerCase().includes(m.toLowerCase())||C.description.toLowerCase().includes(m.toLowerCase())||C.projectReference?.toLowerCase().includes(m.toLowerCase()))),p!=="all"&&(N=N.filter(C=>C.status===p)),E!=="all"&&(N=N.filter(C=>C.priority===E)),x!=="all"&&(N=N.filter(C=>C.subcontractor.paymentTerms===x)),i(N)},[e,m,p,E,x]);const F=N=>{switch(N){case"paid":return o.jsx(qn,{className:"status-icon paid"});case"overdue":return o.jsx(al,{className:"status-icon overdue"});case"due-today":return o.jsx(Cn,{className:"status-icon due-today"});case"pending":return o.jsx(yu,{className:"status-icon pending"});default:return o.jsx(Cn,{className:"status-icon pending"})}},de=N=>{switch(N){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},$=N=>{switch(N){case"paid":return"#10b981";case"due-today":return"#f59e0b";case"overdue":return"#ef4444";case"pending":return"#3b82f6";default:return"#6b7280"}},he=N=>{const C=new Date,ee=new Date(N).getTime()-C.getTime();return Math.ceil(ee/(1e3*60*60*24))},M=(N,C)=>new Intl.NumberFormat("en-US",{style:"currency",currency:C}).format(N),j=N=>{const C=e.find(T=>T.id===N);C&&(q(C),z(!0))},O=async N=>{try{await wa.markPaymentAsPaid(N);const C=await wa.getAllSubcontractorPaymentAlerts();if(t(C),i(C),A&&A.id===N){const T=C.find(ee=>ee.id===N);T&&q(T)}}catch(C){console.error("Error marking payment as paid:",C)}},L=()=>{q(null),z(!1)};return c?o.jsx("div",{className:"subcontractor-payment-alert",children:o.jsx("div",{className:"loading",children:"Loading subcontractor alerts..."})}):o.jsxs("div",{className:"subcontractor-payment-alert",children:[o.jsxs("div",{className:"alert-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Subcontractor Payment Alerts"}),o.jsx("p",{children:"Monitor and manage subcontractor payment schedules"})]}),o.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),o.jsxs("div",{className:"alert-filters",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(vu,{className:"search-icon"}),o.jsx("input",{type:"text",placeholder:"Search by company, contact, description, or project reference...",value:m,onChange:N=>y(N.target.value)})]}),o.jsxs("div",{className:"filter-group",children:[o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Status:"}),o.jsxs("select",{value:p,onChange:N=>v(N.target.value),children:[o.jsx("option",{value:"all",children:"All status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"overdue",children:"Due Today"}),o.jsx("option",{value:"due-today",children:"Overdue"}),o.jsx("option",{value:"paid",children:"Paid"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Priority:"}),o.jsxs("select",{value:E,onChange:N=>b(N.target.value),children:[o.jsx("option",{value:"all",children:"All priorities"}),o.jsx("option",{value:"low",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"high",children:"Low"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Payment Terms:"}),o.jsxs("select",{value:x,onChange:N=>R(N.target.value),children:[o.jsx("option",{value:"all",children:"All terms"}),o.jsx("option",{value:"7",children:"7 days"}),o.jsx("option",{value:"15",children:"15 days"}),o.jsx("option",{value:"30",children:"30 days"})]})]})]})]}),o.jsxs("div",{className:"alerts-grid",children:[r.length===0?o.jsxs("div",{className:"no-alerts",children:[o.jsx(Ma,{}),o.jsx("h3",{children:"No alerts found"}),o.jsx("p",{children:"No subcontractor payment alerts match your current filters."})]}):r.map(N=>{const C=he(N.nextPaymentDate),T=C<0,ee=C===0,me=C<=7&&C>=0;return o.jsxs("div",{className:"alert-card",children:[o.jsxs("div",{className:"alert-card-header",children:[o.jsxs("div",{className:"subcontractor-info",children:[o.jsx("h3",{children:N.subcontractor.companyName}),o.jsx("p",{className:"contact-person",children:N.subcontractor.contactPerson})]}),o.jsxs("div",{className:"status-badge",style:{backgroundColor:$(N.status)},children:[F(N.status),o.jsx("span",{children:N.status.replace("-"," ").toUpperCase()})]})]}),o.jsxs("div",{className:"alert-card-content",children:[o.jsxs("div",{className:"payment-info",children:[o.jsxs("div",{className:"amount-due",children:[o.jsx($i,{className:"amount-icon"}),o.jsx("span",{className:"amount",children:M(N.amountDue,N.currency)})]}),o.jsxs("div",{className:"payment-date",children:[o.jsx(Jc,{className:"date-icon"}),o.jsx("span",{className:"date-label",children:"Due:"}),o.jsx("span",{className:"date-value",children:N.nextPaymentDate})]})]}),o.jsxs("div",{className:"alert-details",children:[o.jsx("p",{className:"description",children:N.description}),N.projectReference&&o.jsxs("p",{className:"project-ref",children:["Project: ",N.projectReference]})]}),o.jsxs("div",{className:"subcontractor-details",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Payment Terms:"}),o.jsxs("span",{className:"value",children:[N.subcontractor.paymentTerms," days"]})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Hourly Rate:"}),o.jsxs("span",{className:"value",children:[M(N.subcontractor.hourlyRate||0,N.currency),"/hr"]})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Services:"}),o.jsx("span",{className:"value",children:N.subcontractor.services.join(", ")})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Responsible:"}),o.jsx("span",{className:"value",children:N.responsiblePerson})]})]})]}),o.jsxs("div",{className:"alert-card-footer",children:[o.jsxs("div",{className:"priority-indicator",children:[o.jsx("div",{className:"priority-dot",style:{backgroundColor:de(N.priority)}}),o.jsx("span",{children:N.priority.toUpperCase()})]}),o.jsx("div",{className:"days-remaining",children:T?o.jsxs("span",{className:"overdue",children:["Overdue by ",Math.abs(C)," days"]}):ee?o.jsx("span",{className:"due-today",children:"Due today"}):me?o.jsxs("span",{className:"urgent",children:[C," days remaining"]}):o.jsxs("span",{className:"normal",children:[C," days remaining"]})})]}),o.jsxs("div",{className:"alert-actions",children:[o.jsx("button",{className:"action-btn secondary",onClick:()=>j(N.id),children:"View Details"}),N.status!=="paid"&&o.jsx("button",{className:"action-btn primary",onClick:()=>O(N.id),children:"Mark as Paid"})]})]},N.id)}),D&&A&&o.jsx("div",{className:"modal-overlay",onClick:L,children:o.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"Payment Details"}),o.jsx("button",{className:"close-button",onClick:L,children:"X"})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"subcontractor-info-section",children:[o.jsx("h3",{children:A.subcontractor.companyName}),o.jsxs("p",{className:"contact-info",children:["Contact: ",A.subcontractor.contactPerson]}),o.jsxs("div",{className:"status-priority-row",children:[o.jsxs("div",{className:"status-badge",style:{backgroundColor:$(A.status)},children:[F(A.status),o.jsx("span",{children:A.status.replace("-"," ").toUpperCase()})]}),o.jsx("div",{className:"priority-badge",style:{backgroundColor:de(A.priority)},children:A.priority.toUpperCase()})]})]}),o.jsxs("div",{className:"payment-details-grid",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Amount Due:"}),o.jsx("span",{className:"amount-large",children:M(A.amountDue,A.currency)})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Due Date:"}),o.jsx("span",{children:A.nextPaymentDate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Last Service Date:"}),o.jsx("span",{children:A.lastServiceDate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Payment Terms:"}),o.jsxs("span",{children:[A.subcontractor.paymentTerms," days"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Hourly Rate:"}),o.jsxs("span",{children:[M(A.subcontractor.hourlyRate||0,A.currency),"/hr"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Responsible Person:"}),o.jsx("span",{children:A.responsiblePerson})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Services:"}),o.jsx("span",{children:A.subcontractor.services.join(", ")})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Contact Info:"}),o.jsxs("span",{children:[A.subcontractor.phone," "," ",A.subcontractor.email]})]}),A.projectReference&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Project Reference:"}),o.jsx("span",{children:A.projectReference})]})]}),o.jsxs("div",{className:"description-section",children:[o.jsx("label",{children:"Service Description:"}),o.jsx("p",{children:A.serviceDescription||A.description})]}),A.subcontractor.notes&&o.jsxs("div",{className:"notes-section",children:[o.jsx("label",{children:"Notes:"}),o.jsx("p",{children:A.subcontractor.notes})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"action-button secondary",onClick:L,children:"Close"}),o.jsx("button",{className:"action-button secondary",onClick:()=>n("/admin/cadastro-subcontratados"),children:"View Subcontractor"}),A.status!=="paid"&&o.jsx("button",{className:"action-button primary",onClick:()=>{O(A.id),L()},children:"Mark as Paid"})]})]})})]})]})},yA="contractedServicePayments",wM=(n,e)=>{const t=new Date(n),r=parseInt(e);return t.setDate(t.getDate()+r),t.toISOString().split("T")[0]},AM=(n,e=!1)=>{if(e)return"paid";const t=new Date;t.setHours(0,0,0,0);const r=new Date(n);r.setHours(0,0,0,0);const i=r.getTime()-t.getTime(),c=Math.ceil(i/(1e3*60*60*24));return c<0?"overdue":c===0?"due-today":"pending"},NM=(n,e,t)=>{if(e==="paid")return"low";if(e==="overdue"||e==="due-today")return"high";const r=new Date;r.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=i.getTime()-r.getTime(),d=Math.ceil(c/(1e3*60*60*24));return d<=7||t>=5e3?"high":d<=30||t>=2e3?"medium":"low"},TM=async n=>{try{const e=Oe(oe,yA,n),t=await En(e);return t.exists()?t.data().isPaid===!0:!1}catch(e){return console.error("Error checking payment status:",e),!1}},CM=n=>n>=1e5?"60":n>=5e4?"45":n>=2e4?"30":n>=5e3?"15":"7",tu={async markPaymentAsPaid(n){try{const e=Oe(oe,yA,n);await Vi(e,{isPaid:!0,paidDate:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error marking payment as paid:",e),e}},async getAllContractedServicePaymentAlerts(){try{const n=await $t.getAllContractServices(),e=await Tn.getAllClients(),t=new Map;e.forEach(c=>{c.id&&t.set(c.id,c)});const r=[],i=n.filter(c=>c.status!=="cancelled");for(const c of i){if(!c.id)continue;const d=`contracted_service_${c.id}`,m=await TM(d),y=c.budget.actualCost||c.budget.estimatedCost||0,p=CM(y),v=wM(c.endDate,p),E=AM(v,m),b=NM(v,E,y),x=c.updatedAt?c.updatedAt.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],R=c.endDate||x,q=(c.clientId?t.get(c.clientId):null)?.name||"N/A";r.push({id:d,contractServiceId:c.id,contractService:c,lastServiceDate:R,nextPaymentDate:v,amountDue:y,currency:c.budget.currency,status:E,priority:b,description:c.description||`Payment for ${c.serviceName}`,responsiblePerson:q,lastUpdate:x,serviceDescription:c.description,projectReference:c.projectNumber,paymentTerms:p})}return r}catch(n){throw console.error("Error fetching contracted service payment alerts:",n),n}},async getPaymentAlertsByContractService(n){return(await this.getAllContractedServicePaymentAlerts()).filter(t=>t.contractServiceId===n)}},jM=()=>{const n=Bn(),[e,t]=P.useState([]),[r,i]=P.useState([]),[c,d]=P.useState(!0),[m,y]=P.useState(""),[p,v]=P.useState("all"),[E,b]=P.useState("all"),[x,R]=P.useState("all"),[A,q]=P.useState(null),[D,z]=P.useState(!1);P.useEffect(()=>{(async()=>{try{d(!0);const C=await tu.getAllContractedServicePaymentAlerts();t(C),i(C)}catch(C){console.error("Error fetching contracted service payment alerts:",C),t([]),i([])}finally{d(!1)}})()},[]),P.useEffect(()=>{let N=e;m&&(N=N.filter(C=>C.contractService.serviceName.toLowerCase().includes(m.toLowerCase())||C.contractService.clientName.toLowerCase().includes(m.toLowerCase())||C.description.toLowerCase().includes(m.toLowerCase())||C.projectReference?.toLowerCase().includes(m.toLowerCase())||C.contractService.contractNumber.toLowerCase().includes(m.toLowerCase()))),p!=="all"&&(N=N.filter(C=>C.status===p)),E!=="all"&&(N=N.filter(C=>C.priority===E)),x!=="all"&&(N=N.filter(C=>C.paymentTerms===x)),i(N)},[e,m,p,E,x]);const F=N=>{switch(N){case"paid":return o.jsx(qn,{className:"status-icon paid"});case"overdue":return o.jsx(al,{className:"status-icon overdue"});case"due-today":return o.jsx(Cn,{className:"status-icon due-today"});case"pending":return o.jsx(yu,{className:"status-icon pending"});default:return o.jsx(Cn,{className:"status-icon pending"})}},de=N=>{switch(N){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},$=N=>{switch(N){case"paid":return"#10b981";case"due-today":return"#f59e0b";case"overdue":return"#ef4444";case"pending":return"#3b82f6";default:return"#6b7280"}},he=N=>{const C=new Date,ee=new Date(N).getTime()-C.getTime();return Math.ceil(ee/(1e3*60*60*24))},M=(N,C)=>new Intl.NumberFormat("en-US",{style:"currency",currency:C}).format(N),j=N=>{const C=e.find(T=>T.id===N);C&&(q(C),z(!0))},O=async N=>{try{await tu.markPaymentAsPaid(N),t(C=>C.map(T=>T.id===N?{...T,status:"paid",lastUpdate:new Date().toISOString().split("T")[0]}:T)),i(C=>C.map(T=>T.id===N?{...T,status:"paid",lastUpdate:new Date().toISOString().split("T")[0]}:T)),A&&A.id===N&&q({...A,status:"paid",lastUpdate:new Date().toISOString().split("T")[0]})}catch(C){console.error("Error marking payment as paid:",C)}},L=()=>{q(null),z(!1)};return c?o.jsx("div",{className:"contracted-service-payment-alert",children:o.jsx("div",{className:"loading",children:"Loading contracted service payment alerts..."})}):o.jsxs("div",{className:"contracted-service-payment-alert",children:[o.jsxs("div",{className:"alert-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Contracted Service Payment Alerts"}),o.jsx("p",{children:"Monitor and manage contracted service payment schedules"})]}),o.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),o.jsxs("div",{className:"alert-filters",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(vu,{className:"search-icon"}),o.jsx("input",{type:"text",placeholder:"Search by service name, client, contract number, or project reference",value:m,onChange:N=>y(N.target.value)})]}),o.jsxs("div",{className:"filter-group",children:[o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Status:"}),o.jsxs("select",{value:p,onChange:N=>v(N.target.value),children:[o.jsx("option",{value:"all",children:"All status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"due-today",children:"Due Today"}),o.jsx("option",{value:"overdue",children:"Overdue"}),o.jsx("option",{value:"paid",children:"Paid"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Priority:"}),o.jsxs("select",{value:E,onChange:N=>b(N.target.value),children:[o.jsx("option",{value:"all",children:"All priorities"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"})]})]}),o.jsxs("div",{className:"filter-item",children:[o.jsx("label",{children:"Payment Terms:"}),o.jsxs("select",{value:x,onChange:N=>R(N.target.value),children:[o.jsx("option",{value:"all",children:"All terms"}),o.jsx("option",{value:"7",children:"7 days"}),o.jsx("option",{value:"15",children:"15 days"}),o.jsx("option",{value:"30",children:"30 days"}),o.jsx("option",{value:"45",children:"45 days"}),o.jsx("option",{value:"60",children:"60 days"})]})]})]})]}),o.jsx("div",{className:"alerts-grid",children:r.length===0?o.jsxs("div",{className:"no-alerts",children:[o.jsx(Ma,{}),o.jsx("h3",{children:"No alerts found"}),o.jsx("p",{children:"No contracted service payment alerts match your current filters."})]}):r.map(N=>{const C=he(N.nextPaymentDate),T=C<0,ee=C===0,me=C<=7&&C>=0;return o.jsxs("div",{className:"alert-card",children:[o.jsxs("div",{className:"alert-card-header",children:[o.jsxs("div",{className:"service-info",children:[o.jsx("h3",{children:N.contractService.serviceName}),o.jsx("p",{className:"client-name",children:N.contractService.clientName})]}),o.jsxs("div",{className:"status-badge",style:{backgroundColor:$(N.status)},children:[F(N.status),o.jsx("span",{children:N.status.replace("-"," ").toUpperCase()})]})]}),o.jsxs("div",{className:"alert-card-content",children:[o.jsxs("div",{className:"payment-info",children:[o.jsxs("div",{className:"amount-due",children:[o.jsx($i,{className:"amount-icon"}),o.jsx("span",{className:"amount",children:M(N.amountDue,N.currency)})]}),o.jsxs("div",{className:"payment-date",children:[o.jsx(Jc,{className:"date-icon"}),o.jsx("span",{className:"date-label",children:"Due:"}),o.jsx("span",{className:"date-value",children:N.nextPaymentDate})]})]}),o.jsxs("div",{className:"alert-details",children:[o.jsx("p",{className:"description",children:N.description}),o.jsxs("div",{className:"contract-info",children:[o.jsxs("span",{className:"contract-number",children:["Contract: ",N.contractService.contractNumber]}),N.projectReference&&o.jsxs("span",{className:"project-ref",children:["Project: ",N.projectReference]})]})]}),o.jsxs("div",{className:"service-details",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Service Type:"}),o.jsx("span",{className:"value",children:N.contractService.serviceType})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Payment Terms:"}),o.jsxs("span",{className:"value",children:[N.paymentTerms," days"]})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Location:"}),o.jsxs("span",{className:"value",children:[N.contractService.location.city,","," ",N.contractService.location.state]})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"label",children:"Responsible:"}),o.jsx("span",{className:"value",children:N.responsiblePerson})]})]})]}),o.jsxs("div",{className:"alert-card-footer",children:[o.jsxs("div",{className:"priority-indicator",children:[o.jsx("div",{className:"priority-dot",style:{backgroundColor:de(N.priority)}}),o.jsx("span",{children:N.priority.toUpperCase()})]}),o.jsx("div",{className:"days-remaining",children:T?o.jsxs("span",{className:"overdue",children:["Overdue by ",Math.abs(C)," days"]}):ee?o.jsx("span",{className:"due-today",children:"Due today"}):me?o.jsxs("span",{className:"urgent",children:[C," days remaining"]}):o.jsxs("span",{className:"normal",children:[C," days remaining"]})})]}),o.jsxs("div",{className:"alert-actions",children:[o.jsx("button",{className:"action-btn secondary",onClick:()=>j(N.id),children:"View Details"}),N.status!=="paid"&&o.jsx("button",{className:"action-btn primary",onClick:()=>O(N.id),children:"Mark as Paid"})]})]},N.id)})}),D&&A&&o.jsx("div",{className:"modal-overlay",onClick:L,children:o.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"Payment Details"}),o.jsx("button",{className:"close-button",onClick:L,children:"X"})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"service-info-section",children:[o.jsx("h3",{children:A.contractService.serviceName}),o.jsxs("p",{className:"client-info",children:["Client: ",A.contractService.clientName]}),o.jsxs("div",{className:"status-priority-row",children:[o.jsxs("div",{className:"status-badge",style:{backgroundColor:$(A.status)},children:[F(A.status),o.jsx("span",{children:A.status.replace("-"," ").toUpperCase()})]}),o.jsx("div",{className:"priority-badge",style:{backgroundColor:de(A.priority)},children:A.priority.toUpperCase()})]})]}),o.jsxs("div",{className:"payment-details-grid",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Amount Due:"}),o.jsx("span",{className:"amount-large",children:M(A.amountDue,A.currency)})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Due Date:"}),o.jsx("span",{children:A.nextPaymentDate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Last Service Date:"}),o.jsx("span",{children:A.lastServiceDate})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Payment Terms:"}),o.jsxs("span",{children:[A.paymentTerms," days"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Contract Number:"}),o.jsx("span",{children:A.contractService.contractNumber})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Service Type:"}),o.jsx("span",{children:A.contractService.serviceType})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Location:"}),o.jsxs("span",{children:[A.contractService.location.address,","," ",A.contractService.location.city,","," ",A.contractService.location.state]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Responsible Person:"}),o.jsx("span",{children:A.responsiblePerson})]}),A.projectReference&&o.jsxs("div",{className:"detail-item",children:[o.jsx("label",{children:"Project Reference:"}),o.jsx("span",{children:A.projectReference})]})]}),o.jsxs("div",{className:"budget-section",children:[o.jsx("label",{children:"Budget Information:"}),o.jsxs("div",{className:"budget-details",children:[o.jsxs("div",{className:"budget-item",children:[o.jsx("span",{className:"budget-label",children:"Estimated Cost:"}),o.jsx("span",{className:"budget-value",children:M(A.contractService.budget.estimatedCost,A.currency)})]}),o.jsxs("div",{className:"budget-item",children:[o.jsx("span",{className:"budget-label",children:"Actual Cost:"}),o.jsx("span",{className:"budget-value",children:A.contractService.budget.actualCost?M(A.contractService.budget.actualCost,A.currency):"Not available"})]})]})]}),o.jsxs("div",{className:"description-section",children:[o.jsx("label",{children:"Service Description:"}),o.jsx("p",{children:A.serviceDescription||A.description})]}),A.contractService.notes&&o.jsxs("div",{className:"notes-section",children:[o.jsx("label",{children:"Notes:"}),o.jsx("p",{children:A.contractService.notes})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"action-button secondary",onClick:L,children:"Close"}),o.jsx("button",{className:"action-button secondary",onClick:()=>n("/admin/cadastro-servicos-contratados"),children:"View Contracted Services"}),A.status!=="paid"&&o.jsx("button",{className:"action-button primary",onClick:()=>{O(A.id),L()},children:"Mark as Paid"})]})]})})]})},RM=n=>n?.split(" ").map(e=>e[0]?.toUpperCase()).slice(0,2).join(""),rx=n=>n?n.toLocaleDateString("pt-BR"):"-",DM=async n=>{try{await navigator.clipboard.writeText(n)}catch(e){console.error("Erro ao copiar texto:",e)}};function IM({isOpen:n,onClose:e,user:t}){if(P.useEffect(()=>{if(!n)return;const i=c=>{c.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[n,e]),!n||!t)return null;const r=i=>{i.target===i.currentTarget&&e()};return o.jsx("div",{className:"view-modal-overlay",onClick:r,children:o.jsxs("div",{className:"view-modal",role:"dialog","aria-modal":"true","aria-labelledby":"view-user-title",children:[o.jsxs("div",{className:"view-modal-header",children:[o.jsx("div",{className:"avatar",children:RM(t.displayName)}),o.jsxs("div",{className:"title-wrap",children:[o.jsx("h3",{id:"view-user-title",children:t.displayName||"No name"}),o.jsx("p",{className:"subtitle",title:t.email,children:t.email})]}),o.jsx("span",{className:`role-chip ${t.role}`,children:t.role==="admin"?"Admin":"Partial"}),o.jsx("button",{className:"close-btn",onClick:e,"aria-label":"Close",children:"x"})]}),o.jsx("div",{className:"view-modal-body",children:o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-card",children:[o.jsx("h4",{className:"card-title",children:"Profile"}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:"Name"}),o.jsx("span",{className:"info-value",children:t.displayName||"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:"Email"}),o.jsxs("span",{className:"info-value",title:t.email,children:[t.email,o.jsx("button",{className:"copy-btn",onClick:()=>DM(t.email),children:o.jsx(XO,{})})]})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:"UID"}),o.jsx("span",{className:"info-value",title:t.uid,children:t.uid})]})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("h4",{className:"card-title",children:"Permissions"}),t.role!=="admin"&&(!t.allowedPaths||t.allowedPaths.length===0)&&o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:"Permissions"}),o.jsx("span",{className:"info-value",children:"No permissions"})]}),t.role==="admin"&&o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:"Permissions"}),o.jsx("span",{className:"info-value",children:"Full access"})]}),t.allowedPaths&&t.allowedPaths.length>0&&o.jsx("div",{className:"permissions",children:t.allowedPaths.map(i=>o.jsx("span",{className:"permission-pill",children:i},i))})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("h4",{className:"card-title",children:"Dates"}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:"Created At"}),o.jsx("span",{className:"info-value",children:rx(t.createdAt)})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:"Updated At"}),o.jsx("span",{className:"info-value",children:rx(t.updatedAt)})]})]})]})}),o.jsx("div",{className:"view-modal-footer",children:o.jsx("button",{className:"btn secondary",onClick:e,children:"Fechar"})})]})})}function PM({isOpen:n,onClose:e,user:t,onSave:r}){const i=P.useMemo(()=>({displayName:t?.displayName??"",role:t?.role??"partial",allowedPaths:t?.allowedPaths??[],email:t?.email??""}),[t]),[c,d]=P.useState(i),[m,y]=P.useState(!1),[p,v]=P.useState({});P.useEffect(()=>{d(i),v({})},[i]),P.useEffect(()=>{if(!n)return;const A=q=>{q.key==="Escape"&&e()};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[n,e]);const E=()=>{const A={};return c.displayName.trim()||(A.displayName="Provide the name"),c.email?.trim()||(A.email="Provide the email"),v(A),Object.keys(A).length===0},b=A=>{A.target===A.currentTarget&&e()},x=A=>q=>{d(D=>({...D,[A]:q}))},R=async A=>{if(A.preventDefault(),!!E())try{y(!0),await r({displayName:c.displayName,email:c.email,role:c.role,allowedPaths:c.allowedPaths})}finally{y(!1)}};return!n||!t?null:o.jsx("div",{className:"edit-modal-overlay",onClick:b,children:o.jsxs("div",{className:"edit-modal",role:"dialog","aria-modal":"true","aria-labelledby":"edit-user-title",children:[o.jsxs("div",{className:"edit-modal-header",children:[o.jsx("h3",{id:"edit-user-title",children:"Edit User"}),o.jsx("button",{className:"close-btn",onClick:e,"aria-label":"Close",children:"x"})]}),o.jsxs("form",{className:"edit-modal-body",onSubmit:R,children:[o.jsxs("div",{className:"form-row",children:[o.jsx("label",{htmlFor:"displayName",className:"form-label",children:"Name"}),o.jsxs("div",{className:"form-field",children:[o.jsx("input",{type:"text",id:"displayName",value:c.displayName,onChange:A=>x("displayName")(A.target.value),placeholder:"User name"}),p.displayName&&o.jsx("span",{className:"error-text",children:p.displayName})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),o.jsx("div",{className:"form-field",children:o.jsx("input",{id:"email",type:"email",value:c.email,onChange:A=>x("email")(A.target.value)})})]}),o.jsxs("div",{className:"form-row",children:[o.jsx("label",{htmlFor:"role",className:"form-label",children:"Profile"}),o.jsx("div",{className:"form-field",children:o.jsxs("select",{id:"role",value:c.role,onChange:A=>x("role")(A.target.value),children:[o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"partial",children:"Partial"})]})})]}),o.jsxs("div",{className:"form-row",children:[o.jsx("label",{className:"form-label",children:"Permissions"}),o.jsxs("div",{className:"form-field",children:[o.jsx("textarea",{rows:3,placeholder:"Enter allowed paths (comma-separated)",value:c.allowedPaths.join(", "),onChange:A=>x("allowedPaths")(A.target.value.split(",").map(q=>q.trim()).filter(Boolean))}),o.jsx("span",{className:"hint-text",children:'Let empty for "No permissions". If profile is Admin, will be "Full access".'})]})]}),o.jsxs("div",{className:"edit-modal-footer",children:[o.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:m,children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Saving...":"Save"})]})]})]})})}function kM(){const{showSuccess:n,showError:e}=cA(),[t,r]=P.useState([]),[i,c]=P.useState(!0),[d,m]=P.useState(null),[y,p]=P.useState({isOpen:!1,record:null}),[v,E]=P.useState({isOpen:!1,user:null}),[b,x]=P.useState({isOpen:!1,user:null}),[R,A]=P.useState(""),[q,D]=P.useState("all"),[z,F]=P.useState("name"),[de,$]=P.useState({totalUsers:0,adminUsers:0,partialUsers:0,recentUsers:0}),he=T=>{const ee=new Date,me=new Date(ee.getTime()-10080*60*1e3);$({totalUsers:T.length,adminUsers:T.filter(Y=>Y.role==="admin").length,partialUsers:T.filter(Y=>Y.role==="partial").length,recentUsers:T.filter(Y=>Y.createdAt>me).length})},M=()=>{let T=[...t];return R.trim()&&(T=T.filter(ee=>ee.displayName?.toLowerCase().includes(R.toLowerCase())||ee.email.toLowerCase().includes(R.toLowerCase()))),q!=="all"&&(T=T.filter(ee=>ee.role===q)),T.sort((ee,me)=>{switch(z){case"name":return(ee.displayName||"").localeCompare(me.displayName||"");case"email":return ee.email.localeCompare(me.email);case"createdAt":return me.createdAt.getTime()-ee.createdAt.getTime();default:return 0}}),T};P.useEffect(()=>{(async()=>{try{c(!0),m(null);const ee=await Ri.getAllUsers();r(ee),he(ee)}catch(ee){console.error("Error loading users:",ee),m(ee instanceof Error?ee.message:"Failed to fetch users")}finally{c(!1)}})()},[]);const j=async T=>{p({isOpen:!0,record:T})},O=async()=>{if(y.record)try{await Ri.deleteUser(String(y.record.id)),r(T=>T.filter(ee=>ee.id!==y.record.id)),he(t),n("Excludo!",`${y.record.displayName} removido com sucesso!`)}catch(T){console.error("Error deleting user:",T),e("Falha!",`Falha ao excluir ${y.record.displayName}: ${T instanceof Error?T.message:"Erro desconhecido"}`),m(T instanceof Error?T.message:"Falha ao excluir usurio")}finally{p({isOpen:!1,record:null})}},L=T=>{E({isOpen:!0,user:T})},N=async T=>{if(!b.user)return;const ee=b.user.id;await Ri.updateUser(ee,{displayName:T.displayName,role:T.role,allowedPaths:T.allowedPaths,email:T.email}),r(me=>{const Y=me.map(fe=>fe.id===ee?{...fe,...T,updatedAt:new Date}:fe);return he(Y),Y}),x({isOpen:!1,user:null}),n("Atualizado!",`${b.user.displayName} atualizado com sucesso!`)},C=T=>{x({isOpen:!0,user:T})};return o.jsxs("div",{className:"users-container",children:[o.jsx("div",{className:"users-header",children:o.jsx("h1",{children:"Users management"})}),i&&o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading users..."})]}),d&&o.jsxs("div",{className:"error-container",children:[o.jsxs("p",{children:["Error: ",d]}),o.jsx("button",{onClick:()=>window.location.reload(),children:"Try again"})]}),!i&&!d&&o.jsx("div",{className:"metrics-section",children:o.jsxs("div",{className:"metrics-grid",children:[o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-icon total",children:o.jsx(qs,{})}),o.jsxs("div",{className:"metric-content",children:[o.jsx("h3",{children:de.totalUsers}),o.jsx("p",{children:"Total Users"})]})]}),o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-icon admin",children:o.jsx(ol,{})}),o.jsxs("div",{className:"metric-content",children:[o.jsx("h3",{children:de.adminUsers}),o.jsx("p",{children:"Administrators"})]})]}),o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-icon partial",children:o.jsx(qs,{})}),o.jsxs("div",{className:"metric-content",children:[o.jsx("h3",{children:de.partialUsers}),o.jsx("p",{children:"Partial Users"})]})]}),o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-icon recent",children:o.jsx(qs,{})}),o.jsxs("div",{className:"metric-content",children:[o.jsx("h3",{children:de.recentUsers}),o.jsx("p",{children:"Recent (7 days)"})]})]})]})}),!i&&!d&&o.jsx("div",{className:"filters-section",children:o.jsxs("div",{className:"filters-container",children:[o.jsx("div",{className:"search-container",children:o.jsx("input",{type:"text",placeholder:"Search users...",value:R,onChange:T=>A(T.target.value),className:"search-input"})}),o.jsxs("div",{className:"filter-controls",children:[o.jsxs("select",{value:q,onChange:T=>D(T.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"admin",children:"Administrators"}),o.jsx("option",{value:"partial",children:"Partial Users"})]}),o.jsxs("select",{value:z,onChange:T=>F(T.target.value),className:"filter-select",children:[o.jsx("option",{value:"name",children:"Sort by Name"}),o.jsx("option",{value:"email",children:"Sort by Email"}),o.jsx("option",{value:"createdAt",children:"Sort by Date"})]}),o.jsx("button",{onClick:()=>{A(""),D("all"),F("name")},className:"clear-filters-btn",children:"Clear Filters"})]})]})}),!i&&!d&&M().length>0&&o.jsx("div",{className:"users-grid",children:M().map(T=>o.jsxs("div",{className:"user-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsxs("div",{className:"user-info",children:[o.jsx(qs,{className:"user-icon"}),o.jsx("h3",{className:"user-name",children:T.displayName||"No name"})]}),o.jsxs("div",{className:`role-badge ${T.role}`,children:[o.jsx(ol,{className:"role-icon"}),T.role==="admin"?"Admin":"Partial"]})]}),o.jsxs("div",{className:"card-content",children:[o.jsx("p",{className:"user-email",children:T.email}),o.jsxs("p",{className:"user-paths",children:["Permissions:"," ",T.allowedPaths?.length&&T.allowedPaths?.length>0?T.allowedPaths?.join(", "):T.role==="admin"?"Full access":"No permissions"]})]}),o.jsxs("div",{className:"card-actions",children:[o.jsx("button",{className:"action-btn view",onClick:()=>L(T),children:o.jsx(ZO,{})}),o.jsx("button",{className:"action-btn edit",onClick:()=>C(T),children:o.jsx(WO,{})}),o.jsx("button",{className:"action-btn delete",onClick:()=>j(T),children:o.jsx(eM,{})})]})]},T.uid))}),!i&&!d&&t.length===0&&o.jsxs("div",{className:"empty-container",children:[o.jsx(qs,{className:"empty-icon"}),o.jsx("p",{children:"No users found"}),o.jsx("p",{className:"empty-subtitle",children:"Users will be shown here when they are created"})]}),!i&&!d&&M().length===0&&t.length>0&&o.jsxs("div",{className:"empty-container",children:[o.jsx(JO,{className:"empty-icon"}),o.jsx("p",{children:"No users found matching your filters"}),o.jsx("p",{className:"empty-subtitle",children:"Try adjusting your search or filter criteria"})]}),o.jsx(uA,{isOpen:y.isOpen,onClose:()=>p({isOpen:!1,record:null}),onConfirm:O,title:"Confirmar Excluso",message:`Tem certeza que deseja excluir "${y.record?.displayName}"? Esta ao no pode ser desfeita.`,confirmText:"Excluir",cancelText:"Cancelar",type:"danger"}),o.jsx(IM,{isOpen:v.isOpen,onClose:()=>E({isOpen:!1,user:null}),user:v.user}),o.jsx(PM,{isOpen:b.isOpen,onClose:()=>x({isOpen:!1,user:null}),user:b.user,onSave:N})]})}const _t=(n,e="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(n),Cr=(n,e,t)=>{if(!e||!t)return!0;const r=typeof n=="string"?new Date(n):n;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),t.setHours(0,0,0,0),r>=e&&r<=t},OM=()=>{const[n,e]=P.useState(!1),[t,r]=P.useState(null);return{loading:n,error:t,generateReportData:async(d,m,y)=>{try{switch(e(!0),r(null),d){case"client-payments":{const v=(await zs.getAllClientPaymentAlerts()).filter(E=>Cr(E.dueDate,m,y));return{columns:["Client Name","Invoice Number","Amount","Due Date","Status","Payment Date"],rows:v.map(E=>[E.clientName,E.invoiceNumber,_t(E.amount,"USD"),E.dueDate,E.status.charAt(0).toUpperCase()+E.status.slice(1),E.status==="paid"?E.dueDate:"-"])}}case"subcontractor-payments":{const v=(await wa.getAllSubcontractorPaymentAlerts()).filter(E=>Cr(E.nextPaymentDate,m,y));return{columns:["Company Name","Contact Person","Service","Amount Due","Payment Date","Status"],rows:v.map(E=>[E.subcontractor.companyName||"N/A",E.subcontractor.contactPerson||"N/A",E.serviceDescription||"N/A",_t(E.amountDue,E.currency),E.nextPaymentDate,E.status==="paid"?"Paid":E.status==="overdue"?"Overdue":E.status==="due-today"?"Due Today":"Pending"])}}case"project-costs":{const p=await $t.getAllContractServices(),v=await Tn.getAllClients(),E=new Map(v.map(x=>[x.id||"",x])),b=p.filter(x=>x.startDate?Cr(x.startDate,m,y):!1);return{columns:["Project Name","Client","Budget","Spent","Remaining","Status"],rows:b.map(x=>{const R=x.clientId?E.get(x.clientId):null,A=x.budget.estimatedCost||0,q=x.budget.actualCost||0,D=A-q;return[x.serviceName,R?.name||x.clientName||"N/A",_t(A,x.budget.currency),_t(q,x.budget.currency),_t(D,x.budget.currency),x.status==="completed"?"Completed":x.status==="in_progress"?"In Progress":x.status==="cancelled"?"Cancelled":"Pending"]})}}case"vehicle-maintenance":{const v=(await Fs.getAllVehicles()).filter(E=>E.nextMaintenanceDate?Cr(E.nextMaintenanceDate,m,y):!1);return{columns:["Vehicle","License Plate","Last Maintenance","Next Maintenance","Type","Status"],rows:v.map(E=>[`${E.make} ${E.model}`,E.licensePlate,E.lastMaintenanceDate||"N/A",E.nextMaintenanceDate||"N/A",E.maintenanceSchedule?E.maintenanceSchedule.charAt(0).toUpperCase()+E.maintenanceSchedule.slice(1):"N/A",E.status==="active"?"Active":E.status==="maintenance"?"Maintenance":E.status==="retired"?"Retired":"Sold"])}}case"contracted-services":{const p=await $t.getAllContractServices(),v=await Tn.getAllClients(),E=new Map(v.map(x=>[x.id||"",x])),b=p.filter(x=>x.startDate?Cr(x.startDate,m,y):!1);return{columns:["Service Name","Client","Start Date","End Date","Status","Budget","Spent"],rows:b.map(x=>{const R=x.clientId?E.get(x.clientId):null;return[x.serviceName,R?.name||x.clientName||"N/A",x.startDate,x.endDate,x.status==="completed"?"Completed":x.status==="in_progress"?"In Progress":x.status==="cancelled"?"Cancelled":"Pending",_t(x.budget.estimatedCost||0,x.budget.currency),_t(x.budget.actualCost||0,x.budget.currency)]})}}case"client-overview":{const p=await Tn.getAllClients(),v=await $t.getAllContractServices(),E=new Map;return v.forEach(b=>{if(b.clientId){const x=E.get(b.clientId)||[];x.push(b),E.set(b.clientId,x)}}),{columns:["Client Name","Total Projects","Active Projects","Total Revenue","Payment Status"],rows:p.map(b=>{const x=E.get(b.id||"")||[],R=x.filter(D=>D.status==="in_progress"),A=x.reduce((D,z)=>D+(z.budget.actualCost||z.budget.estimatedCost||0),0);return[b.name,x.length.toString(),R.length.toString(),_t(A,"USD"),"Good"]})}}case"expense-breakdown":{const p=await $t.getAllContractServices(),v=new Map;p.forEach(b=>{const x=b.budget.actualCost||0,R=b.budget.estimatedCost||0,A=x>0?x:R,q=b.serviceType||"Other",D=v.get(q)||{total:0,count:0};v.set(q,{total:D.total+A,count:D.count+1})});const E=Array.from(v.values()).reduce((b,x)=>b+x.total,0);return{columns:["Category","Amount","Percentage","Count","Average"],rows:Array.from(v.entries()).map(([b,x])=>{const R=E>0?(x.total/E*100).toFixed(0):"0",A=x.count>0?_t(x.total/x.count,"USD"):"$0";return[b,_t(x.total,"USD"),`${R}%`,x.count.toString(),A]})}}case"service-pricing":{const p=await $t.getAllContractServices(),v=await Tn.getAllClients(),E=new Map(v.map(b=>[b.id||"",b]));return{columns:["Service","Client","Price","Cost","Margin","Status"],rows:p.map(b=>{const x=b.clientId?E.get(b.clientId):null,R=b.budget.estimatedCost||0,A=b.budget.actualCost||0,q=R>0?((R-A)/R*100).toFixed(0):"0";return[b.serviceName,x?.name||b.clientName||"N/A",_t(R,b.budget.currency),_t(A,b.budget.currency),`${q}%`,b.status==="completed"?"Completed":b.status==="in_progress"?"Active":"Pending"]})}}case"alerts-summary":{const p=await zs.getAllClientPaymentAlerts(),v=await wa.getAllSubcontractorPaymentAlerts(),E=await tu.getAllContractedServicePaymentAlerts(),b=await Bs.getAllProjectAlerts(),x={"Payment Due":{total:0,critical:0,high:0,medium:0,low:0},"Vehicle Maintenance":{total:0,critical:0,high:0,medium:0,low:0},"Project Deadline":{total:0,critical:0,high:0,medium:0,low:0},"Contract Expiry":{total:0,critical:0,high:0,medium:0,low:0}};return[...p,...v,...E].forEach(R=>{const A="Payment Due";x[A].total++,R.priority==="high"?x[A].high++:R.priority==="medium"?x[A].medium++:x[A].low++,(R.status==="overdue"||R.status==="due-today")&&x[A].critical++}),b.forEach(R=>{const A="Project Deadline";x[A].total++,R.priority==="high"?x[A].high++:R.priority==="medium"?x[A].medium++:x[A].low++,R.status==="delayed"&&x[A].critical++}),{columns:["Alert Type","Count","Critical","High","Medium","Low"],rows:Object.entries(x).map(([R,A])=>[R,A.total.toString(),A.critical.toString(),A.high.toString(),A.medium.toString(),A.low.toString()])}}case"project-completion":{const v=(await Bs.getAllProjectAlerts()).filter(E=>E.startDate?Cr(E.startDate,m,y):!1);return{columns:["Project","Progress","Start Date","End Date","Days Remaining","Status"],rows:v.map(E=>{const b=new Date,R=new Date(E.plannedEndDate).getTime()-b.getTime(),A=Math.ceil(R/(1e3*60*60*24));return[E.projectName,`${E.actualProgress}%`,E.startDate,E.plannedEndDate,A>0?A.toString():"0",E.status==="completed"?"Completed":E.status==="delayed"?"Delayed":E.status==="at-risk"?"At Risk":"On Track"]})}}case"cash-flow":{const p=await $t.getAllContractServices(),v=new Map;p.forEach(R=>{if(!R.startDate)return;const A=new Date(R.startDate),q=`${A.toLocaleString("en-US",{month:"long"})} ${A.getFullYear()}`,D=v.get(q)||{income:0,expenses:0},z=R.budget.estimatedCost||0,F=R.budget.actualCost||0;v.set(q,{income:D.income+z,expenses:D.expenses+F})});const E=Array.from(v.entries()).sort((R,A)=>{const q=new Date(R[0]);return new Date(A[0]).getTime()-q.getTime()});let b=0;const x=E.slice(0,5).map(([R,A])=>{const q=A.income-A.expenses;return b+=q,[R,_t(A.income,"USD"),_t(A.expenses,"USD"),_t(q,"USD"),"N/A",_t(b,"USD")]});return{columns:["Month","Income","Expenses","Net","Change","Balance"],rows:x}}case"employee-hours":{const p=await Di.getAllEmployees();return{columns:["Employee","Regular Hours","Overtime","Total Hours","Status"],rows:p.map(v=>[v.name,"160","0","160","Active"])}}default:return{columns:["Item","Value","Status"],rows:[["No data available","N/A","N/A"]]}}}catch(p){return console.error("Error generating report data:",p),r(p instanceof Error?p.message:"Failed to generate report"),{columns:["Error"],rows:[["Failed to load data"]]}}finally{e(!1)}},getReportMetrics:async(d,m,y)=>{try{switch(d){case"client-payments":{const v=(await zs.getAllClientPaymentAlerts()).filter(x=>Cr(x.dueDate,m,y)),E=v.filter(x=>x.status==="paid").reduce((x,R)=>x+R.amount,0),b=v.filter(x=>x.status==="pending"||x.status==="overdue").reduce((x,R)=>x+R.amount,0);return[{label:"Total Received",value:_t(E)},{label:"Pending",value:_t(b)}]}case"subcontractor-payments":{const v=(await wa.getAllSubcontractorPaymentAlerts()).filter(x=>Cr(x.nextPaymentDate,m,y)),E=v.filter(x=>x.status==="paid").reduce((x,R)=>x+R.amountDue,0),b=v.filter(x=>x.status!=="paid").reduce((x,R)=>x+R.amountDue,0);return[{label:"Total Paid",value:_t(E)},{label:"Due",value:_t(b)}]}case"project-costs":{const v=(await $t.getAllContractServices()).filter(x=>x.startDate?Cr(x.startDate,m,y):!1),E=v.reduce((x,R)=>x+(R.budget.estimatedCost||0),0),b=v.reduce((x,R)=>x+(R.budget.actualCost||0),0);return[{label:"Total Budget",value:_t(E)},{label:"Spent",value:_t(b)}]}case"vehicle-maintenance":{const p=await Fs.getAllVehicles(),v=p.filter(b=>b.status==="active"),E=p.filter(b=>b.nextMaintenanceDate?new Date(b.nextMaintenanceDate)<=new Date&&b.status==="active":!1);return[{label:"Active Vehicles",value:v.length.toString()},{label:"Maintenance Due",value:E.length.toString()}]}case"contracted-services":{const p=await $t.getAllContractServices(),v=p.filter(b=>b.status==="in_progress"),E=p.filter(b=>b.status==="completed");return[{label:"Active Services",value:v.length.toString()},{label:"Completed",value:E.length.toString()}]}case"client-overview":{const p=await Tn.getAllClients(),E=(await $t.getAllContractServices()).filter(b=>b.status==="in_progress");return[{label:"Total Clients",value:p.length.toString()},{label:"Active Projects",value:E.length.toString()}]}case"expense-breakdown":{const v=(await $t.getAllContractServices()).reduce((b,x)=>b+(x.budget.actualCost||x.budget.estimatedCost||0),0),E=await mf.getAllExpenseTypes();return[{label:"Total Expenses",value:_t(v)},{label:"Categories",value:E.length.toString()}]}case"service-pricing":{const p=await $t.getAllContractServices(),v=p.reduce((b,x)=>{const R=x.budget.estimatedCost||0,A=x.budget.actualCost||0;return b+(R>0?(R-A)/R*100:0)},0),E=p.length>0?(v/p.length).toFixed(0):"0";return[{label:"Services",value:p.length.toString()},{label:"Avg. Margin",value:`${E}%`}]}case"alerts-summary":{const p=await zs.getAllClientPaymentAlerts(),v=await wa.getAllSubcontractorPaymentAlerts(),E=await tu.getAllContractedServicePaymentAlerts(),b=await Bs.getAllProjectAlerts(),x=[...p,...v,...E],R=[...x.filter(A=>A.status==="overdue"||A.status==="due-today"),...b.filter(A=>A.status==="delayed")];return[{label:"Active Alerts",value:x.length.toString()},{label:"Critical",value:R.length.toString()}]}case"project-completion":{const p=await Bs.getAllProjectAlerts(),v=p.filter(b=>b.status==="on-track"),E=p.filter(b=>b.status==="delayed");return[{label:"On Schedule",value:v.length.toString()},{label:"Delayed",value:E.length.toString()}]}case"cash-flow":{const p=await $t.getAllContractServices(),v=p.reduce((x,R)=>x+(R.budget.estimatedCost||0),0),E=p.reduce((x,R)=>x+(R.budget.actualCost||0),0),b=v-E;return[{label:"Net Income",value:_t(b)},{label:"Change",value:"N/A"}]}case"employee-hours":{const p=await Di.getAllEmployees();return[{label:"Total Hours",value:"N/A"},{label:"Employees",value:p.length.toString()}]}default:return[]}}catch(p){return console.error("Error getting report metrics:",p),[]}}}},MM=()=>{const[n,e]=P.useState("30"),[t,r]=P.useState("all"),[i,c]=P.useState(""),[d,m]=P.useState(""),[y,p]=P.useState(!1),[v,E]=P.useState(null),[b,x]=P.useState(null),[R,A]=P.useState([]),[q,D]=P.useState(!1),{generateReportData:z,getReportMetrics:F}=OM(),de=[{id:"client-payments",title:"Client Payments Report",description:"Detailed report of payments received from clients, including overdue and pending amounts",category:"financial",icon:o.jsx($i,{}),color:"#10b981"},{id:"subcontractor-payments",title:"Subcontractor Payments",description:"Payment history and outstanding amounts for all subcontractors",category:"financial",icon:o.jsx(Ma,{}),color:"#f59e0b"},{id:"project-costs",title:"Project Costs Analysis",description:"Comprehensive breakdown of costs per project including labor, materials, and overhead",category:"financial",icon:o.jsx(yg,{}),color:"#3b82f6"},{id:"vehicle-maintenance",title:"Vehicle Maintenance Log",description:"Complete maintenance history and upcoming service schedules for all vehicles",category:"operational",icon:o.jsx(dO,{}),color:"#8b5cf6"},{id:"contracted-services",title:"Contracted Services Status",description:"Overview of all contracted services with status, deadlines, and payment schedules",category:"operational",icon:o.jsx(Rk,{}),color:"#06b6d4"},{id:"client-overview",title:"Client Portfolio Overview",description:"Summary of all clients, active projects, payment history, and satisfaction metrics",category:"management",icon:o.jsx(eu,{}),color:"#ec4899"},{id:"expense-breakdown",title:"Expense Breakdown by Type",description:"Categorized expenses showing distribution across different expense types and categories",category:"financial",icon:o.jsx(nA,{}),color:"#ef4444"},{id:"service-pricing",title:"Service Pricing Analysis",description:"Service pricing comparison across clients with profitability and margin analysis",category:"financial",icon:o.jsx(Sa,{}),color:"#14b8a6"},{id:"alerts-summary",title:"Alerts & Notifications Summary",description:"Consolidated view of all active alerts including payments, maintenance, and deadlines",category:"management",icon:o.jsx(Ph,{}),color:"#f97316"},{id:"project-completion",title:"Project Completion Report",description:"Track project progress, completion rates, timeline adherence, and resource utilization",category:"operational",icon:o.jsx(qn,{}),color:"#84cc16"},{id:"cash-flow",title:"Cash Flow Statement",description:"Detailed cash flow analysis showing income, expenses, and net cash position over time",category:"financial",icon:o.jsx(yg,{}),color:"#6366f1"},{id:"employee-hours",title:"Employee Hours & Payroll",description:"Employee work hours, overtime, payroll costs, and productivity metrics",category:"management",icon:o.jsx(Jc,{}),color:"#a855f7"}],$=()=>{const N=new Date;N.setHours(23,59,59,999);let C=new Date;if(n==="7")C.setDate(N.getDate()-7);else if(n==="30")C.setDate(N.getDate()-30);else if(n==="90")C.setDate(N.getDate()-90);else if(n==="custom")if(i&&d)C=new Date(i),N.setTime(new Date(d).getTime()),N.setHours(23,59,59,999);else return{};return C.setHours(0,0,0,0),{startDate:C,endDate:N}};P.useEffect(()=>{(async()=>{try{const{startDate:C,endDate:T}=$(),ee=await Promise.all(de.map(async me=>{const Y=await F(me.id,C,T);return{...me,metrics:Y.length>0?Y:void 0}}));A(ee)}catch(C){console.error("Error loading report metrics:",C)}})()},[n,i,d]);const he=R.filter(N=>t==="all"?!0:N.category===t),M=()=>{switch(n){case"7":return"Last 7 days";case"30":return"Last 30 days";case"90":return"Last 90 days";case"custom":return i&&d?`${i} to ${d}`:"Custom period";default:return"Last 30 days"}},j=async N=>{E(N),p(!0),x(null),D(!0);try{const{startDate:C,endDate:T}=$(),ee=await z(N.id,C,T);x(ee)}catch(C){console.error("Error loading report data:",C),x({columns:["Error"],rows:[["Failed to load report data"]]})}finally{D(!1)}},O=()=>{p(!1),E(null),x(null)},L=()=>{if(!v||!b)return;let N=`${v.title} - ${M()}

`;N+=b.columns.join(",")+`
`,b.rows.forEach(me=>{N+=me.join(",")+`
`});const C=new Blob([N],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a"),ee=URL.createObjectURL(C);T.setAttribute("href",ee),T.setAttribute("download",`${v.id}-${new Date().toISOString().split("T")[0]}.csv`),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T)};return o.jsxs("div",{className:"reports",children:[o.jsxs("div",{className:"reports-header",children:[o.jsx("h1",{children:"Reports & Analytics"}),o.jsx("p",{children:"Generate comprehensive reports and export data for analysis"})]}),o.jsxs("div",{className:"reports-filters",children:[o.jsxs("div",{className:"filter-section",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{children:"Report Period:"}),o.jsxs("div",{className:"period-buttons",children:[o.jsx("button",{className:`period-btn ${n==="7"?"active":""}`,onClick:()=>e("7"),children:"Last 7 days"}),o.jsx("button",{className:`period-btn ${n==="30"?"active":""}`,onClick:()=>e("30"),children:"Last 30 days"}),o.jsx("button",{className:`period-btn ${n==="90"?"active":""}`,onClick:()=>e("90"),children:"Last 90 days"}),o.jsx("button",{className:`period-btn ${n==="custom"?"active":""}`,onClick:()=>e("custom"),children:"Custom"})]})]}),n==="custom"&&o.jsxs("div",{className:"custom-date-range",children:[o.jsxs("div",{className:"date-input-group",children:[o.jsx("label",{children:"Start Date:"}),o.jsx("input",{type:"date",value:i,onChange:N=>c(N.target.value)})]}),o.jsxs("div",{className:"date-input-group",children:[o.jsx("label",{children:"End Date:"}),o.jsx("input",{type:"date",value:d,onChange:N=>m(N.target.value)})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{children:"Category:"}),o.jsxs("div",{className:"category-buttons",children:[o.jsx("button",{className:`category-btn ${t==="all"?"active":""}`,onClick:()=>r("all"),children:"All Reports"}),o.jsx("button",{className:`category-btn ${t==="financial"?"active":""}`,onClick:()=>r("financial"),children:"Financial"}),o.jsx("button",{className:`category-btn ${t==="operational"?"active":""}`,onClick:()=>r("operational"),children:"Operational"}),o.jsx("button",{className:`category-btn ${t==="management"?"active":""}`,onClick:()=>r("management"),children:"Management"})]})]})]}),o.jsxs("div",{className:"period-info",children:[o.jsx(Jc,{}),o.jsxs("span",{children:["Generating reports for: ",M()]})]})]}),o.jsx("div",{className:"reports-grid",children:he.map(N=>o.jsxs("div",{className:"report-card",children:[o.jsxs("div",{className:"report-card-header",children:[o.jsx("div",{className:"report-icon",style:{backgroundColor:N.color},children:N.icon}),o.jsx("div",{className:"report-category",children:o.jsx("span",{className:`category-badge ${N.category}`,children:N.category})})]}),o.jsxs("div",{className:"report-card-content",children:[o.jsx("h3",{children:N.title}),o.jsx("p",{children:N.description}),N.metrics&&o.jsx("div",{className:"report-metrics",children:N.metrics.map((C,T)=>o.jsxs("div",{className:"metric-item",children:[o.jsx("span",{className:"metric-label",children:C.label}),o.jsx("span",{className:"metric-value",children:C.value})]},T))})]}),o.jsx("div",{className:"report-card-footer",children:o.jsxs("button",{className:"view-details-btn",onClick:()=>j(N),children:[o.jsx(sA,{}),"View Details"]})})]},N.id))}),he.length===0&&o.jsxs("div",{className:"no-reports",children:[o.jsx(Sa,{}),o.jsx("h3",{children:"No reports found"}),o.jsx("p",{children:"Try adjusting your filters to see more reports."})]}),y&&v&&o.jsx("div",{className:"modal-overlay",onClick:O,children:o.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title",children:[o.jsx("div",{className:"modal-icon",style:{backgroundColor:v.color},children:v.icon}),o.jsxs("div",{children:[o.jsx("h2",{children:v.title}),o.jsx("p",{className:"modal-subtitle",children:M()})]})]}),o.jsx("button",{className:"close-modal-btn",onClick:O,children:o.jsx(wy,{})})]}),o.jsx("div",{className:"modal-body",children:q?o.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:o.jsx("p",{children:"Carregando dados do relatrio..."})}):b?o.jsx("div",{className:"table-container",children:o.jsxs("table",{className:"report-table",children:[o.jsx("thead",{children:o.jsx("tr",{children:b.columns.map((N,C)=>o.jsx("th",{children:N},C))})}),o.jsx("tbody",{children:b.rows.length>0?b.rows.map((N,C)=>o.jsx("tr",{children:N.map((T,ee)=>o.jsx("td",{children:T},ee))},C)):o.jsx("tr",{children:o.jsx("td",{colSpan:b.columns.length,style:{textAlign:"center",padding:"2rem"},children:"Nenhum dado disponvel para o perodo selecionado"})})})]})}):o.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:o.jsx("p",{children:"Erro ao carregar dados do relatrio"})})}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"modal-btn secondary",onClick:O,children:"Close"}),b&&o.jsxs("button",{className:"modal-btn primary",onClick:L,children:[o.jsx(Ok,{}),"Export CSV"]})]})]})})]})},LM=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{r(!0);const c=[];(await zs.getAllClientPaymentAlerts()).filter(z=>z.status==="overdue").slice(0,3).forEach(z=>{const F=Math.abs(Math.ceil((new Date().getTime()-new Date(z.dueDate).getTime())/864e5));c.push({id:`client-${z.id}`,type:"warning",title:"Payment Overdue",message:`Invoice ${z.invoiceNumber} from ${z.clientName} is ${F} days overdue`,time:Cc(z.dueDate),timestamp:new Date(z.dueDate)})}),(await wa.getAllSubcontractorPaymentAlerts()).filter(z=>z.status==="overdue").slice(0,2).forEach(z=>{c.push({id:`sub-${z.id}`,type:"error",title:"Subcontractor Payment Due",message:`Payment to ${z.subcontractor.companyName} is overdue`,time:Cc(z.nextPaymentDate),timestamp:new Date(z.nextPaymentDate)})}),(await Fs.getAllVehicles()).filter(z=>{if(!z.nextMaintenanceDate)return!1;const F=new Date(z.nextMaintenanceDate),de=new Date,$=Math.ceil((F.getTime()-de.getTime())/(1e3*60*60*24));return $<=7&&$>=-7}).slice(0,2).forEach(z=>{const F=new Date(z.nextMaintenanceDate),de=new Date,$=Math.ceil((F.getTime()-de.getTime())/(1e3*60*60*24));c.push({id:`vehicle-${z.id}`,type:$<0?"error":"warning",title:"Vehicle Maintenance",message:`${z.make} ${z.model} (${z.licensePlate}) ${$<0?"requires urgent maintenance":`maintenance due in ${$} days`}`,time:Cc(z.nextMaintenanceDate),timestamp:new Date(z.nextMaintenanceDate)})});const b=await Bs.getAllProjectAlerts();b.filter(z=>z.status==="at-risk"||z.status==="delayed").slice(0,2).forEach(z=>{c.push({id:`project-${z.id}`,type:z.status==="delayed"?"error":"warning",title:"Project Alert",message:`${z.projectName} for ${z.clientName} is ${z.status}`,time:Cc(z.lastUpdate),timestamp:new Date(z.lastUpdate)})}),b.filter(z=>z.status==="completed").slice(0,2).forEach(z=>{c.push({id:`completed-${z.id}`,type:"success",title:"Project Completed",message:`${z.projectName} completed successfully`,time:Cc(z.lastUpdate),timestamp:new Date(z.lastUpdate)})}),(await tu.getAllContractedServicePaymentAlerts()).filter(z=>z.status==="due-today").slice(0,2).forEach(z=>{c.push({id:`service-${z.id}`,type:"warning",title:"Service Payment Due Today",message:`Payment for ${z.contractService.serviceName} is due today`,time:"Today",timestamp:new Date(z.nextPaymentDate)})});const D=c.sort((z,F)=>F.timestamp.getTime()-z.timestamp.getTime()).slice(0,5);e(D)}catch(c){console.error("Error fetching dashboard alerts:",c),e([])}finally{r(!1)}})()},[]),{alerts:n,loading:t,refreshAlerts:()=>{}}};function Cc(n){const e=new Date(n),r=new Date().getTime()-e.getTime(),i=Math.floor(r/(1e3*60*60*24)),c=Math.floor(r/(1e3*60*60)),d=Math.floor(r/(1e3*60));return i>0?i===1?"1 day ago":`${i} days ago`:c>0?c===1?"1 hour ago":`${c} hours ago`:d>0?d===1?"1 minute ago":`${d} minutes ago`:"Just now"}function ax(){const{data:n,loading:e,refreshData:t}=oA(),{alerts:r,loading:i}=LM(),{goTo:c}=eA(),d=P.useMemo(()=>[{id:"users",title:"Total Users",count:n.users.length,icon:o.jsx(eu,{}),color:"#0ea5e9",trend:{value:12,isPositive:!0},route:"/admin/cadastro-usuario"},{id:"clients",title:"Clients",count:n.clients.length,icon:o.jsx(Us,{}),color:"#8b5cf6",trend:{value:8,isPositive:!0},route:"/admin/cadastro-clientes"},{id:"employees",title:"Employees",count:n.employees.length,icon:o.jsx(Us,{}),color:"#10b981",trend:{value:5,isPositive:!1},route:"/admin/cadastro-funcionario"},{id:"services",title:"Services",count:n.services.length,icon:o.jsx(kh,{}),color:"#f59e0b",route:"/admin/cadastro-servico"},{id:"subcontractors",title:"Subcontractors",count:n.subcontractors.length,icon:o.jsx(Us,{}),color:"#06b6d4",route:"/admin/cadastro-subcontratados"},{id:"contract-services",title:"Contract Services",count:n.contractServices.length,icon:o.jsx(Sa,{}),color:"#ec4899",route:"/admin/cadastro-servicos-contratados"},{id:"vehicles",title:"Vehicles",count:n.vehicles.length,icon:o.jsx(rl,{}),color:"#6366f1",route:"/admin/cadastro-veiculos"},{id:"financings",title:"Financings",count:n.financings.length,icon:o.jsx(Ma,{}),color:"#ef4444",route:"/admin/cadastro-financiamentos"},{id:"bank-accounts",title:"Bank Accounts",count:n.bankAccounts.length,icon:o.jsx(xy,{}),color:"#14b8a6",route:"/admin/cadastro-conta-bancaria"},{id:"credit-cards",title:"Credit Cards",count:n.creditCards.length,icon:o.jsx(Sy,{}),color:"#f97316",route:"/admin/cadastro-cartao-credito"},{id:"expense-types",title:"Expense Types",count:n.expenseTypes.length,icon:o.jsx(Sa,{}),color:"#84cc16",route:"/admin/cadastro-tipo-despesa"},{id:"service-pricing",title:"Service Pricing",count:n.servicePricing.length,icon:o.jsx($i,{}),color:"#a855f7",route:"/admin/cadastro-preco-servico"}],[n]),m=P.useMemo(()=>d.reduce((E,b)=>E+b.count,0),[d]),y=E=>{E&&(window.location.href=E)},p=async()=>{await t()},v=E=>{switch(E){case"warning":return o.jsx(Ph,{});case"error":return o.jsx(Ph,{});case"info":return o.jsx(gg,{});case"success":return o.jsx(qn,{});default:return o.jsx(gg,{})}};return e||i?o.jsx("div",{className:"dashboard",children:o.jsxs("div",{className:"dashboard-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading dashboard data..."})]})}):o.jsxs("div",{className:"dashboard",children:[o.jsx("div",{className:"dashboard-header",children:o.jsxs("div",{className:"dashboard-header-content",children:[o.jsxs("div",{className:"dashboard-header-text",children:[o.jsx("h1",{children:"Dashboard Overview"}),o.jsx("p",{children:"Monitor and manage your business operations"})]}),o.jsxs("button",{className:"refresh-button",onClick:p,children:[o.jsx(Jk,{}),"Refresh Data"]})]})}),o.jsxs("div",{className:"dashboard-summary",children:[o.jsxs("div",{className:"summary-card summary-card-primary",children:[o.jsx("div",{className:"summary-card-icon",children:o.jsx(yg,{})}),o.jsxs("div",{className:"summary-card-content",children:[o.jsx("h3",{children:"Total Records"}),o.jsx("p",{className:"summary-card-value",children:m}),o.jsx("span",{className:"summary-card-label",children:"Across all categories"})]})]}),o.jsxs("div",{className:"summary-card summary-card-success",children:[o.jsx("div",{className:"summary-card-icon",children:o.jsx(qn,{})}),o.jsxs("div",{className:"summary-card-content",children:[o.jsx("h3",{children:"Active Services"}),o.jsx("p",{className:"summary-card-value",children:n.contractServices.length}),o.jsx("span",{className:"summary-card-label",children:"Currently running"})]})]}),o.jsxs("div",{className:"summary-card summary-card-warning",children:[o.jsx("div",{className:"summary-card-icon",children:o.jsx(yu,{})}),o.jsxs("div",{className:"summary-card-content",children:[o.jsx("h3",{children:"Pending Alerts"}),o.jsx("p",{className:"summary-card-value",children:r.filter(E=>E.type==="warning"||E.type==="error").length}),o.jsx("span",{className:"summary-card-label",children:"Require attention"})]})]}),o.jsxs("div",{className:"summary-card summary-card-info",children:[o.jsx("div",{className:"summary-card-icon",children:o.jsx(eu,{})}),o.jsxs("div",{className:"summary-card-content",children:[o.jsx("h3",{children:"Team Members"}),o.jsx("p",{className:"summary-card-value",children:n.employees.length+n.users.length}),o.jsx("span",{className:"summary-card-label",children:"Users & Employees"})]})]})]}),o.jsxs("div",{className:"dashboard-content",children:[o.jsxs("div",{className:"dashboard-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:"System Statistics"}),o.jsx("p",{children:"Real-time data from your database"})]}),o.jsx("div",{className:"stats-grid",children:d.map(E=>o.jsxs("div",{className:"stat-card",onClick:()=>y(E.route),style:{cursor:E.route?"pointer":"default"},children:[o.jsxs("div",{className:"stat-card-header",children:[o.jsx("div",{className:"stat-card-icon",style:{background:`${E.color}15`,color:E.color},children:E.icon}),E.trend&&o.jsxs("div",{className:`stat-trend ${E.trend.isPositive?"positive":"negative"}`,children:[E.trend.isPositive?o.jsx(_k,{}):o.jsx(gk,{}),o.jsxs("span",{children:[E.trend.value,"%"]})]})]}),o.jsxs("div",{className:"stat-card-content",children:[o.jsx("h3",{children:E.title}),o.jsx("p",{className:"stat-count",style:{color:E.color},children:E.count}),o.jsx("span",{className:"stat-label",children:"Registered"})]})]},E.id))})]}),o.jsxs("div",{className:"dashboard-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:"Recent Alerts"}),o.jsx("p",{children:"Latest notifications and system alerts"})]}),o.jsx("div",{className:"alerts-container",children:r.length===0?o.jsxs("div",{className:"no-alerts-message",children:[o.jsx(qn,{}),o.jsx("p",{children:"No recent alerts. Everything is running smoothly!"})]}):r.map(E=>o.jsxs("div",{className:`alert-card alert-${E.type}`,children:[o.jsx("div",{className:"alert-icon",children:v(E.type)}),o.jsxs("div",{className:"alert-content",children:[o.jsxs("div",{className:"alert-header",children:[o.jsx("h4",{children:E.title}),o.jsx("span",{className:"alert-time",children:E.time})]}),o.jsx("p",{children:E.message})]})]},E.id))}),o.jsx("div",{className:"alerts-footer",children:o.jsx("button",{className:"view-all-button",onClick:()=>c("/admin/avisos"),children:"View All Alerts"})})]}),o.jsxs("div",{className:"dashboard-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:"Quick Actions"}),o.jsx("p",{children:"Frequently used operations"})]}),o.jsxs("div",{className:"quick-actions",children:[o.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/cadastro-clientes",children:[o.jsx(Us,{}),o.jsx("span",{children:"Add New Client"})]}),o.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/cadastro-servicos-contratados",children:[o.jsx(Sa,{}),o.jsx("span",{children:"New Service Contract"})]}),o.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/cadastro-funcionario",children:[o.jsx(Us,{}),o.jsx("span",{children:"Add Employee"})]}),o.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/relatorios",children:[o.jsx(Sa,{}),o.jsx("span",{children:"Generate Report"})]})]})]})]})]})}const VM=()=>{const n=Bn(),{user:e,logout:t}=gu(),r=async()=>{await t(),n("/login")};return o.jsx("div",{className:"no-permissions-container",children:o.jsxs("div",{className:"no-permissions-content",children:[o.jsx("div",{className:"no-permissions-icon",children:o.jsx(sO,{size:64})}),o.jsx("h1",{className:"no-permissions-title",children:"Acesso Negado"}),o.jsx("p",{className:"no-permissions-message",children:"Voc no tem permisses suficientes para acessar esta rea do sistema."}),e&&o.jsxs("div",{className:"user-info-box",children:[o.jsx("p",{className:"user-email",children:e.email}),o.jsxs("p",{className:"user-role",children:["Perfil:"," ",e.role==="admin"?"Administrador":"Acesso Parcial"]})]}),o.jsx("div",{className:"no-permissions-actions",children:o.jsx("button",{onClick:r,className:"btn-logout",children:"Fazer Logout"})}),o.jsx("p",{className:"no-permissions-help",children:"Entre em contato com o administrador do sistema para solicitar as permisses necessrias."})]})})},bt=({children:n,required:e})=>{const{user:t,loading:r}=gu();return r?o.jsx("div",{className:"auth-loading-container",children:o.jsxs("div",{className:"auth-loading-content",children:[o.jsx("div",{className:"auth-loading-spinner"}),o.jsx("p",{className:"auth-loading-text",children:"Loading..."})]})}):t?e==="admin"?t.role!=="admin"?o.jsx(Lp,{to:"/admin/no-permissions",replace:!0}):n:aA(t,e)?n:o.jsx(Lp,{to:"/admin/no-permissions",replace:!0}):o.jsx(Lp,{to:"/login",replace:!0})};function UM(){return o.jsx($w,{children:o.jsxs(Je,{path:"/",element:o.jsx(NO,{}),children:[o.jsx(Je,{index:!0,element:o.jsx(bt,{required:ge.DASHBOARD,children:o.jsx(ax,{})})}),o.jsx(Je,{path:"dashboard",element:o.jsx(bt,{required:ge.DASHBOARD,children:o.jsx(ax,{})})}),o.jsx(Je,{path:"no-permissions",element:o.jsx(VM,{})}),o.jsx(Je,{path:"managment",element:o.jsx(bt,{required:ge.MANAGEMENT,children:o.jsx(MO,{})})}),o.jsx(Je,{path:"cadastros",element:o.jsx(bt,{required:ge.CADASTROS,children:o.jsx(LO,{})})}),o.jsx(Je,{path:"avisos",element:o.jsx(bt,{required:ge.ALERTS,children:o.jsx(VO,{})})}),o.jsx(Je,{path:"users",element:o.jsx(bt,{required:ge.USERS,children:o.jsx(kM,{})})}),o.jsx(Je,{path:"relatorios",element:o.jsx(bt,{required:ge.REPORTS,children:o.jsx(MM,{})})}),o.jsx(Je,{path:"manutencao-veiculos",element:o.jsx(bt,{required:ge.ALERT_VEHICLE,children:o.jsx(UO,{})})}),o.jsx(Je,{path:"termino-projeto",element:o.jsx(bt,{required:ge.ALERT_PROJECT,children:o.jsx(yM,{})})}),o.jsx(Je,{path:"pagamento-subcontratados",element:o.jsx(bt,{required:ge.ALERT_SUBCONTRACTOR,children:o.jsx(SM,{})})}),o.jsx(Je,{path:"recebimento-cliente",element:o.jsx(bt,{required:ge.ALERT_CLIENT,children:o.jsx(vM,{})})}),o.jsx(Je,{path:"pagamento-servicos-contratados",element:o.jsx(bt,{required:ge.ALERT_CONTRACT_SERVICE,children:o.jsx(jM,{})})}),o.jsx(Je,{path:"cadastro-usuario",element:o.jsx(bt,{required:ge.REGISTER_USER,children:o.jsx(nM,{})})}),o.jsx(Je,{path:"cadastro-servico",element:o.jsx(bt,{required:ge.REGISTER_SERVICE,children:o.jsx(rM,{})})}),o.jsx(Je,{path:"cadastro-clientes",element:o.jsx(bt,{required:ge.REGISTER_CLIENT,children:o.jsx(aM,{})})}),o.jsx(Je,{path:"cadastro-funcionario",element:o.jsx(bt,{required:ge.REGISTER_EMPLOYEE,children:o.jsx(iM,{})})}),o.jsx(Je,{path:"cadastro-subcontratados",element:o.jsx(bt,{required:ge.REGISTER_SUBCONTRACTOR,children:o.jsx(oM,{})})}),o.jsx(Je,{path:"cadastro-servicos-contratados",element:o.jsx(bt,{required:ge.REGISTER_CONTRACT_SERVICE,children:o.jsx(lM,{})})}),o.jsx(Je,{path:"cadastro-financiamentos",element:o.jsx(bt,{required:ge.REGISTER_FINANCING,children:o.jsx(cM,{})})}),o.jsx(Je,{path:"cadastro-veiculos",element:o.jsx(bt,{required:ge.REGISTER_VEHICLE,children:o.jsx(uM,{})})}),o.jsx(Je,{path:"cadastro-conta-bancaria",element:o.jsx(bt,{required:ge.REGISTER_BANK_ACCOUNT,children:o.jsx(dM,{})})}),o.jsx(Je,{path:"cadastro-cartao-credito",element:o.jsx(bt,{required:ge.REGISTER_CREDIT_CARD,children:o.jsx(hM,{})})}),o.jsx(Je,{path:"cadastro-tipo-despesa",element:o.jsx(bt,{required:ge.REGISTER_EXPENSE_TYPE,children:o.jsx(fM,{})})}),o.jsx(Je,{path:"cadastro-preco-servico",element:o.jsx(bt,{required:ge.REGISTER_SERVICE_PRICING,children:o.jsx(mM,{})})})]})})}function qM(){function n(){return o.jsx("div",{children:"Register"})}return o.jsx(ek,{children:o.jsxs($w,{children:[o.jsx(Je,{path:Oc.home,element:o.jsx(Up,{})}),o.jsx(Je,{path:Oc.login,element:o.jsx(Up,{})}),o.jsx(Je,{path:Oc.register,element:o.jsx(n,{})}),o.jsx(Je,{path:Oc.forgotPassword,element:o.jsx(yO,{})}),o.jsx(Je,{path:"*",element:o.jsx(Up,{})}),o.jsx(Je,{path:"/admin/*",element:o.jsx(UM,{})})]})})}const BM=({id:n,type:e,title:t,message:r,duration:i=3e3,onClose:c})=>{P.useEffect(()=>{const m=setTimeout(()=>{c(n)},i);return()=>clearTimeout(m)});const d=()=>{switch(e){case"success":return o.jsx(qn,{className:"toast-icon success"});case"error":return o.jsx(al,{className:"toast-icon error"});case"warning":return o.jsx(Cn,{className:"toast-icon warning"});case"info":return o.jsx(V0,{className:"toast-icon info"});default:return o.jsx(V0,{className:"toast-icon info"})}};return o.jsx("div",{className:`toast toast-${e}`,children:o.jsxs("div",{className:"toast-content",children:[d(),o.jsxs("div",{className:"toast-text",children:[o.jsx("h3",{className:"toast-title",children:t}),o.jsx("p",{className:"toast-message",children:r})]}),o.jsx("button",{className:"toast-close",onClick:()=>c(n),"aria-label":"Close toast",children:"x"})]})})},zM=({children:n})=>{const[e,t]=P.useState([]),r=P.useCallback(v=>{const E=Math.random().toString(36).substr(2,9),b={...v,id:E};t(x=>[...x,b])},[]),i=P.useCallback(v=>{t(E=>E.filter(b=>b.id!==v))},[]),c=P.useCallback((v,E,b=5e3)=>{r({type:"success",title:v,message:E,duration:b})},[r]),d=P.useCallback((v,E,b=7e3)=>{r({type:"error",title:v,message:E,duration:b})},[r]),m=P.useCallback((v,E,b=6e3)=>{r({type:"warning",title:v,message:E,duration:b})},[r]),y=P.useCallback((v,E,b=5e3)=>{r({type:"info",title:v,message:E,duration:b})},[r]),p={toasts:e,showToast:r,hideToast:i,showSuccess:c,showError:d,showWarning:m,showInfo:y};return o.jsxs(lA.Provider,{value:p,children:[n,o.jsx("div",{className:"toast-container",children:e.map(v=>o.jsx(BM,{...v,onClose:i},v.id))})]})};function FM(){return o.jsx(zM,{children:o.jsx(V2,{children:o.jsx(qM,{})})})}ZN.createRoot(document.getElementById("root")).render(o.jsx(P.StrictMode,{children:o.jsx(FM,{})}));
