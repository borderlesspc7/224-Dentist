(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();function CN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lp={exports:{}},wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function jN(){if(Rb)return wc;Rb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,i,c){var d=null;if(c!==void 0&&(d=""+c),i.key!==void 0&&(d=""+i.key),"key"in i){c={};for(var m in i)m!=="key"&&(c[m]=i[m])}else c=i;return i=c.ref,{$$typeof:n,type:a,key:d,ref:i!==void 0?i:null,props:c}}return wc.Fragment=e,wc.jsx=t,wc.jsxs=t,wc}var Ib;function DN(){return Ib||(Ib=1,lp.exports=jN()),lp.exports}var l=DN(),cp={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function RN(){if(Pb)return Oe;Pb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=E&&B[E]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function U(B,oe,me){this.props=B,this.context=oe,this.refs=A,this.updater=me||x}U.prototype.isReactComponent={},U.prototype.setState=function(B,oe){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,oe,"setState")},U.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function D(){}D.prototype=U.prototype;function W(B,oe,me){this.props=B,this.context=oe,this.refs=A,this.updater=me||x}var q=W.prototype=new D;q.constructor=W,C(q,U.prototype),q.isPureReactComponent=!0;var se=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},he=Object.prototype.hasOwnProperty;function O(B,oe,me,ue,we,Ve){return me=Ve.ref,{$$typeof:n,type:B,key:oe,ref:me!==void 0?me:null,props:Ve}}function T(B,oe){return O(B.type,oe,void 0,void 0,void 0,B.props)}function I(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function L(B){var oe={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(me){return oe[me]})}var N=/\/+/g;function R(B,oe){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):oe.toString(36)}function P(){}function J(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(P,P):(B.status="pending",B.then(function(oe){B.status==="pending"&&(B.status="fulfilled",B.value=oe)},function(oe){B.status==="pending"&&(B.status="rejected",B.reason=oe)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function de(B,oe,me,ue,we){var Ve=typeof B;(Ve==="undefined"||Ve==="boolean")&&(B=null);var Re=!1;if(B===null)Re=!0;else switch(Ve){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(B.$$typeof){case n:case e:Re=!0;break;case _:return Re=B._init,de(Re(B._payload),oe,me,ue,we)}}if(Re)return we=we(B),Re=ue===""?"."+R(B,0):ue,se(we)?(me="",Re!=null&&(me=Re.replace(N,"$&/")+"/"),de(we,oe,me,"",function(vr){return vr})):we!=null&&(I(we)&&(we=T(we,me+(we.key==null||B&&B.key===we.key?"":(""+we.key).replace(N,"$&/")+"/")+Re)),oe.push(we)),1;Re=0;var Gt=ue===""?".":ue+":";if(se(B))for(var ut=0;ut<B.length;ut++)ue=B[ut],Ve=Gt+R(ue,ut),Re+=de(ue,oe,me,Ve,we);else if(ut=b(B),typeof ut=="function")for(B=ut.call(B),ut=0;!(ue=B.next()).done;)ue=ue.value,Ve=Gt+R(ue,ut++),Re+=de(ue,oe,me,Ve,we);else if(Ve==="object"){if(typeof B.then=="function")return de(J(B),oe,me,ue,we);throw oe=String(B),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Re}function K(B,oe,me){if(B==null)return B;var ue=[],we=0;return de(B,ue,"","",function(Ve){return oe.call(me,Ve,we++)}),ue}function ce(B){if(B._status===-1){var oe=B._result;oe=oe(),oe.then(function(me){(B._status===0||B._status===-1)&&(B._status=1,B._result=me)},function(me){(B._status===0||B._status===-1)&&(B._status=2,B._result=me)}),B._status===-1&&(B._status=0,B._result=oe)}if(B._status===1)return B._result.default;throw B._result}var ye=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function We(){}return Oe.Children={map:K,forEach:function(B,oe,me){K(B,function(){oe.apply(this,arguments)},me)},count:function(B){var oe=0;return K(B,function(){oe++}),oe},toArray:function(B){return K(B,function(oe){return oe})||[]},only:function(B){if(!I(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Oe.Component=U,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=W,Oe.StrictMode=a,Oe.Suspense=y,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return G.H.useMemoCache(B)}},Oe.cache=function(B){return function(){return B.apply(null,arguments)}},Oe.cloneElement=function(B,oe,me){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ue=C({},B.props),we=B.key,Ve=void 0;if(oe!=null)for(Re in oe.ref!==void 0&&(Ve=void 0),oe.key!==void 0&&(we=""+oe.key),oe)!he.call(oe,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&oe.ref===void 0||(ue[Re]=oe[Re]);var Re=arguments.length-2;if(Re===1)ue.children=me;else if(1<Re){for(var Gt=Array(Re),ut=0;ut<Re;ut++)Gt[ut]=arguments[ut+2];ue.children=Gt}return O(B.type,we,void 0,void 0,Ve,ue)},Oe.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:c,_context:B},B},Oe.createElement=function(B,oe,me){var ue,we={},Ve=null;if(oe!=null)for(ue in oe.key!==void 0&&(Ve=""+oe.key),oe)he.call(oe,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(we[ue]=oe[ue]);var Re=arguments.length-2;if(Re===1)we.children=me;else if(1<Re){for(var Gt=Array(Re),ut=0;ut<Re;ut++)Gt[ut]=arguments[ut+2];we.children=Gt}if(B&&B.defaultProps)for(ue in Re=B.defaultProps,Re)we[ue]===void 0&&(we[ue]=Re[ue]);return O(B,Ve,void 0,void 0,null,we)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(B){return{$$typeof:m,render:B}},Oe.isValidElement=I,Oe.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:ce}},Oe.memo=function(B,oe){return{$$typeof:g,type:B,compare:oe===void 0?null:oe}},Oe.startTransition=function(B){var oe=G.T,me={};G.T=me;try{var ue=B(),we=G.S;we!==null&&we(me,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(We,ye)}catch(Ve){ye(Ve)}finally{G.T=oe}},Oe.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Oe.use=function(B){return G.H.use(B)},Oe.useActionState=function(B,oe,me){return G.H.useActionState(B,oe,me)},Oe.useCallback=function(B,oe){return G.H.useCallback(B,oe)},Oe.useContext=function(B){return G.H.useContext(B)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(B,oe){return G.H.useDeferredValue(B,oe)},Oe.useEffect=function(B,oe,me){var ue=G.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(B,oe)},Oe.useId=function(){return G.H.useId()},Oe.useImperativeHandle=function(B,oe,me){return G.H.useImperativeHandle(B,oe,me)},Oe.useInsertionEffect=function(B,oe){return G.H.useInsertionEffect(B,oe)},Oe.useLayoutEffect=function(B,oe){return G.H.useLayoutEffect(B,oe)},Oe.useMemo=function(B,oe){return G.H.useMemo(B,oe)},Oe.useOptimistic=function(B,oe){return G.H.useOptimistic(B,oe)},Oe.useReducer=function(B,oe,me){return G.H.useReducer(B,oe,me)},Oe.useRef=function(B){return G.H.useRef(B)},Oe.useState=function(B){return G.H.useState(B)},Oe.useSyncExternalStore=function(B,oe,me){return G.H.useSyncExternalStore(B,oe,me)},Oe.useTransition=function(){return G.H.useTransition()},Oe.version="19.1.1",Oe}var kb;function fg(){return kb||(kb=1,cp.exports=RN()),cp.exports}var M=fg();const Si=CN(M);var up={exports:{}},Sc={},dp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function IN(){return Ob||(Ob=1,function(n){function e(K,ce){var ye=K.length;K.push(ce);e:for(;0<ye;){var We=ye-1>>>1,B=K[We];if(0<i(B,ce))K[We]=ce,K[ye]=B,ye=We;else break e}}function t(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var ce=K[0],ye=K.pop();if(ye!==ce){K[0]=ye;e:for(var We=0,B=K.length,oe=B>>>1;We<oe;){var me=2*(We+1)-1,ue=K[me],we=me+1,Ve=K[we];if(0>i(ue,ye))we<B&&0>i(Ve,ue)?(K[We]=Ve,K[we]=ye,We=we):(K[We]=ue,K[me]=ye,We=me);else if(we<B&&0>i(Ve,ye))K[We]=Ve,K[we]=ye,We=we;else break e}}return ce}function i(K,ce){var ye=K.sortIndex-ce.sortIndex;return ye!==0?ye:K.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var y=[],g=[],_=1,E=null,b=3,x=!1,C=!1,A=!1,U=!1,D=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function se(K){for(var ce=t(g);ce!==null;){if(ce.callback===null)a(g);else if(ce.startTime<=K)a(g),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=t(g)}}function G(K){if(A=!1,se(K),!C)if(t(y)!==null)C=!0,he||(he=!0,R());else{var ce=t(g);ce!==null&&de(G,ce.startTime-K)}}var he=!1,O=-1,T=5,I=-1;function L(){return U?!0:!(n.unstable_now()-I<T)}function N(){if(U=!1,he){var K=n.unstable_now();I=K;var ce=!0;try{e:{C=!1,A&&(A=!1,W(O),O=-1),x=!0;var ye=b;try{t:{for(se(K),E=t(y);E!==null&&!(E.expirationTime>K&&L());){var We=E.callback;if(typeof We=="function"){E.callback=null,b=E.priorityLevel;var B=We(E.expirationTime<=K);if(K=n.unstable_now(),typeof B=="function"){E.callback=B,se(K),ce=!0;break t}E===t(y)&&a(y),se(K)}else a(y);E=t(y)}if(E!==null)ce=!0;else{var oe=t(g);oe!==null&&de(G,oe.startTime-K),ce=!1}}break e}finally{E=null,b=ye,x=!1}ce=void 0}}finally{ce?R():he=!1}}}var R;if(typeof q=="function")R=function(){q(N)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,J=P.port2;P.port1.onmessage=N,R=function(){J.postMessage(null)}}else R=function(){D(N,0)};function de(K,ce){O=D(function(){K(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var ce=3;break;default:ce=b}var ye=b;b=ce;try{return K()}finally{b=ye}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(K,ce){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ye=b;b=K;try{return ce()}finally{b=ye}},n.unstable_scheduleCallback=function(K,ce,ye){var We=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?We+ye:We):ye=We,K){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ye+B,K={id:_++,callback:ce,priorityLevel:K,startTime:ye,expirationTime:B,sortIndex:-1},ye>We?(K.sortIndex=ye,e(g,K),t(y)===null&&K===t(g)&&(A?(W(O),O=-1):A=!0,de(G,ye-We))):(K.sortIndex=B,e(y,K),C||x||(C=!0,he||(he=!0,R()))),K},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(K){var ce=b;return function(){var ye=b;b=ce;try{return K.apply(this,arguments)}finally{b=ye}}}}(hp)),hp}var Mb;function PN(){return Mb||(Mb=1,dp.exports=IN()),dp.exports}var fp={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function kN(){if(Lb)return cn;Lb=1;var n=fg();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(y,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:y,containerInfo:g,implementation:_}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,cn.createPortal=function(y,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(y,g,null,_)},cn.flushSync=function(y){var g=d.T,_=a.p;try{if(d.T=null,a.p=2,y)return y()}finally{d.T=g,a.p=_,a.d.f()}},cn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(y,g))},cn.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},cn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var _=g.as,E=m(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?a.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:x}):_==="script"&&a.d.X(y,{crossOrigin:E,integrity:b,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);a.d.M(y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(y)},cn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=m(_,g.crossOrigin);a.d.L(y,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(y,g){if(typeof y=="string")if(g){var _=m(g.as,g.crossOrigin);a.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(y)},cn.requestFormReset=function(y){a.d.r(y)},cn.unstable_batchedUpdates=function(y,g){return y(g)},cn.useFormState=function(y,g,_){return d.H.useFormState(y,g,_)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var Vb;function ON(){if(Vb)return fp.exports;Vb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fp.exports=kN(),fp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function MN(){if(Ub)return Sc;Ub=1;var n=PN(),e=fg(),t=ON();function a(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function d(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(c(r)!==r)throw Error(a(188))}function y(r){var s=r.alternate;if(!s){if(s=c(r),s===null)throw Error(a(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),r;if(p===u)return m(f),s;p=p.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=p;else{for(var S=!1,j=f.child;j;){if(j===o){S=!0,o=f,u=p;break}if(j===u){S=!0,u=f,o=p;break}j=j.sibling}if(!S){for(j=p.child;j;){if(j===o){S=!0,o=p,u=f;break}if(j===u){S=!0,u=p,o=f;break}j=j.sibling}if(!S)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function R(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function J(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case U:return"Profiler";case A:return"StrictMode";case G:return"Suspense";case he:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case q:return(r.displayName||"Context")+".Provider";case W:return(r._context.displayName||"Context")+".Consumer";case se:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return s=r.displayName||null,s!==null?s:J(r.type)||"Memo";case T:s=r._payload,r=r._init;try{return J(r(s))}catch{}}return null}var de=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},We=[],B=-1;function oe(r){return{current:r}}function me(r){0>B||(r.current=We[B],We[B]=null,B--)}function ue(r,s){B++,We[B]=r.current,r.current=s}var we=oe(null),Ve=oe(null),Re=oe(null),Gt=oe(null);function ut(r,s){switch(ue(Re,s),ue(Ve,r),ue(we,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?sb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=sb(s),r=ib(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}me(we),ue(we,r)}function vr(){me(we),me(Ve),me(Re)}function Oa(r){r.memoizedState!==null&&ue(Gt,r);var s=we.current,o=ib(s,r.type);s!==o&&(ue(Ve,r),ue(we,o))}function Xr(r){Ve.current===r&&(me(we),me(Ve)),Gt.current===r&&(me(Gt),vc._currentValue=ye)}var Ms=Object.prototype.hasOwnProperty,Ls=n.unstable_scheduleCallback,Vs=n.unstable_cancelCallback,pl=n.unstable_shouldYield,mu=n.unstable_requestPaint,Ln=n.unstable_now,lf=n.unstable_getCurrentPriorityLevel,gl=n.unstable_ImmediatePriority,Hi=n.unstable_UserBlockingPriority,Us=n.unstable_NormalPriority,cf=n.unstable_LowPriority,Gi=n.unstable_IdlePriority,yl=n.log,pu=n.unstable_setDisableYieldValue,xt=null,nt=null;function Nn(r){if(typeof yl=="function"&&pu(r),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(xt,r)}catch{}}var on=Math.clz32?Math.clz32:qs,gu=Math.log,uf=Math.LN2;function qs(r){return r>>>=0,r===0?32:31-(gu(r)/uf|0)|0}var Bs=256,zs=4194304;function nr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function $i(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,p=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var j=u&134217727;return j!==0?(u=j&~p,u!==0?f=nr(u):(S&=j,S!==0?f=nr(S):o||(o=j&~r,o!==0&&(f=nr(o))))):(j=u&~p,j!==0?f=nr(j):S!==0?f=nr(S):o||(o=u&~r,o!==0&&(f=nr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Fs(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function vl(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _l(){var r=Bs;return Bs<<=1,(Bs&4194048)===0&&(Bs=256),r}function bl(){var r=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),r}function Wr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Zr(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function xl(r,s,o,u,f,p){var S=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var j=r.entanglements,V=r.expirationTimes,Q=r.hiddenUpdates;for(o=S&~o;0<o;){var ee=31-on(o),re=1<<ee;j[ee]=0,V[ee]=-1;var Y=Q[ee];if(Y!==null)for(Q[ee]=null,ee=0;ee<Y.length;ee++){var X=Y[ee];X!==null&&(X.lane&=-536870913)}o&=~re}u!==0&&_r(r,u,0),p!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=p&~(S&~s))}function _r(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-on(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function El(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-on(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function Ma(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Qi(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function La(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:Ab(r.type))}function yu(r,s){var o=ce.p;try{return ce.p=r,s()}finally{ce.p=o}}var pt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+pt,Dt="__reactProps$"+pt,Vn="__reactContainer$"+pt,wl="__reactEvents$"+pt,df="__reactListeners$"+pt,Va="__reactHandles$"+pt,vu="__reactResources$"+pt,Hs="__reactMarker$"+pt;function Ua(r){delete r[Lt],delete r[Dt],delete r[wl],delete r[df],delete r[Va]}function Jr(r){var s=r[Lt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Vn]||o[Lt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=ub(r);r!==null;){if(o=r[Lt])return o;r=ub(r)}return s}r=o,o=r.parentNode}return null}function br(r){if(r=r[Lt]||r[Vn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function xr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(a(33))}function mn(r){var s=r[vu];return s||(s=r[vu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function St(r){r[Hs]=!0}var Sl=new Set,Ki={};function rr(r,s){ea(r,s),ea(r+"Capture",s)}function ea(r,s){for(Ki[r]=s,r=0;r<s.length;r++)Sl.add(s[r])}var _u=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bu={},Gs={};function xu(r){return Ms.call(Gs,r)?!0:Ms.call(bu,r)?!1:_u.test(r)?Gs[r]=!0:(bu[r]=!0,!1)}function qa(r,s,o){if(xu(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Er(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Zt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var $s,Eu;function ta(r){if($s===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);$s=s&&s[1]||"",Eu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$s+r+Eu}var Yi=!1;function Xi(r,s){if(!r||Yi)return"";Yi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var Y=X}Reflect.construct(r,[],re)}else{try{re.call()}catch(X){Y=X}r.call(re.prototype)}}else{try{throw Error()}catch(X){Y=X}(re=r())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),S=p[0],j=p[1];if(S&&j){var V=S.split(`
`),Q=j.split(`
`);for(f=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(u===V.length||f===Q.length)for(u=V.length-1,f=Q.length-1;1<=u&&0<=f&&V[u]!==Q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(V[u]!==Q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||V[u]!==Q[f]){var ee=`
`+V[u].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=u&&0<=f);break}}}finally{Yi=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?ta(o):""}function Al(r){switch(r.tag){case 26:case 27:case 5:return ta(r.type);case 16:return ta("Lazy");case 13:return ta("Suspense");case 19:return ta("SuspenseList");case 0:case 15:return Xi(r.type,!1);case 11:return Xi(r.type.render,!1);case 1:return Xi(r.type,!0);case 31:return ta("Activity");default:return""}}function Wi(r){try{var s="";do s+=Al(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function pn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Nl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hf(r){var s=Nl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(S){u=""+S,p.call(this,S)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Zi(r){r._valueTracker||(r._valueTracker=hf(r))}function Tl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Nl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Qs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ff=/[\n"\\]/g;function Rt(r){return r.replace(ff,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Tn(r,s,o,u,f,p,S,j){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),s!=null?S==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+pn(s)):r.value!==""+pn(s)&&(r.value=""+pn(s)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),s!=null?Ba(r,S,pn(s)):o!=null?Ba(r,S,pn(o)):u!=null&&r.removeAttribute("value"),f==null&&p!=null&&(r.defaultChecked=!!p),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?r.name=""+pn(j):r.removeAttribute("name")}function Ks(r,s,o,u,f,p,S,j){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+pn(o):"",s=s!=null?""+pn(s):o,j||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=j?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S)}function Ba(r,s,o){s==="number"&&Qs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function na(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+pn(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function st(r,s,o){if(s!=null&&(s=""+pn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+pn(o):""}function Ys(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(a(92));if(de(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=pn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Un(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||Xs.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Cl(r,s,o){if(s!=null&&typeof s!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&wu(r,f,u)}else for(var p in s)s.hasOwnProperty(p)&&wu(r,p,s[p])}function jl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ji(r){return pf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ra=null;function qn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var aa=null,sa=null;function Dl(r){var s=br(r);if(s&&(r=s.stateNode)){var o=r[Dt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Tn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Rt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[Dt]||null;if(!f)throw Error(a(90));Tn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Tl(u)}break e;case"textarea":st(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&na(r,!!o.multiple,s,!1)}}}var wr=!1;function Su(r,s,o){if(wr)return r(s,o);wr=!0;try{var u=r(s);return u}finally{if(wr=!1,(aa!==null||sa!==null)&&(yd(),aa&&(s=aa,r=sa,sa=aa=null,Dl(s),r)))for(s=0;s<r.length;s++)Dl(r[s])}}function Ws(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Dt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,s,typeof o));return o}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bn=!1;if(ar)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Bn=!1}var Sr=null,za=null,ia=null;function Rl(){if(ia)return ia;var r,s=za,o=s.length,u,f="value"in Sr?Sr.value:Sr.textContent,p=f.length;for(r=0;r<o&&s[r]===f[r];r++);var S=o-r;for(u=1;u<=S&&s[o-u]===f[p-u];u++);return ia=f.slice(r,1<u?1-u:void 0)}function Ar(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Nr(){return!0}function Il(){return!1}function $t(r){function s(o,u,f,p,S){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=S,this.currentTarget=null;for(var j in r)r.hasOwnProperty(j)&&(o=r[j],this[j]=o?o(p):p[j]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Nr:Il,this.isPropagationStopped=Il,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=$t(et),Js=_({},et,{view:0,detail:0}),Au=$t(Js),to,no,Tr,ei=_({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ri,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Tr&&(Tr&&r.type==="mousemove"?(to=r.screenX-Tr.screenX,no=r.screenY-Tr.screenY):no=to=0,Tr=r),to)},movementY:function(r){return"movementY"in r?r.movementY:no}}),zn=$t(ei),Nu=_({},ei,{dataTransfer:0}),gf=$t(Nu),ti=_({},Js,{relatedTarget:0}),ro=$t(ti),Pl=_({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),ao=$t(Pl),Tu=_({},et,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),so=$t(Tu),yf=_({},et,{data:0}),kl=$t(yf),ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ju[r])?!!s[r]:!1}function ri(){return Ol}var Du=_({},Js,{key:function(r){if(r.key){var s=ni[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ar(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ri,charCode:function(r){return r.type==="keypress"?Ar(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ar(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),io=$t(Du),Ru=_({},ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ml=$t(Ru),oa=_({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ri}),Iu=$t(oa),Pu=_({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),ku=$t(Pu),Ou=_({},ei,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),oo=$t(Ou),gn=_({},et,{newState:0,oldState:0}),Mu=$t(gn),Lu=[9,13,27,32],Cr=ar&&"CompositionEvent"in window,h=null;ar&&"documentMode"in document&&(h=document.documentMode);var v=ar&&"TextEvent"in window&&!h,w=ar&&(!Cr||h&&8<h&&11>=h),k=" ",H=!1;function Z(r,s){switch(r){case"keyup":return Lu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var $e=!1;function Vt(r,s){switch(r){case"compositionend":return fe(s);case"keypress":return s.which!==32?null:(H=!0,k);case"textInput":return r=s.data,r===k&&H?null:r;default:return null}}function Qe(r,s){if($e)return r==="compositionend"||!Cr&&Z(r,s)?(r=Rl(),ia=za=Sr=null,$e=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var Qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Qt[r.type]:s==="textarea"}function la(r,s,o,u){aa?sa?sa.push(u):sa=[u]:aa=u,s=wd(s,"onChange"),0<s.length&&(o=new eo("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Jt=null,jr=null;function Ll(r){eb(r,0)}function Vu(r){var s=xr(r);if(Tl(s))return r}function xy(r,s){if(r==="change")return s}var Ey=!1;if(ar){var vf;if(ar){var _f="oninput"in document;if(!_f){var wy=document.createElement("div");wy.setAttribute("oninput","return;"),_f=typeof wy.oninput=="function"}vf=_f}else vf=!1;Ey=vf&&(!document.documentMode||9<document.documentMode)}function Sy(){Jt&&(Jt.detachEvent("onpropertychange",Ay),jr=Jt=null)}function Ay(r){if(r.propertyName==="value"&&Vu(jr)){var s=[];la(s,jr,r,qn(r)),Su(Ll,s)}}function aA(r,s,o){r==="focusin"?(Sy(),Jt=s,jr=o,Jt.attachEvent("onpropertychange",Ay)):r==="focusout"&&Sy()}function sA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Vu(jr)}function iA(r,s){if(r==="click")return Vu(s)}function oA(r,s){if(r==="input"||r==="change")return Vu(s)}function lA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Cn=typeof Object.is=="function"?Object.is:lA;function Vl(r,s){if(Cn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ms.call(s,f)||!Cn(r[f],s[f]))return!1}return!0}function Ny(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ty(r,s){var o=Ny(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ny(o)}}function Cy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Cy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function jy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Qs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Qs(r.document)}return s}function bf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var cA=ar&&"documentMode"in document&&11>=document.documentMode,lo=null,xf=null,Ul=null,Ef=!1;function Dy(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ef||lo==null||lo!==Qs(u)||(u=lo,"selectionStart"in u&&bf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ul&&Vl(Ul,u)||(Ul=u,u=wd(xf,"onSelect"),0<u.length&&(s=new eo("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=lo)))}function ai(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var co={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionrun:ai("Transition","TransitionRun"),transitionstart:ai("Transition","TransitionStart"),transitioncancel:ai("Transition","TransitionCancel"),transitionend:ai("Transition","TransitionEnd")},wf={},Ry={};ar&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function si(r){if(wf[r])return wf[r];if(!co[r])return r;var s=co[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ry)return wf[r]=s[o];return r}var Iy=si("animationend"),Py=si("animationiteration"),ky=si("animationstart"),uA=si("transitionrun"),dA=si("transitionstart"),hA=si("transitioncancel"),Oy=si("transitionend"),My=new Map,Sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sf.push("scrollEnd");function sr(r,s){My.set(r,s),rr(s,[r])}var Ly=new WeakMap;function Fn(r,s){if(typeof r=="object"&&r!==null){var o=Ly.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Wi(s)},Ly.set(r,s),s)}return{value:r,source:s,stack:Wi(s)}}var Hn=[],uo=0,Af=0;function Uu(){for(var r=uo,s=Af=uo=0;s<r;){var o=Hn[s];Hn[s++]=null;var u=Hn[s];Hn[s++]=null;var f=Hn[s];Hn[s++]=null;var p=Hn[s];if(Hn[s++]=null,u!==null&&f!==null){var S=u.pending;S===null?f.next=f:(f.next=S.next,S.next=f),u.pending=f}p!==0&&Vy(o,f,p)}}function qu(r,s,o,u){Hn[uo++]=r,Hn[uo++]=s,Hn[uo++]=o,Hn[uo++]=u,Af|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Nf(r,s,o,u){return qu(r,s,o,u),Bu(r)}function ho(r,s){return qu(r,null,null,s),Bu(r)}function Vy(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(f=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,f&&s!==null&&(f=31-on(o),r=p.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Bu(r){if(50<uc)throw uc=0,Im=null,Error(a(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var fo={};function fA(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(r,s,o,u){return new fA(r,s,o,u)}function Tf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ca(r,s){var o=r.alternate;return o===null?(o=jn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Uy(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function zu(r,s,o,u,f,p){var S=0;if(u=r,typeof r=="function")Tf(r)&&(S=1);else if(typeof r=="string")S=pN(r,o,we.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=jn(31,o,s,f),r.elementType=I,r.lanes=p,r;case C:return ii(o.children,f,p,s);case A:S=8,f|=24;break;case U:return r=jn(12,o,s,f|2),r.elementType=U,r.lanes=p,r;case G:return r=jn(13,o,s,f),r.elementType=G,r.lanes=p,r;case he:return r=jn(19,o,s,f),r.elementType=he,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:case q:S=10;break e;case W:S=9;break e;case se:S=11;break e;case O:S=14;break e;case T:S=16,u=null;break e}S=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return s=jn(S,o,s,f),s.elementType=r,s.type=u,s.lanes=p,s}function ii(r,s,o,u){return r=jn(7,r,u,s),r.lanes=o,r}function Cf(r,s,o){return r=jn(6,r,null,s),r.lanes=o,r}function jf(r,s,o){return s=jn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var mo=[],po=0,Fu=null,Hu=0,Gn=[],$n=0,oi=null,ua=1,da="";function li(r,s){mo[po++]=Hu,mo[po++]=Fu,Fu=r,Hu=s}function qy(r,s,o){Gn[$n++]=ua,Gn[$n++]=da,Gn[$n++]=oi,oi=r;var u=ua;r=da;var f=32-on(u)-1;u&=~(1<<f),o+=1;var p=32-on(s)+f;if(30<p){var S=f-f%5;p=(u&(1<<S)-1).toString(32),u>>=S,f-=S,ua=1<<32-on(s)+f|o<<f|u,da=p+r}else ua=1<<p|o<<f|u,da=r}function Df(r){r.return!==null&&(li(r,1),qy(r,1,0))}function Rf(r){for(;r===Fu;)Fu=mo[--po],mo[po]=null,Hu=mo[--po],mo[po]=null;for(;r===oi;)oi=Gn[--$n],Gn[$n]=null,da=Gn[--$n],Gn[$n]=null,ua=Gn[--$n],Gn[$n]=null}var yn=null,Et=null,Ze=!1,ci=null,Dr=!1,If=Error(a(519));function ui(r){var s=Error(a(418,""));throw zl(Fn(s,r)),If}function By(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Lt]=r,s[Dt]=u,o){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(o=0;o<hc.length;o++)Be(hc[o],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),Ks(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Zi(s);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),Ys(s,u.value,u.defaultValue,u.children),Zi(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||ab(s.textContent,o)?(u.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),u.onScroll!=null&&Be("scroll",s),u.onScrollEnd!=null&&Be("scrollend",s),u.onClick!=null&&(s.onclick=Sd),s=!0):s=!1,s||ui(r)}function zy(r){for(yn=r.return;yn;)switch(yn.tag){case 5:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:yn=yn.return}}function ql(r){if(r!==yn)return!1;if(!Ze)return zy(r),Ze=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Km(r.type,r.memoizedProps)),o=!o),o&&Et&&ui(r),zy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Et=or(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Et=null}}else s===27?(s=Et,as(r.type)?(r=Zm,Zm=null,Et=r):Et=s):Et=yn?or(r.stateNode.nextSibling):null;return!0}function Bl(){Et=yn=null,Ze=!1}function Fy(){var r=ci;return r!==null&&(xn===null?xn=r:xn.push.apply(xn,r),ci=null),r}function zl(r){ci===null?ci=[r]:ci.push(r)}var Pf=oe(null),di=null,ha=null;function Fa(r,s,o){ue(Pf,s._currentValue),s._currentValue=o}function fa(r){r._currentValue=Pf.current,me(Pf)}function kf(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Of(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var p=f.dependencies;if(p!==null){var S=f.child;p=p.firstContext;e:for(;p!==null;){var j=p;p=f;for(var V=0;V<s.length;V++)if(j.context===s[V]){p.lanes|=o,j=p.alternate,j!==null&&(j.lanes|=o),kf(p.return,o,r),u||(S=null);break e}p=j.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(a(341));S.lanes|=o,p=S.alternate,p!==null&&(p.lanes|=o),kf(S,o,r),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===r){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function Fl(r,s,o,u){r=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var j=f.type;Cn(f.pendingProps.value,S.value)||(r!==null?r.push(j):r=[j])}}else if(f===Gt.current){if(S=f.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(vc):r=[vc])}f=f.return}r!==null&&Of(s,r,o,u),s.flags|=262144}function Gu(r){for(r=r.firstContext;r!==null;){if(!Cn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function hi(r){di=r,ha=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ln(r){return Hy(di,r)}function $u(r,s){return di===null&&hi(r),Hy(r,s)}function Hy(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ha===null){if(r===null)throw Error(a(308));ha=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ha=ha.next=s;return o}var mA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},pA=n.unstable_scheduleCallback,gA=n.unstable_NormalPriority,qt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new mA,data:new Map,refCount:0}}function Hl(r){r.refCount--,r.refCount===0&&pA(gA,function(){r.controller.abort()})}var Gl=null,Lf=0,go=0,yo=null;function yA(r,s){if(Gl===null){var o=Gl=[];Lf=0,go=Um(),yo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Lf++,s.then(Gy,Gy),s}function Gy(){if(--Lf===0&&Gl!==null){yo!==null&&(yo.status="fulfilled");var r=Gl;Gl=null,go=0,yo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function vA(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var $y=K.S;K.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&yA(r,s),$y!==null&&$y(r,s)};var fi=oe(null);function Vf(){var r=fi.current;return r!==null?r:dt.pooledCache}function Qu(r,s){s===null?ue(fi,fi.current):ue(fi,s.pool)}function Qy(){var r=Vf();return r===null?null:{parent:qt._currentValue,pool:r}}var $l=Error(a(460)),Ky=Error(a(474)),Ku=Error(a(542)),Uf={then:function(){}};function Yy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Yu(){}function Xy(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Yu,Yu),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Zy(r),r;default:if(typeof s.status=="string")s.then(Yu,Yu);else{if(r=dt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Zy(r),r}throw Ql=s,$l}}var Ql=null;function Wy(){if(Ql===null)throw Error(a(459));var r=Ql;return Ql=null,r}function Zy(r){if(r===$l||r===Ku)throw Error(a(483))}var Ha=!1;function qf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ga(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function $a(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(rt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Bu(r),Vy(r,null,o),s}return qu(r,u,s,o),Bu(r)}function Kl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,El(r,o)}}function zf(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=S:p=p.next=S,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Ff=!1;function Yl(){if(Ff){var r=yo;if(r!==null)throw r}}function Xl(r,s,o,u){Ff=!1;var f=r.updateQueue;Ha=!1;var p=f.firstBaseUpdate,S=f.lastBaseUpdate,j=f.shared.pending;if(j!==null){f.shared.pending=null;var V=j,Q=V.next;V.next=null,S===null?p=Q:S.next=Q,S=V;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,j=ee.lastBaseUpdate,j!==S&&(j===null?ee.firstBaseUpdate=Q:j.next=Q,ee.lastBaseUpdate=V))}if(p!==null){var re=f.baseState;S=0,ee=Q=V=null,j=p;do{var Y=j.lane&-536870913,X=Y!==j.lane;if(X?(Ke&Y)===Y:(u&Y)===Y){Y!==0&&Y===go&&(Ff=!0),ee!==null&&(ee=ee.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var De=r,Se=j;Y=s;var lt=o;switch(Se.tag){case 1:if(De=Se.payload,typeof De=="function"){re=De.call(lt,re,Y);break e}re=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Se.payload,Y=typeof De=="function"?De.call(lt,re,Y):De,Y==null)break e;re=_({},re,Y);break e;case 2:Ha=!0}}Y=j.callback,Y!==null&&(r.flags|=64,X&&(r.flags|=8192),X=f.callbacks,X===null?f.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ee===null?(Q=ee=X,V=re):ee=ee.next=X,S|=Y;if(j=j.next,j===null){if(j=f.shared.pending,j===null)break;X=j,j=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);ee===null&&(V=re),f.baseState=V,f.firstBaseUpdate=Q,f.lastBaseUpdate=ee,p===null&&(f.shared.lanes=0),es|=S,r.lanes=S,r.memoizedState=re}}function Jy(r,s){if(typeof r!="function")throw Error(a(191,r));r.call(s)}function ev(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Jy(o[r],s)}var vo=oe(null),Xu=oe(0);function tv(r,s){r=ba,ue(Xu,r),ue(vo,s),ba=r|s.baseLanes}function Hf(){ue(Xu,ba),ue(vo,vo.current)}function Gf(){ba=Xu.current,me(vo),me(Xu)}var Qa=0,Le=null,it=null,It=null,Wu=!1,_o=!1,mi=!1,Zu=0,Wl=0,bo=null,_A=0;function At(){throw Error(a(321))}function $f(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Cn(r[o],s[o]))return!1;return!0}function Qf(r,s,o,u,f,p){return Qa=p,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=r===null||r.memoizedState===null?Vv:Uv,mi=!1,p=o(u,f),mi=!1,_o&&(p=rv(s,o,u,f)),nv(r),p}function nv(r){K.H=ad;var s=it!==null&&it.next!==null;if(Qa=0,It=it=Le=null,Wu=!1,Wl=0,bo=null,s)throw Error(a(300));r===null||Kt||(r=r.dependencies,r!==null&&Gu(r)&&(Kt=!0))}function rv(r,s,o,u){Le=r;var f=0;do{if(_o&&(bo=null),Wl=0,_o=!1,25<=f)throw Error(a(301));if(f+=1,It=it=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}K.H=NA,p=s(o,u)}while(_o);return p}function bA(){var r=K.H,s=r.useState()[0];return s=typeof s.then=="function"?Zl(s):s,r=r.useState()[0],(it!==null?it.memoizedState:null)!==r&&(Le.flags|=1024),s}function Kf(){var r=Zu!==0;return Zu=0,r}function Yf(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Xf(r){if(Wu){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wu=!1}Qa=0,It=it=Le=null,_o=!1,Wl=Zu=0,bo=null}function _n(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Le.memoizedState=It=r:It=It.next=r,It}function Pt(){if(it===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=it.next;var s=It===null?Le.memoizedState:It.next;if(s!==null)It=s,it=r;else{if(r===null)throw Le.alternate===null?Error(a(467)):Error(a(310));it=r,r={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},It===null?Le.memoizedState=It=r:It=It.next=r}return It}function Wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(r){var s=Wl;return Wl+=1,bo===null&&(bo=[]),r=Xy(bo,r,s),s=Le,(It===null?s.memoizedState:It.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?Vv:Uv),r}function Ju(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Zl(r);if(r.$$typeof===q)return ln(r)}throw Error(a(438,String(r)))}function Zf(r){var s=null,o=Le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Wf(),Le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=L;return s.index++,o}function ma(r,s){return typeof s=="function"?s(r):s}function ed(r){var s=Pt();return Jf(s,it,r)}function Jf(r,s,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,p=u.pending;if(p!==null){if(f!==null){var S=f.next;f.next=p.next,p.next=S}s.baseQueue=f=p,u.pending=null}if(p=r.baseState,f===null)r.memoizedState=p;else{s=f.next;var j=S=null,V=null,Q=s,ee=!1;do{var re=Q.lane&-536870913;if(re!==Q.lane?(Ke&re)===re:(Qa&re)===re){var Y=Q.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),re===go&&(ee=!0);else if((Qa&Y)===Y){Q=Q.next,Y===go&&(ee=!0);continue}else re={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(j=V=re,S=p):V=V.next=re,Le.lanes|=Y,es|=Y;re=Q.action,mi&&o(p,re),p=Q.hasEagerState?Q.eagerState:o(p,re)}else Y={lane:re,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(j=V=Y,S=p):V=V.next=Y,Le.lanes|=re,es|=re;Q=Q.next}while(Q!==null&&Q!==s);if(V===null?S=p:V.next=j,!Cn(p,r.memoizedState)&&(Kt=!0,ee&&(o=yo,o!==null)))throw o;r.memoizedState=p,r.baseState=S,r.baseQueue=V,u.lastRenderedState=p}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function em(r){var s=Pt(),o=s.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var S=f=f.next;do p=r(p,S.action),S=S.next;while(S!==f);Cn(p,s.memoizedState)||(Kt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function av(r,s,o){var u=Le,f=Pt(),p=Ze;if(p){if(o===void 0)throw Error(a(407));o=o()}else o=s();var S=!Cn((it||f).memoizedState,o);S&&(f.memoizedState=o,Kt=!0),f=f.queue;var j=ov.bind(null,u,f,r);if(Jl(2048,8,j,[r]),f.getSnapshot!==s||S||It!==null&&It.memoizedState.tag&1){if(u.flags|=2048,xo(9,td(),iv.bind(null,u,f,o,s),null),dt===null)throw Error(a(349));p||(Qa&124)!==0||sv(u,s,o)}return o}function sv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Le.updateQueue,s===null?(s=Wf(),Le.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function iv(r,s,o,u){s.value=o,s.getSnapshot=u,lv(s)&&cv(r)}function ov(r,s,o){return o(function(){lv(s)&&cv(r)})}function lv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Cn(r,o)}catch{return!0}}function cv(r){var s=ho(r,2);s!==null&&kn(s,r,2)}function tm(r){var s=_n();if(typeof r=="function"){var o=r;if(r=o(),mi){Nn(!0);try{o()}finally{Nn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:r},s}function uv(r,s,o,u){return r.baseState=o,Jf(r,it,typeof u=="function"?u:ma)}function xA(r,s,o,u,f){if(rd(r))throw Error(a(485));if(r=s.action,r!==null){var p={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){p.listeners.push(S)}};K.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,dv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function dv(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var p=K.T,S={};K.T=S;try{var j=o(f,u),V=K.S;V!==null&&V(S,j),hv(r,s,j)}catch(Q){nm(r,s,Q)}finally{K.T=p}}else try{p=o(f,u),hv(r,s,p)}catch(Q){nm(r,s,Q)}}function hv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){fv(r,s,u)},function(u){return nm(r,s,u)}):fv(r,s,o)}function fv(r,s,o){s.status="fulfilled",s.value=o,mv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,dv(r,o)))}function nm(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,mv(s),s=s.next;while(s!==u)}r.action=null}function mv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function pv(r,s){return s}function gv(r,s){if(Ze){var o=dt.formState;if(o!==null){e:{var u=Le;if(Ze){if(Et){t:{for(var f=Et,p=Dr;f.nodeType!==8;){if(!p){f=null;break t}if(f=or(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Et=or(f.nextSibling),u=f.data==="F!";break e}}ui(u)}u=!1}u&&(s=o[0])}}return o=_n(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:s},o.queue=u,o=Ov.bind(null,Le,u),u.dispatch=o,u=tm(!1),p=om.bind(null,Le,!1,u.queue),u=_n(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=xA.bind(null,Le,f,p,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function yv(r){var s=Pt();return vv(s,it,r)}function vv(r,s,o){if(s=Jf(r,s,pv)[0],r=ed(ma)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Zl(s)}catch(S){throw S===$l?Ku:S}else u=s;s=Pt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Le.flags|=2048,xo(9,td(),EA.bind(null,f,o),null)),[u,p,r]}function EA(r,s){r.action=s}function _v(r){var s=Pt(),o=it;if(o!==null)return vv(s,o,r);Pt(),s=s.memoizedState,o=Pt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function xo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Le.updateQueue,s===null&&(s=Wf(),Le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function td(){return{destroy:void 0,resource:void 0}}function bv(){return Pt().memoizedState}function nd(r,s,o,u){var f=_n();u=u===void 0?null:u,Le.flags|=r,f.memoizedState=xo(1|s,td(),o,u)}function Jl(r,s,o,u){var f=Pt();u=u===void 0?null:u;var p=f.memoizedState.inst;it!==null&&u!==null&&$f(u,it.memoizedState.deps)?f.memoizedState=xo(s,p,o,u):(Le.flags|=r,f.memoizedState=xo(1|s,p,o,u))}function xv(r,s){nd(8390656,8,r,s)}function Ev(r,s){Jl(2048,8,r,s)}function wv(r,s){return Jl(4,2,r,s)}function Sv(r,s){return Jl(4,4,r,s)}function Av(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Nv(r,s,o){o=o!=null?o.concat([r]):null,Jl(4,4,Av.bind(null,s,r),o)}function rm(){}function Tv(r,s){var o=Pt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&$f(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Cv(r,s){var o=Pt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&$f(s,u[1]))return u[0];if(u=r(),mi){Nn(!0);try{r()}finally{Nn(!1)}}return o.memoizedState=[u,s],u}function am(r,s,o){return o===void 0||(Qa&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=R_(),Le.lanes|=r,es|=r,o)}function jv(r,s,o,u){return Cn(o,s)?o:vo.current!==null?(r=am(r,o,u),Cn(r,s)||(Kt=!0),r):(Qa&42)===0?(Kt=!0,r.memoizedState=o):(r=R_(),Le.lanes|=r,es|=r,s)}function Dv(r,s,o,u,f){var p=ce.p;ce.p=p!==0&&8>p?p:8;var S=K.T,j={};K.T=j,om(r,!1,s,o);try{var V=f(),Q=K.S;if(Q!==null&&Q(j,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ee=vA(V,u);ec(r,s,ee,Pn(r))}else ec(r,s,u,Pn(r))}catch(re){ec(r,s,{then:function(){},status:"rejected",reason:re},Pn())}finally{ce.p=p,K.T=S}}function wA(){}function sm(r,s,o,u){if(r.tag!==5)throw Error(a(476));var f=Rv(r).queue;Dv(r,f,s,ye,o===null?wA:function(){return Iv(r),o(u)})}function Rv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:ye},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Iv(r){var s=Rv(r).next.queue;ec(r,s,{},Pn())}function im(){return ln(vc)}function Pv(){return Pt().memoizedState}function kv(){return Pt().memoizedState}function SA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Pn();r=Ga(o);var u=$a(s,r,o);u!==null&&(kn(u,s,o),Kl(u,s,o)),s={cache:Mf()},r.payload=s;return}s=s.return}}function AA(r,s,o){var u=Pn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},rd(r)?Mv(s,o):(o=Nf(r,s,o,u),o!==null&&(kn(o,r,u),Lv(o,s,u)))}function Ov(r,s,o){var u=Pn();ec(r,s,o,u)}function ec(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(rd(r))Mv(s,f);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var S=s.lastRenderedState,j=p(S,o);if(f.hasEagerState=!0,f.eagerState=j,Cn(j,S))return qu(r,s,f,0),dt===null&&Uu(),!1}catch{}finally{}if(o=Nf(r,s,f,u),o!==null)return kn(o,r,u),Lv(o,s,u),!0}return!1}function om(r,s,o,u){if(u={lane:2,revertLane:Um(),action:u,hasEagerState:!1,eagerState:null,next:null},rd(r)){if(s)throw Error(a(479))}else s=Nf(r,o,u,2),s!==null&&kn(s,r,2)}function rd(r){var s=r.alternate;return r===Le||s!==null&&s===Le}function Mv(r,s){_o=Wu=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Lv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,El(r,o)}}var ad={readContext:ln,use:Ju,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Vv={readContext:ln,use:Ju,useCallback:function(r,s){return _n().memoizedState=[r,s===void 0?null:s],r},useContext:ln,useEffect:xv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,nd(4194308,4,Av.bind(null,s,r),o)},useLayoutEffect:function(r,s){return nd(4194308,4,r,s)},useInsertionEffect:function(r,s){nd(4,2,r,s)},useMemo:function(r,s){var o=_n();s=s===void 0?null:s;var u=r();if(mi){Nn(!0);try{r()}finally{Nn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=_n();if(o!==void 0){var f=o(s);if(mi){Nn(!0);try{o(s)}finally{Nn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=AA.bind(null,Le,r),[u.memoizedState,r]},useRef:function(r){var s=_n();return r={current:r},s.memoizedState=r},useState:function(r){r=tm(r);var s=r.queue,o=Ov.bind(null,Le,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:rm,useDeferredValue:function(r,s){var o=_n();return am(o,r,s)},useTransition:function(){var r=tm(!1);return r=Dv.bind(null,Le,r.queue,!0,!1),_n().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Le,f=_n();if(Ze){if(o===void 0)throw Error(a(407));o=o()}else{if(o=s(),dt===null)throw Error(a(349));(Ke&124)!==0||sv(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,xv(ov.bind(null,u,p,r),[r]),u.flags|=2048,xo(9,td(),iv.bind(null,u,p,o,s),null),o},useId:function(){var r=_n(),s=dt.identifierPrefix;if(Ze){var o=da,u=ua;o=(u&~(1<<32-on(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Zu++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=_A++,s=""+s+"r"+o.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:im,useFormState:gv,useActionState:gv,useOptimistic:function(r){var s=_n();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=om.bind(null,Le,!0,o),o.dispatch=s,[r,s]},useMemoCache:Zf,useCacheRefresh:function(){return _n().memoizedState=SA.bind(null,Le)}},Uv={readContext:ln,use:Ju,useCallback:Tv,useContext:ln,useEffect:Ev,useImperativeHandle:Nv,useInsertionEffect:wv,useLayoutEffect:Sv,useMemo:Cv,useReducer:ed,useRef:bv,useState:function(){return ed(ma)},useDebugValue:rm,useDeferredValue:function(r,s){var o=Pt();return jv(o,it.memoizedState,r,s)},useTransition:function(){var r=ed(ma)[0],s=Pt().memoizedState;return[typeof r=="boolean"?r:Zl(r),s]},useSyncExternalStore:av,useId:Pv,useHostTransitionStatus:im,useFormState:yv,useActionState:yv,useOptimistic:function(r,s){var o=Pt();return uv(o,it,r,s)},useMemoCache:Zf,useCacheRefresh:kv},NA={readContext:ln,use:Ju,useCallback:Tv,useContext:ln,useEffect:Ev,useImperativeHandle:Nv,useInsertionEffect:wv,useLayoutEffect:Sv,useMemo:Cv,useReducer:em,useRef:bv,useState:function(){return em(ma)},useDebugValue:rm,useDeferredValue:function(r,s){var o=Pt();return it===null?am(o,r,s):jv(o,it.memoizedState,r,s)},useTransition:function(){var r=em(ma)[0],s=Pt().memoizedState;return[typeof r=="boolean"?r:Zl(r),s]},useSyncExternalStore:av,useId:Pv,useHostTransitionStatus:im,useFormState:_v,useActionState:_v,useOptimistic:function(r,s){var o=Pt();return it!==null?uv(o,it,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:kv},Eo=null,tc=0;function sd(r){var s=tc;return tc+=1,Eo===null&&(Eo=[]),Xy(Eo,r,s)}function nc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function id(r,s){throw s.$$typeof===E?Error(a(525)):(r=Object.prototype.toString.call(s),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function qv(r){var s=r._init;return s(r._payload)}function Bv(r){function s(F,z){if(r){var $=F.deletions;$===null?(F.deletions=[z],F.flags|=16):$.push(z)}}function o(F,z){if(!r)return null;for(;z!==null;)s(F,z),z=z.sibling;return null}function u(F){for(var z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function f(F,z){return F=ca(F,z),F.index=0,F.sibling=null,F}function p(F,z,$){return F.index=$,r?($=F.alternate,$!==null?($=$.index,$<z?(F.flags|=67108866,z):$):(F.flags|=67108866,z)):(F.flags|=1048576,z)}function S(F){return r&&F.alternate===null&&(F.flags|=67108866),F}function j(F,z,$,te){return z===null||z.tag!==6?(z=Cf($,F.mode,te),z.return=F,z):(z=f(z,$),z.return=F,z)}function V(F,z,$,te){var ve=$.type;return ve===C?ee(F,z,$.props.children,te,$.key):z!==null&&(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===T&&qv(ve)===z.type)?(z=f(z,$.props),nc(z,$),z.return=F,z):(z=zu($.type,$.key,$.props,null,F.mode,te),nc(z,$),z.return=F,z)}function Q(F,z,$,te){return z===null||z.tag!==4||z.stateNode.containerInfo!==$.containerInfo||z.stateNode.implementation!==$.implementation?(z=jf($,F.mode,te),z.return=F,z):(z=f(z,$.children||[]),z.return=F,z)}function ee(F,z,$,te,ve){return z===null||z.tag!==7?(z=ii($,F.mode,te,ve),z.return=F,z):(z=f(z,$),z.return=F,z)}function re(F,z,$){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Cf(""+z,F.mode,$),z.return=F,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return $=zu(z.type,z.key,z.props,null,F.mode,$),nc($,z),$.return=F,$;case x:return z=jf(z,F.mode,$),z.return=F,z;case T:var te=z._init;return z=te(z._payload),re(F,z,$)}if(de(z)||R(z))return z=ii(z,F.mode,$,null),z.return=F,z;if(typeof z.then=="function")return re(F,sd(z),$);if(z.$$typeof===q)return re(F,$u(F,z),$);id(F,z)}return null}function Y(F,z,$,te){var ve=z!==null?z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ve!==null?null:j(F,z,""+$,te);if(typeof $=="object"&&$!==null){switch($.$$typeof){case b:return $.key===ve?V(F,z,$,te):null;case x:return $.key===ve?Q(F,z,$,te):null;case T:return ve=$._init,$=ve($._payload),Y(F,z,$,te)}if(de($)||R($))return ve!==null?null:ee(F,z,$,te,null);if(typeof $.then=="function")return Y(F,z,sd($),te);if($.$$typeof===q)return Y(F,z,$u(F,$),te);id(F,$)}return null}function X(F,z,$,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return F=F.get($)||null,j(z,F,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return F=F.get(te.key===null?$:te.key)||null,V(z,F,te,ve);case x:return F=F.get(te.key===null?$:te.key)||null,Q(z,F,te,ve);case T:var Ue=te._init;return te=Ue(te._payload),X(F,z,$,te,ve)}if(de(te)||R(te))return F=F.get($)||null,ee(z,F,te,ve,null);if(typeof te.then=="function")return X(F,z,$,sd(te),ve);if(te.$$typeof===q)return X(F,z,$,$u(z,te),ve);id(z,te)}return null}function De(F,z,$,te){for(var ve=null,Ue=null,be=z,Ne=z=0,Xt=null;be!==null&&Ne<$.length;Ne++){be.index>Ne?(Xt=be,be=null):Xt=be.sibling;var Xe=Y(F,be,$[Ne],te);if(Xe===null){be===null&&(be=Xt);break}r&&be&&Xe.alternate===null&&s(F,be),z=p(Xe,z,Ne),Ue===null?ve=Xe:Ue.sibling=Xe,Ue=Xe,be=Xt}if(Ne===$.length)return o(F,be),Ze&&li(F,Ne),ve;if(be===null){for(;Ne<$.length;Ne++)be=re(F,$[Ne],te),be!==null&&(z=p(be,z,Ne),Ue===null?ve=be:Ue.sibling=be,Ue=be);return Ze&&li(F,Ne),ve}for(be=u(be);Ne<$.length;Ne++)Xt=X(be,F,Ne,$[Ne],te),Xt!==null&&(r&&Xt.alternate!==null&&be.delete(Xt.key===null?Ne:Xt.key),z=p(Xt,z,Ne),Ue===null?ve=Xt:Ue.sibling=Xt,Ue=Xt);return r&&be.forEach(function(cs){return s(F,cs)}),Ze&&li(F,Ne),ve}function Se(F,z,$,te){if($==null)throw Error(a(151));for(var ve=null,Ue=null,be=z,Ne=z=0,Xt=null,Xe=$.next();be!==null&&!Xe.done;Ne++,Xe=$.next()){be.index>Ne?(Xt=be,be=null):Xt=be.sibling;var cs=Y(F,be,Xe.value,te);if(cs===null){be===null&&(be=Xt);break}r&&be&&cs.alternate===null&&s(F,be),z=p(cs,z,Ne),Ue===null?ve=cs:Ue.sibling=cs,Ue=cs,be=Xt}if(Xe.done)return o(F,be),Ze&&li(F,Ne),ve;if(be===null){for(;!Xe.done;Ne++,Xe=$.next())Xe=re(F,Xe.value,te),Xe!==null&&(z=p(Xe,z,Ne),Ue===null?ve=Xe:Ue.sibling=Xe,Ue=Xe);return Ze&&li(F,Ne),ve}for(be=u(be);!Xe.done;Ne++,Xe=$.next())Xe=X(be,F,Ne,Xe.value,te),Xe!==null&&(r&&Xe.alternate!==null&&be.delete(Xe.key===null?Ne:Xe.key),z=p(Xe,z,Ne),Ue===null?ve=Xe:Ue.sibling=Xe,Ue=Xe);return r&&be.forEach(function(TN){return s(F,TN)}),Ze&&li(F,Ne),ve}function lt(F,z,$,te){if(typeof $=="object"&&$!==null&&$.type===C&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case b:e:{for(var ve=$.key;z!==null;){if(z.key===ve){if(ve=$.type,ve===C){if(z.tag===7){o(F,z.sibling),te=f(z,$.props.children),te.return=F,F=te;break e}}else if(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===T&&qv(ve)===z.type){o(F,z.sibling),te=f(z,$.props),nc(te,$),te.return=F,F=te;break e}o(F,z);break}else s(F,z);z=z.sibling}$.type===C?(te=ii($.props.children,F.mode,te,$.key),te.return=F,F=te):(te=zu($.type,$.key,$.props,null,F.mode,te),nc(te,$),te.return=F,F=te)}return S(F);case x:e:{for(ve=$.key;z!==null;){if(z.key===ve)if(z.tag===4&&z.stateNode.containerInfo===$.containerInfo&&z.stateNode.implementation===$.implementation){o(F,z.sibling),te=f(z,$.children||[]),te.return=F,F=te;break e}else{o(F,z);break}else s(F,z);z=z.sibling}te=jf($,F.mode,te),te.return=F,F=te}return S(F);case T:return ve=$._init,$=ve($._payload),lt(F,z,$,te)}if(de($))return De(F,z,$,te);if(R($)){if(ve=R($),typeof ve!="function")throw Error(a(150));return $=ve.call($),Se(F,z,$,te)}if(typeof $.then=="function")return lt(F,z,sd($),te);if($.$$typeof===q)return lt(F,z,$u(F,$),te);id(F,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,z!==null&&z.tag===6?(o(F,z.sibling),te=f(z,$),te.return=F,F=te):(o(F,z),te=Cf($,F.mode,te),te.return=F,F=te),S(F)):o(F,z)}return function(F,z,$,te){try{tc=0;var ve=lt(F,z,$,te);return Eo=null,ve}catch(be){if(be===$l||be===Ku)throw be;var Ue=jn(29,be,null,F.mode);return Ue.lanes=te,Ue.return=F,Ue}finally{}}}var wo=Bv(!0),zv=Bv(!1),Qn=oe(null),Rr=null;function Ka(r){var s=r.alternate;ue(Bt,Bt.current&1),ue(Qn,r),Rr===null&&(s===null||vo.current!==null||s.memoizedState!==null)&&(Rr=r)}function Fv(r){if(r.tag===22){if(ue(Bt,Bt.current),ue(Qn,r),Rr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Rr=r)}}else Ya()}function Ya(){ue(Bt,Bt.current),ue(Qn,Qn.current)}function pa(r){me(Qn),Rr===r&&(Rr=null),me(Bt)}var Bt=oe(0);function od(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Wm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function lm(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var cm={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Ga(u);f.payload=s,o!=null&&(f.callback=o),s=$a(r,f,u),s!==null&&(kn(s,r,u),Kl(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Ga(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=$a(r,f,u),s!==null&&(kn(s,r,u),Kl(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Pn(),u=Ga(o);u.tag=2,s!=null&&(u.callback=s),s=$a(r,u,o),s!==null&&(kn(s,r,o),Kl(s,r,o))}};function Hv(r,s,o,u,f,p,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,S):s.prototype&&s.prototype.isPureReactComponent?!Vl(o,u)||!Vl(f,p):!0}function Gv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&cm.enqueueReplaceState(s,s.state,null)}function pi(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=_({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var ld=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function $v(r){ld(r)}function Qv(r){console.error(r)}function Kv(r){ld(r)}function cd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Yv(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function um(r,s,o){return o=Ga(o),o.tag=3,o.payload={element:null},o.callback=function(){cd(r,s)},o}function Xv(r){return r=Ga(r),r.tag=3,r}function Wv(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;r.payload=function(){return f(p)},r.callback=function(){Yv(s,o,u)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){Yv(s,o,u),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function TA(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Fl(s,o,f,!0),o=Qn.current,o!==null){switch(o.tag){case 13:return Rr===null?km():o.alternate===null&&wt===0&&(wt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Uf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Mm(r,u,f)),!1;case 22:return o.flags|=65536,u===Uf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Mm(r,u,f)),!1}throw Error(a(435,o.tag))}return Mm(r,u,f),km(),!1}if(Ze)return s=Qn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==If&&(r=Error(a(422),{cause:u}),zl(Fn(r,o)))):(u!==If&&(s=Error(a(423),{cause:u}),zl(Fn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Fn(u,o),f=um(r.stateNode,u,f),zf(r,f),wt!==4&&(wt=2)),!1;var p=Error(a(520),{cause:u});if(p=Fn(p,o),cc===null?cc=[p]:cc.push(p),wt!==4&&(wt=2),s===null)return!0;u=Fn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=um(o.stateNode,u,r),zf(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ts===null||!ts.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Xv(f),Wv(f,r,o,u),zf(o,f),!1}o=o.return}while(o!==null);return!1}var Zv=Error(a(461)),Kt=!1;function en(r,s,o,u){s.child=r===null?zv(s,null,o,u):wo(s,r.child,o,u)}function Jv(r,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var S={};for(var j in u)j!=="ref"&&(S[j]=u[j])}else S=u;return hi(s),u=Qf(r,s,o,S,p,f),j=Kf(),r!==null&&!Kt?(Yf(r,s,f),ga(r,s,f)):(Ze&&j&&Df(s),s.flags|=1,en(r,s,u,f),s.child)}function e_(r,s,o,u,f){if(r===null){var p=o.type;return typeof p=="function"&&!Tf(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,t_(r,s,p,u,f)):(r=zu(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!vm(r,f)){var S=p.memoizedProps;if(o=o.compare,o=o!==null?o:Vl,o(S,u)&&r.ref===s.ref)return ga(r,s,f)}return s.flags|=1,r=ca(p,u),r.ref=s.ref,r.return=s,s.child=r}function t_(r,s,o,u,f){if(r!==null){var p=r.memoizedProps;if(Vl(p,u)&&r.ref===s.ref)if(Kt=!1,s.pendingProps=u=p,vm(r,f))(r.flags&131072)!==0&&(Kt=!0);else return s.lanes=r.lanes,ga(r,s,f)}return dm(r,s,o,u,f)}function n_(r,s,o){var u=s.pendingProps,f=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(f=s.child=r.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return r_(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Qu(s,p!==null?p.cachePool:null),p!==null?tv(s,p):Hf(),Fv(s);else return s.lanes=s.childLanes=536870912,r_(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Qu(s,p.cachePool),tv(s,p),Ya(),s.memoizedState=null):(r!==null&&Qu(s,null),Hf(),Ya());return en(r,s,f,o),s.child}function r_(r,s,o,u){var f=Vf();return f=f===null?null:{parent:qt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&Qu(s,null),Hf(),Fv(s),r!==null&&Fl(r,s,u,!0),null}function ud(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function dm(r,s,o,u,f){return hi(s),o=Qf(r,s,o,u,void 0,f),u=Kf(),r!==null&&!Kt?(Yf(r,s,f),ga(r,s,f)):(Ze&&u&&Df(s),s.flags|=1,en(r,s,o,f),s.child)}function a_(r,s,o,u,f,p){return hi(s),s.updateQueue=null,o=rv(s,u,o,f),nv(r),u=Kf(),r!==null&&!Kt?(Yf(r,s,p),ga(r,s,p)):(Ze&&u&&Df(s),s.flags|=1,en(r,s,o,p),s.child)}function s_(r,s,o,u,f){if(hi(s),s.stateNode===null){var p=fo,S=o.contextType;typeof S=="object"&&S!==null&&(p=ln(S)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=cm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},qf(s),S=o.contextType,p.context=typeof S=="object"&&S!==null?ln(S):fo,p.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(lm(s,o,S,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(S=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),S!==p.state&&cm.enqueueReplaceState(p,p.state,null),Xl(s,u,p,f),Yl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var j=s.memoizedProps,V=pi(o,j);p.props=V;var Q=p.context,ee=o.contextType;S=fo,typeof ee=="object"&&ee!==null&&(S=ln(ee));var re=o.getDerivedStateFromProps;ee=typeof re=="function"||typeof p.getSnapshotBeforeUpdate=="function",j=s.pendingProps!==j,ee||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j||Q!==S)&&Gv(s,p,u,S),Ha=!1;var Y=s.memoizedState;p.state=Y,Xl(s,u,p,f),Yl(),Q=s.memoizedState,j||Y!==Q||Ha?(typeof re=="function"&&(lm(s,o,re,u),Q=s.memoizedState),(V=Ha||Hv(s,o,V,u,Y,Q,S))?(ee||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Q),p.props=u,p.state=Q,p.context=S,u=V):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Bf(r,s),S=s.memoizedProps,ee=pi(o,S),p.props=ee,re=s.pendingProps,Y=p.context,Q=o.contextType,V=fo,typeof Q=="object"&&Q!==null&&(V=ln(Q)),j=o.getDerivedStateFromProps,(Q=typeof j=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S!==re||Y!==V)&&Gv(s,p,u,V),Ha=!1,Y=s.memoizedState,p.state=Y,Xl(s,u,p,f),Yl();var X=s.memoizedState;S!==re||Y!==X||Ha||r!==null&&r.dependencies!==null&&Gu(r.dependencies)?(typeof j=="function"&&(lm(s,o,j,u),X=s.memoizedState),(ee=Ha||Hv(s,o,ee,u,Y,X,V)||r!==null&&r.dependencies!==null&&Gu(r.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,X,V),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,X,V)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||S===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),p.props=u,p.state=X,p.context=V,u=ee):(typeof p.componentDidUpdate!="function"||S===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,ud(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=wo(s,r.child,null,f),s.child=wo(s,null,o,f)):en(r,s,o,f),s.memoizedState=p.state,r=s.child):r=ga(r,s,f),r}function i_(r,s,o,u){return Bl(),s.flags|=256,en(r,s,o,u),s.child}var hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fm(r){return{baseLanes:r,cachePool:Qy()}}function mm(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Kn),r}function o_(r,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,S;if((S=p)||(S=r!==null&&r.memoizedState===null?!1:(Bt.current&2)!==0),S&&(f=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ze){if(f?Ka(s):Ya(),Ze){var j=Et,V;if(V=j){e:{for(V=j,j=Dr;V.nodeType!==8;){if(!j){j=null;break e}if(V=or(V.nextSibling),V===null){j=null;break e}}j=V}j!==null?(s.memoizedState={dehydrated:j,treeContext:oi!==null?{id:ua,overflow:da}:null,retryLane:536870912,hydrationErrors:null},V=jn(18,null,null,0),V.stateNode=j,V.return=s,s.child=V,yn=s,Et=null,V=!0):V=!1}V||ui(s)}if(j=s.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return Wm(j)?s.lanes=32:s.lanes=536870912,null;pa(s)}return j=u.children,u=u.fallback,f?(Ya(),f=s.mode,j=dd({mode:"hidden",children:j},f),u=ii(u,f,o,null),j.return=s,u.return=s,j.sibling=u,s.child=j,f=s.child,f.memoizedState=fm(o),f.childLanes=mm(r,S,o),s.memoizedState=hm,u):(Ka(s),pm(s,j))}if(V=r.memoizedState,V!==null&&(j=V.dehydrated,j!==null)){if(p)s.flags&256?(Ka(s),s.flags&=-257,s=gm(r,s,o)):s.memoizedState!==null?(Ya(),s.child=r.child,s.flags|=128,s=null):(Ya(),f=u.fallback,j=s.mode,u=dd({mode:"visible",children:u.children},j),f=ii(f,j,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,wo(s,r.child,null,o),u=s.child,u.memoizedState=fm(o),u.childLanes=mm(r,S,o),s.memoizedState=hm,s=f);else if(Ka(s),Wm(j)){if(S=j.nextSibling&&j.nextSibling.dataset,S)var Q=S.dgst;S=Q,u=Error(a(419)),u.stack="",u.digest=S,zl({value:u,source:null,stack:null}),s=gm(r,s,o)}else if(Kt||Fl(r,s,o,!1),S=(o&r.childLanes)!==0,Kt||S){if(S=dt,S!==null&&(u=o&-o,u=(u&42)!==0?1:Ma(u),u=(u&(S.suspendedLanes|o))!==0?0:u,u!==0&&u!==V.retryLane))throw V.retryLane=u,ho(r,u),kn(S,r,u),Zv;j.data==="$?"||km(),s=gm(r,s,o)}else j.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=V.treeContext,Et=or(j.nextSibling),yn=s,Ze=!0,ci=null,Dr=!1,r!==null&&(Gn[$n++]=ua,Gn[$n++]=da,Gn[$n++]=oi,ua=r.id,da=r.overflow,oi=s),s=pm(s,u.children),s.flags|=4096);return s}return f?(Ya(),f=u.fallback,j=s.mode,V=r.child,Q=V.sibling,u=ca(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,Q!==null?f=ca(Q,f):(f=ii(f,j,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,j=r.child.memoizedState,j===null?j=fm(o):(V=j.cachePool,V!==null?(Q=qt._currentValue,V=V.parent!==Q?{parent:Q,pool:Q}:V):V=Qy(),j={baseLanes:j.baseLanes|o,cachePool:V}),f.memoizedState=j,f.childLanes=mm(r,S,o),s.memoizedState=hm,u):(Ka(s),o=r.child,r=o.sibling,o=ca(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(S=s.deletions,S===null?(s.deletions=[r],s.flags|=16):S.push(r)),s.child=o,s.memoizedState=null,o)}function pm(r,s){return s=dd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function dd(r,s){return r=jn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function gm(r,s,o){return wo(s,r.child,null,o),r=pm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function l_(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),kf(r.return,s,o)}function ym(r,s,o,u,f){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function c_(r,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(en(r,s,u.children,o),u=Bt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&l_(r,o,s);else if(r.tag===19)l_(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ue(Bt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&od(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),ym(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&od(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}ym(s,!0,o,null,p);break;case"together":ym(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ga(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Fl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(a(153));if(s.child!==null){for(r=s.child,o=ca(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=ca(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function vm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Gu(r)))}function CA(r,s,o){switch(s.tag){case 3:ut(s,s.stateNode.containerInfo),Fa(s,qt,r.memoizedState.cache),Bl();break;case 27:case 5:Oa(s);break;case 4:ut(s,s.stateNode.containerInfo);break;case 10:Fa(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ka(s),s.flags|=128,null):(o&s.child.childLanes)!==0?o_(r,s,o):(Ka(s),r=ga(r,s,o),r!==null?r.sibling:null);Ka(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Fl(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return c_(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Bt,Bt.current),u)break;return null;case 22:case 23:return s.lanes=0,n_(r,s,o);case 24:Fa(s,qt,r.memoizedState.cache)}return ga(r,s,o)}function u_(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Kt=!0;else{if(!vm(r,o)&&(s.flags&128)===0)return Kt=!1,CA(r,s,o);Kt=(r.flags&131072)!==0}else Kt=!1,Ze&&(s.flags&1048576)!==0&&qy(s,Hu,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Tf(u)?(r=pi(u,r),s.tag=1,s=s_(null,s,u,r,o)):(s.tag=0,s=dm(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===se){s.tag=11,s=Jv(null,s,u,r,o);break e}else if(f===O){s.tag=14,s=e_(null,s,u,r,o);break e}}throw s=J(u)||u,Error(a(306,s,""))}}return s;case 0:return dm(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=pi(u,s.pendingProps),s_(r,s,u,f,o);case 3:e:{if(ut(s,s.stateNode.containerInfo),r===null)throw Error(a(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Bf(r,s),Xl(s,u,null,o);var S=s.memoizedState;if(u=S.cache,Fa(s,qt,u),u!==p.cache&&Of(s,[qt],o,!0),Yl(),u=S.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=i_(r,s,u,o);break e}else if(u!==f){f=Fn(Error(a(424)),s),zl(f),s=i_(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Et=or(r.firstChild),yn=s,Ze=!0,ci=null,Dr=!0,o=zv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Bl(),u===f){s=ga(r,s,o);break e}en(r,s,u,o)}s=s.child}return s;case 26:return ud(r,s),r===null?(o=mb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ze||(o=s.type,r=s.pendingProps,u=Ad(Re.current).createElement(o),u[Lt]=s,u[Dt]=r,nn(u,o,r),St(u),s.stateNode=u):s.memoizedState=mb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Oa(s),r===null&&Ze&&(u=s.stateNode=db(s.type,s.pendingProps,Re.current),yn=s,Dr=!0,f=Et,as(s.type)?(Zm=f,Et=or(u.firstChild)):Et=f),en(r,s,s.pendingProps.children,o),ud(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ze&&((f=u=Et)&&(u=nN(u,s.type,s.pendingProps,Dr),u!==null?(s.stateNode=u,yn=s,Et=or(u.firstChild),Dr=!1,f=!0):f=!1),f||ui(s)),Oa(s),f=s.type,p=s.pendingProps,S=r!==null?r.memoizedProps:null,u=p.children,Km(f,p)?u=null:S!==null&&Km(f,S)&&(s.flags|=32),s.memoizedState!==null&&(f=Qf(r,s,bA,null,null,o),vc._currentValue=f),ud(r,s),en(r,s,u,o),s.child;case 6:return r===null&&Ze&&((r=o=Et)&&(o=rN(o,s.pendingProps,Dr),o!==null?(s.stateNode=o,yn=s,Et=null,r=!0):r=!1),r||ui(s)),null;case 13:return o_(r,s,o);case 4:return ut(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=wo(s,null,u,o):en(r,s,u,o),s.child;case 11:return Jv(r,s,s.type,s.pendingProps,o);case 7:return en(r,s,s.pendingProps,o),s.child;case 8:return en(r,s,s.pendingProps.children,o),s.child;case 12:return en(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Fa(s,s.type,u.value),en(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,hi(s),f=ln(f),u=u(f),s.flags|=1,en(r,s,u,o),s.child;case 14:return e_(r,s,s.type,s.pendingProps,o);case 15:return t_(r,s,s.type,s.pendingProps,o);case 19:return c_(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=dd(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ca(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return n_(r,s,o);case 24:return hi(s),u=ln(qt),r===null?(f=Vf(),f===null&&(f=dt,p=Mf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},qf(s),Fa(s,qt,f)):((r.lanes&o)!==0&&(Bf(r,s),Xl(s,null,null,o),Yl()),f=r.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Fa(s,qt,u)):(u=p.cache,Fa(s,qt,u),u!==f.cache&&Of(s,[qt],o,!0))),en(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function ya(r){r.flags|=4}function d_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!_b(s)){if(s=Qn.current,s!==null&&((Ke&4194048)===Ke?Rr!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||s!==Rr))throw Ql=Uf,Ky;r.flags|=8192}}function hd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?bl():536870912,r.lanes|=s,To|=s)}function rc(r,s){if(!Ze)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function _t(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function jA(r,s,o){var u=s.pendingProps;switch(Rf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(s),null;case 1:return _t(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),fa(qt),vr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(ql(s)?ya(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fy())),_t(s),null;case 26:return o=s.memoizedState,r===null?(ya(s),o!==null?(_t(s),d_(s,o)):(_t(s),s.flags&=-16777217)):o?o!==r.memoizedState?(ya(s),_t(s),d_(s,o)):(_t(s),s.flags&=-16777217):(r.memoizedProps!==u&&ya(s),_t(s),s.flags&=-16777217),null;case 27:Xr(s),o=Re.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ya(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return _t(s),null}r=we.current,ql(s)?By(s):(r=db(f,u,o),s.stateNode=r,ya(s))}return _t(s),null;case 5:if(Xr(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ya(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return _t(s),null}if(r=we.current,ql(s))By(s);else{switch(f=Ad(Re.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Lt]=s,r[Dt]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(nn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ya(s)}}return _t(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&ya(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(a(166));if(r=Re.current,ql(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=yn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Lt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||ab(r.nodeValue,o)),r||ui(s)}else r=Ad(r).createTextNode(u),r[Lt]=s,s.stateNode=r}return _t(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=ql(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Lt]=s}else Bl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),f=!1}else f=Fy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(pa(s),s):(pa(s),null)}if(pa(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),hd(s,s.updateQueue),_t(s),null;case 4:return vr(),r===null&&Fm(s.stateNode.containerInfo),_t(s),null;case 10:return fa(s.type),_t(s),null;case 19:if(me(Bt),f=s.memoizedState,f===null)return _t(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)rc(f,!1);else{if(wt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=od(r),p!==null){for(s.flags|=128,rc(f,!1),r=p.updateQueue,s.updateQueue=r,hd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Uy(o,r),o=o.sibling;return ue(Bt,Bt.current&1|2),s.child}r=r.sibling}f.tail!==null&&Ln()>pd&&(s.flags|=128,u=!0,rc(f,!1),s.lanes=4194304)}else{if(!u)if(r=od(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,hd(s,r),rc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ze)return _t(s),null}else 2*Ln()-f.renderingStartTime>pd&&o!==536870912&&(s.flags|=128,u=!0,rc(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(r=f.last,r!==null?r.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Ln(),s.sibling=null,r=Bt.current,ue(Bt,u?r&1|2:r&1),s):(_t(s),null);case 22:case 23:return pa(s),Gf(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(_t(s),s.subtreeFlags&6&&(s.flags|=8192)):_t(s),o=s.updateQueue,o!==null&&hd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&me(fi),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),fa(qt),_t(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function DA(r,s){switch(Rf(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return fa(qt),vr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Xr(s),null;case 13:if(pa(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Bl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return me(Bt),null;case 4:return vr(),null;case 10:return fa(s.type),null;case 22:case 23:return pa(s),Gf(),r!==null&&me(fi),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return fa(qt),null;case 25:return null;default:return null}}function h_(r,s){switch(Rf(s),s.tag){case 3:fa(qt),vr();break;case 26:case 27:case 5:Xr(s);break;case 4:vr();break;case 13:pa(s);break;case 19:me(Bt);break;case 10:fa(s.type);break;case 22:case 23:pa(s),Gf(),r!==null&&me(fi);break;case 24:fa(qt)}}function ac(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var p=o.create,S=o.inst;u=p(),S.destroy=u}o=o.next}while(o!==f)}}catch(j){ct(s,s.return,j)}}function Xa(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){var S=u.inst,j=S.destroy;if(j!==void 0){S.destroy=void 0,f=s;var V=o,Q=j;try{Q()}catch(ee){ct(f,V,ee)}}}u=u.next}while(u!==p)}}catch(ee){ct(s,s.return,ee)}}function f_(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{ev(s,o)}catch(u){ct(r,r.return,u)}}}function m_(r,s,o){o.props=pi(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){ct(r,s,u)}}function sc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){ct(r,s,f)}}function Ir(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ct(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ct(r,s,f)}else o.current=null}function p_(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ct(r,r.return,f)}}function _m(r,s,o){try{var u=r.stateNode;WA(u,r.type,o,s),u[Dt]=s}catch(f){ct(r,r.return,f)}}function g_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&as(r.type)||r.tag===4}function bm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||g_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&as(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function xm(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Sd));else if(u!==4&&(u===27&&as(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(xm(r,s,o),r=r.sibling;r!==null;)xm(r,s,o),r=r.sibling}function fd(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&as(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(fd(r,s,o),r=r.sibling;r!==null;)fd(r,s,o),r=r.sibling}function y_(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);nn(s,u,o),s[Lt]=r,s[Dt]=o}catch(p){ct(r,r.return,p)}}var va=!1,Nt=!1,Em=!1,v_=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function RA(r,s){if(r=r.containerInfo,$m=Rd,r=jy(r),bf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var S=0,j=-1,V=-1,Q=0,ee=0,re=r,Y=null;t:for(;;){for(var X;re!==o||f!==0&&re.nodeType!==3||(j=S+f),re!==p||u!==0&&re.nodeType!==3||(V=S+u),re.nodeType===3&&(S+=re.nodeValue.length),(X=re.firstChild)!==null;)Y=re,re=X;for(;;){if(re===r)break t;if(Y===o&&++Q===f&&(j=S),Y===p&&++ee===u&&(V=S),(X=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=X}o=j===-1||V===-1?null:{start:j,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qm={focusedElem:r,selectionRange:o},Rd=!1,Yt=s;Yt!==null;)if(s=Yt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Yt=r;else for(;Yt!==null;){switch(s=Yt,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var De=pi(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(De,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Se){ct(o,o.return,Se)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Xm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Xm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=s.sibling,r!==null){r.return=s.return,Yt=r;break}Yt=s.return}}function __(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Wa(r,o),u&4&&ac(5,o);break;case 1:if(Wa(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(S){ct(o,o.return,S)}else{var f=pi(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(S){ct(o,o.return,S)}}u&64&&f_(o),u&512&&sc(o,o.return);break;case 3:if(Wa(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{ev(r,s)}catch(S){ct(o,o.return,S)}}break;case 27:s===null&&u&4&&y_(o);case 26:case 5:Wa(r,o),s===null&&u&4&&p_(o),u&512&&sc(o,o.return);break;case 12:Wa(r,o);break;case 13:Wa(r,o),u&4&&E_(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=qA.bind(null,o),aN(r,o))));break;case 22:if(u=o.memoizedState!==null||va,!u){s=s!==null&&s.memoizedState!==null||Nt,f=va;var p=Nt;va=u,(Nt=s)&&!p?Za(r,o,(o.subtreeFlags&8772)!==0):Wa(r,o),va=f,Nt=p}break;case 30:break;default:Wa(r,o)}}function b_(r){var s=r.alternate;s!==null&&(r.alternate=null,b_(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ua(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var gt=null,bn=!1;function _a(r,s,o){for(o=o.child;o!==null;)x_(r,s,o),o=o.sibling}function x_(r,s,o){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(xt,o)}catch{}switch(o.tag){case 26:Nt||Ir(o,s),_a(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Nt||Ir(o,s);var u=gt,f=bn;as(o.type)&&(gt=o.stateNode,bn=!1),_a(r,s,o),mc(o.stateNode),gt=u,bn=f;break;case 5:Nt||Ir(o,s);case 6:if(u=gt,f=bn,gt=null,_a(r,s,o),gt=u,bn=f,gt!==null)if(bn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(p){ct(o,s,p)}else try{gt.removeChild(o.stateNode)}catch(p){ct(o,s,p)}break;case 18:gt!==null&&(bn?(r=gt,cb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Ec(r)):cb(gt,o.stateNode));break;case 4:u=gt,f=bn,gt=o.stateNode.containerInfo,bn=!0,_a(r,s,o),gt=u,bn=f;break;case 0:case 11:case 14:case 15:Nt||Xa(2,o,s),Nt||Xa(4,o,s),_a(r,s,o);break;case 1:Nt||(Ir(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&m_(o,s,u)),_a(r,s,o);break;case 21:_a(r,s,o);break;case 22:Nt=(u=Nt)||o.memoizedState!==null,_a(r,s,o),Nt=u;break;default:_a(r,s,o)}}function E_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ec(r)}catch(o){ct(s,s.return,o)}}function IA(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new v_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new v_),s;default:throw Error(a(435,r.tag))}}function wm(r,s){var o=IA(r);s.forEach(function(u){var f=BA.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function Dn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=r,S=s,j=S;e:for(;j!==null;){switch(j.tag){case 27:if(as(j.type)){gt=j.stateNode,bn=!1;break e}break;case 5:gt=j.stateNode,bn=!1;break e;case 3:case 4:gt=j.stateNode.containerInfo,bn=!0;break e}j=j.return}if(gt===null)throw Error(a(160));x_(p,S,f),gt=null,bn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)w_(s,r),s=s.sibling}var ir=null;function w_(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Dn(s,r),Rn(r),u&4&&(Xa(3,r,r.return),ac(3,r),Xa(5,r,r.return));break;case 1:Dn(s,r),Rn(r),u&512&&(Nt||o===null||Ir(o,o.return)),u&64&&va&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ir;if(Dn(s,r),Rn(r),u&512&&(Nt||o===null||Ir(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Hs]||p[Lt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),nn(p,u,o),p[Lt]=r,St(p),u=p;break e;case"link":var S=yb("link","href",f).get(u+(o.href||""));if(S){for(var j=0;j<S.length;j++)if(p=S[j],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(j,1);break t}}p=f.createElement(u),nn(p,u,o),f.head.appendChild(p);break;case"meta":if(S=yb("meta","content",f).get(u+(o.content||""))){for(j=0;j<S.length;j++)if(p=S[j],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(j,1);break t}}p=f.createElement(u),nn(p,u,o),f.head.appendChild(p);break;default:throw Error(a(468,u))}p[Lt]=r,St(p),u=p}r.stateNode=u}else vb(f,r.type,r.stateNode);else r.stateNode=gb(f,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?vb(f,r.type,r.stateNode):gb(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&_m(r,r.memoizedProps,o.memoizedProps)}break;case 27:Dn(s,r),Rn(r),u&512&&(Nt||o===null||Ir(o,o.return)),o!==null&&u&4&&_m(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Dn(s,r),Rn(r),u&512&&(Nt||o===null||Ir(o,o.return)),r.flags&32){f=r.stateNode;try{Un(f,"")}catch(X){ct(r,r.return,X)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,_m(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Em=!0);break;case 6:if(Dn(s,r),Rn(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(X){ct(r,r.return,X)}}break;case 3:if(Cd=null,f=ir,ir=Nd(s.containerInfo),Dn(s,r),ir=f,Rn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ec(s.containerInfo)}catch(X){ct(r,r.return,X)}Em&&(Em=!1,S_(r));break;case 4:u=ir,ir=Nd(r.stateNode.containerInfo),Dn(s,r),Rn(r),ir=u;break;case 12:Dn(s,r),Rn(r);break;case 13:Dn(s,r),Rn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jm=Ln()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,wm(r,u)));break;case 22:f=r.memoizedState!==null;var V=o!==null&&o.memoizedState!==null,Q=va,ee=Nt;if(va=Q||f,Nt=ee||V,Dn(s,r),Nt=ee,va=Q,Rn(r),u&8192)e:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||V||va||Nt||gi(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){V=o=s;try{if(p=V.stateNode,f)S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{j=V.stateNode;var re=V.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;j.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(X){ct(V,V.return,X)}}}else if(s.tag===6){if(o===null){V=s;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(X){ct(V,V.return,X)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,wm(r,o))));break;case 19:Dn(s,r),Rn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,wm(r,u)));break;case 30:break;case 21:break;default:Dn(s,r),Rn(r)}}function Rn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(g_(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,p=bm(r);fd(r,p,f);break;case 5:var S=o.stateNode;o.flags&32&&(Un(S,""),o.flags&=-33);var j=bm(r);fd(r,j,S);break;case 3:case 4:var V=o.stateNode.containerInfo,Q=bm(r);xm(r,Q,V);break;default:throw Error(a(161))}}catch(ee){ct(r,r.return,ee)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function S_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;S_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Wa(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)__(r,s.alternate,s),s=s.sibling}function gi(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Xa(4,s,s.return),gi(s);break;case 1:Ir(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&m_(s,s.return,o),gi(s);break;case 27:mc(s.stateNode);case 26:case 5:Ir(s,s.return),gi(s);break;case 22:s.memoizedState===null&&gi(s);break;case 30:gi(s);break;default:gi(s)}r=r.sibling}}function Za(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,p=s,S=p.flags;switch(p.tag){case 0:case 11:case 15:Za(f,p,o),ac(4,p);break;case 1:if(Za(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){ct(u,u.return,Q)}if(u=p,f=u.updateQueue,f!==null){var j=u.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)Jy(V[f],j)}catch(Q){ct(u,u.return,Q)}}o&&S&64&&f_(p),sc(p,p.return);break;case 27:y_(p);case 26:case 5:Za(f,p,o),o&&u===null&&S&4&&p_(p),sc(p,p.return);break;case 12:Za(f,p,o);break;case 13:Za(f,p,o),o&&S&4&&E_(f,p);break;case 22:p.memoizedState===null&&Za(f,p,o),sc(p,p.return);break;case 30:break;default:Za(f,p,o)}s=s.sibling}}function Sm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Hl(o))}function Am(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Hl(r))}function Pr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)A_(r,s,o,u),s=s.sibling}function A_(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Pr(r,s,o,u),f&2048&&ac(9,s);break;case 1:Pr(r,s,o,u);break;case 3:Pr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Hl(r)));break;case 12:if(f&2048){Pr(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,S=p.id,j=p.onPostCommit;typeof j=="function"&&j(S,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(V){ct(s,s.return,V)}}else Pr(r,s,o,u);break;case 13:Pr(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,S=s.alternate,s.memoizedState!==null?p._visibility&2?Pr(r,s,o,u):ic(r,s):p._visibility&2?Pr(r,s,o,u):(p._visibility|=2,So(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Sm(S,s);break;case 24:Pr(r,s,o,u),f&2048&&Am(s.alternate,s);break;default:Pr(r,s,o,u)}}function So(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,S=s,j=o,V=u,Q=S.flags;switch(S.tag){case 0:case 11:case 15:So(p,S,j,V,f),ac(8,S);break;case 23:break;case 22:var ee=S.stateNode;S.memoizedState!==null?ee._visibility&2?So(p,S,j,V,f):ic(p,S):(ee._visibility|=2,So(p,S,j,V,f)),f&&Q&2048&&Sm(S.alternate,S);break;case 24:So(p,S,j,V,f),f&&Q&2048&&Am(S.alternate,S);break;default:So(p,S,j,V,f)}s=s.sibling}}function ic(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:ic(o,u),f&2048&&Sm(u.alternate,u);break;case 24:ic(o,u),f&2048&&Am(u.alternate,u);break;default:ic(o,u)}s=s.sibling}}var oc=8192;function Ao(r){if(r.subtreeFlags&oc)for(r=r.child;r!==null;)N_(r),r=r.sibling}function N_(r){switch(r.tag){case 26:Ao(r),r.flags&oc&&r.memoizedState!==null&&yN(ir,r.memoizedState,r.memoizedProps);break;case 5:Ao(r);break;case 3:case 4:var s=ir;ir=Nd(r.stateNode.containerInfo),Ao(r),ir=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=oc,oc=16777216,Ao(r),oc=s):Ao(r));break;default:Ao(r)}}function T_(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function lc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Yt=u,j_(u,r)}T_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)C_(r),r=r.sibling}function C_(r){switch(r.tag){case 0:case 11:case 15:lc(r),r.flags&2048&&Xa(9,r,r.return);break;case 3:lc(r);break;case 12:lc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,md(r)):lc(r);break;default:lc(r)}}function md(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Yt=u,j_(u,r)}T_(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Xa(8,s,s.return),md(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,md(s));break;default:md(s)}r=r.sibling}}function j_(r,s){for(;Yt!==null;){var o=Yt;switch(o.tag){case 0:case 11:case 15:Xa(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Yt=u;else e:for(o=r;Yt!==null;){u=Yt;var f=u.sibling,p=u.return;if(b_(u),u===o){Yt=null;break e}if(f!==null){f.return=p,Yt=f;break e}Yt=p}}}var PA={getCacheForType:function(r){var s=ln(qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},kA=typeof WeakMap=="function"?WeakMap:Map,rt=0,dt=null,qe=null,Ke=0,at=0,In=null,Ja=!1,No=!1,Nm=!1,ba=0,wt=0,es=0,yi=0,Tm=0,Kn=0,To=0,cc=null,xn=null,Cm=!1,jm=0,pd=1/0,gd=null,ts=null,tn=0,ns=null,Co=null,jo=0,Dm=0,Rm=null,D_=null,uc=0,Im=null;function Pn(){if((rt&2)!==0&&Ke!==0)return Ke&-Ke;if(K.T!==null){var r=go;return r!==0?r:Um()}return La()}function R_(){Kn===0&&(Kn=(Ke&536870912)===0||Ze?_l():536870912);var r=Qn.current;return r!==null&&(r.flags|=32),Kn}function kn(r,s,o){(r===dt&&(at===2||at===9)||r.cancelPendingCommit!==null)&&(Do(r,0),rs(r,Ke,Kn,!1)),Zr(r,o),((rt&2)===0||r!==dt)&&(r===dt&&((rt&2)===0&&(yi|=o),wt===4&&rs(r,Ke,Kn,!1)),kr(r))}function I_(r,s,o){if((rt&6)!==0)throw Error(a(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Fs(r,s),f=u?LA(r,s):Om(r,s,!0),p=u;do{if(f===0){No&&!u&&rs(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!OA(o)){f=Om(r,s,!1),p=!1;continue}if(f===2){if(p=s,r.errorRecoveryDisabledLanes&p)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var j=r;f=cc;var V=j.current.memoizedState.isDehydrated;if(V&&(Do(j,S).flags|=256),S=Om(j,S,!1),S!==2){if(Nm&&!V){j.errorRecoveryDisabledLanes|=p,yi|=p,f=4;break e}p=xn,xn=f,p!==null&&(xn===null?xn=p:xn.push.apply(xn,p))}f=S}if(p=!1,f!==2)continue}}if(f===1){Do(r,0),rs(r,s,0,!0);break}e:{switch(u=r,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:rs(u,s,Kn,!Ja);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(f=jm+300-Ln(),10<f)){if(rs(u,s,Kn,!Ja),$i(u,0,!0)!==0)break e;u.timeoutHandle=ob(P_.bind(null,u,o,xn,gd,Cm,s,Kn,yi,To,Ja,p,2,-0,0),f);break e}P_(u,o,xn,gd,Cm,s,Kn,yi,To,Ja,p,0,-0,0)}}break}while(!0);kr(r)}function P_(r,s,o,u,f,p,S,j,V,Q,ee,re,Y,X){if(r.timeoutHandle=-1,re=s.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(yc={stylesheets:null,count:0,unsuspend:gN},N_(s),re=vN(),re!==null)){r.cancelPendingCommit=re(q_.bind(null,r,s,p,o,u,f,S,j,V,ee,1,Y,X)),rs(r,p,S,!Q);return}q_(r,s,p,o,u,f,S,j,V)}function OA(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Cn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rs(r,s,o,u){s&=~Tm,s&=~yi,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var p=31-on(f),S=1<<p;u[p]=-1,f&=~S}o!==0&&_r(r,o,s)}function yd(){return(rt&6)===0?(dc(0),!1):!0}function Pm(){if(qe!==null){if(at===0)var r=qe.return;else r=qe,ha=di=null,Xf(r),Eo=null,tc=0,r=qe;for(;r!==null;)h_(r.alternate,r),r=r.return;qe=null}}function Do(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,JA(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Pm(),dt=r,qe=o=ca(r.current,null),Ke=s,at=0,In=null,Ja=!1,No=Fs(r,s),Nm=!1,To=Kn=Tm=yi=es=wt=0,xn=cc=null,Cm=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-on(u),p=1<<f;s|=r[f],u&=~p}return ba=s,Uu(),o}function k_(r,s){Le=null,K.H=ad,s===$l||s===Ku?(s=Wy(),at=3):s===Ky?(s=Wy(),at=4):at=s===Zv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,In=s,qe===null&&(wt=1,cd(r,Fn(s,r.current)))}function O_(){var r=K.H;return K.H=ad,r===null?ad:r}function M_(){var r=K.A;return K.A=PA,r}function km(){wt=4,Ja||(Ke&4194048)!==Ke&&Qn.current!==null||(No=!0),(es&134217727)===0&&(yi&134217727)===0||dt===null||rs(dt,Ke,Kn,!1)}function Om(r,s,o){var u=rt;rt|=2;var f=O_(),p=M_();(dt!==r||Ke!==s)&&(gd=null,Do(r,s)),s=!1;var S=wt;e:do try{if(at!==0&&qe!==null){var j=qe,V=In;switch(at){case 8:Pm(),S=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(s=!0);var Q=at;if(at=0,In=null,Ro(r,j,V,Q),o&&No){S=0;break e}break;default:Q=at,at=0,In=null,Ro(r,j,V,Q)}}MA(),S=wt;break}catch(ee){k_(r,ee)}while(!0);return s&&r.shellSuspendCounter++,ha=di=null,rt=u,K.H=f,K.A=p,qe===null&&(dt=null,Ke=0,Uu()),S}function MA(){for(;qe!==null;)L_(qe)}function LA(r,s){var o=rt;rt|=2;var u=O_(),f=M_();dt!==r||Ke!==s?(gd=null,pd=Ln()+500,Do(r,s)):No=Fs(r,s);e:do try{if(at!==0&&qe!==null){s=qe;var p=In;t:switch(at){case 1:at=0,In=null,Ro(r,s,p,1);break;case 2:case 9:if(Yy(p)){at=0,In=null,V_(s);break}s=function(){at!==2&&at!==9||dt!==r||(at=7),kr(r)},p.then(s,s);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Yy(p)?(at=0,In=null,V_(s)):(at=0,In=null,Ro(r,s,p,7));break;case 5:var S=null;switch(qe.tag){case 26:S=qe.memoizedState;case 5:case 27:var j=qe;if(!S||_b(S)){at=0,In=null;var V=j.sibling;if(V!==null)qe=V;else{var Q=j.return;Q!==null?(qe=Q,vd(Q)):qe=null}break t}}at=0,In=null,Ro(r,s,p,5);break;case 6:at=0,In=null,Ro(r,s,p,6);break;case 8:Pm(),wt=6;break e;default:throw Error(a(462))}}VA();break}catch(ee){k_(r,ee)}while(!0);return ha=di=null,K.H=u,K.A=f,rt=o,qe!==null?0:(dt=null,Ke=0,Uu(),wt)}function VA(){for(;qe!==null&&!pl();)L_(qe)}function L_(r){var s=u_(r.alternate,r,ba);r.memoizedProps=r.pendingProps,s===null?vd(r):qe=s}function V_(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=a_(o,s,s.pendingProps,s.type,void 0,Ke);break;case 11:s=a_(o,s,s.pendingProps,s.type.render,s.ref,Ke);break;case 5:Xf(s);default:h_(o,s),s=qe=Uy(s,ba),s=u_(o,s,ba)}r.memoizedProps=r.pendingProps,s===null?vd(r):qe=s}function Ro(r,s,o,u){ha=di=null,Xf(s),Eo=null,tc=0;var f=s.return;try{if(TA(r,f,s,o,Ke)){wt=1,cd(r,Fn(o,r.current)),qe=null;return}}catch(p){if(f!==null)throw qe=f,p;wt=1,cd(r,Fn(o,r.current)),qe=null;return}s.flags&32768?(Ze||u===1?r=!0:No||(Ke&536870912)!==0?r=!1:(Ja=r=!0,(u===2||u===9||u===3||u===6)&&(u=Qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),U_(s,r)):vd(s)}function vd(r){var s=r;do{if((s.flags&32768)!==0){U_(s,Ja);return}r=s.return;var o=jA(s.alternate,s,ba);if(o!==null){qe=o;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=r}while(s!==null);wt===0&&(wt=5)}function U_(r,s){do{var o=DA(r.alternate,r);if(o!==null){o.flags&=32767,qe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){qe=r;return}qe=r=o}while(r!==null);wt=6,qe=null}function q_(r,s,o,u,f,p,S,j,V){r.cancelPendingCommit=null;do _d();while(tn!==0);if((rt&6)!==0)throw Error(a(327));if(s!==null){if(s===r.current)throw Error(a(177));if(p=s.lanes|s.childLanes,p|=Af,xl(r,o,p,S,j,V),r===dt&&(qe=dt=null,Ke=0),Co=s,ns=r,jo=o,Dm=p,Rm=f,D_=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,zA(Us,function(){return G_(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,f=ce.p,ce.p=2,S=rt,rt|=4;try{RA(r,s,o)}finally{rt=S,ce.p=f,K.T=u}}tn=1,B_(),z_(),F_()}}function B_(){if(tn===1){tn=0;var r=ns,s=Co,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=K.T,K.T=null;var u=ce.p;ce.p=2;var f=rt;rt|=4;try{w_(s,r);var p=Qm,S=jy(r.containerInfo),j=p.focusedElem,V=p.selectionRange;if(S!==j&&j&&j.ownerDocument&&Cy(j.ownerDocument.documentElement,j)){if(V!==null&&bf(j)){var Q=V.start,ee=V.end;if(ee===void 0&&(ee=Q),"selectionStart"in j)j.selectionStart=Q,j.selectionEnd=Math.min(ee,j.value.length);else{var re=j.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),De=j.textContent.length,Se=Math.min(V.start,De),lt=V.end===void 0?Se:Math.min(V.end,De);!X.extend&&Se>lt&&(S=lt,lt=Se,Se=S);var F=Ty(j,Se),z=Ty(j,lt);if(F&&z&&(X.rangeCount!==1||X.anchorNode!==F.node||X.anchorOffset!==F.offset||X.focusNode!==z.node||X.focusOffset!==z.offset)){var $=re.createRange();$.setStart(F.node,F.offset),X.removeAllRanges(),Se>lt?(X.addRange($),X.extend(z.node,z.offset)):($.setEnd(z.node,z.offset),X.addRange($))}}}}for(re=[],X=j;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<re.length;j++){var te=re[j];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Rd=!!$m,Qm=$m=null}finally{rt=f,ce.p=u,K.T=o}}r.current=s,tn=2}}function z_(){if(tn===2){tn=0;var r=ns,s=Co,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=K.T,K.T=null;var u=ce.p;ce.p=2;var f=rt;rt|=4;try{__(r,s.alternate,s)}finally{rt=f,ce.p=u,K.T=o}}tn=3}}function F_(){if(tn===4||tn===3){tn=0,mu();var r=ns,s=Co,o=jo,u=D_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tn=5:(tn=0,Co=ns=null,H_(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(ts=null),Qi(o),s=s.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(xt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=K.T,f=ce.p,ce.p=2,K.T=null;try{for(var p=r.onRecoverableError,S=0;S<u.length;S++){var j=u[S];p(j.value,{componentStack:j.stack})}}finally{K.T=s,ce.p=f}}(jo&3)!==0&&_d(),kr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===Im?uc++:(uc=0,Im=r):uc=0,dc(0)}}function H_(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Hl(s)))}function _d(r){return B_(),z_(),F_(),G_()}function G_(){if(tn!==5)return!1;var r=ns,s=Dm;Dm=0;var o=Qi(jo),u=K.T,f=ce.p;try{ce.p=32>o?32:o,K.T=null,o=Rm,Rm=null;var p=ns,S=jo;if(tn=0,Co=ns=null,jo=0,(rt&6)!==0)throw Error(a(331));var j=rt;if(rt|=4,C_(p.current),A_(p,p.current,S,o),rt=j,dc(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(xt,p)}catch{}return!0}finally{ce.p=f,K.T=u,H_(r,s)}}function $_(r,s,o){s=Fn(o,s),s=um(r.stateNode,s,2),r=$a(r,s,2),r!==null&&(Zr(r,2),kr(r))}function ct(r,s,o){if(r.tag===3)$_(r,r,o);else for(;s!==null;){if(s.tag===3){$_(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){r=Fn(o,r),o=Xv(2),u=$a(s,o,2),u!==null&&(Wv(o,u,s,r),Zr(u,2),kr(u));break}}s=s.return}}function Mm(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new kA;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Nm=!0,f.add(o),r=UA.bind(null,r,s,o),s.then(r,r))}function UA(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,dt===r&&(Ke&o)===o&&(wt===4||wt===3&&(Ke&62914560)===Ke&&300>Ln()-jm?(rt&2)===0&&Do(r,0):Tm|=o,To===Ke&&(To=0)),kr(r)}function Q_(r,s){s===0&&(s=bl()),r=ho(r,s),r!==null&&(Zr(r,s),kr(r))}function qA(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Q_(r,o)}function BA(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(s),Q_(r,o)}function zA(r,s){return Ls(r,s)}var bd=null,Io=null,Lm=!1,xd=!1,Vm=!1,vi=0;function kr(r){r!==Io&&r.next===null&&(Io===null?bd=Io=r:Io=Io.next=r),xd=!0,Lm||(Lm=!0,HA())}function dc(r,s){if(!Vm&&xd){Vm=!0;do for(var o=!1,u=bd;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var S=u.suspendedLanes,j=u.pingedLanes;p=(1<<31-on(42|r)+1)-1,p&=f&~(S&~j),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,W_(u,p))}else p=Ke,p=$i(u,u===dt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Fs(u,p)||(o=!0,W_(u,p));u=u.next}while(o);Vm=!1}}function FA(){K_()}function K_(){xd=Lm=!1;var r=0;vi!==0&&(ZA()&&(r=vi),vi=0);for(var s=Ln(),o=null,u=bd;u!==null;){var f=u.next,p=Y_(u,s);p===0?(u.next=null,o===null?bd=f:o.next=f,f===null&&(Io=o)):(o=u,(r!==0||(p&3)!==0)&&(xd=!0)),u=f}dc(r)}function Y_(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var S=31-on(p),j=1<<S,V=f[S];V===-1?((j&o)===0||(j&u)!==0)&&(f[S]=vl(j,s)):V<=s&&(r.expiredLanes|=j),p&=~j}if(s=dt,o=Ke,o=$i(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(at===2||at===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Vs(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Fs(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Vs(u),Qi(o)){case 2:case 8:o=Hi;break;case 32:o=Us;break;case 268435456:o=Gi;break;default:o=Us}return u=X_.bind(null,r),o=Ls(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Vs(u),r.callbackPriority=2,r.callbackNode=null,2}function X_(r,s){if(tn!==0&&tn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(_d()&&r.callbackNode!==o)return null;var u=Ke;return u=$i(r,r===dt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(I_(r,u,s),Y_(r,Ln()),r.callbackNode!=null&&r.callbackNode===o?X_.bind(null,r):null)}function W_(r,s){if(_d())return null;I_(r,s,!0)}function HA(){eN(function(){(rt&6)!==0?Ls(gl,FA):K_()})}function Um(){return vi===0&&(vi=_l()),vi}function Z_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ji(""+r)}function J_(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function GA(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=Z_((f[Dt]||null).action),S=u.submitter;S&&(s=(s=S[Dt]||null)?Z_(s.formAction):S.getAttribute("formAction"),s!==null&&(p=s,S=null));var j=new eo("action","action",null,u,f);r.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(vi!==0){var V=S?J_(f,S):new FormData(f);sm(o,{pending:!0,data:V,method:f.method,action:p},null,V)}}else typeof p=="function"&&(j.preventDefault(),V=S?J_(f,S):new FormData(f),sm(o,{pending:!0,data:V,method:f.method,action:p},p,V))},currentTarget:f}]})}}for(var qm=0;qm<Sf.length;qm++){var Bm=Sf[qm],$A=Bm.toLowerCase(),QA=Bm[0].toUpperCase()+Bm.slice(1);sr($A,"on"+QA)}sr(Iy,"onAnimationEnd"),sr(Py,"onAnimationIteration"),sr(ky,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(uA,"onTransitionRun"),sr(dA,"onTransitionStart"),sr(hA,"onTransitionCancel"),sr(Oy,"onTransitionEnd"),ea("onMouseEnter",["mouseout","mouseover"]),ea("onMouseLeave",["mouseout","mouseover"]),ea("onPointerEnter",["pointerout","pointerover"]),ea("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hc));function eb(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var S=u.length-1;0<=S;S--){var j=u[S],V=j.instance,Q=j.currentTarget;if(j=j.listener,V!==p&&f.isPropagationStopped())break e;p=j,f.currentTarget=Q;try{p(f)}catch(ee){ld(ee)}f.currentTarget=null,p=V}else for(S=0;S<u.length;S++){if(j=u[S],V=j.instance,Q=j.currentTarget,j=j.listener,V!==p&&f.isPropagationStopped())break e;p=j,f.currentTarget=Q;try{p(f)}catch(ee){ld(ee)}f.currentTarget=null,p=V}}}}function Be(r,s){var o=s[wl];o===void 0&&(o=s[wl]=new Set);var u=r+"__bubble";o.has(u)||(tb(s,r,2,!1),o.add(u))}function zm(r,s,o){var u=0;s&&(u|=4),tb(o,r,u,s)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function Fm(r){if(!r[Ed]){r[Ed]=!0,Sl.forEach(function(o){o!=="selectionchange"&&(KA.has(o)||zm(o,!1,r),zm(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ed]||(s[Ed]=!0,zm("selectionchange",!1,s))}}function tb(r,s,o,u){switch(Ab(s)){case 2:var f=xN;break;case 8:f=EN;break;default:f=rp}o=f.bind(null,s,o,r),f=void 0,!Bn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Hm(r,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var j=u.stateNode.containerInfo;if(j===f)break;if(S===4)for(S=u.return;S!==null;){var V=S.tag;if((V===3||V===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;j!==null;){if(S=Jr(j),S===null)return;if(V=S.tag,V===5||V===6||V===26||V===27){u=p=S;continue e}j=j.parentNode}}u=u.return}Su(function(){var Q=p,ee=qn(o),re=[];e:{var Y=My.get(r);if(Y!==void 0){var X=eo,De=r;switch(r){case"keypress":if(Ar(o)===0)break e;case"keydown":case"keyup":X=io;break;case"focusin":De="focus",X=ro;break;case"focusout":De="blur",X=ro;break;case"beforeblur":case"afterblur":X=ro;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=zn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Iu;break;case Iy:case Py:case ky:X=ao;break;case Oy:X=ku;break;case"scroll":case"scrollend":X=Au;break;case"wheel":X=oo;break;case"copy":case"cut":case"paste":X=so;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ml;break;case"toggle":case"beforetoggle":X=Mu}var Se=(s&4)!==0,lt=!Se&&(r==="scroll"||r==="scrollend"),F=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var z=Q,$;z!==null;){var te=z;if($=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||$===null||F===null||(te=Ws(z,F),te!=null&&Se.push(fc(z,te,$))),lt)break;z=z.return}0<Se.length&&(Y=new X(Y,De,null,o,ee),re.push({event:Y,listeners:Se}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",X=r==="mouseout"||r==="pointerout",Y&&o!==ra&&(De=o.relatedTarget||o.fromElement)&&(Jr(De)||De[Vn]))break e;if((X||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(De=o.relatedTarget||o.toElement,X=Q,De=De?Jr(De):null,De!==null&&(lt=c(De),Se=De.tag,De!==lt||Se!==5&&Se!==27&&Se!==6)&&(De=null)):(X=null,De=Q),X!==De)){if(Se=zn,te="onMouseLeave",F="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(Se=Ml,te="onPointerLeave",F="onPointerEnter",z="pointer"),lt=X==null?Y:xr(X),$=De==null?Y:xr(De),Y=new Se(te,z+"leave",X,o,ee),Y.target=lt,Y.relatedTarget=$,te=null,Jr(ee)===Q&&(Se=new Se(F,z+"enter",De,o,ee),Se.target=$,Se.relatedTarget=lt,te=Se),lt=te,X&&De)t:{for(Se=X,F=De,z=0,$=Se;$;$=Po($))z++;for($=0,te=F;te;te=Po(te))$++;for(;0<z-$;)Se=Po(Se),z--;for(;0<$-z;)F=Po(F),$--;for(;z--;){if(Se===F||F!==null&&Se===F.alternate)break t;Se=Po(Se),F=Po(F)}Se=null}else Se=null;X!==null&&nb(re,Y,X,Se,!1),De!==null&&lt!==null&&nb(re,lt,De,Se,!0)}}e:{if(Y=Q?xr(Q):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var ve=xy;else if(Ut(Y))if(Ey)ve=oA;else{ve=sA;var Ue=aA}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?Q&&jl(Q.elementType)&&(ve=xy):ve=iA;if(ve&&(ve=ve(r,Q))){la(re,ve,o,ee);break e}Ue&&Ue(r,Y,Q),r==="focusout"&&Q&&Y.type==="number"&&Q.memoizedProps.value!=null&&Ba(Y,"number",Y.value)}switch(Ue=Q?xr(Q):window,r){case"focusin":(Ut(Ue)||Ue.contentEditable==="true")&&(lo=Ue,xf=Q,Ul=null);break;case"focusout":Ul=xf=lo=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,Dy(re,o,ee);break;case"selectionchange":if(cA)break;case"keydown":case"keyup":Dy(re,o,ee)}var be;if(Cr)e:{switch(r){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else $e?Z(r,o)&&(Ne="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ne="onCompositionStart");Ne&&(w&&o.locale!=="ko"&&($e||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&$e&&(be=Rl()):(Sr=ee,za="value"in Sr?Sr.value:Sr.textContent,$e=!0)),Ue=wd(Q,Ne),0<Ue.length&&(Ne=new kl(Ne,r,null,o,ee),re.push({event:Ne,listeners:Ue}),be?Ne.data=be:(be=fe(o),be!==null&&(Ne.data=be)))),(be=v?Vt(r,o):Qe(r,o))&&(Ne=wd(Q,"onBeforeInput"),0<Ne.length&&(Ue=new kl("onBeforeInput","beforeinput",null,o,ee),re.push({event:Ue,listeners:Ne}),Ue.data=be)),GA(re,r,Q,o,ee)}eb(re,s)})}function fc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function wd(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ws(r,o),f!=null&&u.unshift(fc(r,f,p)),f=Ws(r,s),f!=null&&u.push(fc(r,f,p))),r.tag===3)return u;r=r.return}return[]}function Po(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function nb(r,s,o,u,f){for(var p=s._reactName,S=[];o!==null&&o!==u;){var j=o,V=j.alternate,Q=j.stateNode;if(j=j.tag,V!==null&&V===u)break;j!==5&&j!==26&&j!==27||Q===null||(V=Q,f?(Q=Ws(o,p),Q!=null&&S.unshift(fc(o,Q,V))):f||(Q=Ws(o,p),Q!=null&&S.push(fc(o,Q,V)))),o=o.return}S.length!==0&&r.push({event:s,listeners:S})}var YA=/\r\n?/g,XA=/\u0000|\uFFFD/g;function rb(r){return(typeof r=="string"?r:""+r).replace(YA,`
`).replace(XA,"")}function ab(r,s){return s=rb(s),rb(r)===s}function Sd(){}function ot(r,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Un(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Un(r,""+u);break;case"className":Er(r,"class",u);break;case"tabIndex":Er(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Er(r,o,u);break;case"style":Cl(r,u,p);break;case"data":if(s!=="object"){Er(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ji(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&ot(r,s,"name",f.name,f,null),ot(r,s,"formEncType",f.formEncType,f,null),ot(r,s,"formMethod",f.formMethod,f,null),ot(r,s,"formTarget",f.formTarget,f,null)):(ot(r,s,"encType",f.encType,f,null),ot(r,s,"method",f.method,f,null),ot(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ji(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Sd);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Ji(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Be("beforetoggle",r),Be("toggle",r),qa(r,"popover",u);break;case"xlinkActuate":Zt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":qa(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=mf.get(o)||o,qa(r,o,u))}}function Gm(r,s,o,u,f,p){switch(o){case"style":Cl(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Un(r,u):(typeof u=="number"||typeof u=="bigint")&&Un(r,""+u);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Sd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ki.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=r[Dt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):qa(r,o,u)}}}function nn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var S=o[p];if(S!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ot(r,s,p,S,o,null)}}f&&ot(r,s,"srcSet",o.srcSet,o,null),u&&ot(r,s,"src",o.src,o,null);return;case"input":Be("invalid",r);var j=p=S=f=null,V=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ee=o[u];if(ee!=null)switch(u){case"name":f=ee;break;case"type":S=ee;break;case"checked":V=ee;break;case"defaultChecked":Q=ee;break;case"value":p=ee;break;case"defaultValue":j=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,s));break;default:ot(r,s,u,ee,o,null)}}Ks(r,p,j,V,Q,S,f,!1),Zi(r);return;case"select":Be("invalid",r),u=S=p=null;for(f in o)if(o.hasOwnProperty(f)&&(j=o[f],j!=null))switch(f){case"value":p=j;break;case"defaultValue":S=j;break;case"multiple":u=j;default:ot(r,s,f,j,o,null)}s=p,o=S,r.multiple=!!u,s!=null?na(r,!!u,s,!1):o!=null&&na(r,!!u,o,!0);return;case"textarea":Be("invalid",r),p=f=u=null;for(S in o)if(o.hasOwnProperty(S)&&(j=o[S],j!=null))switch(S){case"value":u=j;break;case"defaultValue":f=j;break;case"children":p=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(91));break;default:ot(r,s,S,j,o,null)}Ys(r,u,f,p),Zi(r);return;case"option":for(V in o)if(o.hasOwnProperty(V)&&(u=o[V],u!=null))switch(V){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ot(r,s,V,u,o,null)}return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(u=0;u<hc.length;u++)Be(hc[u],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ot(r,s,Q,u,o,null)}return;default:if(jl(s)){for(ee in o)o.hasOwnProperty(ee)&&(u=o[ee],u!==void 0&&Gm(r,s,ee,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&ot(r,s,j,u,o,null))}function WA(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,S=null,j=null,V=null,Q=null,ee=null;for(X in o){var re=o[X];if(o.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=re;default:u.hasOwnProperty(X)||ot(r,s,X,null,u,re)}}for(var Y in u){var X=u[Y];if(re=o[Y],u.hasOwnProperty(Y)&&(X!=null||re!=null))switch(Y){case"type":p=X;break;case"name":f=X;break;case"checked":Q=X;break;case"defaultChecked":ee=X;break;case"value":S=X;break;case"defaultValue":j=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,s));break;default:X!==re&&ot(r,s,Y,X,u,re)}}Tn(r,S,j,V,Q,ee,p,f);return;case"select":X=S=j=Y=null;for(p in o)if(V=o[p],o.hasOwnProperty(p)&&V!=null)switch(p){case"value":break;case"multiple":X=V;default:u.hasOwnProperty(p)||ot(r,s,p,null,u,V)}for(f in u)if(p=u[f],V=o[f],u.hasOwnProperty(f)&&(p!=null||V!=null))switch(f){case"value":Y=p;break;case"defaultValue":j=p;break;case"multiple":S=p;default:p!==V&&ot(r,s,f,p,u,V)}s=j,o=S,u=X,Y!=null?na(r,!!o,Y,!1):!!u!=!!o&&(s!=null?na(r,!!o,s,!0):na(r,!!o,o?[]:"",!1));return;case"textarea":X=Y=null;for(j in o)if(f=o[j],o.hasOwnProperty(j)&&f!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:ot(r,s,j,null,u,f)}for(S in u)if(f=u[S],p=o[S],u.hasOwnProperty(S)&&(f!=null||p!=null))switch(S){case"value":Y=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&ot(r,s,S,f,u,p)}st(r,Y,X);return;case"option":for(var De in o)if(Y=o[De],o.hasOwnProperty(De)&&Y!=null&&!u.hasOwnProperty(De))switch(De){case"selected":r.selected=!1;break;default:ot(r,s,De,null,u,Y)}for(V in u)if(Y=u[V],X=o[V],u.hasOwnProperty(V)&&Y!==X&&(Y!=null||X!=null))switch(V){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ot(r,s,V,Y,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)Y=o[Se],o.hasOwnProperty(Se)&&Y!=null&&!u.hasOwnProperty(Se)&&ot(r,s,Se,null,u,Y);for(Q in u)if(Y=u[Q],X=o[Q],u.hasOwnProperty(Q)&&Y!==X&&(Y!=null||X!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,s));break;default:ot(r,s,Q,Y,u,X)}return;default:if(jl(s)){for(var lt in o)Y=o[lt],o.hasOwnProperty(lt)&&Y!==void 0&&!u.hasOwnProperty(lt)&&Gm(r,s,lt,void 0,u,Y);for(ee in u)Y=u[ee],X=o[ee],!u.hasOwnProperty(ee)||Y===X||Y===void 0&&X===void 0||Gm(r,s,ee,Y,u,X);return}}for(var F in o)Y=o[F],o.hasOwnProperty(F)&&Y!=null&&!u.hasOwnProperty(F)&&ot(r,s,F,null,u,Y);for(re in u)Y=u[re],X=o[re],!u.hasOwnProperty(re)||Y===X||Y==null&&X==null||ot(r,s,re,Y,u,X)}var $m=null,Qm=null;function Ad(r){return r.nodeType===9?r:r.ownerDocument}function sb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ib(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Km(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ym=null;function ZA(){var r=window.event;return r&&r.type==="popstate"?r===Ym?!1:(Ym=r,!0):(Ym=null,!1)}var ob=typeof setTimeout=="function"?setTimeout:void 0,JA=typeof clearTimeout=="function"?clearTimeout:void 0,lb=typeof Promise=="function"?Promise:void 0,eN=typeof queueMicrotask=="function"?queueMicrotask:typeof lb<"u"?function(r){return lb.resolve(null).then(r).catch(tN)}:ob;function tN(r){setTimeout(function(){throw r})}function as(r){return r==="head"}function cb(r,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var S=r.ownerDocument;if(o&1&&mc(S.documentElement),o&2&&mc(S.body),o&4)for(o=S.head,mc(o),S=o.firstChild;S;){var j=S.nextSibling,V=S.nodeName;S[Hs]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=j}}if(f===0){r.removeChild(p),Ec(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Ec(s)}function Xm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Xm(o),Ua(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function nN(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Hs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=or(r.nextSibling),r===null)break}return null}function rN(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=or(r.nextSibling),r===null))return null;return r}function Wm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function aN(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function or(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Zm=null;function ub(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function db(r,s,o){switch(s=Ad(o),r){case"html":if(r=s.documentElement,!r)throw Error(a(452));return r;case"head":if(r=s.head,!r)throw Error(a(453));return r;case"body":if(r=s.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function mc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ua(r)}var Yn=new Map,hb=new Set;function Nd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var xa=ce.d;ce.d={f:sN,r:iN,D:oN,C:lN,L:cN,m:uN,X:hN,S:dN,M:fN};function sN(){var r=xa.f(),s=yd();return r||s}function iN(r){var s=br(r);s!==null&&s.tag===5&&s.type==="form"?Iv(s):xa.r(r)}var ko=typeof document>"u"?null:document;function fb(r,s,o){var u=ko;if(u&&typeof s=="string"&&s){var f=Rt(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),hb.has(f)||(hb.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),nn(s,"link",r),St(s),u.head.appendChild(s)))}}function oN(r){xa.D(r),fb("dns-prefetch",r,null)}function lN(r,s){xa.C(r,s),fb("preconnect",r,s)}function cN(r,s,o){xa.L(r,s,o);var u=ko;if(u&&r&&s){var f='link[rel="preload"][as="'+Rt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Rt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Rt(o.imageSizes)+'"]')):f+='[href="'+Rt(r)+'"]';var p=f;switch(s){case"style":p=Oo(r);break;case"script":p=Mo(r)}Yn.has(p)||(r=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Yn.set(p,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(pc(p))||s==="script"&&u.querySelector(gc(p))||(s=u.createElement("link"),nn(s,"link",r),St(s),u.head.appendChild(s)))}}function uN(r,s){xa.m(r,s);var o=ko;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Rt(u)+'"][href="'+Rt(r)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Mo(r)}if(!Yn.has(p)&&(r=_({rel:"modulepreload",href:r},s),Yn.set(p,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(gc(p)))return}u=o.createElement("link"),nn(u,"link",r),St(u),o.head.appendChild(u)}}}function dN(r,s,o){xa.S(r,s,o);var u=ko;if(u&&r){var f=mn(u).hoistableStyles,p=Oo(r);s=s||"default";var S=f.get(p);if(!S){var j={loading:0,preload:null};if(S=u.querySelector(pc(p)))j.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Yn.get(p))&&Jm(r,o);var V=S=u.createElement("link");St(V),nn(V,"link",r),V._p=new Promise(function(Q,ee){V.onload=Q,V.onerror=ee}),V.addEventListener("load",function(){j.loading|=1}),V.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Td(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:j},f.set(p,S)}}}function hN(r,s){xa.X(r,s);var o=ko;if(o&&r){var u=mn(o).hoistableScripts,f=Mo(r),p=u.get(f);p||(p=o.querySelector(gc(f)),p||(r=_({src:r,async:!0},s),(s=Yn.get(f))&&ep(r,s),p=o.createElement("script"),St(p),nn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function fN(r,s){xa.M(r,s);var o=ko;if(o&&r){var u=mn(o).hoistableScripts,f=Mo(r),p=u.get(f);p||(p=o.querySelector(gc(f)),p||(r=_({src:r,async:!0,type:"module"},s),(s=Yn.get(f))&&ep(r,s),p=o.createElement("script"),St(p),nn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function mb(r,s,o,u){var f=(f=Re.current)?Nd(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Oo(o.href),o=mn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Oo(o.href);var p=mn(f).hoistableStyles,S=p.get(r);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,S),(p=f.querySelector(pc(r)))&&!p._p&&(S.instance=p,S.state.loading=5),Yn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Yn.set(r,o),p||mN(f,r,o,S.state))),s&&u===null)throw Error(a(528,""));return S}if(s&&u!==null)throw Error(a(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Mo(o),o=mn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function Oo(r){return'href="'+Rt(r)+'"'}function pc(r){return'link[rel="stylesheet"]['+r+"]"}function pb(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function mN(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),nn(s,"link",o),St(s),r.head.appendChild(s))}function Mo(r){return'[src="'+Rt(r)+'"]'}function gc(r){return"script[async]"+r}function gb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Rt(o.href)+'"]');if(u)return s.instance=u,St(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),St(u),nn(u,"style",f),Td(u,o.precedence,r),s.instance=u;case"stylesheet":f=Oo(o.href);var p=r.querySelector(pc(f));if(p)return s.state.loading|=4,s.instance=p,St(p),p;u=pb(o),(f=Yn.get(f))&&Jm(u,f),p=(r.ownerDocument||r).createElement("link"),St(p);var S=p;return S._p=new Promise(function(j,V){S.onload=j,S.onerror=V}),nn(p,"link",u),s.state.loading|=4,Td(p,o.precedence,r),s.instance=p;case"script":return p=Mo(o.src),(f=r.querySelector(gc(p)))?(s.instance=f,St(f),f):(u=o,(f=Yn.get(p))&&(u=_({},o),ep(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),St(f),nn(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Td(u,o.precedence,r));return s.instance}function Td(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,S=0;S<u.length;S++){var j=u[S];if(j.dataset.precedence===s)p=j;else if(p!==f)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Jm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function ep(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Cd=null;function yb(r,s,o){if(Cd===null){var u=new Map,f=Cd=new Map;f.set(o,u)}else f=Cd,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var p=o[f];if(!(p[Hs]||p[Lt]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var S=p.getAttribute(s)||"";S=r+S;var j=u.get(S);j?j.push(p):u.set(S,[p])}}return u}function vb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function pN(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _b(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var yc=null;function gN(){}function yN(r,s,o){if(yc===null)throw Error(a(475));var u=yc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Oo(o.href),p=r.querySelector(pc(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=jd.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,St(p);return}p=r.ownerDocument||r,o=pb(o),(f=Yn.get(f))&&Jm(o,f),p=p.createElement("link"),St(p);var S=p;S._p=new Promise(function(j,V){S.onload=j,S.onerror=V}),nn(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=jd.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function vN(){if(yc===null)throw Error(a(475));var r=yc;return r.stylesheets&&r.count===0&&tp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&tp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function jd(){if(this.count--,this.count===0){if(this.stylesheets)tp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Dd=null;function tp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Dd=new Map,s.forEach(_N,r),Dd=null,jd.call(r))}function _N(r,s){if(!(s.state.loading&4)){var o=Dd.get(r);if(o)var u=o.get(null);else{o=new Map,Dd.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var S=f[p];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),u=S)}u&&o.set(null,u)}f=s.instance,S=f.getAttribute("data-precedence"),p=o.get(S)||u,p===u&&o.set(null,f),o.set(S,f),this.count++,u=jd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var vc={$$typeof:q,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function bN(r,s,o,u,f,p,S,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function bb(r,s,o,u,f,p,S,j,V,Q,ee,re){return r=new bN(r,s,o,S,j,V,Q,re),s=1,p===!0&&(s|=24),p=jn(3,null,null,s),r.current=p,p.stateNode=r,s=Mf(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},qf(p),r}function xb(r){return r?(r=fo,r):fo}function Eb(r,s,o,u,f,p){f=xb(f),u.context===null?u.context=f:u.pendingContext=f,u=Ga(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=$a(r,u,s),o!==null&&(kn(o,r,s),Kl(o,r,s))}function wb(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function np(r,s){wb(r,s),(r=r.alternate)&&wb(r,s)}function Sb(r){if(r.tag===13){var s=ho(r,67108864);s!==null&&kn(s,r,67108864),np(r,67108864)}}var Rd=!0;function xN(r,s,o,u){var f=K.T;K.T=null;var p=ce.p;try{ce.p=2,rp(r,s,o,u)}finally{ce.p=p,K.T=f}}function EN(r,s,o,u){var f=K.T;K.T=null;var p=ce.p;try{ce.p=8,rp(r,s,o,u)}finally{ce.p=p,K.T=f}}function rp(r,s,o,u){if(Rd){var f=ap(u);if(f===null)Hm(r,s,u,Id,o),Nb(r,u);else if(SN(f,r,s,o,u))u.stopPropagation();else if(Nb(r,u),s&4&&-1<wN.indexOf(r)){for(;f!==null;){var p=br(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var S=nr(p.pendingLanes);if(S!==0){var j=p;for(j.pendingLanes|=2,j.entangledLanes|=2;S;){var V=1<<31-on(S);j.entanglements[1]|=V,S&=~V}kr(p),(rt&6)===0&&(pd=Ln()+500,dc(0))}}break;case 13:j=ho(p,2),j!==null&&kn(j,p,2),yd(),np(p,2)}if(p=ap(u),p===null&&Hm(r,s,u,Id,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Hm(r,s,u,null,o)}}function ap(r){return r=qn(r),sp(r)}var Id=null;function sp(r){if(Id=null,r=Jr(r),r!==null){var s=c(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=d(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Id=r,null}function Ab(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lf()){case gl:return 2;case Hi:return 8;case Us:case cf:return 32;case Gi:return 268435456;default:return 32}default:return 32}}var ip=!1,ss=null,is=null,os=null,_c=new Map,bc=new Map,ls=[],wN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nb(r,s){switch(r){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":_c.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(s.pointerId)}}function xc(r,s,o,u,f,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=br(s),s!==null&&Sb(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function SN(r,s,o,u,f){switch(s){case"focusin":return ss=xc(ss,r,s,o,u,f),!0;case"dragenter":return is=xc(is,r,s,o,u,f),!0;case"mouseover":return os=xc(os,r,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return _c.set(p,xc(_c.get(p)||null,r,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,bc.set(p,xc(bc.get(p)||null,r,s,o,u,f)),!0}return!1}function Tb(r){var s=Jr(r.target);if(s!==null){var o=c(s);if(o!==null){if(s=o.tag,s===13){if(s=d(o),s!==null){r.blockedOn=s,yu(r.priority,function(){if(o.tag===13){var u=Pn();u=Ma(u);var f=ho(o,u);f!==null&&kn(f,o,u),np(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Pd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=ap(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);ra=u,o.target.dispatchEvent(u),ra=null}else return s=br(o),s!==null&&Sb(s),r.blockedOn=o,!1;s.shift()}return!0}function Cb(r,s,o){Pd(r)&&o.delete(s)}function AN(){ip=!1,ss!==null&&Pd(ss)&&(ss=null),is!==null&&Pd(is)&&(is=null),os!==null&&Pd(os)&&(os=null),_c.forEach(Cb),bc.forEach(Cb)}function kd(r,s){r.blockedOn===s&&(r.blockedOn=null,ip||(ip=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,AN)))}var Od=null;function jb(r){Od!==r&&(Od=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Od===r&&(Od=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(sp(u||o)===null)continue;break}var p=br(o);p!==null&&(r.splice(s,3),s-=3,sm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Ec(r){function s(V){return kd(V,r)}ss!==null&&kd(ss,r),is!==null&&kd(is,r),os!==null&&kd(os,r),_c.forEach(s),bc.forEach(s);for(var o=0;o<ls.length;o++){var u=ls[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ls.length&&(o=ls[0],o.blockedOn===null);)Tb(o),o.blockedOn===null&&ls.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],S=f[Dt]||null;if(typeof p=="function")S||jb(o);else if(S){var j=null;if(p&&p.hasAttribute("formAction")){if(f=p,S=p[Dt]||null)j=S.formAction;else if(sp(f)!==null)continue}else j=S.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),jb(o)}}}function op(r){this._internalRoot=r}Md.prototype.render=op.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(a(409));var o=s.current,u=Pn();Eb(o,u,r,s,null,null)},Md.prototype.unmount=op.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Eb(r.current,2,null,r,null,null),yd(),s[Vn]=null}};function Md(r){this._internalRoot=r}Md.prototype.unstable_scheduleHydration=function(r){if(r){var s=La();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ls.length&&s!==0&&s<ls[o].priority;o++);ls.splice(o,0,r),o===0&&Tb(r)}};var Db=e.version;if(Db!=="19.1.1")throw Error(a(527,Db,"19.1.1"));ce.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=y(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var NN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{xt=Ld.inject(NN),nt=Ld}catch{}}return Sc.createRoot=function(r,s){if(!i(r))throw Error(a(299));var o=!1,u="",f=$v,p=Qv,S=Kv,j=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks)),s=bb(r,1,!1,null,null,o,u,f,p,S,j,null),r[Vn]=s.current,Fm(r),new op(s)},Sc.hydrateRoot=function(r,s,o){if(!i(r))throw Error(a(299));var u=!1,f="",p=$v,S=Qv,j=Kv,V=null,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(V=o.unstable_transitionCallbacks),o.formState!==void 0&&(Q=o.formState)),s=bb(r,1,!0,s,o??null,u,f,p,S,j,V,Q),s.context=xb(null),o=s.current,u=Pn(),u=Ma(u),f=Ga(u),f.callback=null,$a(o,f,u),o=u,s.current.lanes=o,Zr(s,o),kr(s),r[Vn]=s.current,Fm(r),new Md(s)},Sc.version="19.1.1",Sc}var qb;function LN(){if(qb)return up.exports;qb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),up.exports=MN(),up.exports}var VN=LN();const UN=()=>{};var Bb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let i=n.charCodeAt(a);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const i=n[t++];if(i<128)e[a++]=String.fromCharCode(i);else if(i>191&&i<224){const c=n[t++];e[a++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=n[t++],d=n[t++],m=n[t++],y=((i&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(y>>10)),e[a++]=String.fromCharCode(56320+(y&1023))}else{const c=n[t++],d=n[t++];e[a++]=String.fromCharCode((i&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Hx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<n.length;i+=3){const c=n[i],d=i+1<n.length,m=d?n[i+1]:0,y=i+2<n.length,g=y?n[i+2]:0,_=c>>2,E=(c&3)<<4|m>>4;let b=(m&15)<<2|g>>6,x=g&63;y||(x=64,d||(b=64)),a.push(t[_],t[E],t[b],t[x])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<n.length;){const c=t[n.charAt(i++)],m=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const E=i<n.length?t[n.charAt(i)]:64;if(++i,c==null||m==null||g==null||E==null)throw new BN;const b=c<<2|m>>4;if(a.push(b),g!==64){const x=m<<4&240|g>>2;if(a.push(x),E!==64){const C=g<<6&192|E;a.push(C)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zN=function(n){const e=Fx(n);return Hx.encodeByteArray(e,!0)},ah=function(n){return zN(n).replace(/\./g,"")},Gx=function(n){try{return Hx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=()=>FN().__FIREBASE_DEFAULTS__,GN=()=>{if(typeof process>"u"||typeof Bb>"u")return;const n=Bb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$N=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gx(n[1]);return e&&JSON.parse(e)},Dh=()=>{try{return UN()||HN()||GN()||$N()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$x=n=>Dh()?.emulatorHosts?.[n],Qx=n=>{const e=$x(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},Kx=()=>Dh()?.config,Yx=n=>Dh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",i=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ah(JSON.stringify(t)),ah(JSON.stringify(d)),""].join(".")}const Ic={};function KN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?n.emulator.push(e):n.prod.push(e);return n}function YN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zb=!1;function pg(n,e){if(typeof window>"u"||typeof document>"u"||!Mi(window.location.host)||Ic[n]===e||Ic[n]||zb)return;Ic[n]=e;function t(b){return`__firebase__banner__${b}`}const a="__firebase__banner",c=KN().prod.length>0;function d(){const b=document.getElementById(a);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function y(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{zb=!0,d()},b}function _(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=YN(a),x=t("text"),C=document.getElementById(x)||document.createElement("span"),A=t("learnmore"),U=document.getElementById(A)||document.createElement("a"),D=t("preprendIcon"),W=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const q=b.element;m(q),_(U,A);const se=g();y(W,D),q.append(W,C,U,se),document.body.appendChild(q)}c?(C.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function WN(){const n=Dh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tT(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nT(){return!WN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rT(){try{return typeof indexedDB=="object"}catch{return!1}}function aT(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="FirebaseError";class Qr extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=sT,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},i=`${this.service}/${e}`,c=this.errors[e],d=c?iT(c,a):"Error",m=`${this.serviceName}: ${d} (${i}).`;return new Qr(i,m,a)}}function iT(n,e){return n.replace(oT,(t,a)=>{const i=e[a];return i!=null?String(i):`<${a}?>`})}const oT=/\{\$([^}]+)}/g;function lT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ci(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const i of t){if(!a.includes(i))return!1;const c=n[i],d=e[i];if(Fb(c)&&Fb(d)){if(!Ci(c,d))return!1}else if(c!==d)return!1}for(const i of a)if(!t.includes(i))return!1;return!0}function Fb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Nc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,c]=a.split("=");e[decodeURIComponent(i)]=decodeURIComponent(c)}}),e}function Tc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cT(n,e){const t=new uT(n,e);return t.subscribe.bind(t)}class uT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let i;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");dT(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:a},i.next===void 0&&(i.next=mp),i.error===void 0&&(i.error=mp),i.complete===void 0&&(i.complete=mp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){return n&&n._delegate?n._delegate:n}class Ss{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new QN;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mT(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:i});a.resolve(c)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&d.resolve(i)}return i}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(a)??new Set;i.add(e),this.onInitCallbacks.set(a,i);const c=this.instances.get(a);return c&&e(c,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const i of a)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:fT(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fT(n){return n===xi?void 0:n}function mT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const gT={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},yT=Fe.INFO,vT={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},_T=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),i=vT[e];if(i)console[i](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gg{constructor(e){this.name=e,this._logLevel=yT,this._logHandler=_T,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const bT=(n,e)=>e.some(t=>n instanceof t);let Hb,Gb;function xT(){return Hb||(Hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ET(){return Gb||(Gb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wx=new WeakMap,Ip=new WeakMap,Zx=new WeakMap,pp=new WeakMap,yg=new WeakMap;function wT(n){const e=new Promise((t,a)=>{const i=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(_s(n.result)),i()},d=()=>{a(n.error),i()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Wx.set(t,n)}).catch(()=>{}),yg.set(e,n),e}function ST(n){if(Ip.has(n))return;const e=new Promise((t,a)=>{const i=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),i()},d=()=>{a(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});Ip.set(n,e)}let Pp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ip.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AT(n){Pp=n(Pp)}function NT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(gp(this),e,...t);return Zx.set(a,e.sort?e.sort():[e]),_s(a)}:ET().includes(n)?function(...e){return n.apply(gp(this),e),_s(Wx.get(this))}:function(...e){return _s(n.apply(gp(this),e))}}function TT(n){return typeof n=="function"?NT(n):(n instanceof IDBTransaction&&ST(n),bT(n,xT())?new Proxy(n,Pp):n)}function _s(n){if(n instanceof IDBRequest)return wT(n);if(pp.has(n))return pp.get(n);const e=TT(n);return e!==n&&(pp.set(n,e),yg.set(e,n)),e}const gp=n=>yg.get(n);function CT(n,e,{blocked:t,upgrade:a,blocking:i,terminated:c}={}){const d=indexedDB.open(n,e),m=_s(d);return a&&d.addEventListener("upgradeneeded",y=>{a(_s(d.result),y.oldVersion,y.newVersion,_s(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),i&&y.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const jT=["get","getKey","getAll","getAllKeys","count"],DT=["put","add","delete","clear"],yp=new Map;function $b(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,i=DT.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(i||jT.includes(t)))return;const c=async function(d,...m){const y=this.transaction(d,i?"readwrite":"readonly");let g=y.store;return a&&(g=g.index(m.shift())),(await Promise.all([g[t](...m),i&&y.done]))[0]};return yp.set(e,c),c}AT(n=>({...n,get:(e,t,a)=>$b(e,t)||n.get(e,t,a),has:(e,t)=>!!$b(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IT(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function IT(n){return n.getComponent()?.type==="VERSION"}const kp="@firebase/app",Qb="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new gg("@firebase/app"),PT="@firebase/app-compat",kT="@firebase/analytics-compat",OT="@firebase/analytics",MT="@firebase/app-check-compat",LT="@firebase/app-check",VT="@firebase/auth",UT="@firebase/auth-compat",qT="@firebase/database",BT="@firebase/data-connect",zT="@firebase/database-compat",FT="@firebase/functions",HT="@firebase/functions-compat",GT="@firebase/installations",$T="@firebase/installations-compat",QT="@firebase/messaging",KT="@firebase/messaging-compat",YT="@firebase/performance",XT="@firebase/performance-compat",WT="@firebase/remote-config",ZT="@firebase/remote-config-compat",JT="@firebase/storage",e1="@firebase/storage-compat",t1="@firebase/firestore",n1="@firebase/ai",r1="@firebase/firestore-compat",a1="firebase",s1="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="[DEFAULT]",i1={[kp]:"fire-core",[PT]:"fire-core-compat",[OT]:"fire-analytics",[kT]:"fire-analytics-compat",[LT]:"fire-app-check",[MT]:"fire-app-check-compat",[VT]:"fire-auth",[UT]:"fire-auth-compat",[qT]:"fire-rtdb",[BT]:"fire-data-connect",[zT]:"fire-rtdb-compat",[FT]:"fire-fn",[HT]:"fire-fn-compat",[GT]:"fire-iid",[$T]:"fire-iid-compat",[QT]:"fire-fcm",[KT]:"fire-fcm-compat",[YT]:"fire-perf",[XT]:"fire-perf-compat",[WT]:"fire-rc",[ZT]:"fire-rc-compat",[JT]:"fire-gcs",[e1]:"fire-gcs-compat",[t1]:"fire-fst",[r1]:"fire-fst-compat",[n1]:"fire-vertex","fire-js":"fire-js",[a1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new Map,Mp=new Map,Lp=new Map;function Kb(n,e){try{n.container.addComponent(e)}catch(t){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ji(n){const e=n.name;if(Lp.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;Lp.set(e,n);for(const t of Yo.values())Kb(t,n);for(const t of Mp.values())Kb(t,n);return!0}function Rh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function On(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new Wc("app","Firebase",o1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=s1;function vg(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Op,automaticDataCollectionEnabled:!0,...e},i=a.name;if(typeof i!="string"||!i)throw bs.create("bad-app-name",{appName:String(i)});if(t||(t=Kx()),!t)throw bs.create("no-options");const c=Yo.get(i);if(c){if(Ci(t,c.options)&&Ci(a,c.config))return c;throw bs.create("duplicate-app",{appName:i})}const d=new pT(i);for(const y of Lp.values())d.addComponent(y);const m=new l1(t,a,d);return Yo.set(i,m),m}function _g(n=Op){const e=Yo.get(n);if(!e&&n===Op&&Kx())return vg();if(!e)throw bs.create("no-app",{appName:n});return e}async function c1(n){let e=!1;const t=n.name;Yo.has(t)?(e=!0,Yo.delete(t)):Mp.has(t)&&n.decRefCount()<=0&&(Mp.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(a=>a.delete())),n.isDeleted=!0)}function Vr(n,e,t){let a=i1[n]??n;t&&(a+=`-${t}`);const i=a.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const d=[`Unable to register library "${a}" with version "${e}":`];i&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Da.warn(d.join(" "));return}ji(new Ss(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebase-heartbeat-database",d1=1,Vc="firebase-heartbeat-store";let vp=null;function Jx(){return vp||(vp=CT(u1,d1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw bs.create("idb-open",{originalErrorMessage:n.message})})),vp}async function h1(n){try{const t=(await Jx()).transaction(Vc),a=await t.objectStore(Vc).get(eE(n));return await t.done,a}catch(e){if(e instanceof Qr)Da.warn(e.message);else{const t=bs.create("idb-get",{originalErrorMessage:e?.message});Da.warn(t.message)}}}async function Yb(n,e){try{const a=(await Jx()).transaction(Vc,"readwrite");await a.objectStore(Vc).put(e,eE(n)),await a.done}catch(t){if(t instanceof Qr)Da.warn(t.message);else{const a=bs.create("idb-set",{originalErrorMessage:t?.message});Da.warn(a.message)}}}function eE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=1024,m1=30;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new y1(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Xb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>m1){const i=v1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Da.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Xb(),{heartbeatsToSend:t,unsentEntries:a}=g1(this._heartbeatsCache.heartbeats),i=ah(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Da.warn(e),""}}}function Xb(){return new Date().toISOString().substring(0,10)}function g1(n,e=f1){const t=[];let a=n.slice();for(const i of n){const c=t.find(d=>d.agent===i.agent);if(c){if(c.dates.push(i.date),Wb(t)>e){c.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Wb(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class y1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rT()?aT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Yb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Yb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Wb(n){return ah(JSON.stringify({version:2,heartbeats:n})).length}function v1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n){ji(new Ss("platform-logger",e=>new RT(e),"PRIVATE")),ji(new Ss("heartbeat",e=>new p1(e),"PRIVATE")),Vr(kp,Qb,n),Vr(kp,Qb,"esm2020"),Vr("fire-js","")}_1("");var b1="firebase",x1="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(b1,x1,"app");function tE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E1=tE,nE=new Wc("auth","Firebase",tE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new gg("@firebase/auth");function w1(n,...e){sh.logLevel<=Fe.WARN&&sh.warn(`Auth (${Li}): ${n}`,...e)}function $d(n,...e){sh.logLevel<=Fe.ERROR&&sh.error(`Auth (${Li}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(n,...e){throw bg(n,...e)}function Ur(n,...e){return bg(n,...e)}function rE(n,e,t){const a={...E1(),[e]:t};return new Wc("auth","Firebase",a).create(e,{appName:n.name})}function Ta(n){return rE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bg(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return nE.create(n,...e)}function Ce(n,e,...t){if(!n)throw bg(e,...t)}function Aa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $d(e),new Error(e)}function Ra(n,e){n||Aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(){return typeof self<"u"&&self.location?.href||""}function S1(){return Zb()==="http:"||Zb()==="https:"}function Zb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S1()||JN()||"connection"in navigator)?navigator.onLine:!0}function N1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ra(t>e,"Short delay should be less than long delay!"),this.isMobile=XN()||eT()}get(){return A1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n,e){Ra(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j1=new Jc(3e4,6e4);function Is(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ps(n,e,t,a,i={}){return sE(n,i,async()=>{let c={},d={};a&&(e==="GET"?d=a:c={body:JSON.stringify(a)});const m=Zc({key:n.config.apiKey,...d}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:y,...c};return ZN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Mi(n.emulatorConfig.host)&&(g.credentials="include"),aE.fetch()(await iE(n,n.config.apiHost,t,m),g)})}async function sE(n,e,t){n._canInitEmulator=!1;const a={...T1,...e};try{const i=new R1(n),c=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Vd(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[y,g]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vd(n,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Vd(n,"email-already-in-use",d);if(y==="USER_DISABLED")throw Vd(n,"user-disabled",d);const _=a[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw rE(n,_,g);ur(n,_)}}catch(i){if(i instanceof Qr)throw i;ur(n,"network-request-failed",{message:String(i)})}}async function eu(n,e,t,a,i={}){const c=await Ps(n,e,t,a,i);return"mfaPendingCredential"in c&&ur(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function iE(n,e,t,a){const i=`${e}${t}?${a}`,c=n,d=c.config.emulator?xg(n.config,i):`${n.config.apiScheme}://${i}`;return C1.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function D1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Ur(this.auth,"network-request-failed")),j1.get())})}}function Vd(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const i=Ur(n,e,a);return i.customData._tokenResponse=t,i}function Jb(n){return n!==void 0&&n.enterprise!==void 0}class I1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P1(n,e){return Ps(n,"GET","/v2/recaptchaConfig",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(n,e){return Ps(n,"POST","/v1/accounts:delete",e)}async function ih(n,e){return Ps(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function O1(n,e=!1){const t=Ht(n),a=await t.getIdToken(e),i=Eg(a);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,d=c?.sign_in_provider;return{claims:i,token:a,authTime:Pc(_p(i.auth_time)),issuedAtTime:Pc(_p(i.iat)),expirationTime:Pc(_p(i.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function _p(n){return Number(n)*1e3}function Eg(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gx(t);return i?JSON.parse(i):($d("Failed to decode base64 JWT payload"),null)}catch(i){return $d("Caught error parsing JWT payload as JSON",i?.toString()),null}}function e0(n){const e=Eg(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Qr&&M1(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function M1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(n){const e=n.auth,t=await n.getIdToken(),a=await Uc(n,ih(e,{idToken:t}));Ce(a?.users.length,e,"internal-error");const i=a.users[0];n._notifyReloadListener(i);const c=i.providerUserInfo?.length?oE(i.providerUserInfo):[],d=U1(n.providerData,c),m=n.isAnonymous,y=!(n.email&&i.passwordHash)&&!d?.length,g=m?y:!1,_={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new Up(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function V1(n){const e=Ht(n);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function U1(n,e){return[...n.filter(a=>!e.some(i=>i.providerId===a.providerId)),...e]}function oE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(n,e){const t=await sE(n,{},async()=>{const a=Zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=n.config,d=await iE(n,i,"/v1/token",`key=${c}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:a};return n.emulatorConfig&&Mi(n.emulatorConfig.host)&&(y.credentials="include"),aE.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function B1(n,e){return Ps(n,"POST","/v2/accounts:revokeToken",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=e0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:i,expiresIn:c}=await q1(e,t);this.updateTokensAndExpiration(a,i,Number(c))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:i,expirationTime:c}=t,d=new Ho;return a&&(Ce(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),i&&(Ce(typeof i=="string","internal-error",{appName:e}),d.accessToken=i),c&&(Ce(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:t,stsTokenManager:a,...i}){this.providerId="firebase",this.proactiveRefresh=new L1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Up(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return O1(this,e)}reload(){return V1(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await oh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(Ta(this.auth));const e=await this.getIdToken();return await Uc(this,k1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,i=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:x,providerData:C,stsTokenManager:A}=t;Ce(E&&A,e,"internal-error");const U=Ho.fromJSON(this.name,A);Ce(typeof E=="string",e,"internal-error"),us(a,e.name),us(i,e.name),Ce(typeof b=="boolean",e,"internal-error"),Ce(typeof x=="boolean",e,"internal-error"),us(c,e.name),us(d,e.name),us(m,e.name),us(y,e.name),us(g,e.name),us(_,e.name);const D=new lr({uid:E,auth:e,email:i,emailVerified:b,displayName:a,isAnonymous:x,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:U,createdAt:g,lastLoginAt:_});return C&&Array.isArray(C)&&(D.providerData=C.map(W=>({...W}))),y&&(D._redirectEventId=y),D}static async _fromIdTokenResponse(e,t,a=!1){const i=new Ho;i.updateFromServerResponse(t);const c=new lr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:a});return await oh(c),c}static async _fromGetAccountInfoResponse(e,t,a){const i=t.users[0];Ce(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?oE(i.providerUserInfo):[],d=!(i.email&&i.passwordHash)&&!c?.length,m=new Ho;m.updateFromIdToken(a);const y=new lr({uid:i.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Up(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;function Na(n){Ra(n instanceof Function,"Expected a class definition");let e=t0.get(n);return e?(Ra(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lE.type="NONE";const n0=lE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n,e,t){return`firebase:${n}:${e}:${t}`}class Go{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:i,name:c}=this.auth;this.fullUserKey=Qd(this.userKey,i.apiKey,c),this.fullPersistenceKey=Qd("persistence",i.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ih(this.auth,{idToken:e}).catch(()=>{});return t?lr._fromGetAccountInfoResponse(this.auth,t,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Go(Na(n0),e,a);const i=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=i[0]||Na(n0);const d=Qd(a,e.config.apiKey,e.name);let m=null;for(const g of t)try{const _=await g._get(d);if(_){let E;if(typeof _=="string"){const b=await ih(e,{idToken:_}).catch(()=>{});if(!b)break;E=await lr._fromGetAccountInfoResponse(e,b,_)}else E=lr._fromJSON(e,_);g!==c&&(m=E),c=g;break}}catch{}const y=i.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Go(c,e,a):(c=y[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Go(c,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mE(e))return"Blackberry";if(pE(e))return"Webos";if(uE(e))return"Safari";if((e.includes("chrome/")||dE(e))&&!e.includes("edge/"))return"Chrome";if(fE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if(a?.length===2)return a[1]}return"Other"}function cE(n=fn()){return/firefox\//i.test(n)}function uE(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dE(n=fn()){return/crios\//i.test(n)}function hE(n=fn()){return/iemobile/i.test(n)}function fE(n=fn()){return/android/i.test(n)}function mE(n=fn()){return/blackberry/i.test(n)}function pE(n=fn()){return/webos/i.test(n)}function wg(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function z1(n=fn()){return wg(n)&&!!window.navigator?.standalone}function F1(){return tT()&&document.documentMode===10}function gE(n=fn()){return wg(n)||fE(n)||pE(n)||mE(n)||/windows phone/i.test(n)||hE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n,e=[]){let t;switch(n){case"Browser":t=r0(fn());break;case"Worker":t=`${r0(fn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Li}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=c=>new Promise((d,m)=>{try{const y=e(c);d(y)}catch(y){m(y)}});a.onAbort=t,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(n,e={}){return Ps(n,"GET","/v2/passwordPolicy",Is(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=6;class Q1{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let i=0;i<e.length;i++)a=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t,a,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a0(this),this.idTokenSubscription=new a0(this),this.beforeStateQueue=new H1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Na(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ih(this,{idToken:e}),a=await lr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(On(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(a=m.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(Ta(this));const t=e?Ht(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(Ta(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(Ta(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G1(this),t=new Q1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await B1(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Na(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Na(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,i){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,a,i);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&w1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vi(n){return Ht(n)}class a0{constructor(e){this.auth=e,this.observer=null,this.addObserver=cT(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Y1(n){Ih=n}function vE(n){return Ih.loadJS(n)}function X1(){return Ih.recaptchaEnterpriseScript}function W1(){return Ih.gapiScript}function Z1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class J1{constructor(){this.enterprise=new eC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tC="recaptcha-enterprise",_E="NO_RECAPTCHA";class nC{constructor(e){this.type=tC,this.auth=Vi(e)}async verify(e="verify",t=!1){async function a(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{P1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new I1(y);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,d(g.siteKey)}}).catch(y=>{m(y)})})}function i(c,d,m){const y=window.grecaptcha;Jb(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(g=>{d(g)}).catch(()=>{d(_E)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J1().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{a(this.auth).then(m=>{if(!t&&Jb(window.grecaptcha))i(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=X1();y.length!==0&&(y+=m),vE(y).then(()=>{i(m,c,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function s0(n,e,t,a=!1,i=!1){const c=new nC(n);let d;if(i)d=_E;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function qp(n,e,t,a,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await s0(n,e,t,t==="getOobCode");return a(n,c)}else return a(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await s0(n,e,t,t==="getOobCode");return a(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(n,e){const t=Rh(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),c=t.getOptions();if(Ci(c,e??{}))return i;ur(i,"already-initialized")}return t.initialize({options:e})}function aC(n,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(Na);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e?.popupRedirectResolver)}function sC(n,e,t){const a=Vi(n);Ce(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const i=!1,c=bE(e),{host:d,port:m}=iC(e),y=m===null?"":`:${m}`,g={url:`${c}//${d}${y}/`},_=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){Ce(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ce(Ci(g,a.config.emulator)&&Ci(_,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=_,a.settings.appVerificationDisabledForTesting=!0,Mi(d)?(mg(`${c}//${d}${y}`),pg("Auth",!0)):oC()}function bE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iC(n){const e=bE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const c=i[1];return{host:c,port:i0(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:i0(d)}}}function i0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,t){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}async function lC(n,e){return Ps(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(n,e){return eu(n,"POST","/v1/accounts:signInWithPassword",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(n,e){return eu(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}async function dC(n,e){return eu(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Sg{constructor(e,t,a,i=null){super("password",a),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new qc(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new qc(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,t,"signInWithPassword",cC);case"emailLink":return uC(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,a,"signUpPassword",lC);case"emailLink":return dC(e,{idToken:t,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(n,e){return eu(n,"POST","/v1/accounts:signInWithIdp",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="http://localhost";class Di extends Sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:i,...c}=t;if(!a||!i)return null;const d=new Di(a,i);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,$o(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:hC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mC(n){const e=Nc(Tc(n)).link,t=e?Nc(Tc(e)).deep_link_id:null,a=Nc(Tc(n)).deep_link_id;return(a?Nc(Tc(a)).link:null)||a||t||e||n}class Ag{constructor(e){const t=Nc(Tc(e)),a=t.apiKey??null,i=t.oobCode??null,c=fC(t.mode??null);Ce(a&&i&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=mC(e);try{return new Ag(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(e,t){return qc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Ag.parseLink(t);return Ce(a,"argument-error"),qc._fromEmailAndCode(e,a.code,a.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends xE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends tu{constructor(){super("facebook.com")}static credential(e){return Di._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Di._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ms.credential(t,a)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends tu{constructor(){super("github.com")}static credential(e){return Di._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.GITHUB_SIGN_IN_METHOD="github.com";ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends tu{constructor(){super("twitter.com")}static credential(e,t){return Di._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return gs.credential(t,a)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(n,e){return eu(n,"POST","/v1/accounts:signUp",Is(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,i=!1){const c=await lr._fromIdTokenResponse(e,a,i),d=o0(a);return new Ri({user:c,providerId:d,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const i=o0(a);return new Ri({user:e,providerId:i,_tokenResponse:a,operationType:t})}}function o0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends Qr{constructor(e,t,a,i){super(t.code,t.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,i){return new lh(e,t,a,i)}}function EE(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(n,c,e,a):c})}async function gC(n,e,t=!1){const a=await Uc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ri._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(n,e,t=!1){const{auth:a}=n;if(On(a.app))return Promise.reject(Ta(a));const i="reauthenticate";try{const c=await Uc(n,EE(a,i,e,n),t);Ce(c.idToken,a,"internal-error");const d=Eg(c.idToken);Ce(d,a,"internal-error");const{sub:m}=d;return Ce(n.uid===m,a,"user-mismatch"),Ri._forOperation(n,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&ur(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wE(n,e,t=!1){if(On(n.app))return Promise.reject(Ta(n));const a="signIn",i=await EE(n,a,e),c=await Ri._fromIdTokenResponse(n,a,i);return t||await n._updateCurrentUser(c.user),c}async function vC(n,e){return wE(Vi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(n){const e=Vi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _C(n,e,t){if(On(n.app))return Promise.reject(Ta(n));const a=Vi(n),d=await qp(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pC).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&SE(n),y}),m=await Ri._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(m.user),m}function bC(n,e,t){return On(n.app)?Promise.reject(Ta(n)):vC(Ht(n),il.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&SE(n),a})}function xC(n,e,t,a){return Ht(n).onIdTokenChanged(e,t,a)}function EC(n,e,t){return Ht(n).beforeAuthStateChanged(e,t)}function wC(n,e,t,a){return Ht(n).onAuthStateChanged(e,t,a)}function l0(n){return Ht(n).signOut()}const ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=1e3,AC=10;class NE extends AE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),i=this.localCache[t];a!==i&&e(t,i,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,y)=>{this.notifyListeners(d,y)});return}const a=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const d=this.storage.getItem(a);!t&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);F1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AC):i()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}NE.type="LOCAL";const NC=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends AE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TE.type="SESSION";const CE=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const a=new Ph(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:i,data:c}=t.data,d=this.handlersMap[i];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const m=Array.from(d).map(async g=>g(t.origin,c)),y=await TC(m);t.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,d;return new Promise((m,y)=>{const g=Ng("",20);i.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},a);d={messageChannel:i,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(b.data.response);break;default:clearTimeout(_),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),i.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[i.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return window}function jC(n){qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}async function DC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RC(){return navigator?.serviceWorker?.controller||null}function IC(){return jE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firebaseLocalStorageDb",PC=1,uh="firebaseLocalStorage",RE="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kh(n,e){return n.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function kC(){const n=indexedDB.deleteDatabase(DE);return new nu(n).toPromise()}function Bp(){const n=indexedDB.open(DE,PC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(uh,{keyPath:RE})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(uh)?e(a):(a.close(),await kC(),e(await Bp()))})})}async function c0(n,e,t){const a=kh(n,!0).put({[RE]:e,value:t});return new nu(a).toPromise()}async function OC(n,e){const t=kh(n,!1).get(e),a=await new nu(t).toPromise();return a===void 0?null:a.value}function u0(n,e){const t=kh(n,!0).delete(e);return new nu(t).toPromise()}const MC=800,LC=3;class IE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>LC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(IC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await DC(),!this.activeServiceWorker)return;this.sender=new CC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bp();return await c0(e,ch,"1"),await u0(e,ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>c0(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>OC(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>u0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=kh(i,!1).getAll();return new nu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IE.type="LOCAL";const VC=IE;new Jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(n,e){return e?Na(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends Sg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qC(n){return wE(n.auth,new Tg(n),n.bypassAuthState)}function BC(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),yC(t,new Tg(n),n.bypassAuthState)}async function zC(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),gC(t,new Tg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,a,i,c=!1){this.auth=e,this.resolver=a,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:i,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:a,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return zC;case"reauthViaPopup":case"reauthViaRedirect":return BC;default:ur(this.auth,"internal-error")}}resolve(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Jc(2e3,1e4);class Fo extends PE{constructor(e,t,a,i,c){super(e,t,i,c),this.provider=a,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ra(this.filter.length===1,"Popup operations only handle one event");const e=Ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FC.get())};e()}}Fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="pendingRedirect",Kd=new Map;class GC extends PE{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Kd.get(this.auth._key());if(!e){try{const a=await $C(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Kd.set(this.auth._key(),e)}return this.bypassAuthState||Kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $C(n,e){const t=YC(e),a=KC(n);if(!await a._isAvailable())return!1;const i=await a._get(t)==="true";return await a._remove(t),i}function QC(n,e){Kd.set(n._key(),e)}function KC(n){return Na(n._redirectPersistence)}function YC(n){return Qd(HC,n.config.apiKey,n.name)}async function XC(n,e,t=!1){if(On(n.app))return Promise.reject(Ta(n));const a=Vi(n),i=UC(a,e),d=await new GC(a,i,t).execute();return d&&!t&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=600*1e3;class ZC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!kE(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ur(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WC&&this.cachedEventUids.clear(),this.cachedEventUids.has(d0(e))}saveEventToCache(e){this.cachedEventUids.add(d0(e)),this.lastProcessedEventTime=Date.now()}}function d0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function JC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(n,e={}){return Ps(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nj=/^https?/;async function rj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ej(n);for(const t of e)try{if(aj(t))return}catch{}ur(n,"unauthorized-domain")}function aj(n){const e=Vp(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===a}if(!nj.test(t))return!1;if(tj.test(n))return a===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=new Jc(3e4,6e4);function h0(){const n=qr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ij(n){return new Promise((e,t)=>{function a(){h0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h0(),t(Ur(n,"network-request-failed"))},timeout:sj.get()})}if(qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qr().gapi?.load)a();else{const i=Z1("iframefcb");return qr()[i]=()=>{gapi.load?a():t(Ur(n,"network-request-failed"))},vE(`${W1()}?onload=${i}`).catch(c=>t(c))}}).catch(e=>{throw Yd=null,e})}let Yd=null;function oj(n){return Yd=Yd||ij(n),Yd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new Jc(5e3,15e3),cj="__/auth/iframe",uj="emulator/auth/iframe",dj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fj(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xg(e,uj):`https://${n.config.authDomain}/${cj}`,a={apiKey:e.apiKey,appName:n.name,v:Li},i=hj.get(n.config.apiHost);i&&(a.eid=i);const c=n._getFrameworks();return c.length&&(a.fw=c.join(",")),`${t}?${Zc(a).slice(1)}`}async function mj(n){const e=await oj(n),t=qr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:fj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dj,dontclear:!0},a=>new Promise(async(i,c)=>{await a.restyle({setHideOnLeave:!1});const d=Ur(n,"network-request-failed"),m=qr().setTimeout(()=>{c(d)},lj.get());function y(){qr().clearTimeout(m),i(a)}a.ping(y).then(y,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gj=500,yj=600,vj="_blank",_j="http://localhost";class f0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bj(n,e,t,a=gj,i=yj){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const y={...pj,width:a.toString(),height:i.toString(),top:c,left:d},g=fn().toLowerCase();t&&(m=dE(g)?vj:t),cE(g)&&(e=e||_j,y.scrollbars="yes");const _=Object.entries(y).reduce((b,[x,C])=>`${b}${x}=${C},`,"");if(z1(g)&&m!=="_self")return xj(e||"",m),new f0(null);const E=window.open(e||"",m,_);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new f0(E)}function xj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="__/auth/handler",wj="emulator/auth/handler",Sj=encodeURIComponent("fac");async function m0(n,e,t,a,i,c){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Li,eventId:i};if(e instanceof xE){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",lT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))d[_]=E}if(e instanceof tu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(d.scopes=_.join(","))}n.tenantId&&(d.tid=n.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const y=await n._getAppCheckToken(),g=y?`#${Sj}=${encodeURIComponent(y)}`:"";return`${Aj(n)}?${Zc(m).slice(1)}${g}`}function Aj({config:n}){return n.emulator?xg(n,wj):`https://${n.authDomain}/${Ej}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="webStorageSupport";class Nj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CE,this._completeRedirectFn=XC,this._overrideRedirectResult=QC}async _openPopup(e,t,a,i){Ra(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await m0(e,t,a,Vp(),i);return bj(e,c,Ng())}async _openRedirect(e,t,a,i){await this._originValidation(e);const c=await m0(e,t,a,Vp(),i);return jC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:c}=this.eventManagers[t];return i?Promise.resolve(i):(Ra(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await mj(e),a=new ZC(e);return t.register("authEvent",i=>(Ce(i?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bp,{type:bp},i=>{const c=i?.[0]?.[bp];c!==void 0&&t(!!c),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gE()||uE()||wg()}}const Tj=Nj;var p0="@firebase/auth",g0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(n){ji(new Ss("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=a.options;Ce(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const y={apiKey:d,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yE(n)},g=new K1(a,i,c,y);return aC(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ji(new Ss("auth-internal",e=>{const t=Vi(e.getProvider("auth").getImmediate());return(a=>new Cj(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(p0,g0,jj(n)),Vr(p0,g0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=300,Ij=Yx("authIdTokenMaxAge")||Rj;let y0=null;const Pj=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>Ij)return;const i=t?.token;y0!==i&&(y0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function OE(n=_g()){const e=Rh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rC(n,{popupRedirectResolver:Tj,persistence:[VC,NC,CE]}),a=Yx("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=Pj(c.toString());EC(t,d,()=>d(t.currentUser)),xC(t,m=>d(m))}}const i=$x("auth");return i&&sC(t,`http://${i}`),t}function kj(){return document.getElementsByTagName("head")?.[0]??document}Y1({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=i=>{const c=Ur("internal-error");c.customData=i,t(c)},a.type="text/javascript",a.charset="UTF-8",kj().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");var v0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,ME;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,T){function I(){}I.prototype=T.prototype,O.D=T.prototype,O.prototype=new I,O.prototype.constructor=O,O.C=function(L,N,R){for(var P=Array(arguments.length-2),J=2;J<arguments.length;J++)P[J-2]=arguments[J];return T.prototype[N].apply(L,P)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,T,I){I||(I=0);var L=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)L[N]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(N=0;16>N;++N)L[N]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=O.g[0],I=O.g[1],N=O.g[2];var R=O.g[3],P=T+(R^I&(N^R))+L[0]+3614090360&4294967295;T=I+(P<<7&4294967295|P>>>25),P=R+(N^T&(I^N))+L[1]+3905402710&4294967295,R=T+(P<<12&4294967295|P>>>20),P=N+(I^R&(T^I))+L[2]+606105819&4294967295,N=R+(P<<17&4294967295|P>>>15),P=I+(T^N&(R^T))+L[3]+3250441966&4294967295,I=N+(P<<22&4294967295|P>>>10),P=T+(R^I&(N^R))+L[4]+4118548399&4294967295,T=I+(P<<7&4294967295|P>>>25),P=R+(N^T&(I^N))+L[5]+1200080426&4294967295,R=T+(P<<12&4294967295|P>>>20),P=N+(I^R&(T^I))+L[6]+2821735955&4294967295,N=R+(P<<17&4294967295|P>>>15),P=I+(T^N&(R^T))+L[7]+4249261313&4294967295,I=N+(P<<22&4294967295|P>>>10),P=T+(R^I&(N^R))+L[8]+1770035416&4294967295,T=I+(P<<7&4294967295|P>>>25),P=R+(N^T&(I^N))+L[9]+2336552879&4294967295,R=T+(P<<12&4294967295|P>>>20),P=N+(I^R&(T^I))+L[10]+4294925233&4294967295,N=R+(P<<17&4294967295|P>>>15),P=I+(T^N&(R^T))+L[11]+2304563134&4294967295,I=N+(P<<22&4294967295|P>>>10),P=T+(R^I&(N^R))+L[12]+1804603682&4294967295,T=I+(P<<7&4294967295|P>>>25),P=R+(N^T&(I^N))+L[13]+4254626195&4294967295,R=T+(P<<12&4294967295|P>>>20),P=N+(I^R&(T^I))+L[14]+2792965006&4294967295,N=R+(P<<17&4294967295|P>>>15),P=I+(T^N&(R^T))+L[15]+1236535329&4294967295,I=N+(P<<22&4294967295|P>>>10),P=T+(N^R&(I^N))+L[1]+4129170786&4294967295,T=I+(P<<5&4294967295|P>>>27),P=R+(I^N&(T^I))+L[6]+3225465664&4294967295,R=T+(P<<9&4294967295|P>>>23),P=N+(T^I&(R^T))+L[11]+643717713&4294967295,N=R+(P<<14&4294967295|P>>>18),P=I+(R^T&(N^R))+L[0]+3921069994&4294967295,I=N+(P<<20&4294967295|P>>>12),P=T+(N^R&(I^N))+L[5]+3593408605&4294967295,T=I+(P<<5&4294967295|P>>>27),P=R+(I^N&(T^I))+L[10]+38016083&4294967295,R=T+(P<<9&4294967295|P>>>23),P=N+(T^I&(R^T))+L[15]+3634488961&4294967295,N=R+(P<<14&4294967295|P>>>18),P=I+(R^T&(N^R))+L[4]+3889429448&4294967295,I=N+(P<<20&4294967295|P>>>12),P=T+(N^R&(I^N))+L[9]+568446438&4294967295,T=I+(P<<5&4294967295|P>>>27),P=R+(I^N&(T^I))+L[14]+3275163606&4294967295,R=T+(P<<9&4294967295|P>>>23),P=N+(T^I&(R^T))+L[3]+4107603335&4294967295,N=R+(P<<14&4294967295|P>>>18),P=I+(R^T&(N^R))+L[8]+1163531501&4294967295,I=N+(P<<20&4294967295|P>>>12),P=T+(N^R&(I^N))+L[13]+2850285829&4294967295,T=I+(P<<5&4294967295|P>>>27),P=R+(I^N&(T^I))+L[2]+4243563512&4294967295,R=T+(P<<9&4294967295|P>>>23),P=N+(T^I&(R^T))+L[7]+1735328473&4294967295,N=R+(P<<14&4294967295|P>>>18),P=I+(R^T&(N^R))+L[12]+2368359562&4294967295,I=N+(P<<20&4294967295|P>>>12),P=T+(I^N^R)+L[5]+4294588738&4294967295,T=I+(P<<4&4294967295|P>>>28),P=R+(T^I^N)+L[8]+2272392833&4294967295,R=T+(P<<11&4294967295|P>>>21),P=N+(R^T^I)+L[11]+1839030562&4294967295,N=R+(P<<16&4294967295|P>>>16),P=I+(N^R^T)+L[14]+4259657740&4294967295,I=N+(P<<23&4294967295|P>>>9),P=T+(I^N^R)+L[1]+2763975236&4294967295,T=I+(P<<4&4294967295|P>>>28),P=R+(T^I^N)+L[4]+1272893353&4294967295,R=T+(P<<11&4294967295|P>>>21),P=N+(R^T^I)+L[7]+4139469664&4294967295,N=R+(P<<16&4294967295|P>>>16),P=I+(N^R^T)+L[10]+3200236656&4294967295,I=N+(P<<23&4294967295|P>>>9),P=T+(I^N^R)+L[13]+681279174&4294967295,T=I+(P<<4&4294967295|P>>>28),P=R+(T^I^N)+L[0]+3936430074&4294967295,R=T+(P<<11&4294967295|P>>>21),P=N+(R^T^I)+L[3]+3572445317&4294967295,N=R+(P<<16&4294967295|P>>>16),P=I+(N^R^T)+L[6]+76029189&4294967295,I=N+(P<<23&4294967295|P>>>9),P=T+(I^N^R)+L[9]+3654602809&4294967295,T=I+(P<<4&4294967295|P>>>28),P=R+(T^I^N)+L[12]+3873151461&4294967295,R=T+(P<<11&4294967295|P>>>21),P=N+(R^T^I)+L[15]+530742520&4294967295,N=R+(P<<16&4294967295|P>>>16),P=I+(N^R^T)+L[2]+3299628645&4294967295,I=N+(P<<23&4294967295|P>>>9),P=T+(N^(I|~R))+L[0]+4096336452&4294967295,T=I+(P<<6&4294967295|P>>>26),P=R+(I^(T|~N))+L[7]+1126891415&4294967295,R=T+(P<<10&4294967295|P>>>22),P=N+(T^(R|~I))+L[14]+2878612391&4294967295,N=R+(P<<15&4294967295|P>>>17),P=I+(R^(N|~T))+L[5]+4237533241&4294967295,I=N+(P<<21&4294967295|P>>>11),P=T+(N^(I|~R))+L[12]+1700485571&4294967295,T=I+(P<<6&4294967295|P>>>26),P=R+(I^(T|~N))+L[3]+2399980690&4294967295,R=T+(P<<10&4294967295|P>>>22),P=N+(T^(R|~I))+L[10]+4293915773&4294967295,N=R+(P<<15&4294967295|P>>>17),P=I+(R^(N|~T))+L[1]+2240044497&4294967295,I=N+(P<<21&4294967295|P>>>11),P=T+(N^(I|~R))+L[8]+1873313359&4294967295,T=I+(P<<6&4294967295|P>>>26),P=R+(I^(T|~N))+L[15]+4264355552&4294967295,R=T+(P<<10&4294967295|P>>>22),P=N+(T^(R|~I))+L[6]+2734768916&4294967295,N=R+(P<<15&4294967295|P>>>17),P=I+(R^(N|~T))+L[13]+1309151649&4294967295,I=N+(P<<21&4294967295|P>>>11),P=T+(N^(I|~R))+L[4]+4149444226&4294967295,T=I+(P<<6&4294967295|P>>>26),P=R+(I^(T|~N))+L[11]+3174756917&4294967295,R=T+(P<<10&4294967295|P>>>22),P=N+(T^(R|~I))+L[2]+718787259&4294967295,N=R+(P<<15&4294967295|P>>>17),P=I+(R^(N|~T))+L[9]+3951481745&4294967295,O.g[0]=O.g[0]+T&4294967295,O.g[1]=O.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,O.g[2]=O.g[2]+N&4294967295,O.g[3]=O.g[3]+R&4294967295}a.prototype.u=function(O,T){T===void 0&&(T=O.length);for(var I=T-this.blockSize,L=this.B,N=this.h,R=0;R<T;){if(N==0)for(;R<=I;)i(this,O,R),R+=this.blockSize;if(typeof O=="string"){for(;R<T;)if(L[N++]=O.charCodeAt(R++),N==this.blockSize){i(this,L),N=0;break}}else for(;R<T;)if(L[N++]=O[R++],N==this.blockSize){i(this,L),N=0;break}}this.h=N,this.o+=T},a.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var T=1;T<O.length-8;++T)O[T]=0;var I=8*this.o;for(T=O.length-8;T<O.length;++T)O[T]=I&255,I/=256;for(this.u(O),O=Array(16),T=I=0;4>T;++T)for(var L=0;32>L;L+=8)O[I++]=this.g[T]>>>L&255;return O};function c(O,T){var I=m;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=T(O)}function d(O,T){this.h=T;for(var I=[],L=!0,N=O.length-1;0<=N;N--){var R=O[N]|0;L&&R==T||(I[N]=R,L=!1)}this.g=I}var m={};function y(O){return-128<=O&&128>O?c(O,function(T){return new d([T|0],0>T?-1:0)}):new d([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return E;if(0>O)return U(g(-O));for(var T=[],I=1,L=0;O>=I;L++)T[L]=O/I|0,I*=4294967296;return new d(T,0)}function _(O,T){if(O.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(O.charAt(0)=="-")return U(_(O.substring(1),T));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(T,8)),L=E,N=0;N<O.length;N+=8){var R=Math.min(8,O.length-N),P=parseInt(O.substring(N,N+R),T);8>R?(R=g(Math.pow(T,R)),L=L.j(R).add(g(P))):(L=L.j(I),L=L.add(g(P)))}return L}var E=y(0),b=y(1),x=y(16777216);n=d.prototype,n.m=function(){if(A(this))return-U(this).m();for(var O=0,T=1,I=0;I<this.g.length;I++){var L=this.i(I);O+=(0<=L?L:4294967296+L)*T,T*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(C(this))return"0";if(A(this))return"-"+U(this).toString(O);for(var T=g(Math.pow(O,6)),I=this,L="";;){var N=se(I,T).g;I=D(I,N.j(T));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(O);if(I=N,C(I))return R+L;for(;6>R.length;)R="0"+R;L=R+L}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function C(O){if(O.h!=0)return!1;for(var T=0;T<O.g.length;T++)if(O.g[T]!=0)return!1;return!0}function A(O){return O.h==-1}n.l=function(O){return O=D(this,O),A(O)?-1:C(O)?0:1};function U(O){for(var T=O.g.length,I=[],L=0;L<T;L++)I[L]=~O.g[L];return new d(I,~O.h).add(b)}n.abs=function(){return A(this)?U(this):this},n.add=function(O){for(var T=Math.max(this.g.length,O.g.length),I=[],L=0,N=0;N<=T;N++){var R=L+(this.i(N)&65535)+(O.i(N)&65535),P=(R>>>16)+(this.i(N)>>>16)+(O.i(N)>>>16);L=P>>>16,R&=65535,P&=65535,I[N]=P<<16|R}return new d(I,I[I.length-1]&-2147483648?-1:0)};function D(O,T){return O.add(U(T))}n.j=function(O){if(C(this)||C(O))return E;if(A(this))return A(O)?U(this).j(U(O)):U(U(this).j(O));if(A(O))return U(this.j(U(O)));if(0>this.l(x)&&0>O.l(x))return g(this.m()*O.m());for(var T=this.g.length+O.g.length,I=[],L=0;L<2*T;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(var N=0;N<O.g.length;N++){var R=this.i(L)>>>16,P=this.i(L)&65535,J=O.i(N)>>>16,de=O.i(N)&65535;I[2*L+2*N]+=P*de,W(I,2*L+2*N),I[2*L+2*N+1]+=R*de,W(I,2*L+2*N+1),I[2*L+2*N+1]+=P*J,W(I,2*L+2*N+1),I[2*L+2*N+2]+=R*J,W(I,2*L+2*N+2)}for(L=0;L<T;L++)I[L]=I[2*L+1]<<16|I[2*L];for(L=T;L<2*T;L++)I[L]=0;return new d(I,0)};function W(O,T){for(;(O[T]&65535)!=O[T];)O[T+1]+=O[T]>>>16,O[T]&=65535,T++}function q(O,T){this.g=O,this.h=T}function se(O,T){if(C(T))throw Error("division by zero");if(C(O))return new q(E,E);if(A(O))return T=se(U(O),T),new q(U(T.g),U(T.h));if(A(T))return T=se(O,U(T)),new q(U(T.g),T.h);if(30<O.g.length){if(A(O)||A(T))throw Error("slowDivide_ only works with positive integers.");for(var I=b,L=T;0>=L.l(O);)I=G(I),L=G(L);var N=he(I,1),R=he(L,1);for(L=he(L,2),I=he(I,2);!C(L);){var P=R.add(L);0>=P.l(O)&&(N=N.add(I),R=P),L=he(L,1),I=he(I,1)}return T=D(O,N.j(T)),new q(N,T)}for(N=E;0<=O.l(T);){for(I=Math.max(1,Math.floor(O.m()/T.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),R=g(I),P=R.j(T);A(P)||0<P.l(O);)I-=L,R=g(I),P=R.j(T);C(R)&&(R=b),N=N.add(R),O=D(O,P)}return new q(N,O)}n.A=function(O){return se(this,O).h},n.and=function(O){for(var T=Math.max(this.g.length,O.g.length),I=[],L=0;L<T;L++)I[L]=this.i(L)&O.i(L);return new d(I,this.h&O.h)},n.or=function(O){for(var T=Math.max(this.g.length,O.g.length),I=[],L=0;L<T;L++)I[L]=this.i(L)|O.i(L);return new d(I,this.h|O.h)},n.xor=function(O){for(var T=Math.max(this.g.length,O.g.length),I=[],L=0;L<T;L++)I[L]=this.i(L)^O.i(L);return new d(I,this.h^O.h)};function G(O){for(var T=O.g.length+1,I=[],L=0;L<T;L++)I[L]=O.i(L)<<1|O.i(L-1)>>>31;return new d(I,O.h)}function he(O,T){var I=T>>5;T%=32;for(var L=O.g.length-I,N=[],R=0;R<L;R++)N[R]=0<T?O.i(R+I)>>>T|O.i(R+I+1)<<32-T:O.i(R+I);return new d(N,O.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,ME=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=_,xs=d}).apply(typeof v0<"u"?v0:typeof self<"u"?self:typeof window<"u"?window:{});var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LE,Cc,VE,Xd,zp,UE,qE,BE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,w){return h==Array.prototype||h==Object.prototype||(h[v]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ud=="object"&&Ud];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var a=t(this);function i(h,v){if(v)e:{var w=a;h=h.split(".");for(var k=0;k<h.length-1;k++){var H=h[k];if(!(H in w))break e;w=w[H]}h=h[h.length-1],k=w[h],v=v(k),v!=k&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}function c(h,v){h instanceof String&&(h+="");var w=0,k=!1,H={next:function(){if(!k&&w<h.length){var Z=w++;return{value:v(Z,h[Z]),done:!1}}return k=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(h){return h||function(){return c(this,function(v,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,w){return h.call.apply(h.bind,arguments)}function E(h,v,w){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,k),h.apply(v,H)}}return function(){return h.apply(v,arguments)}}function b(h,v,w){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,b.apply(null,arguments)}function x(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var k=w.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function C(h,v){function w(){}w.prototype=v.prototype,h.aa=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(k,H,Z){for(var fe=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)fe[$e-2]=arguments[$e];return v.prototype[H].apply(k,fe)}}function A(h){const v=h.length;if(0<v){const w=Array(v);for(let k=0;k<v;k++)w[k]=h[k];return w}return[]}function U(h,v){for(let w=1;w<arguments.length;w++){const k=arguments[w];if(y(k)){const H=h.length||0,Z=k.length||0;h.length=H+Z;for(let fe=0;fe<Z;fe++)h[H+fe]=k[fe]}else h.push(k)}}class D{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function W(h){return/^[\s\xa0]*$/.test(h)}function q(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var G=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function he(h,v,w){for(const k in h)v.call(w,h[k],k,h)}function O(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function T(h){const v={};for(const w in h)v[w]=h[w];return v}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,v){let w,k;for(let H=1;H<arguments.length;H++){k=arguments[H];for(w in k)h[w]=k[w];for(let Z=0;Z<I.length;Z++)w=I[Z],Object.prototype.hasOwnProperty.call(k,w)&&(h[w]=k[w])}}function N(h){var v=1;h=h.split(":");const w=[];for(;0<v&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function R(h){m.setTimeout(()=>{throw h},0)}function P(){var h=We;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class J{constructor(){this.h=this.g=null}add(v,w){const k=de.get();k.set(v,w),this.h?this.h.next=k:this.g=k,this.h=k}}var de=new D(()=>new K,h=>h.reset());class K{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ye=!1,We=new J,B=()=>{const h=m.Promise.resolve(void 0);ce=()=>{h.then(oe)}};var oe=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(w){R(w)}var v=de;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}ye=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};m.addEventListener("test",w,v),m.removeEventListener("test",w,v)}catch{}return h}();function Ve(h,v){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(G){e:{try{se(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement);this.relatedTarget=v,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ve.aa.h.call(this)}}C(Ve,ue);var Re={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Gt="closure_listenable_"+(1e6*Math.random()|0),ut=0;function vr(h,v,w,k,H){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!k,this.ha=H,this.key=++ut,this.da=this.fa=!1}function Oa(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xr(h){this.src=h,this.g={},this.h=0}Xr.prototype.add=function(h,v,w,k,H){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var fe=Ls(h,v,k,H);return-1<fe?(v=h[fe],w||(v.fa=!1)):(v=new vr(v,this.src,Z,!!k,H),v.fa=w,h.push(v)),v};function Ms(h,v){var w=v.type;if(w in h.g){var k=h.g[w],H=Array.prototype.indexOf.call(k,v,void 0),Z;(Z=0<=H)&&Array.prototype.splice.call(k,H,1),Z&&(Oa(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Ls(h,v,w,k){for(var H=0;H<h.length;++H){var Z=h[H];if(!Z.da&&Z.listener==v&&Z.capture==!!w&&Z.ha==k)return H}return-1}var Vs="closure_lm_"+(1e6*Math.random()|0),pl={};function mu(h,v,w,k,H){if(Array.isArray(v)){for(var Z=0;Z<v.length;Z++)mu(h,v[Z],w,k,H);return null}return w=pu(w),h&&h[Gt]?h.K(v,w,g(k)?!!k.capture:!1,H):Ln(h,v,w,!1,k,H)}function Ln(h,v,w,k,H,Z){if(!v)throw Error("Invalid event type");var fe=g(H)?!!H.capture:!!H,$e=Gi(h);if($e||(h[Vs]=$e=new Xr(h)),w=$e.add(v,w,k,fe,Z),w.proxy)return w;if(k=lf(),w.proxy=k,k.src=h,k.listener=w,h.addEventListener)we||(H=fe),H===void 0&&(H=!1),h.addEventListener(v.toString(),k,H);else if(h.attachEvent)h.attachEvent(Us(v.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return w}function lf(){function h(w){return v.call(h.src,h.listener,w)}const v=cf;return h}function gl(h,v,w,k,H){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)gl(h,v[Z],w,k,H);else k=g(k)?!!k.capture:!!k,w=pu(w),h&&h[Gt]?(h=h.i,v=String(v).toString(),v in h.g&&(Z=h.g[v],w=Ls(Z,w,k,H),-1<w&&(Oa(Z[w]),Array.prototype.splice.call(Z,w,1),Z.length==0&&(delete h.g[v],h.h--)))):h&&(h=Gi(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ls(v,w,k,H)),(w=-1<h?v[h]:null)&&Hi(w))}function Hi(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Gt])Ms(v.i,h);else{var w=h.type,k=h.proxy;v.removeEventListener?v.removeEventListener(w,k,h.capture):v.detachEvent?v.detachEvent(Us(w),k):v.addListener&&v.removeListener&&v.removeListener(k),(w=Gi(v))?(Ms(w,h),w.h==0&&(w.src=null,v[Vs]=null)):Oa(h)}}}function Us(h){return h in pl?pl[h]:pl[h]="on"+h}function cf(h,v){if(h.da)h=!0;else{v=new Ve(v,this);var w=h.listener,k=h.ha||h.src;h.fa&&Hi(h),h=w.call(k,v)}return h}function Gi(h){return h=h[Vs],h instanceof Xr?h:null}var yl="__closure_events_fn_"+(1e9*Math.random()>>>0);function pu(h){return typeof h=="function"?h:(h[yl]||(h[yl]=function(v){return h.handleEvent(v)}),h[yl])}function xt(){me.call(this),this.i=new Xr(this),this.M=this,this.F=null}C(xt,me),xt.prototype[Gt]=!0,xt.prototype.removeEventListener=function(h,v,w,k){gl(this,h,v,w,k)};function nt(h,v){var w,k=h.F;if(k)for(w=[];k;k=k.F)w.push(k);if(h=h.M,k=v.type||v,typeof v=="string")v=new ue(v,h);else if(v instanceof ue)v.target=v.target||h;else{var H=v;v=new ue(k,h),L(v,H)}if(H=!0,w)for(var Z=w.length-1;0<=Z;Z--){var fe=v.g=w[Z];H=Nn(fe,k,!0,v)&&H}if(fe=v.g=h,H=Nn(fe,k,!0,v)&&H,H=Nn(fe,k,!1,v)&&H,w)for(Z=0;Z<w.length;Z++)fe=v.g=w[Z],H=Nn(fe,k,!1,v)&&H}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var w=h.g[v],k=0;k<w.length;k++)Oa(w[k]);delete h.g[v],h.h--}}this.F=null},xt.prototype.K=function(h,v,w,k){return this.i.add(String(h),v,!1,w,k)},xt.prototype.L=function(h,v,w,k){return this.i.add(String(h),v,!0,w,k)};function Nn(h,v,w,k){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,Z=0;Z<v.length;++Z){var fe=v[Z];if(fe&&!fe.da&&fe.capture==w){var $e=fe.listener,Vt=fe.ha||fe.src;fe.fa&&Ms(h.i,fe),H=$e.call(Vt,k)!==!1&&H}}return H&&!k.defaultPrevented}function on(h,v,w){if(typeof h=="function")w&&(h=b(h,w));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function gu(h){h.g=on(()=>{h.g=null,h.i&&(h.i=!1,gu(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class uf extends me{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:gu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(h){me.call(this),this.h=h,this.g={}}C(qs,me);var Bs=[];function zs(h){he(h.g,function(v,w){this.g.hasOwnProperty(w)&&Hi(v)},h),h.g={}}qs.prototype.N=function(){qs.aa.N.call(this),zs(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nr=m.JSON.stringify,$i=m.JSON.parse,Fs=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function vl(){}vl.prototype.h=null;function _l(h){return h.h||(h.h=h.i())}function bl(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){ue.call(this,"d")}C(Zr,ue);function xl(){ue.call(this,"c")}C(xl,ue);var _r={},El=null;function Ma(){return El=El||new xt}_r.La="serverreachability";function Qi(h){ue.call(this,_r.La,h)}C(Qi,ue);function La(h){const v=Ma();nt(v,new Qi(v))}_r.STAT_EVENT="statevent";function yu(h,v){ue.call(this,_r.STAT_EVENT,h),this.stat=v}C(yu,ue);function pt(h){const v=Ma();nt(v,new yu(v,h))}_r.Ma="timingevent";function Lt(h,v){ue.call(this,_r.Ma,h),this.size=v}C(Lt,ue);function Dt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function wl(h,v,w,k,H,Z){h.info(function(){if(h.g)if(Z)for(var fe="",$e=Z.split("&"),Vt=0;Vt<$e.length;Vt++){var Qe=$e[Vt].split("=");if(1<Qe.length){var Qt=Qe[0];Qe=Qe[1];var Ut=Qt.split("_");fe=2<=Ut.length&&Ut[1]=="type"?fe+(Qt+"="+Qe+"&"):fe+(Qt+"=redacted&")}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+k+") [attempt "+H+"]: "+v+`
`+w+`
`+fe})}function df(h,v,w,k,H,Z,fe){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+H+"]: "+v+`
`+w+`
`+Z+" "+fe})}function Va(h,v,w,k){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Hs(h,w)+(k?" "+k:"")})}function vu(h,v){h.info(function(){return"TIMEOUT: "+v})}Vn.prototype.info=function(){};function Hs(h,v){if(!h.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var k=w[h];if(!(2>k.length)){var H=k[1];if(Array.isArray(H)&&!(1>H.length)){var Z=H[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var fe=1;fe<H.length;fe++)H[fe]=""}}}}return nr(w)}catch{return v}}var Ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},br;function xr(){}C(xr,vl),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},br=new xr;function mn(h,v,w,k){this.j=h,this.i=v,this.l=w,this.R=k||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Sl={},Ki={};function rr(h,v,w){h.L=1,h.v=Ys(Tn(v)),h.m=w,h.P=!0,ea(h,null)}function ea(h,v){h.F=Date.now(),Gs(h),h.A=Tn(h.v);var w=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),Dl(w.i,"t",k),h.C=0,w=h.j.J,h.h=new St,h.g=ku(h.j,w?v:null,!h.m),0<h.O&&(h.M=new uf(b(h.Y,h,h.g),h.O)),v=h.U,w=h.g,k=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(Bs[0]=H.toString()),H=Bs);for(var Z=0;Z<H.length;Z++){var fe=mu(w,H[Z],k||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),La(),wl(h.i,h.u,h.A,h.l,h.R,h.m)}mn.prototype.ca=function(h){h=h.target;const v=this.M;v&&zn(h)==3?v.j():this.Y(h)},mn.prototype.Y=function(h){try{if(h==this.g)e:{const Ut=zn(this.g);var v=this.g.Ba();const la=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Nu(this.g)))){this.J||Ut!=4||v==7||(v==8||0>=la?La(3):La(2)),qa(this);var w=this.g.Z();this.X=w;t:if(_u(this)){var k=Nu(this.g);h="";var H=k.length,Z=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Er(this);var fe="";break t}this.h.i=new m.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,h+=this.h.i.decode(k[v],{stream:!(Z&&v==H-1)});k.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=w==200,df(this.i,this.u,this.A,this.l,this.R,Ut,w),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Vt=this.g;if(($e=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W($e)){var Qe=$e;break t}}Qe=null}if(w=Qe)Va(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$s(this,w);else{this.o=!1,this.s=3,pt(12),Zt(this),Er(this);break e}}if(this.P){w=!0;let Jt;for(;!this.J&&this.C<fe.length;)if(Jt=bu(this,fe),Jt==Ki){Ut==4&&(this.s=4,pt(14),w=!1),Va(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Sl){this.s=4,pt(15),Va(this.i,this.l,fe,"[Invalid Chunk]"),w=!1;break}else Va(this.i,this.l,Jt,null),$s(this,Jt);if(_u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||fe.length!=0||this.h.h||(this.s=1,pt(16),w=!1),this.o=this.o&&w,!w)Va(this.i,this.l,fe,"[Invalid Chunked Response]"),Zt(this),Er(this);else if(0<fe.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),ri(Qt),Qt.M=!0,pt(11))}}else Va(this.i,this.l,fe,null),$s(this,fe);Ut==4&&Zt(this),this.o&&!this.J&&(Ut==4?Ru(this.j,this):(this.o=!1,Gs(this)))}else gf(this.g),w==400&&0<fe.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Zt(this),Er(this)}}}catch{}finally{}};function _u(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function bu(h,v){var w=h.C,k=v.indexOf(`
`,w);return k==-1?Ki:(w=Number(v.substring(w,k)),isNaN(w)?Sl:(k+=1,k+w>v.length?Ki:(v=v.slice(k,k+w),h.C=k+w,v)))}mn.prototype.cancel=function(){this.J=!0,Zt(this)};function Gs(h){h.S=Date.now()+h.I,xu(h,h.I)}function xu(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Dt(b(h.ba,h),v)}function qa(h){h.B&&(m.clearTimeout(h.B),h.B=null)}mn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(vu(this.i,this.A),this.L!=2&&(La(),pt(17)),Zt(this),this.s=2,Er(this)):xu(this,this.S-h)};function Er(h){h.j.G==0||h.J||Ru(h.j,h)}function Zt(h){qa(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,zs(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function $s(h,v){try{var w=h.j;if(w.G!=0&&(w.g==h||Al(w.h,h))){if(!h.K&&Al(w.h,h)&&w.G==3){try{var k=w.Da.g.parse(v)}catch{k=null}if(Array.isArray(k)&&k.length==3){var H=k;if(H[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)io(w),ao(w);else break e;Ol(w),pt(18)}}else w.za=H[1],0<w.za-w.T&&37500>H[2]&&w.F&&w.v==0&&!w.C&&(w.C=Dt(b(w.Za,w),6e3));if(1>=Xi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else oa(w,11)}else if((h.K||w.g==h)&&io(w),!W(v))for(H=w.Da.g.parse(v),v=0;v<H.length;v++){let Qe=H[v];if(w.T=Qe[0],Qe=Qe[1],w.G==2)if(Qe[0]=="c"){w.K=Qe[1],w.ia=Qe[2];const Qt=Qe[3];Qt!=null&&(w.la=Qt,w.j.info("VER="+w.la));const Ut=Qe[4];Ut!=null&&(w.Aa=Ut,w.j.info("SVER="+w.Aa));const la=Qe[5];la!=null&&typeof la=="number"&&0<la&&(k=1.5*la,w.L=k,w.j.info("backChannelRequestTimeoutMs_="+k)),k=w;const Jt=h.g;if(Jt){const jr=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var Z=k.h;Z.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Wi(Z,Z.h),Z.h=null))}if(k.D){const Ll=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ll&&(k.ya=Ll,st(k.I,k.D,Ll))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),k=w;var fe=h;if(k.qa=Pu(k,k.J?k.ia:null,k.W),fe.K){pn(k.h,fe);var $e=fe,Vt=k.L;Vt&&($e.I=Vt),$e.B&&(qa($e),Gs($e)),k.g=fe}else ju(k);0<w.i.length&&so(w)}else Qe[0]!="stop"&&Qe[0]!="close"||oa(w,7);else w.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?oa(w,7):Pl(w):Qe[0]!="noop"&&w.l&&w.l.ta(Qe),w.v=0)}}La(4)}catch{}}var Eu=class{constructor(h,v){this.g=h,this.map=v}};function ta(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xi(h){return h.h?1:h.g?h.g.size:0}function Al(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Wi(h,v){h.g?h.g.add(v):h.h=v}function pn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}ta.prototype.cancel=function(){if(this.i=Nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Nl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.D);return v}return A(h.i)}function hf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var v=[],w=h.length,k=0;k<w;k++)v.push(h[k]);return v}v=[],w=0;for(k in h)v[w++]=h[k];return v}function Zi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var v=[];h=h.length;for(var w=0;w<h;w++)v.push(w);return v}v=[],w=0;for(const k in h)v[w++]=k;return v}}}function Tl(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var w=Zi(h),k=hf(h),H=k.length,Z=0;Z<H;Z++)v.call(void 0,k[Z],w&&w[Z],h)}var Qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ff(h,v){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var k=h[w].indexOf("="),H=null;if(0<=k){var Z=h[w].substring(0,k);H=h[w].substring(k+1)}else Z=h[w];v(Z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Rt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Rt){this.h=h.h,Ks(this,h.j),this.o=h.o,this.g=h.g,Ba(this,h.s),this.l=h.l;var v=h.i,w=new ra;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),na(this,w),this.m=h.m}else h&&(v=String(h).match(Qs))?(this.h=!1,Ks(this,v[1]||"",!0),this.o=Un(v[2]||""),this.g=Un(v[3]||"",!0),Ba(this,v[4]),this.l=Un(v[5]||"",!0),na(this,v[6]||"",!0),this.m=Un(v[7]||"")):(this.h=!1,this.i=new ra(null,this.h))}Rt.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Xs(v,Cl,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Xs(v,Cl,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Xs(w,w.charAt(0)=="/"?mf:jl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Xs(w,Ji)),h.join("")};function Tn(h){return new Rt(h)}function Ks(h,v,w){h.j=w?Un(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ba(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function na(h,v,w){v instanceof ra?(h.i=v,Su(h.i,h.h)):(w||(v=Xs(v,pf)),h.i=new ra(v,h.h))}function st(h,v,w){h.i.set(v,w)}function Ys(h){return st(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Un(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Xs(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,wu),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function wu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Cl=/[#\/\?@]/g,jl=/[#\?:]/g,mf=/[#\?]/g,pf=/[#\?@]/g,Ji=/#/g;function ra(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function qn(h){h.g||(h.g=new Map,h.h=0,h.i&&ff(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}n=ra.prototype,n.add=function(h,v){qn(this),this.i=null,h=wr(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function aa(h,v){qn(h),v=wr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function sa(h,v){return qn(h),v=wr(h,v),h.g.has(v)}n.forEach=function(h,v){qn(this),this.g.forEach(function(w,k){w.forEach(function(H){h.call(v,H,k,this)},this)},this)},n.na=function(){qn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let k=0;k<v.length;k++){const H=h[k];for(let Z=0;Z<H.length;Z++)w.push(v[k])}return w},n.V=function(h){qn(this);let v=[];if(typeof h=="string")sa(this,h)&&(v=v.concat(this.g.get(wr(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)v=v.concat(h[w])}return v},n.set=function(h,v){return qn(this),this.i=null,h=wr(this,h),sa(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Dl(h,v,w){aa(h,v),0<w.length&&(h.i=null,h.g.set(wr(h,v),A(w)),h.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var k=v[w];const Z=encodeURIComponent(String(k)),fe=this.V(k);for(k=0;k<fe.length;k++){var H=Z;fe[k]!==""&&(H+="="+encodeURIComponent(String(fe[k]))),h.push(H)}}return this.i=h.join("&")};function wr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Su(h,v){v&&!h.j&&(qn(h),h.i=null,h.g.forEach(function(w,k){var H=k.toLowerCase();k!=H&&(aa(this,k),Dl(this,H,w))},h)),h.j=v}function Ws(h,v){const w=new Vn;if(m.Image){const k=new Image;k.onload=x(Bn,w,"TestLoadImage: loaded",!0,v,k),k.onerror=x(Bn,w,"TestLoadImage: error",!1,v,k),k.onabort=x(Bn,w,"TestLoadImage: abort",!1,v,k),k.ontimeout=x(Bn,w,"TestLoadImage: timeout",!1,v,k),m.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else v(!1)}function ar(h,v){const w=new Vn,k=new AbortController,H=setTimeout(()=>{k.abort(),Bn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:k.signal}).then(Z=>{clearTimeout(H),Z.ok?Bn(w,"TestPingServer: ok",!0,v):Bn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Bn(w,"TestPingServer: error",!1,v)})}function Bn(h,v,w,k,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),k(w)}catch{}}function Zs(){this.g=new Fs}function Sr(h,v,w){const k=w||"";try{Tl(h,function(H,Z){let fe=H;g(H)&&(fe=nr(H)),v.push(k+Z+"="+encodeURIComponent(fe))})}catch(H){throw v.push(k+"type="+encodeURIComponent("_badmap")),H}}function za(h){this.l=h.Ub||null,this.j=h.eb||!1}C(za,vl),za.prototype.g=function(){return new ia(this.l,this.j)},za.prototype.i=function(h){return function(){return h}}({});function ia(h,v){xt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ia,xt),n=ia.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Nr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Ar(this):Nr(this),this.readyState==3&&Rl(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ar(this))},n.Qa=function(h){this.g&&(this.response=h,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Nr(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Il(h){let v="";return he(h,function(w,k){v+=k,v+=":",v+=w,v+=`\r
`}),v}function $t(h,v,w){e:{for(k in w){var k=!1;break e}k=!0}k||(w=Il(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):st(h,v,w))}function et(h){xt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(et,xt);var eo=/^https?$/i,Js=["POST","PUT"];n=et.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,w,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():br.g(),this.v=this.o?_l(this.o):_l(br),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Z){Au(this,Z);return}if(h=w||"",w=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var H in k)w.set(H,k[H]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Z of k.keys())w.set(Z,k.get(Z));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),H=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Js,v,void 0))||k||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of w)this.g.setRequestHeader(Z,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ei(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Au(this,Z)}};function Au(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,to(h),Tr(h)}function to(h){h.A||(h.A=!0,nt(h,"complete"),nt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,nt(this,"complete"),nt(this,"abort"),Tr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?no(this):this.bb())},n.bb=function(){no(this)};function no(h){if(h.h&&typeof d<"u"&&(!h.v[1]||zn(h)!=4||h.Z()!=2)){if(h.u&&zn(h)==4)on(h.Ea,0,h);else if(nt(h,"readystatechange"),zn(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var k;if(k=fe===0){var H=String(h.D).match(Qs)[1]||null;!H&&m.self&&m.self.location&&(H=m.self.location.protocol.slice(0,-1)),k=!eo.test(H?H.toLowerCase():"")}w=k}if(w)nt(h,"complete"),nt(h,"success");else{h.m=6;try{var Z=2<zn(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",to(h)}}finally{Tr(h)}}}}function Tr(h,v){if(h.g){ei(h);const w=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||nt(h,"ready");try{w.onreadystatechange=k}catch{}}}function ei(h){h.I&&(m.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function zn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),$i(v)}};function Nu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function gf(h){const v={};h=(h.g&&2<=zn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(W(h[k]))continue;var w=N(h[k]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=v[H]||[];v[H]=Z,Z.push(w)}O(v,function(k){return k.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function ro(h){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ti("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ti("baseRetryDelayMs",5e3,h),this.cb=ti("retryDelaySeedMs",1e4,h),this.Wa=ti("forwardChannelMaxRetries",2,h),this.wa=ti("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ta(h&&h.concurrentRequestLimit),this.Da=new Zs,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ro.prototype,n.la=8,n.G=1,n.connect=function(h,v,w,k){pt(0),this.W=h,this.H=v||{},w&&k!==void 0&&(this.H.OSID=w,this.H.OAID=k),this.F=this.X,this.I=Pu(this,null,this.W),so(this)};function Pl(h){if(Tu(h),h.G==3){var v=h.U++,w=Tn(h.I);if(st(w,"SID",h.K),st(w,"RID",v),st(w,"TYPE","terminate"),ni(h,w),v=new mn(h,h.j,v),v.L=2,v.v=Ys(Tn(w)),w=!1,m.navigator&&m.navigator.sendBeacon)try{w=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&m.Image&&(new Image().src=v.v,w=!0),w||(v.g=ku(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Gs(v)}Iu(h)}function ao(h){h.g&&(ri(h),h.g.cancel(),h.g=null)}function Tu(h){ao(h),h.u&&(m.clearTimeout(h.u),h.u=null),io(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function so(h){if(!Yi(h.h)&&!h.s){h.s=!0;var v=h.Ga;ce||B(),ye||(ce(),ye=!0),We.add(v,h),h.B=0}}function yf(h,v){return Xi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Dt(b(h.Ga,h,v),Ml(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new mn(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=T(Z),L(Z,this.S)):Z=this.S),this.m!==null||this.O||(H.H=Z,Z=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var k=this.i[w];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(v+=k,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Cu(this,H,v),w=Tn(this.I),st(w,"RID",h),st(w,"CVER",22),this.D&&st(w,"X-HTTP-Session-Id",this.D),ni(this,w),Z&&(this.O?v="headers="+encodeURIComponent(String(Il(Z)))+"&"+v:this.m&&$t(w,this.m,Z)),Wi(this.h,H),this.Ua&&st(w,"TYPE","init"),this.P?(st(w,"$req",v),st(w,"SID","null"),H.T=!0,rr(H,w,null)):rr(H,w,v),this.G=2}}else this.G==3&&(h?kl(this,h):this.i.length==0||Yi(this.h)||kl(this))};function kl(h,v){var w;v?w=v.l:w=h.U++;const k=Tn(h.I);st(k,"SID",h.K),st(k,"RID",w),st(k,"AID",h.T),ni(h,k),h.m&&h.o&&$t(k,h.m,h.o),w=new mn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Cu(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Wi(h.h,w),rr(w,k,v)}function ni(h,v){h.H&&he(h.H,function(w,k){st(v,k,w)}),h.l&&Tl({},function(w,k){st(v,k,w)})}function Cu(h,v,w){w=Math.min(h.i.length,w);var k=h.l?b(h.l.Na,h.l,h):null;e:{var H=h.i;let Z=-1;for(;;){const fe=["count="+w];Z==-1?0<w?(Z=H[0].g,fe.push("ofs="+Z)):Z=0:fe.push("ofs="+Z);let $e=!0;for(let Vt=0;Vt<w;Vt++){let Qe=H[Vt].g;const Qt=H[Vt].map;if(Qe-=Z,0>Qe)Z=Math.max(0,H[Vt].g-100),$e=!1;else try{Sr(Qt,fe,"req"+Qe+"_")}catch{k&&k(Qt)}}if($e){k=fe.join("&");break e}}}return h=h.i.splice(0,w),v.D=h,k}function ju(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ce||B(),ye||(ce(),ye=!0),We.add(v,h),h.v=0}}function Ol(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Dt(b(h.Fa,h),Ml(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Dt(b(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),ao(this),Du(this))};function ri(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function Du(h){h.g=new mn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Tn(h.qa);st(v,"RID","rpc"),st(v,"SID",h.K),st(v,"AID",h.T),st(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&st(v,"TO",h.ja),st(v,"TYPE","xmlhttp"),ni(h,v),h.m&&h.o&&$t(v,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Ys(Tn(v)),w.m=null,w.P=!0,ea(w,h)}n.Za=function(){this.C!=null&&(this.C=null,ao(this),Ol(this),pt(19))};function io(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function Ru(h,v){var w=null;if(h.g==v){io(h),ri(h),h.g=null;var k=2}else if(Al(h.h,v))w=v.D,pn(h.h,v),k=1;else return;if(h.G!=0){if(v.o)if(k==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var H=h.B;k=Ma(),nt(k,new Lt(k,w)),so(h)}else ju(h);else if(H=v.s,H==3||H==0&&0<v.X||!(k==1&&yf(h,v)||k==2&&Ol(h)))switch(w&&0<w.length&&(v=h.h,v.i=v.i.concat(w)),H){case 1:oa(h,5);break;case 4:oa(h,10);break;case 3:oa(h,6);break;default:oa(h,2)}}}function Ml(h,v){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*v}function oa(h,v){if(h.j.info("Error code "+v),v==2){var w=b(h.fb,h),k=h.Xa;const H=!k;k=new Rt(k||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ks(k,"https"),Ys(k),H?Ws(k.toString(),w):ar(k.toString(),w)}else pt(2);h.G=0,h.l&&h.l.sa(v),Iu(h),Tu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Iu(h){if(h.G=0,h.ka=[],h.l){const v=Nl(h.h);(v.length!=0||h.i.length!=0)&&(U(h.ka,v),U(h.ka,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.ra()}}function Pu(h,v,w){var k=w instanceof Rt?Tn(w):new Rt(w);if(k.g!="")v&&(k.g=v+"."+k.g),Ba(k,k.s);else{var H=m.location;k=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var Z=new Rt(null);k&&Ks(Z,k),v&&(Z.g=v),H&&Ba(Z,H),w&&(Z.l=w),k=Z}return w=h.D,v=h.ya,w&&v&&st(k,w,v),st(k,"VER",h.la),ni(h,k),k}function ku(h,v,w){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new et(new za({eb:w})):new et(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ou(){}n=Ou.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oo(){}oo.prototype.g=function(h,v){return new gn(h,v)};function gn(h,v){xt.call(this),this.g=new ro(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!W(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!W(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Cr(this)}C(gn,xt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Pl(this.g)},gn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=nr(h),h=w);v.i.push(new Eu(v.Ya++,h)),v.G==3&&so(v)},gn.prototype.N=function(){this.g.l=null,delete this.j,Pl(this.g),delete this.g,gn.aa.N.call(this)};function Mu(h){Zr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}C(Mu,Zr);function Lu(){xl.call(this),this.status=1}C(Lu,xl);function Cr(h){this.g=h}C(Cr,Ou),Cr.prototype.ua=function(){nt(this.g,"a")},Cr.prototype.ta=function(h){nt(this.g,new Mu(h))},Cr.prototype.sa=function(h){nt(this.g,new Lu)},Cr.prototype.ra=function(){nt(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,BE=function(){return new oo},qE=function(){return Ma()},UE=_r,zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,Xd=Ua,Jr.COMPLETE="complete",VE=Jr,bl.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Cc=bl,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,LE=et}).apply(typeof Ud<"u"?Ud:typeof self<"u"?self:typeof window<"u"?window:{});const _0="@firebase/firestore",b0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new gg("@firebase/firestore");function Vo(){return Ii.logLevel}function ge(n,...e){if(Ii.logLevel<=Fe.DEBUG){const t=e.map(Cg);Ii.debug(`Firestore (${ol}): ${n}`,...t)}}function Ia(n,...e){if(Ii.logLevel<=Fe.ERROR){const t=e.map(Cg);Ii.error(`Firestore (${ol}): ${n}`,...t)}}function Xo(n,...e){if(Ii.logLevel<=Fe.WARN){const t=e.map(Cg);Ii.warn(`Firestore (${ol}): ${n}`,...t)}}function Cg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,zE(n,a,t)}function zE(n,e,t){let a=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Ia(a),new Error(a)}function tt(n,e,t,a){let i="Unexpected state";typeof t=="string"?i=t:a=t,n||zE(e,i,a)}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}}class Mj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Lj{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let a=this.i;const i=y=>this.i!==a?(a=this.i,t(y)):Promise.resolve();let c=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ca,e.enqueueRetryable(()=>i(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await i(this.currentUser)})},m=y=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ca)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(tt(typeof a.accessToken=="string",31837,{l:a}),new FE(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class Vj{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Uj{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new Vj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const a=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>a(c))};const i=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>i(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new x0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new x0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=Bj(40);for(let c=0;c<i.length;++c)a.length<20&&i[c]<t&&(a+=e.charAt(i[c]%62))}return a}}function He(n,e){return n<e?-1:n>e?1:0}function Fp(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const i=n.charAt(a),c=e.charAt(a);if(i!==c)return xp(i)===xp(c)?He(i,c):xp(i)?1:-1}return He(n.length,e.length)}const zj=55296,Fj=57343;function xp(n){const e=n.charCodeAt(0);return e>=zj&&e<=Fj}function Wo(n,e,t){return n.length===e.length&&n.every((a,i)=>t(a,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="__name__";class Or{constructor(e,t,a){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&je(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let i=0;i<a;i++){const c=Or.compareSegments(e.get(i),t.get(i));if(c!==0)return c}return He(e.length,t.length)}static compareSegments(e,t){const a=Or.isNumericId(e),i=Or.isNumericId(t);return a&&!i?-1:!a&&i?1:a&&i?Or.extractNumericId(e).compare(Or.extractNumericId(t)):Fp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class ht extends Or{construct(e,t,a){return new ht(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new pe(ne.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(i=>i.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const Hj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Or{construct(e,t,a){return new an(e,t,a)}static isValidIdentifier(e){return Hj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E0}static keyField(){return new an([E0])}static fromServerFormat(e){const t=[];let a="",i=0;const c=()=>{if(a.length===0)throw new pe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;i<e.length;){const m=e[i];if(m==="\\"){if(i+1===e.length)throw new pe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new pe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=y,i+=2}else m==="`"?(d=!d,i++):m!=="."||d?(a+=m,i++):(c(),i++)}if(c(),d)throw new pe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(ht.fromString(e))}static fromName(e){return new xe(ht.fromString(e).popFirst(5))}static empty(){return new xe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n,e,t){if(!t)throw new pe(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Gj(n,e,t,a){if(e===!0&&a===!0)throw new pe(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function w0(n){if(!xe.isDocumentKey(n))throw new pe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function S0(n){if(xe.isDocumentKey(n))throw new pe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Oh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function dr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Oh(n);throw new pe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ru(n,e){if(!GE(n))throw new pe(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const i=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const d=n[a];if(i&&typeof d!==i){t=`JSON field '${a}' must be a ${i}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${a}' field to equal '${c.value}'`;break}}if(t)throw new pe(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=-62135596800,N0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*N0);return new ft(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<A0)throw new pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N0}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ru(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-A0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Mt("string",ft._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new ft(0,0))}static max(){return new Pe(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=-1;function $j(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(a===1e9?new ft(t+1,0):new ft(t,a));return new As(i,xe.empty(),e)}function Qj(n){return new As(n.readTime,n.key,Bc)}class As{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new As(Pe.min(),xe.empty(),Bc)}static max(){return new As(Pe.max(),xe.empty(),Bc)}}function Kj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==Yj)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((a,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,i)},this.catchCallback=c=>{this.wrapFailure(t,c).next(a,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,a)=>{t(e)})}static reject(e){return new ae((t,a)=>{a(e)})}static waitFor(e){return new ae((t,a)=>{let i=0,c=0,d=!1;e.forEach(m=>{++i,m.next(()=>{++c,d&&c===i&&t()},y=>a(y))}),d=!0,c===i&&t()})}static or(e){let t=ae.resolve(!1);for(const a of e)t=t.next(i=>i?ae.resolve(i):a());return t}static forEach(e,t){const a=[];return e.forEach((i,c)=>{a.push(t.call(this,i,c))}),this.waitFor(a)}static mapArray(e,t){return new ae((a,i)=>{const c=e.length,d=new Array(c);let m=0;for(let y=0;y<c;y++){const g=y;t(e[g]).next(_=>{d[g]=_,++m,m===c&&a(d)},_=>i(_))}})}static doWhile(e,t){return new ae((a,i)=>{const c=()=>{e()===!0?t().next(()=>{c()},i):a()};c()})}}function Wj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=-1;function Lh(n){return n==null}function dh(n){return n===0&&1/n==-1/0}function Zj(n){return typeof n=="number"&&Number.isInteger(n)&&!dh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="";function Jj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=T0(e)),e=eD(n.get(t),e);return T0(e)}function eD(n,e){let t=e;const a=n.length;for(let i=0;i<a;i++){const c=n.charAt(i);switch(c){case"\0":t+="";break;case $E:t+="";break;default:t+=c}}return t}function T0(n){return n+$E+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ks(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(e,a.key);if(i===0)return t+a.left.size;i<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qd(this.root,e,this.comparator,!0)}}class qd{constructor(e,t,a,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?a(e.key,t):1,t&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,a,i,c){this.key=e,this.value=t,this.color=a??rn.RED,this.left=i??rn.EMPTY,this.right=c??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,i,c){return new rn(e??this.key,t??this.value,a??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let i=this;const c=a(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,t,a),null):c===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rn.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,a,i,c){return this}insert(e,t,a){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=a.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new Ft(an.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new KE("Invalid base64 string: "+c):c}}(e);return new sn(t)}static fromUint8Array(e){const t=function(i){let c="";for(let d=0;d<i.length;++d)c+=String.fromCharCode(i[d]);return c}(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const tD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(n){if(tt(!!n,39018),typeof n=="string"){let e=0;const t=tD.exec(n);if(tt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ts(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="server_timestamp",XE="__type__",WE="__previous_value__",ZE="__local_write_time__";function Rg(n){return(n?.mapValue?.fields||{})[XE]?.stringValue===YE}function Vh(n){const e=n.mapValue.fields[WE];return Rg(e)?Vh(e):e}function zc(n){const e=Ns(n.mapValue.fields[ZE].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t,a,i,c,d,m,y,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=i,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=_}}const hh="(default)";class Fc{constructor(e,t){this.projectId=e,this.database=t||hh}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===hh}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="__type__",rD="__max__",Bd={mapValue:{}},ew="__vector__",fh="value";function Cs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rg(n)?4:sD(n)?9007199254740991:aD(n)?10:11:je(28295,{value:n})}function Gr(n,e){if(n===e)return!0;const t=Cs(n);if(t!==Cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zc(n).isEqual(zc(e));case 3:return function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const d=Ns(i.timestampValue),m=Ns(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,c){return Ts(i.bytesValue).isEqual(Ts(c.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,c){return Tt(i.geoPointValue.latitude)===Tt(c.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(c.geoPointValue.longitude)}(n,e);case 2:return function(i,c){if("integerValue"in i&&"integerValue"in c)return Tt(i.integerValue)===Tt(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const d=Tt(i.doubleValue),m=Tt(c.doubleValue);return d===m?dh(d)===dh(m):isNaN(d)&&isNaN(m)}return!1}(n,e);case 9:return Wo(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return function(i,c){const d=i.mapValue.fields||{},m=c.mapValue.fields||{};if(C0(d)!==C0(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!Gr(d[y],m[y])))return!1;return!0}(n,e);default:return je(52216,{left:n})}}function Hc(n,e){return(n.values||[]).find(t=>Gr(t,e))!==void 0}function Zo(n,e){if(n===e)return 0;const t=Cs(n),a=Cs(e);if(t!==a)return He(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(c,d){const m=Tt(c.integerValue||c.doubleValue),y=Tt(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(n,e);case 3:return D0(n.timestampValue,e.timestampValue);case 4:return D0(zc(n),zc(e));case 5:return Fp(n.stringValue,e.stringValue);case 6:return function(c,d){const m=Ts(c),y=Ts(d);return m.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),y=d.split("/");for(let g=0;g<m.length&&g<y.length;g++){const _=He(m[g],y[g]);if(_!==0)return _}return He(m.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,d){const m=He(Tt(c.latitude),Tt(d.latitude));return m!==0?m:He(Tt(c.longitude),Tt(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return R0(n.arrayValue,e.arrayValue);case 10:return function(c,d){const m=c.fields||{},y=d.fields||{},g=m[fh]?.arrayValue,_=y[fh]?.arrayValue,E=He(g?.values?.length||0,_?.values?.length||0);return E!==0?E:R0(g,_)}(n.mapValue,e.mapValue);case 11:return function(c,d){if(c===Bd.mapValue&&d===Bd.mapValue)return 0;if(c===Bd.mapValue)return 1;if(d===Bd.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),g=d.fields||{},_=Object.keys(g);y.sort(),_.sort();for(let E=0;E<y.length&&E<_.length;++E){const b=Fp(y[E],_[E]);if(b!==0)return b;const x=Zo(m[y[E]],g[_[E]]);if(x!==0)return x}return He(y.length,_.length)}(n.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function D0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=Ns(n),a=Ns(e),i=He(t.seconds,a.seconds);return i!==0?i:He(t.nanos,a.nanos)}function R0(n,e){const t=n.values||[],a=e.values||[];for(let i=0;i<t.length&&i<a.length;++i){const c=Zo(t[i],a[i]);if(c)return c}return He(t.length,a.length)}function Jo(n){return Hp(n)}function Hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const a=Ns(t);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ts(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return xe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let a="[",i=!0;for(const c of t.values||[])i?i=!1:a+=",",a+=Hp(c);return a+"]"}(n.arrayValue):"mapValue"in n?function(t){const a=Object.keys(t.fields||{}).sort();let i="{",c=!0;for(const d of a)c?c=!1:i+=",",i+=`${d}:${Hp(t.fields[d])}`;return i+"}"}(n.mapValue):je(61005,{value:n})}function Wd(n){switch(Cs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vh(n);return e?16+Wd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ts(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,c)=>i+Wd(c),0)}(n.arrayValue);case 10:case 11:return function(a){let i=0;return ks(a.fields,(c,d)=>{i+=c.length+Wd(d)}),i}(n.mapValue);default:throw je(13486,{value:n})}}function I0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gp(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function P0(n){return!!n&&"nullValue"in n}function k0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zd(n){return!!n&&"mapValue"in n}function aD(n){return(n?.mapValue?.fields||{})[JE]?.stringValue===ew}function kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ks(n.mapValue.fields,(t,a)=>e.mapValue.fields[t]=kc(a)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(n.arrayValue.values[t]);return e}return{...n}}function sD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Zd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=an.emptyPath(),a={},i=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,a,i),a={},i=[],t=m.popLast()}d?a[m.lastSegment()]=kc(d):i.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,a,i)}delete(e){const t=this.field(e.popLast());Zd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let i=t.mapValue.fields[e.get(a)];Zd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,a){ks(t,(i,c)=>e[i]=c);for(const i of a)delete e[i]}clone(){return new wn(kc(this.value))}}function tw(n){const e=[];return ks(n.fields,(t,a)=>{const i=new an([t]);if(Zd(a)){const c=tw(a.mapValue).fields;if(c.length===0)e.push(i);else for(const d of c)e.push(i.child(d))}else e.push(i)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,a,i,c,d,m){this.key=e,this.documentType=t,this.version=a,this.readTime=i,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new hn(e,0,Pe.min(),Pe.min(),Pe.min(),wn.empty(),0)}static newFoundDocument(e,t,a,i){return new hn(e,1,t,Pe.min(),a,i,0)}static newNoDocument(e,t){return new hn(e,2,t,Pe.min(),Pe.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,Pe.min(),Pe.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.position=e,this.inclusive=t}}function O0(n,e,t){let a=0;for(let i=0;i<n.position.length;i++){const c=e[i],d=n.position[i];if(c.field.isKeyField()?a=xe.comparator(xe.fromName(d.referenceValue),t.key):a=Zo(d,t.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function M0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function iD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{}class Ot extends nw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new lD(e,t,a):t==="array-contains"?new dD(e,a):t==="in"?new hD(e,a):t==="not-in"?new fD(e,a):t==="array-contains-any"?new mD(e,a):new Ot(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new cD(e,a):new uD(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zo(t,this.value)):t!==null&&Cs(this.value)===Cs(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hr(e,t)}matches(e){return rw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rw(n){return n.op==="and"}function aw(n){return oD(n)&&rw(n)}function oD(n){for(const e of n.filters)if(e instanceof hr)return!1;return!0}function $p(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Jo(n.value);if(aw(n))return n.filters.map(e=>$p(e)).join(",");{const e=n.filters.map(t=>$p(t)).join(",");return`${n.op}(${e})`}}function sw(n,e){return n instanceof Ot?function(a,i){return i instanceof Ot&&a.op===i.op&&a.field.isEqual(i.field)&&Gr(a.value,i.value)}(n,e):n instanceof hr?function(a,i){return i instanceof hr&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((c,d,m)=>c&&sw(d,i.filters[m]),!0):!1}(n,e):void je(19439)}function iw(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${Jo(t.value)}`}(n):n instanceof hr?function(t){return t.op.toString()+" {"+t.getFilters().map(iw).join(" ,")+"}"}(n):"Filter"}class lD extends Ot{constructor(e,t,a){super(e,t,a),this.key=xe.fromName(a.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class cD extends Ot{constructor(e,t){super(e,"in",t),this.keys=ow("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uD extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=ow("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ow(n,e){return(e.arrayValue?.values||[]).map(t=>xe.fromName(t.referenceValue))}class dD extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&Hc(t.arrayValue,this.value)}}class hD extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class fD extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hc(this.value.arrayValue,t)}}class mD extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Hc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t=null,a=[],i=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=i,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function L0(n,e=null,t=[],a=[],i=null,c=null,d=null){return new pD(n,e,t,a,i,c,d)}function Pg(n){const e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>$p(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),Lh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Jo(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Jo(a)).join(",")),e.Te=t}return e.Te}function kg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!M0(n.startAt,e.startAt)&&M0(n.endAt,e.endAt)}function Qp(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t=null,a=[],i=[],c=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=i,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gD(n,e,t,a,i,c,d,m){return new ul(n,e,t,a,i,c,d,m)}function Og(n){return new ul(n)}function V0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lw(n){return n.collectionGroup!==null}function Oc(n){const e=ke(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Ft(an.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Gc(c,a))}),t.has(an.keyField().canonicalString())||e.Ie.push(new Gc(an.keyField(),a))}return e.Ie}function Br(n){const e=ke(n);return e.Ee||(e.Ee=yD(e,Oc(n))),e.Ee}function yD(n,e){if(n.limitType==="F")return L0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const c=i.dir==="desc"?"asc":"desc";return new Gc(i.field,c)});const t=n.endAt?new mh(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new mh(n.startAt.position,n.startAt.inclusive):null;return L0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function Kp(n,e){const t=n.filters.concat([e]);return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yp(n,e,t){return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uh(n,e){return kg(Br(n),Br(e))&&n.limitType===e.limitType}function cw(n){return`${Pg(Br(n))}|lt:${n.limitType}`}function Uo(n){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(i=>iw(i)).join(", ")}]`),Lh(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(i=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(i)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(i=>Jo(i)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(i=>Jo(i)).join(",")),`Target(${a})`}(Br(n))}; limitType=${n.limitType})`}function qh(n,e){return e.isFoundDocument()&&function(a,i){const c=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):xe.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(n,e)&&function(a,i){for(const c of Oc(a))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0}(n,e)&&function(a,i){for(const c of a.filters)if(!c.matches(i))return!1;return!0}(n,e)&&function(a,i){return!(a.startAt&&!function(d,m,y){const g=O0(d,m,y);return d.inclusive?g<=0:g<0}(a.startAt,Oc(a),i)||a.endAt&&!function(d,m,y){const g=O0(d,m,y);return d.inclusive?g>=0:g>0}(a.endAt,Oc(a),i))}(n,e)}function vD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uw(n){return(e,t)=>{let a=!1;for(const i of Oc(n)){const c=_D(i,e,t);if(c!==0)return c;a=a||i.field.isKeyField()}return 0}}function _D(n,e,t){const a=n.field.isKeyField()?xe.comparator(e.key,t.key):function(c,d,m){const y=d.data.field(c),g=m.data.field(c);return y!==null&&g!==null?Zo(y,g):je(42886)}(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[i,c]of a)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),i=this.inner[a];if(i===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return a.length===1?delete this.inner[t]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(t,a)=>{for(const[i,c]of a)e(i,c)})}isEmpty(){return QE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new bt(xe.comparator);function Pa(){return bD}const dw=new bt(xe.comparator);function jc(...n){let e=dw;for(const t of n)e=e.insert(t.key,t);return e}function hw(n){let e=dw;return n.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Ei(){return Mc()}function fw(){return Mc()}function Mc(){return new Ui(n=>n.toString(),(n,e)=>n.isEqual(e))}const xD=new bt(xe.comparator),ED=new Ft(xe.comparator);function Ge(...n){let e=ED;for(const t of n)e=e.add(t);return e}const wD=new Ft(He);function SD(){return wD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function mw(n){return{integerValue:""+n}}function AD(n,e){return Zj(e)?mw(e):Mg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(){this._=void 0}}function ND(n,e,t){return n instanceof ph?function(i,c){const d={fields:{[XE]:{stringValue:YE},[ZE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Rg(c)&&(c=Vh(c)),c&&(d.fields[WE]=c),{mapValue:d}}(t,e):n instanceof $c?gw(n,e):n instanceof Qc?yw(n,e):function(i,c){const d=pw(i,c),m=U0(d)+U0(i.Ae);return Gp(d)&&Gp(i.Ae)?mw(m):Mg(i.serializer,m)}(n,e)}function TD(n,e,t){return n instanceof $c?gw(n,e):n instanceof Qc?yw(n,e):t}function pw(n,e){return n instanceof gh?function(a){return Gp(a)||function(c){return!!c&&"doubleValue"in c}(a)}(e)?e:{integerValue:0}:null}class ph extends Bh{}class $c extends Bh{constructor(e){super(),this.elements=e}}function gw(n,e){const t=vw(e);for(const a of n.elements)t.some(i=>Gr(i,a))||t.push(a);return{arrayValue:{values:t}}}class Qc extends Bh{constructor(e){super(),this.elements=e}}function yw(n,e){let t=vw(e);for(const a of n.elements)t=t.filter(i=>!Gr(i,a));return{arrayValue:{values:t}}}class gh extends Bh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function U0(n){return Tt(n.integerValue||n.doubleValue)}function vw(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function CD(n,e){return n.field.isEqual(e.field)&&function(a,i){return a instanceof $c&&i instanceof $c||a instanceof Qc&&i instanceof Qc?Wo(a.elements,i.elements,Gr):a instanceof gh&&i instanceof gh?Gr(a.Ae,i.Ae):a instanceof ph&&i instanceof ph}(n.transform,e.transform)}class jD{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zh{}function _w(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lg(n.key,Wn.none()):new au(n.key,n.data,Wn.none());{const t=n.data,a=wn.empty();let i=new Ft(an.comparator);for(let c of e.fields)if(!i.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?a.delete(c):a.set(c,d),i=i.add(c)}return new Os(n.key,a,new Mn(i.toArray()),Wn.none())}}function DD(n,e,t){n instanceof au?function(i,c,d){const m=i.value.clone(),y=B0(i.fieldTransforms,c,d.transformResults);m.setAll(y),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(n,e,t):n instanceof Os?function(i,c,d){if(!Jd(i.precondition,c))return void c.convertToUnknownDocument(d.version);const m=B0(i.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(bw(i)),y.setAll(m),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(n,e,t):function(i,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function Lc(n,e,t,a){return n instanceof au?function(c,d,m,y){if(!Jd(c.precondition,d))return m;const g=c.value.clone(),_=z0(c.fieldTransforms,y,d);return g.setAll(_),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(n,e,t,a):n instanceof Os?function(c,d,m,y){if(!Jd(c.precondition,d))return m;const g=z0(c.fieldTransforms,y,d),_=d.data;return _.setAll(bw(c)),_.setAll(g),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(E=>E.field))}(n,e,t,a):function(c,d,m){return Jd(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(n,e,t)}function RD(n,e){let t=null;for(const a of n.fieldTransforms){const i=e.data.field(a.field),c=pw(a.transform,i||null);c!=null&&(t===null&&(t=wn.empty()),t.set(a.field,c))}return t||null}function q0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&Wo(a,i,(c,d)=>CD(c,d))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class au extends zh{constructor(e,t,a,i=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Os extends zh{constructor(e,t,a,i,c=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function bw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}}),e}function B0(n,e,t){const a=new Map;tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const c=n[i],d=c.transform,m=e.data.field(c.field);a.set(c.field,TD(d,m,t[i]))}return a}function z0(n,e,t){const a=new Map;for(const i of n){const c=i.transform,d=t.data.field(i.field);a.set(i.field,ND(c,d,e))}return a}class Lg extends zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ID extends zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t,a,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&DD(c,e,a[i])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Lc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Lc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=fw();return this.mutations.forEach(i=>{const c=e.get(i.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(i.key)?null:m;const y=_w(d,m);y!==null&&a.set(i.key,y),d.isValidDocument()||d.convertToNoDocument(Pe.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(t,a)=>q0(t,a))&&Wo(this.baseMutations,e.baseMutations,(t,a)=>q0(t,a))}}class Vg{constructor(e,t,a,i){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=i}static from(e,t,a){tt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let i=function(){return xD}();const c=e.mutations;for(let d=0;d<c.length;d++)i=i.insert(c[d].key,a[d].version);return new Vg(e,t,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ye;function MD(n){switch(n){case ne.OK:return je(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function xw(n){if(n===void 0)return Ia("GRPC error has no .code"),ne.UNKNOWN;switch(n){case kt.OK:return ne.OK;case kt.CANCELLED:return ne.CANCELLED;case kt.UNKNOWN:return ne.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ne.INTERNAL;case kt.UNAVAILABLE:return ne.UNAVAILABLE;case kt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case kt.NOT_FOUND:return ne.NOT_FOUND;case kt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case kt.ABORTED:return ne.ABORTED;case kt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case kt.DATA_LOSS:return ne.DATA_LOSS;default:return je(39323,{code:n})}}(Ye=kt||(kt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new xs([4294967295,4294967295],0);function F0(n){const e=LD().encode(n),t=new ME;return t.update(e),new Uint8Array(t.digest())}function H0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new xs([t,a],0),new xs([i,c],0)]}class Ug{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Dc(`Invalid padding: ${t}`);if(a<0)throw new Dc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Dc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Dc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,a){let i=e.add(t.multiply(xs.fromNumber(a)));return i.compare(VD)===1&&(i=new xs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=F0(e),[a,i]=H0(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,i,c);if(!this.we(d))return!1}return!0}static create(e,t,a){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ug(c,i,t);return a.forEach(m=>d.insert(m)),d}insert(e){if(this.ge===0)return;const t=F0(e),[a,i]=H0(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,i,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,a,i,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const i=new Map;return i.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Fh(Pe.min(),i,new bt(He),Pa(),Ge())}}class su{constructor(e,t,a,i,c){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new su(a,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,a,i){this.be=e,this.removedTargetIds=t,this.key=a,this.De=i}}class Ew{constructor(e,t){this.targetId=e,this.Ce=t}}class ww{constructor(e,t,a=sn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=i}}class G0{constructor(){this.ve=0,this.Fe=$0(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),a=Ge();return this.Fe.forEach((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:a=a.add(i);break;default:je(38017,{changeType:c})}}),new su(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=$0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pa(),this.Je=zd(),this.He=zd(),this.Ye=new bt(He)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((a,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,a=e.Ce.count,i=this.ot(t);if(i){const c=i.target;if(Qp(c))if(a===0){const d=new xe(c.path);this.et(t,d,hn.newNoDocument(d,Pe.min()))}else tt(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const m=this.ut(e),y=m?this.ct(m,e,d):1;if(y!==0){this.it(t);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:c=0}=t;let d,m;try{d=Ts(a).toUint8Array()}catch(y){if(y instanceof KE)return Xo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Ug(d,i,c)}catch(y){return Xo(y instanceof Dc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let i=0;return a.forEach(c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Qp(m.target)){const y=new xe(m.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,hn.newNoDocument(y,e))}c.Be&&(t.set(d,c.ke()),c.qe())}});let a=Ge();this.He.forEach((c,d)=>{let m=!0;d.forEachWhile(y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(a=a.add(c))}),this.je.forEach((c,d)=>d.setReadTime(e));const i=new Fh(e,t,this.Ye,this.je,a);return this.je=Pa(),this.Je=zd(),this.He=zd(),this.Ye=new bt(He),i}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new G0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(He),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G0),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zd(){return new bt(xe.comparator)}function $0(){return new bt(xe.comparator)}const qD={asc:"ASCENDING",desc:"DESCENDING"},BD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zD={and:"AND",or:"OR"};class FD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xp(n,e){return n.useProto3Json||Lh(e)?e:{value:e}}function yh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HD(n,e){return yh(n,e.toTimestamp())}function zr(n){return tt(!!n,49232),Pe.fromTimestamp(function(t){const a=Ns(t);return new ft(a.seconds,a.nanos)}(n))}function qg(n,e){return Wp(n,e).canonicalString()}function Wp(n,e){const t=function(i){return new ht(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Aw(n){const e=ht.fromString(n);return tt(Dw(e),10190,{key:e.toString()}),e}function Zp(n,e){return qg(n.databaseId,e.path)}function Ep(n,e){const t=Aw(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(Tw(t))}function Nw(n,e){return qg(n.databaseId,e)}function GD(n){const e=Aw(n);return e.length===4?ht.emptyPath():Tw(e)}function Jp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tw(n){return tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Q0(n,e,t){return{name:Zp(n,e),fields:t.value.mapValue.fields}}function $D(n,e){let t;if("targetChange"in e){e.targetChange;const a=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:je(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=function(g,_){return g.useProto3Json?(tt(_===void 0||typeof _=="string",58123),sn.fromBase64String(_||"")):(tt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(g){const _=g.code===void 0?ne.UNKNOWN:xw(g.code);return new pe(_,g.message||"")}(d);t=new ww(a,i,c,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const i=Ep(n,a.document.name),c=zr(a.document.updateTime),d=a.document.createTime?zr(a.document.createTime):Pe.min(),m=new wn({mapValue:{fields:a.document.fields}}),y=hn.newFoundDocument(i,c,d,m),g=a.targetIds||[],_=a.removedTargetIds||[];t=new eh(g,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const i=Ep(n,a.document),c=a.readTime?zr(a.readTime):Pe.min(),d=hn.newNoDocument(i,c),m=a.removedTargetIds||[];t=new eh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const i=Ep(n,a.document),c=a.removedTargetIds||[];t=new eh([],c,i,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:i=0,unchangedNames:c}=a,d=new OD(i,c),m=a.targetId;t=new Ew(m,d)}}return t}function QD(n,e){let t;if(e instanceof au)t={update:Q0(n,e.key,e.value)};else if(e instanceof Lg)t={delete:Zp(n,e.key)};else if(e instanceof Os)t={update:Q0(n,e.key,e.data),updateMask:nR(e.fieldMask)};else{if(!(e instanceof ID))return je(16599,{Vt:e.type});t={verify:Zp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(c,d){const m=d.transform;if(m instanceof ph)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof $c)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Qc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof gh)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw je(20930,{transform:d.transform})}(0,a))),e.precondition.isNone||(t.currentDocument=function(i,c){return c.updateTime!==void 0?{updateTime:HD(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)}(n,e.precondition)),t}function KD(n,e){return n&&n.length>0?(tt(e!==void 0,14353),n.map(t=>function(i,c){let d=i.updateTime?zr(i.updateTime):zr(c);return d.isEqual(Pe.min())&&(d=zr(c)),new jD(d,i.transformResults||[])}(t,e))):[]}function YD(n,e){return{documents:[Nw(n,e.path)]}}function XD(n,e){const t={structuredQuery:{}},a=e.path;let i;e.collectionGroup!==null?(i=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=Nw(n,i);const c=function(g){if(g.length!==0)return jw(hr.create(g,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(g){if(g.length!==0)return g.map(_=>function(b){return{field:qo(b.field),direction:JD(b.dir)}}(_))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Xp(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:i}}function WD(n){let e=GD(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let i=null;if(a>0){tt(a===1,65062);const _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=function(E){const b=Cw(E);return b instanceof hr&&aw(b)?b.getFilters():[b]}(t.where));let d=[];t.orderBy&&(d=function(E){return E.map(b=>function(C){return new Gc(Bo(C.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(b))}(t.orderBy));let m=null;t.limit&&(m=function(E){let b;return b=typeof E=="object"?E.value:E,Lh(b)?null:b}(t.limit));let y=null;t.startAt&&(y=function(E){const b=!!E.before,x=E.values||[];return new mh(x,b)}(t.startAt));let g=null;return t.endAt&&(g=function(E){const b=!E.before,x=E.values||[];return new mh(x,b)}(t.endAt)),gD(e,i,d,c,m,"F",y,g)}function ZD(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Bo(t.unaryFilter.field);return Ot.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Bo(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Bo(t.unaryFilter.field);return Ot.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Bo(t.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Bo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return hr.create(t.compositeFilter.filters.map(a=>Cw(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(t.compositeFilter.op))}(n):je(30097,{filter:n})}function JD(n){return qD[n]}function eR(n){return BD[n]}function tR(n){return zD[n]}function qo(n){return{fieldPath:n.canonicalString()}}function Bo(n){return an.fromServerFormat(n.fieldPath)}function jw(n){return n instanceof Ot?function(t){if(t.op==="=="){if(k0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NAN"}};if(P0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(k0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NAN"}};if(P0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(t.field),op:eR(t.op),value:t.value}}}(n):n instanceof hr?function(t){const a=t.getFilters().map(i=>jw(i));return a.length===1?a[0]:{compositeFilter:{op:tR(t.op),filters:a}}}(n):je(54877,{filter:n})}function nR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,a,i,c=Pe.min(),d=Pe.min(),m=sn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.yt=e}}function aR(n){const e=WD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.Cn=new iR}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(As.min())}updateCollectionGroup(e,t,a){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class iR{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t]||new Ft(ht.comparator),c=!i.has(a);return this.index[t]=i.add(a),c}has(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t];return i&&i.has(a)}getEntries(e){return(this.index[e]||new Ft(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rw=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(Rw,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new el(0)}static cr(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="LruGarbageCollector",oR=1048576;function X0([n,e],[t,a]){const i=He(n,t);return i===0?He(e,a):i}class lR{constructor(e){this.Ir=e,this.buffer=new Ft(X0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();X0(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cR{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Y0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?ge(Y0,"Ignoring IndexedDB error during garbage collection: ",t):await ll(t)}await this.Vr(3e5)})}}class uR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Mh.ce);const a=new lR(t);return this.mr.forEachTarget(e,i=>a.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>a.Ar(i))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(K0)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K0):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,i,c,d,m,y,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,d=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(a=E,m=Date.now(),this.removeTargets(e,a,t))).next(E=>(c=E,y=Date.now(),this.removeOrphanedDocuments(e,a))).next(E=>(g=Date.now(),Vo()<=Fe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${i} in `+(m-d)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${E} documents in `+(g-y)+`ms
Total Duration: ${g-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:E})))}}function dR(n,e){return new uR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.changes=new Ui(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ae.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t,a,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=i}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(a=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(a!==null&&Lc(a.mutation,i,Mn.empty(),ft.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Ge()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Ge()){const i=Ei();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,a).next(c=>{let d=jc();return c.forEach((m,y)=>{d=d.insert(m,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const a=Ei();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Ge()))}populateOverlays(e,t,a){const i=[];return a.forEach(c=>{t.has(c)||i.push(c)}),this.documentOverlayCache.getOverlays(e,i).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,a,i){let c=Pa();const d=Mc(),m=function(){return Mc()}();return t.forEach((y,g)=>{const _=a.get(g.key);i.has(g.key)&&(_===void 0||_.mutation instanceof Os)?c=c.insert(g.key,g):_!==void 0?(d.set(g.key,_.mutation.getFieldMask()),Lc(_.mutation,g,_.mutation.getFieldMask(),ft.now())):d.set(g.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((g,_)=>d.set(g,_)),t.forEach((g,_)=>m.set(g,new fR(_,d.get(g)??null))),m))}recalculateAndSaveOverlays(e,t){const a=Mc();let i=new bt((d,m)=>d-m),c=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(y=>{const g=t.get(y);if(g===null)return;let _=a.get(y)||Mn.empty();_=m.applyToLocalView(g,_),a.set(y,_);const E=(i.get(m.batchId)||Ge()).add(y);i=i.insert(m.batchId,E)})}).next(()=>{const d=[],m=i.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,_=y.value,E=fw();_.forEach(b=>{if(!c.has(b)){const x=_w(t.get(b),a.get(b));x!==null&&E.set(b,x),c=c.add(b)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ae.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,i){return function(d){return xe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,i):this.getDocumentsMatchingCollectionQuery(e,t,a,i)}getNextDocuments(e,t,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,i).next(c=>{const d=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,i-c.size):ae.resolve(Ei());let m=Bc,y=c;return d.next(g=>ae.forEach(g,(_,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{y=y.insert(_,b)}))).next(()=>this.populateOverlays(e,g,c)).next(()=>this.computeViews(e,y,g,Ge())).next(_=>({batchId:m,changes:hw(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(a=>{let i=jc();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,a,i){const c=t.collectionGroup;let d=jc();return this.indexManager.getCollectionParents(e,c).next(m=>ae.forEach(m,y=>{const g=function(E,b){return new ul(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,a,i).next(_=>{_.forEach((E,b)=>{d=d.insert(E,b)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,a,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,c,i))).next(d=>{c.forEach((y,g)=>{const _=g.getKey();d.get(_)===null&&(d=d.insert(_,hn.newInvalidDocument(_)))});let m=jc();return d.forEach((y,g)=>{const _=c.get(y);_!==void 0&&Lc(_.mutation,g,Mn.empty(),ft.now()),qh(t,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:zr(i.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:aR(i.bundledQuery),readTime:zr(i.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.overlays=new bt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Ei();return ae.forEach(t,i=>this.getOverlay(e,i).next(c=>{c!==null&&a.set(i,c)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((i,c)=>{this.St(e,t,c)}),ae.resolve()}removeOverlaysForBatchId(e,t,a){const i=this.qr.get(a);return i!==void 0&&(i.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(a)),ae.resolve()}getOverlaysForCollection(e,t,a){const i=Ei(),c=t.length+1,d=new xe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>a&&i.set(y.getKey(),y)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,a,i){let c=new bt((g,_)=>g-_);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let _=c.get(g.largestBatchId);_===null&&(_=Ei(),c=c.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=Ei(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,_)=>m.set(g,_)),!(m.size()>=i)););return ae.resolve(m)}St(e,t,a){const i=this.overlays.get(a.key);if(i!==null){const d=this.qr.get(i.largestBatchId).delete(a.key);this.qr.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new kD(t,a));let c=this.qr.get(t);c===void 0&&(c=Ge(),this.qr.set(t,c)),this.qr.set(t,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.Qr=new Ft(Wt.$r),this.Ur=new Ft(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new Wt(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.Gr(new Wt(e,t))}zr(e,t){e.forEach(a=>this.removeReference(a,t))}jr(e){const t=new xe(new ht([])),a=new Wt(t,e),i=new Wt(t,e+1),c=[];return this.Ur.forEachInRange([a,i],d=>{this.Gr(d),c.push(d.key)}),c}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new ht([])),a=new Wt(t,e),i=new Wt(t,e+1);let c=Ge();return this.Ur.forEachInRange([a,i],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new Wt(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Wt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Wt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,i){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new PD(c,t,a,i);this.mutationQueue.push(d);for(const m of i)this.Zr=this.Zr.add(new Wt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(d)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,i=this.ei(a),c=i<0?0:i;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Dg:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Wt(t,0),i=new Wt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,i],d=>{const m=this.Xr(d.Yr);c.push(m)}),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Ft(He);return t.forEach(i=>{const c=new Wt(i,0),d=new Wt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],m=>{a=a.add(m.Yr)})}),ae.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,i=a.length+1;let c=a;xe.isDocumentKey(c)||(c=c.child(""));const d=new Wt(new xe(c),0);let m=new Ft(He);return this.Zr.forEachWhile(y=>{const g=y.key.path;return!!a.isPrefixOf(g)&&(g.length===i&&(m=m.add(y.Yr)),!0)},d),ae.resolve(this.ti(m))}ti(e){const t=[];return e.forEach(a=>{const i=this.Xr(a);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ae.forEach(t.mutations,i=>{const c=new Wt(i.key,t.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=a})}ir(e){}containsKey(e,t){const a=new Wt(t,0),i=this.Zr.firstAfterOrEqual(a);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.ri=e,this.docs=function(){return new bt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,i=this.docs.get(a),c=i?i.size:0,d=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ae.resolve(a?a.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let a=Pa();return t.forEach(i=>{const c=this.docs.get(i);a=a.insert(i,c?c.document.mutableCopy():hn.newInvalidDocument(i))}),ae.resolve(a)}getDocumentsMatchingQuery(e,t,a,i){let c=Pa();const d=t.path,m=new xe(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:_}}=y.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||Kj(Qj(_),a)<=0||(i.has(_.key)||qh(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,t,a,i){je(9500)}ii(e,t){return ae.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new bR(this)}getSize(e){return ae.resolve(this.size)}}class bR extends hR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(a)}),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.persistence=e,this.si=new Ui(t=>Pg(t),kg),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Bg,this.targetCount=0,this.ai=el.ur()}forEachTarget(e,t){return this.si.forEach((a,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new el(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,a){let i=0;const c=[];return this.si.forEach((d,m)=>{m.sequenceNumber<=t&&a.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ae.waitFor(c).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return ae.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),ae.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const i=this.persistence.referenceDelegate,c=[];return i&&t.forEach(d=>{c.push(i.markPotentiallyOrphaned(e,d))}),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return ae.resolve(a)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mh(0),this.li=!1,this.li=!0,this.hi=new yR,this.referenceDelegate=e(this),this.Pi=new xR(this),this.indexManager=new sR,this.remoteDocumentCache=function(i){return new _R(i)}(a=>this.referenceDelegate.Ti(a)),this.serializer=new rR(t),this.Ii=new pR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new vR(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){ge("MemoryPersistence","Starting transaction:",e);const i=new ER(this.ci.next());return this.referenceDelegate.Ei(),a(i).next(c=>this.referenceDelegate.di(i).next(()=>c)).toPromise().then(c=>(i.raiseOnCommittedEvent(),c))}Ai(e,t){return ae.or(Object.values(this.ui).map(a=>()=>a.containsKey(e,t)))}}class ER extends Xj{constructor(e){super(),this.currentSequenceNumber=e}}class zg{constructor(e){this.persistence=e,this.Ri=new Bg,this.Vi=null}static mi(e){return new zg(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),ae.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(c=>this.fi.add(c.toString()))}).next(()=>a.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,a=>{const i=xe.fromPath(a);return this.gi(e,i).next(c=>{c||t.removeEntry(i,Pe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vh{constructor(e,t){this.persistence=e,this.pi=new Ui(a=>Jj(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=dR(this,t)}static mi(e,t){return new vh(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(i=>a+i))}wr(e){let t=0;return this.pr(e,a=>{t++}).next(()=>t)}pr(e,t){return ae.forEach(this.pi,(a,i)=>this.br(e,a,i).next(c=>c?ae.resolve():t(i)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ii(e,d=>this.br(e,d,t).next(m=>{m||(a++,c.removeEntry(d,Pe.min()))})).next(()=>c.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wd(e.data.value)),t}br(e,t,a){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ae.resolve(i!==void 0&&i>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t,a,i){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=i}static As(e,t){let a=Ge(),i=Ge();for(const c of t.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new Fg(e,t.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nT()?8:Wj(fn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,i){const c={result:null};return this.ys(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ws(e,t,i,a).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new wR;return this.Ss(e,t,d).next(m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)})}).next(()=>c.result)}bs(e,t,a,i){return a.documentReadCount<this.fs?(Vo()<=Fe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Vo()<=Fe.DEBUG&&ge("QueryEngine","Query:",Uo(t),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.gs*i?(Vo()<=Fe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):ae.resolve())}ys(e,t){if(V0(t))return ae.resolve(null);let a=Br(t);return this.indexManager.getIndexType(e,a).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Yp(t,null,"F"),a=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(c=>{const d=Ge(...c);return this.ps.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,a).next(y=>{const g=this.Ds(t,m);return this.Cs(t,g,d,y.readTime)?this.ys(e,Yp(t,null,"F")):this.vs(e,g,t,y)}))})))}ws(e,t,a,i){return V0(t)||i.isEqual(Pe.min())?ae.resolve(null):this.ps.getDocuments(e,a).next(c=>{const d=this.Ds(t,c);return this.Cs(t,d,a,i)?ae.resolve(null):(Vo()<=Fe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uo(t)),this.vs(e,d,t,$j(i,Bc)).next(m=>m))})}Ds(e,t){let a=new Ft(uw(e));return t.forEach((i,c)=>{qh(e,c)&&(a=a.add(c))}),a}Cs(e,t,a,i){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}Ss(e,t,a){return Vo()<=Fe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,As.min(),a)}vs(e,t,a,i){return this.ps.getDocumentsMatchingQuery(e,a,i).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="LocalStore",AR=3e8;class NR{constructor(e,t,a,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new bt(He),this.xs=new Ui(c=>Pg(c),kg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function TR(n,e,t,a){return new NR(n,e,t,a)}async function Pw(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let i;return t.mutationQueue.getAllMutationBatches(a).next(c=>(i=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(a))).next(c=>{const d=[],m=[];let y=Ge();for(const g of i){d.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}for(const g of c){m.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}return t.localDocuments.getDocuments(a,y).next(g=>({Ls:g,removedBatchIds:d,addedBatchIds:m}))})})}function CR(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return function(m,y,g,_){const E=g.batch,b=E.keys();let x=ae.resolve();return b.forEach(C=>{x=x.next(()=>_.getEntry(y,C)).next(A=>{const U=g.docVersions.get(C);tt(U!==null,48541),A.version.compareTo(U)<0&&(E.applyToRemoteDocument(A,g),A.isValidDocument()&&(A.setReadTime(g.commitVersion),_.addEntry(A)))})}),x.next(()=>m.mutationQueue.removeMutationBatch(y,E))}(t,a,e,c).next(()=>c.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(m){let y=Ge();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(e))).next(()=>t.localDocuments.getDocuments(a,i))})}function kw(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function jR(n,e){const t=ke(n),a=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const m=[];e.targetChanges.forEach((_,E)=>{const b=i.get(E);if(!b)return;m.push(t.Pi.removeMatchingKeys(c,_.removedDocuments,E).next(()=>t.Pi.addMatchingKeys(c,_.addedDocuments,E)));let x=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(sn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,a)),i=i.insert(E,x),function(A,U,D){return A.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=AR?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(b,x,_)&&m.push(t.Pi.updateTargetData(c,x))});let y=Pa(),g=Ge();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))}),m.push(DR(c,d,e.documentUpdates).next(_=>{y=_.ks,g=_.qs})),!a.isEqual(Pe.min())){const _=t.Pi.getLastRemoteSnapshotVersion(c).next(E=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a));m.push(_)}return ae.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,y,g)).next(()=>y)}).then(c=>(t.Ms=i,c))}function DR(n,e,t){let a=Ge(),i=Ge();return t.forEach(c=>a=a.add(c)),e.getEntries(n,a).next(c=>{let d=Pa();return t.forEach((m,y)=>{const g=c.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(m)),y.isNoDocument()&&y.version.isEqual(Pe.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):ge(Hg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{ks:d,qs:i}})}function RR(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=Dg),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function IR(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return t.Pi.getTargetData(a,e).next(c=>c?(i=c,ae.resolve(i)):t.Pi.allocateTargetId(a).next(d=>(i=new ys(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=t.Ms.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a})}async function eg(n,e,t){const a=ke(n),i=a.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",c,d=>a.persistence.referenceDelegate.removeTarget(d,i))}catch(d){if(!cl(d))throw d;ge(Hg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(i.target)}function W0(n,e,t){const a=ke(n);let i=Pe.min(),c=Ge();return a.persistence.runTransaction("Execute query","readwrite",d=>function(y,g,_){const E=ke(y),b=E.xs.get(_);return b!==void 0?ae.resolve(E.Ms.get(b)):E.Pi.getTargetData(g,_)}(a,d,Br(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,m.targetId).next(y=>{c=y})}).next(()=>a.Fs.getDocumentsMatchingQuery(d,e,t?i:Pe.min(),t?c:Ge())).next(m=>(PR(a,vD(e),m),{documents:m,Qs:c})))}function PR(n,e,t){let a=n.Os.get(e)||Pe.min();t.forEach((i,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),n.Os.set(e,a)}class Z0{constructor(){this.activeTargetIds=SD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kR{constructor(){this.Mo=new Z0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Z0,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="ConnectivityMonitor";class ex{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(J0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(J0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd=null;function tg(){return Fd===null?Fd=function(){return 268435456+Math.round(2147483648*Math.random())}():Fd++,"0x"+Fd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="RestConnection",MR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${i}`,this.Wo=this.databaseId.database===hh?`project_id=${a}`:`project_id=${a}&database_id=${i}`}Go(e,t,a,i,c){const d=tg(),m=this.zo(e,t.toUriEncodedString());ge(wp,`Sending RPC '${e}' ${d}:`,m,a);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,i,c);const{host:g}=new URL(m),_=Mi(g);return this.Jo(e,m,y,a,_).then(E=>(ge(wp,`Received RPC '${e}' ${d}: `,E),E),E=>{throw Xo(wp,`RPC '${e}' ${d} failed with error: `,E,"url: ",m,"request:",a),E})}Ho(e,t,a,i,c,d){return this.Go(e,t,a,i,c)}jo(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,c)=>e[c]=i),a&&a.headers.forEach((i,c)=>e[c]=i)}zo(e,t){const a=MR[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class UR extends LR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,i,c){const d=tg();return new Promise((m,y)=>{const g=new LE;g.setWithCredentials(!0),g.listenOnce(VE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Xd.NO_ERROR:const E=g.getResponseJson();ge(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),m(E);break;case Xd.TIMEOUT:ge(un,`RPC '${e}' ${d} timed out`),y(new pe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Xd.HTTP_ERROR:const b=g.getStatus();if(ge(un,`RPC '${e}' ${d} failed with status:`,b,"response text:",g.getResponseText()),b>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x?.error;if(C&&C.status&&C.message){const A=function(D){const W=D.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(W)>=0?W:ne.UNKNOWN}(C.status);y(new pe(A,C.message))}else y(new pe(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new pe(ne.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ge(un,`RPC '${e}' ${d} completed.`)}});const _=JSON.stringify(i);ge(un,`RPC '${e}' ${d} sending request:`,i),g.send(t,"POST",_,a,15)})}T_(e,t,a){const i=tg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=BE(),m=qE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,a),y.encodeInitMessageHeaders=!0;const _=c.join("");ge(un,`Creating RPC '${e}' stream ${i}: ${_}`,y);const E=d.createWebChannel(_,y);this.I_(E);let b=!1,x=!1;const C=new VR({Yo:U=>{x?ge(un,`Not sending because RPC '${e}' stream ${i} is closed:`,U):(b||(ge(un,`Opening RPC '${e}' stream ${i} transport.`),E.open(),b=!0),ge(un,`RPC '${e}' stream ${i} sending:`,U),E.send(U))},Zo:()=>E.close()}),A=(U,D,W)=>{U.listen(D,q=>{try{W(q)}catch(se){setTimeout(()=>{throw se},0)}})};return A(E,Cc.EventType.OPEN,()=>{x||(ge(un,`RPC '${e}' stream ${i} transport opened.`),C.o_())}),A(E,Cc.EventType.CLOSE,()=>{x||(x=!0,ge(un,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(E))}),A(E,Cc.EventType.ERROR,U=>{x||(x=!0,Xo(un,`RPC '${e}' stream ${i} transport errored. Name:`,U.name,"Message:",U.message),C.a_(new pe(ne.UNAVAILABLE,"The operation could not be completed")))}),A(E,Cc.EventType.MESSAGE,U=>{if(!x){const D=U.data[0];tt(!!D,16349);const W=D,q=W?.error||W[0]?.error;if(q){ge(un,`RPC '${e}' stream ${i} received error:`,q);const se=q.status;let G=function(T){const I=kt[T];if(I!==void 0)return xw(I)}(se),he=q.message;G===void 0&&(G=ne.INTERNAL,he="Unknown error status: "+se+" with message "+q.message),x=!0,C.a_(new pe(G,he)),E.close()}else ge(un,`RPC '${e}' stream ${i} received:`,D),C.u_(D)}}),A(m,UE.STAT_EVENT,U=>{U.stat===zp.PROXY?ge(un,`RPC '${e}' stream ${i} detected buffering proxy`):U.stat===zp.NOPROXY&&ge(un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(n){return new FD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,a=1e3,i=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=i,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-a);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="PersistentStream";class Mw{constructor(e,t,a,i,c,d,m,y){this.Mi=e,this.S_=a,this.b_=i,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ow(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ia(t.toString()),Ia("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.D_===t&&this.G_(a,i)},a=>{e(()=>{const i=new pe(ne.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(i)})})}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{a(()=>this.listener.Xo())}),this.stream.t_(()=>{a(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{a(()=>this.z_(i))}),this.stream.onMessage(i=>{a(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ge(tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ge(tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qR extends Mw{constructor(e,t,a,i,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,i,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=$D(this.serializer,e),a=function(c){if(!("targetChange"in c))return Pe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Pe.min():d.readTime?zr(d.readTime):Pe.min()}(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=Jp(this.serializer),t.addTarget=function(c,d){let m;const y=d.target;if(m=Qp(y)?{documents:YD(c,y)}:{query:XD(c,y).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Sw(c,d.resumeToken);const g=Xp(c,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(Pe.min())>0){m.readTime=yh(c,d.snapshotVersion.toTimestamp());const g=Xp(c,d.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const a=ZD(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=Jp(this.serializer),t.removeTarget=e,this.q_(t)}}class BR extends Mw{constructor(e,t,a,i,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,i,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=KD(e.writeResults,e.commitTime),a=zr(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Jp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>QD(this.serializer,a))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{}class FR extends zR{constructor(e,t,a,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Go(e,Wp(t,a),i,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ne.UNKNOWN,c.toString())})}Ho(e,t,a,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Ho(e,Wp(t,a),i,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(ne.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class HR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ia(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="RemoteStore";class GR{constructor(e,t,a,i,c){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(d=>{a.enqueueAndForget(async()=>{qi(this)&&(ge(Pi,"Restarting streams for network reachability change."),await async function(y){const g=ke(y);g.Ea.add(4),await iu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Gh(g)}(this))})}),this.Ra=new HR(a,i)}}async function Gh(n){if(qi(n))for(const e of n.da)await e(!0)}async function iu(n){for(const e of n.da)await e(!1)}function Lw(n,e){const t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kg(t)?Qg(t):dl(t).O_()&&$g(t,e))}function Gg(n,e){const t=ke(n),a=dl(t);t.Ia.delete(e),a.O_()&&Vw(t,e),t.Ia.size===0&&(a.O_()?a.L_():qi(t)&&t.Ra.set("Unknown"))}function $g(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(n).Y_(e)}function Vw(n,e){n.Va.Ue(e),dl(n).Z_(e)}function Qg(n){n.Va=new UD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),dl(n).start(),n.Ra.ua()}function Kg(n){return qi(n)&&!dl(n).x_()&&n.Ia.size>0}function qi(n){return ke(n).Ea.size===0}function Uw(n){n.Va=void 0}async function $R(n){n.Ra.set("Online")}async function QR(n){n.Ia.forEach((e,t)=>{$g(n,e)})}async function KR(n,e){Uw(n),Kg(n)?(n.Ra.ha(e),Qg(n)):n.Ra.set("Unknown")}async function YR(n,e,t){if(n.Ra.set("Online"),e instanceof ww&&e.state===2&&e.cause)try{await async function(i,c){const d=c.cause;for(const m of c.targetIds)i.Ia.has(m)&&(await i.remoteSyncer.rejectListen(m,d),i.Ia.delete(m),i.Va.removeTarget(m))}(n,e)}catch(a){ge(Pi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await _h(n,a)}else if(e instanceof eh?n.Va.Ze(e):e instanceof Ew?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{const a=await kw(n.localStore);t.compareTo(a)>=0&&await function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const _=c.Ia.get(g);_&&c.Ia.set(g,_.withResumeToken(y.resumeToken,d))}}),m.targetMismatches.forEach((y,g)=>{const _=c.Ia.get(y);if(!_)return;c.Ia.set(y,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),Vw(c,y);const E=new ys(_.target,y,g,_.sequenceNumber);$g(c,E)}),c.remoteSyncer.applyRemoteEvent(m)}(n,t)}catch(a){ge(Pi,"Failed to raise snapshot:",a),await _h(n,a)}}async function _h(n,e,t){if(!cl(e))throw e;n.Ea.add(1),await iu(n),n.Ra.set("Offline"),t||(t=()=>kw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(Pi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gh(n)})}function qw(n,e){return e().catch(t=>_h(n,t,e))}async function $h(n){const e=ke(n),t=js(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dg;for(;XR(e);)try{const i=await RR(e.localStore,a);if(i===null){e.Ta.length===0&&t.L_();break}a=i.batchId,WR(e,i)}catch(i){await _h(e,i)}Bw(e)&&zw(e)}function XR(n){return qi(n)&&n.Ta.length<10}function WR(n,e){n.Ta.push(e);const t=js(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Bw(n){return qi(n)&&!js(n).x_()&&n.Ta.length>0}function zw(n){js(n).start()}async function ZR(n){js(n).ra()}async function JR(n){const e=js(n);for(const t of n.Ta)e.ea(t.mutations)}async function e2(n,e,t){const a=n.Ta.shift(),i=Vg.from(a,e,t);await qw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await $h(n)}async function t2(n,e){e&&js(n).X_&&await async function(a,i){if(function(d){return MD(d)&&d!==ne.ABORTED}(i.code)){const c=a.Ta.shift();js(a).B_(),await qw(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,i)),await $h(a)}}(n,e),Bw(n)&&zw(n)}async function nx(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ge(Pi,"RemoteStore received new credentials");const a=qi(t);t.Ea.add(3),await iu(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gh(t)}async function n2(n,e){const t=ke(n);e?(t.Ea.delete(2),await Gh(t)):e||(t.Ea.add(2),await iu(t),t.Ra.set("Unknown"))}function dl(n){return n.ma||(n.ma=function(t,a,i){const c=ke(t);return c.sa(),new qR(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)}(n.datastore,n.asyncQueue,{Xo:$R.bind(null,n),t_:QR.bind(null,n),r_:KR.bind(null,n),H_:YR.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Kg(n)?Qg(n):n.Ra.set("Unknown")):(await n.ma.stop(),Uw(n))})),n.ma}function js(n){return n.fa||(n.fa=function(t,a,i){const c=ke(t);return c.sa(),new BR(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZR.bind(null,n),r_:t2.bind(null,n),ta:JR.bind(null,n),na:e2.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await $h(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(Pi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t,a,i,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=i,this.removalCallback=c,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,i,c){const d=Date.now()+a,m=new Yg(e,t,d,i,c);return m.start(a),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xg(n,e){if(Ia("AsyncQueue",`${e}: ${n}`),cl(n))return new pe(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||xe.comparator(t.key,a.key):(t,a)=>xe.comparator(t.key,a.key),this.keyedMap=jc(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=a.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Qo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.ga=new bt(xe.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,a)=>{e.push(a)}),e}}class tl{constructor(e,t,a,i,c,d,m,y,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,i,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new tl(e,t,Qo.emptySet(t),d,a,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==a[i].type||!t[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class a2{constructor(){this.queries=ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const i=ke(t),c=i.queries;i.queries=ax(),c.forEach((d,m)=>{for(const y of m.Sa)y.onError(a)})})(this,new pe(ne.ABORTED,"Firestore shutting down"))}}function ax(){return new Ui(n=>cw(n),Uh)}async function Fw(n,e){const t=ke(n);let a=3;const i=e.query;let c=t.queries.get(i);c?!c.ba()&&e.Da()&&(a=2):(c=new r2,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await t.onListen(i,!0);break;case 1:c.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(d){const m=Xg(d,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(m)}t.queries.set(i,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Wg(t)}async function Hw(n,e){const t=ke(n),a=e.query;let i=3;const c=t.queries.get(a);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?i=e.Da()?0:1:!c.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function s2(n,e){const t=ke(n);let a=!1;for(const i of e){const c=i.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(i)&&(a=!0);d.wa=i}}a&&Wg(t)}function i2(n,e,t){const a=ke(n),i=a.queries.get(e);if(i)for(const c of i.Sa)c.onError(t);a.queries.delete(e)}function Wg(n){n.Ca.forEach(e=>{e.next()})}var ng,sx;(sx=ng||(ng={})).Ma="default",sx.Cache="cache";class Gw{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const i of e.docChanges)i.type!==3&&a.push(i);e=new tl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.key=e}}class Qw{constructor(e){this.key=e}}class o2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=uw(e),this.tu=new Qo(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new rx,i=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=i,m=!1;const y=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,E)=>{const b=i.get(_),x=qh(this.query,E)?E:null,C=!!b&&this.mutatedKeys.has(b.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let U=!1;b&&x?b.data.isEqual(x.data)?C!==A&&(a.track({type:3,doc:x}),U=!0):this.su(b,x)||(a.track({type:2,doc:x}),U=!0,(y&&this.eu(x,y)>0||g&&this.eu(x,g)<0)&&(m=!0)):!b&&x?(a.track({type:0,doc:x}),U=!0):b&&!x&&(a.track({type:1,doc:b}),U=!0,(y||g)&&(m=!0)),U&&(x?(d=d.add(x),c=A?c.add(_):c.delete(_)):(d=d.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),c=c.delete(_.key),a.track({type:1,doc:_})}return{tu:d,iu:a,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort((_,E)=>function(x,C){const A=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:U})}};return A(x)-A(C)}(_.type,E.type)||this.eu(_.doc,E.doc)),this.ou(a),i=i??!1;const m=t&&!i?this._u():[],y=this.Xa.size===0&&this.current&&!i?1:0,g=y!==this.Za;return this.Za=y,d.length!==0||g?{snapshot:new tl(this.query,e.tu,c,d,e.mutatedKeys,y===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))});const t=[];return e.forEach(a=>{this.Xa.has(a)||t.push(new Qw(a))}),this.Xa.forEach(a=>{e.has(a)||t.push(new $w(a))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zg="SyncEngine";class l2{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class c2{constructor(e){this.key=e,this.hu=!1}}class u2{constructor(e,t,a,i,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ui(m=>cw(m),Uh),this.Iu=new Map,this.Eu=new Set,this.du=new bt(xe.comparator),this.Au=new Map,this.Ru=new Bg,this.Vu={},this.mu=new Map,this.fu=el.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function d2(n,e,t=!0){const a=Jw(n);let i;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await Kw(a,e,t,!0),i}async function h2(n,e){const t=Jw(n);await Kw(t,e,!0,!1)}async function Kw(n,e,t,a){const i=await IR(n.localStore,Br(e)),c=i.targetId,d=n.sharedClientState.addLocalQueryTarget(c,t);let m;return a&&(m=await f2(n,e,c,d==="current",i.resumeToken)),n.isPrimaryClient&&t&&Lw(n.remoteStore,i),m}async function f2(n,e,t,a,i){n.pu=(E,b,x)=>async function(A,U,D,W){let q=U.view.ru(D);q.Cs&&(q=await W0(A.localStore,U.query,!1).then(({documents:O})=>U.view.ru(O,q)));const se=W&&W.targetChanges.get(U.targetId),G=W&&W.targetMismatches.get(U.targetId)!=null,he=U.view.applyChanges(q,A.isPrimaryClient,se,G);return ox(A,U.targetId,he.au),he.snapshot}(n,E,b,x);const c=await W0(n.localStore,e,!0),d=new o2(e,c.Qs),m=d.ru(c.documents),y=su.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",i),g=d.applyChanges(m,n.isPrimaryClient,y);ox(n,t,g.au);const _=new l2(e,t,d);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function m2(n,e,t){const a=ke(n),i=a.Tu.get(e),c=a.Iu.get(i.targetId);if(c.length>1)return a.Iu.set(i.targetId,c.filter(d=>!Uh(d,e))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await eg(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),t&&Gg(a.remoteStore,i.targetId),rg(a,i.targetId)}).catch(ll)):(rg(a,i.targetId),await eg(a.localStore,i.targetId,!0))}async function p2(n,e){const t=ke(n),a=t.Tu.get(e),i=t.Iu.get(a.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Gg(t.remoteStore,a.targetId))}async function g2(n,e,t){const a=w2(n);try{const i=await function(d,m){const y=ke(d),g=ft.now(),_=m.reduce((x,C)=>x.add(C.key),Ge());let E,b;return y.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=Pa(),A=Ge();return y.Ns.getEntries(x,_).next(U=>{C=U,C.forEach((D,W)=>{W.isValidDocument()||(A=A.add(D))})}).next(()=>y.localDocuments.getOverlayedDocuments(x,C)).next(U=>{E=U;const D=[];for(const W of m){const q=RD(W,E.get(W.key).overlayedDocument);q!=null&&D.push(new Os(W.key,q,tw(q.value.mapValue),Wn.exists(!0)))}return y.mutationQueue.addMutationBatch(x,g,D,m)}).next(U=>{b=U;const D=U.applyToLocalDocumentSet(E,A);return y.documentOverlayCache.saveOverlays(x,U.batchId,D)})}).then(()=>({batchId:b.batchId,changes:hw(E)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(i.batchId),function(d,m,y){let g=d.Vu[d.currentUser.toKey()];g||(g=new bt(He)),g=g.insert(m,y),d.Vu[d.currentUser.toKey()]=g}(a,i.batchId,t),await ou(a,i.changes),await $h(a.remoteStore)}catch(i){const c=Xg(i,"Failed to persist write");t.reject(c)}}async function Yw(n,e){const t=ke(n);try{const a=await jR(t.localStore,e);e.targetChanges.forEach((i,c)=>{const d=t.Au.get(c);d&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?d.hu=!0:i.modifiedDocuments.size>0?tt(d.hu,14607):i.removedDocuments.size>0&&(tt(d.hu,42227),d.hu=!1))}),await ou(t,a,e)}catch(a){await ll(a)}}function ix(n,e,t){const a=ke(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const i=[];a.Tu.forEach((c,d)=>{const m=d.view.va(e);m.snapshot&&i.push(m.snapshot)}),function(d,m){const y=ke(d);y.onlineState=m;let g=!1;y.queries.forEach((_,E)=>{for(const b of E.Sa)b.va(m)&&(g=!0)}),g&&Wg(y)}(a.eventManager,e),i.length&&a.Pu.H_(i),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function y2(n,e,t){const a=ke(n);a.sharedClientState.updateQueryState(e,"rejected",t);const i=a.Au.get(e),c=i&&i.key;if(c){let d=new bt(xe.comparator);d=d.insert(c,hn.newNoDocument(c,Pe.min()));const m=Ge().add(c),y=new Fh(Pe.min(),new Map,new bt(He),d,m);await Yw(a,y),a.du=a.du.remove(c),a.Au.delete(e),Jg(a)}else await eg(a.localStore,e,!1).then(()=>rg(a,e,t)).catch(ll)}async function v2(n,e){const t=ke(n),a=e.batch.batchId;try{const i=await CR(t.localStore,e);Ww(t,a,null),Xw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await ou(t,i)}catch(i){await ll(i)}}async function _2(n,e,t){const a=ke(n);try{const i=await function(d,m){const y=ke(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return y.mutationQueue.lookupMutationBatch(g,m).next(E=>(tt(E!==null,37113),_=E.keys(),y.mutationQueue.removeMutationBatch(g,E))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,_,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>y.localDocuments.getDocuments(g,_))})}(a.localStore,e);Ww(a,e,t),Xw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await ou(a,i)}catch(i){await ll(i)}}function Xw(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function Ww(n,e,t){const a=ke(n);let i=a.Vu[a.currentUser.toKey()];if(i){const c=i.get(e);c&&(t?c.reject(t):c.resolve(),i=i.remove(e)),a.Vu[a.currentUser.toKey()]=i}}function rg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(a=>{n.Ru.containsKey(a)||Zw(n,a)})}function Zw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Gg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Jg(n))}function ox(n,e,t){for(const a of t)a instanceof $w?(n.Ru.addReference(a.key,e),b2(n,a)):a instanceof Qw?(ge(Zg,"Document no longer in limbo: "+a.key),n.Ru.removeReference(a.key,e),n.Ru.containsKey(a.key)||Zw(n,a.key)):je(19791,{wu:a})}function b2(n,e){const t=e.key,a=t.path.canonicalString();n.du.get(t)||n.Eu.has(a)||(ge(Zg,"New document in limbo: "+t),n.Eu.add(a),Jg(n))}function Jg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(ht.fromString(e)),a=n.fu.next();n.Au.set(a,new c2(t)),n.du=n.du.insert(t,a),Lw(n.remoteStore,new ys(Br(Og(t.path)),a,"TargetPurposeLimboResolution",Mh.ce))}}async function ou(n,e,t){const a=ke(n),i=[],c=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach((m,y)=>{d.push(a.pu(y,e,t).then(g=>{if((g||t)&&a.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(y.targetId)?.current;a.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(g){i.push(g);const _=Fg.As(y.targetId,g);c.push(_)}}))}),await Promise.all(d),a.Pu.H_(i),await async function(y,g){const _=ke(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ae.forEach(g,b=>ae.forEach(b.Es,x=>_.persistence.referenceDelegate.addReference(E,b.targetId,x)).next(()=>ae.forEach(b.ds,x=>_.persistence.referenceDelegate.removeReference(E,b.targetId,x)))))}catch(E){if(!cl(E))throw E;ge(Hg,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const x=_.Ms.get(b),C=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(C);_.Ms=_.Ms.insert(b,A)}}}(a.localStore,c))}async function x2(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ge(Zg,"User change. New user:",e.toKey());const a=await Pw(t.localStore,e);t.currentUser=e,function(c,d){c.mu.forEach(m=>{m.forEach(y=>{y.reject(new pe(ne.CANCELLED,d))})}),c.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await ou(t,a.Ls)}}function E2(n,e){const t=ke(n),a=t.Au.get(e);if(a&&a.hu)return Ge().add(a.key);{let i=Ge();const c=t.Iu.get(e);if(!c)return i;for(const d of c){const m=t.Tu.get(d);i=i.unionWith(m.view.nu)}return i}}function Jw(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y2.bind(null,e),e.Pu.H_=s2.bind(null,e.eventManager),e.Pu.yu=i2.bind(null,e.eventManager),e}function w2(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_2.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return TR(this.persistence,new SR,e.initialUser,this.serializer)}Cu(e){return new Iw(zg.mi,this.serializer)}Du(e){return new kR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class S2 extends bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof vh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new cR(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Iw(a=>vh.mi(a,t),this.serializer)}}class ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>ix(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=x2.bind(null,this.syncEngine),await n2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new a2}()}createDatastore(e){const t=Hh(e.databaseInfo.databaseId),a=function(c){return new UR(c)}(e.databaseInfo);return function(c,d,m,y){return new FR(c,d,m,y)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,i,c,d,m){return new GR(a,i,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>ix(this.syncEngine,t,0),function(){return ex.v()?new ex:new OR}())}createSyncEngine(e,t){return function(i,c,d,m,y,g,_){const E=new u2(i,c,d,m,y,g);return _&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const a=ke(t);ge(Pi,"RemoteStore shutting down."),a.Ea.add(5),await iu(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ag.provider={build:()=>new ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ia("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="FirestoreClient";class A2{constructor(e,t,a,i,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async d=>{ge(Ds,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(ge(Ds,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Xg(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Ap(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Ds,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener(async i=>{a.isEqual(i)||(await Pw(e.localStore,i),a=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function lx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await N2(n);ge(Ds,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(a=>nx(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,i)=>nx(e.remoteStore,i)),n._onlineComponents=e}async function N2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Ds,"Using user provided OfflineComponentProvider");try{await Ap(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),await Ap(n,new bh)}}else ge(Ds,"Using default OfflineComponentProvider"),await Ap(n,new S2(void 0));return n._offlineComponents}async function tS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Ds,"Using user provided OnlineComponentProvider"),await lx(n,n._uninitializedComponentsProvider._online)):(ge(Ds,"Using default OnlineComponentProvider"),await lx(n,new ag))),n._onlineComponents}function T2(n){return tS(n).then(e=>e.syncEngine)}async function nS(n){const e=await tS(n),t=e.eventManager;return t.onListen=d2.bind(null,e.syncEngine),t.onUnlisten=m2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=p2.bind(null,e.syncEngine),t}function C2(n,e,t={}){const a=new Ca;return n.asyncQueue.enqueueAndForget(async()=>function(c,d,m,y,g){const _=new eS({next:b=>{_.Nu(),d.enqueueAndForget(()=>Hw(c,E));const x=b.docs.has(m);!x&&b.fromCache?g.reject(new pe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&b.fromCache&&y&&y.source==="server"?g.reject(new pe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new Gw(Og(m.path),_,{includeMetadataChanges:!0,qa:!0});return Fw(c,E)}(await nS(n),n.asyncQueue,e,t,a)),a.promise}function j2(n,e,t={}){const a=new Ca;return n.asyncQueue.enqueueAndForget(async()=>function(c,d,m,y,g){const _=new eS({next:b=>{_.Nu(),d.enqueueAndForget(()=>Hw(c,E)),b.fromCache&&y.source==="server"?g.reject(new pe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new Gw(m,_,{includeMetadataChanges:!0,qa:!0});return Fw(c,E)}(await nS(n),n.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firestore.googleapis.com",ux=!0;class dx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aS,this.ssl=ux}else this.host=e.host,this.ssl=e.ssl??ux;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oR)throw new pe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rS(e.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,t,a,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Oj;switch(a.type){case"firstParty":return new Uj(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new pe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=cx.get(t);a&&(ge("ComponentProvider","Removing Datastore"),cx.delete(t),a.terminate())}(this),Promise.resolve()}}function D2(n,e,t,a={}){n=dr(n,Qh);const i=Mi(e),c=n._getSettings(),d={...c,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;i&&(mg(`https://${m}`),pg("Firestore",!0)),c.host!==aS&&c.host!==m&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:m,ssl:i,emulatorOptions:a};if(!Ci(y,d)&&(n._setSettings(y),a.mockUserToken)){let g,_;if(typeof a.mockUserToken=="string")g=a.mockUserToken,_=dn.MOCK_USER;else{g=Xx(a.mockUserToken,n._app?.options.projectId);const E=a.mockUserToken.sub||a.mockUserToken.user_id;if(!E)throw new pe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new dn(E)}n._authCredentials=new Mj(new FE(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Ct{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(ru(t,Ct._jsonSchema))return new Ct(e,a||null,new xe(ht.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Mt("string",Ct._jsonSchemaVersion),referencePath:Mt("string")};class Es extends Bi{constructor(e,t,a){super(e,t,Og(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new xe(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function _e(n,e,...t){if(n=Ht(n),HE("collection","path",e),n instanceof Qh){const a=ht.fromString(e,...t);return S0(a),new Es(n,null,a)}{if(!(n instanceof Ct||n instanceof Es))throw new pe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(ht.fromString(e,...t));return S0(a),new Es(n.firestore,null,a)}}function Ie(n,e,...t){if(n=Ht(n),arguments.length===1&&(e=jg.newId()),HE("doc","path",e),n instanceof Qh){const a=ht.fromString(e,...t);return w0(a),new Ct(n,null,new xe(a))}{if(!(n instanceof Ct||n instanceof Es))throw new pe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(ht.fromString(e,...t));return w0(a),new Ct(n.firestore,n instanceof Es?n.converter:null,new xe(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="AsyncQueue";class fx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ow(this,"async_queue_retry"),this._c=()=>{const a=Sp();a&&ge(hx,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ca;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;ge(hx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(a=>{throw this.nc=a,this.rc=!1,Ia("INTERNAL UNHANDLED ERROR: ",mx(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Yg.createAndSchedule(this,e,t,a,c=>this.hc(c));return this.tc.push(i),i}uc(){this.nc&&je(47125,{Pc:mx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class zi extends Qh{constructor(e,t,a,i){super(e,t,a,i),this.type="firestore",this._queue=new fx,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function R2(n,e){const t=typeof n=="object"?n:_g(),a=typeof n=="string"?n:hh,i=Rh(t,"firestore").getImmediate({identifier:a});if(!i._initialized){const c=Qx("firestore");c&&D2(i,...c)}return i}function ey(n){if(n._terminated)throw new pe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||I2(n),n._firestoreClient}function I2(n){const e=n._freezeSettings(),t=function(i,c,d,m){return new nD(i,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,rS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new A2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){const c=i?._online.build();return{_offline:i?._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(sn.fromBase64String(e))}catch(t){throw new pe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ru(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Mt("string",Xn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fr._jsonSchemaVersion}}static fromJSON(e){if(ru(e,Fr._jsonSchema))return new Fr(e.latitude,e.longitude)}}Fr._jsonSchemaVersion="firestore/geoPoint/1.0",Fr._jsonSchema={type:Mt("string",Fr._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,i){if(a.length!==i.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==i[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ru(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Hr(e.vectorValues);throw new pe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:Mt("string",Hr._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=/^__.*__$/;class k2{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new au(e,this.data,t,this.fieldTransforms)}}class sS{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:n})}}class ny{constructor(e,t,a,i,c,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=i,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ny({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iS(this.Ac)&&P2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class O2{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Hh(e)}Cc(e,t,a,i=!1){return new ny({Ac:e,methodName:t,Dc:a,path:an.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(n){const e=n._freezeSettings(),t=Hh(n._databaseId);return new O2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oS(n,e,t,a,i,c={}){const d=n.Cc(c.merge||c.mergeFields?2:0,e,t,i);ry("Data must be an object, but it was:",d,a);const m=lS(a,d);let y,g;if(c.merge)y=new Mn(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const _=[];for(const E of c.mergeFields){const b=sg(e,E,t);if(!d.contains(b))throw new pe(ne.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);uS(_,b)||_.push(b)}y=new Mn(_),g=d.fieldTransforms.filter(E=>y.covers(E.field))}else y=null,g=d.fieldTransforms;return new k2(new wn(m),y,g)}class Xh extends ty{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function M2(n,e,t,a){const i=n.Cc(1,e,t);ry("Data must be an object, but it was:",i,a);const c=[],d=wn.empty();ks(a,(y,g)=>{const _=ay(e,y,t);g=Ht(g);const E=i.yc(_);if(g instanceof Xh)c.push(_);else{const b=lu(g,E);b!=null&&(c.push(_),d.set(_,b))}});const m=new Mn(c);return new sS(d,m,i.fieldTransforms)}function L2(n,e,t,a,i,c){const d=n.Cc(1,e,t),m=[sg(e,a,t)],y=[i];if(c.length%2!=0)throw new pe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)m.push(sg(e,c[b])),y.push(c[b+1]);const g=[],_=wn.empty();for(let b=m.length-1;b>=0;--b)if(!uS(g,m[b])){const x=m[b];let C=y[b];C=Ht(C);const A=d.yc(x);if(C instanceof Xh)g.push(x);else{const U=lu(C,A);U!=null&&(g.push(x),_.set(x,U))}}const E=new Mn(g);return new sS(_,E,d.fieldTransforms)}function V2(n,e,t,a=!1){return lu(t,n.Cc(a?4:3,e))}function lu(n,e){if(cS(n=Ht(n)))return ry("Unsupported field value:",e,n),lS(n,e);if(n instanceof ty)return function(a,i){if(!iS(i.Ac))throw i.Sc(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(i);c&&i.fieldTransforms.push(c)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(a,i){const c=[];let d=0;for(const m of a){let y=lu(m,i.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}}(n,e)}return function(a,i){if((a=Ht(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return AD(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=ft.fromDate(a);return{timestampValue:yh(i.serializer,c)}}if(a instanceof ft){const c=new ft(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:yh(i.serializer,c)}}if(a instanceof Fr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Xn)return{bytesValue:Sw(i.serializer,a._byteString)};if(a instanceof Ct){const c=i.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw i.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:qg(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Hr)return function(d,m){return{mapValue:{fields:{[JE]:{stringValue:ew},[fh]:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Mg(m.serializer,g)})}}}}}}(a,i);throw i.Sc(`Unsupported field value: ${Oh(a)}`)}(n,e)}function lS(n,e){const t={};return QE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(n,(a,i)=>{const c=lu(i,e.mc(a));c!=null&&(t[a]=c)}),{mapValue:{fields:t}}}function cS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Fr||n instanceof Xn||n instanceof Ct||n instanceof ty||n instanceof Hr)}function ry(n,e,t){if(!cS(t)||!GE(t)){const a=Oh(t);throw a==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+a)}}function sg(n,e,t){if((e=Ht(e))instanceof Kh)return e._internalPath;if(typeof e=="string")return ay(n,e);throw xh("Field path arguments must be of type string or ",n,!1,void 0,t)}const U2=new RegExp("[~\\*/\\[\\]]");function ay(n,e,t){if(e.search(U2)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kh(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xh(n,e,t,a,i){const c=a&&!a.isEmpty(),d=i!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${a}`),d&&(y+=` in document ${i}`),y+=")"),new pe(ne.INVALID_ARGUMENT,m+n+y)}function uS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,t,a,i,c){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class q2 extends dS{data(){return super.data()}}function Wh(n,e){return typeof e=="string"?ay(n,e):e instanceof Kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sy{}class hS extends sy{}function Ee(n,e,...t){let a=[];e instanceof sy&&a.push(e),a=a.concat(t),function(c){const d=c.filter(y=>y instanceof iy).length,m=c.filter(y=>y instanceof Zh).length;if(d>1||d>0&&m>0)throw new pe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)n=i._apply(n);return n}class Zh extends hS{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Zh(e,t,a)}_apply(e){const t=this._parse(e);return fS(e._query,t),new Bi(e.firestore,e.converter,Kp(e._query,t))}_parse(e){const t=Yh(e.firestore);return function(c,d,m,y,g,_,E){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){gx(E,_);const C=[];for(const A of E)C.push(px(y,c,A));b={arrayValue:{values:C}}}else b=px(y,c,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||gx(E,_),b=V2(m,d,E,_==="in"||_==="not-in");return Ot.create(g,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Te(n,e,t){const a=e,i=Wh("where",n);return Zh._create(i,a,t)}class iy extends sy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iy(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:hr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,c){let d=i;const m=c.getFlattenedFilters();for(const y of m)fS(d,y),d=Kp(d,y)}(e._query,t),new Bi(e.firestore,e.converter,Kp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class oy extends hS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oy(e,t)}_apply(e){const t=function(i,c,d){if(i.startAt!==null)throw new pe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gc(c,d)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(i,c){const d=i.explicitOrderBy.concat([c]);return new ul(i.path,i.collectionGroup,d,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Me(n,e="asc"){const t=e,a=Wh("orderBy",n);return oy._create(a,t)}function px(n,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new pe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lw(e)&&t.indexOf("/")!==-1)throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(ht.fromString(t));if(!xe.isDocumentKey(a))throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return I0(n,new xe(a))}if(t instanceof Ct)return I0(n,t._key);throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oh(t)}.`)}function gx(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fS(n,e){const t=function(i,c){for(const d of i)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class z2{convertValue(e,t="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return ks(e,(i,c)=>{a[i]=this.convertValue(c,t)}),a}convertVectorValue(e){const t=e.fields?.[fh].arrayValue?.values?.map(a=>Tt(a.doubleValue));return new Hr(t)}convertGeoPoint(e){return new Fr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Vh(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(zc(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=ht.fromString(e);tt(Dw(a),9688,{name:e});const i=new Fc(a.get(1),a.get(3)),c=new xe(a.popFirst(5));return i.isEqual(t)||Ia(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ai extends dS{constructor(e,t,a,i,c,d){super(e,t,a,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Wh("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ai._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ai._jsonSchema={type:Mt("string",Ai._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class th extends Ai{data(e={}){return super.data(e)}}class Ko{constructor(e,t,a,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rc(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new th(this._firestore,this._userDataWriter,a.key,a,new Rc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,c){if(i._snapshot.oldDocs.isEmpty()){let d=0;return i._snapshot.docChanges.map(m=>{const y=new th(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Rc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new th(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Rc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,_=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:F2(m.type),doc:y,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],i=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){n=dr(n,Ct);const e=dr(n.firestore,zi);return C2(ey(e),n._key).then(t=>H2(e,n,t))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:Mt("string",Ko._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class pS extends z2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function Ae(n){n=dr(n,Bi);const e=dr(n.firestore,zi),t=ey(e),a=new pS(e);return B2(n._query),j2(t,n._query).then(i=>new Ko(e,a,n,i))}function ki(n,e,t){n=dr(n,Ct);const a=dr(n.firestore,zi),i=mS(n.converter,e,t);return Jh(a,[oS(Yh(a),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Wn.none())])}function er(n,e,t,...a){n=dr(n,Ct);const i=dr(n.firestore,zi),c=Yh(i);let d;return d=typeof(e=Ht(e))=="string"||e instanceof Kh?L2(c,"updateDoc",n._key,e,t,a):M2(c,"updateDoc",n._key,e),Jh(i,[d.toMutation(n._key,Wn.exists(!0))])}function tr(n){return Jh(dr(n.firestore,zi),[new Lg(n._key,Wn.none())])}function Zn(n,e){const t=dr(n.firestore,zi),a=Ie(n),i=mS(n.converter,e);return Jh(t,[oS(Yh(n.firestore),"addDoc",a._key,i,n.converter!==null,{}).toMutation(a._key,Wn.exists(!1))]).then(()=>a)}function Jh(n,e){return function(a,i){const c=new Ca;return a.asyncQueue.enqueueAndForget(async()=>g2(await T2(a),i,c)),c.promise}(ey(n),e)}function H2(n,e,t){const a=t.docs.get(e._key),i=new pS(n);return new Ai(n,i,e._key,a,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ol=i})(Li),ji(new Ss("firestore",(a,{instanceIdentifier:i,options:c})=>{const d=a.getProvider("app").getImmediate(),m=new zi(new Lj(a.getProvider("auth-internal")),new qj(d,a.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(g.options.projectId,_)}(d,i),d);return c={useFetchStreams:t,...c},m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Vr(_0,b0,e),Vr(_0,b0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="firebasestorage.googleapis.com",G2="storageBucket",$2=120*1e3,Q2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Qr{constructor(e,t,a=0){super(Np(e),`Firebase Storage: ${t} (${Np(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Np(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $r;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($r||($r={}));function Np(n){return"storage/"+n}function K2(){const n="An unknown error occurred, please check the error payload for server response.";return new Kr($r.UNKNOWN,n)}function Y2(){return new Kr($r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function X2(){return new Kr($r.CANCELED,"User canceled the upload/download.")}function W2(n){return new Kr($r.INVALID_URL,"Invalid URL '"+n+"'.")}function Z2(n){return new Kr($r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function yx(n){return new Kr($r.INVALID_ARGUMENT,n)}function yS(){return new Kr($r.APP_DELETED,"The Firebase app was deleted.")}function J2(n){return new Kr($r.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=cr.makeFromUrl(e,t)}catch{return new cr(e,"")}if(a.path==="")return a;throw Z2(e)}static makeFromUrl(e,t){let a=null;const i="([A-Za-z0-9.\\-_]+)";function c(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+i+d,"i"),y={bucket:1,path:3};function g(se){se.path_=decodeURIComponent(se.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",x=new RegExp(`^https?://${E}/${_}/b/${i}/o${b}`,"i"),C={bucket:1,path:3},A=t===gS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",D=new RegExp(`^https?://${A}/${i}/${U}`,"i"),q=[{regex:m,indices:y,postModify:c},{regex:x,indices:C,postModify:g},{regex:D,indices:{bucket:1,path:2},postModify:g}];for(let se=0;se<q.length;se++){const G=q[se],he=G.regex.exec(e);if(he){const O=he[G.indices.bucket];let T=he[G.indices.path];T||(T=""),a=new cr(O,T),G.postModify(a);break}}if(a==null)throw W2(e);return a}}class eI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n,e,t){let a=1,i=null,c=null,d=!1,m=0;function y(){return m===2}let g=!1;function _(...U){g||(g=!0,e.apply(null,U))}function E(U){i=setTimeout(()=>{i=null,n(x,y())},U)}function b(){c&&clearTimeout(c)}function x(U,...D){if(g){b();return}if(U){b(),_.call(null,U,...D);return}if(y()||d){b(),_.call(null,U,...D);return}a<64&&(a*=2);let q;m===1?(m=2,q=0):q=(a+Math.random())*1e3,E(q)}let C=!1;function A(U){C||(C=!0,b(),!g&&(i!==null?(U||(m=2),clearTimeout(i),E(0)):U||(m=1)))}return E(0),c=setTimeout(()=>{d=!0,A(!0)},t),A}function nI(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){return n!==void 0}function vx(n,e,t,a){if(a<e)throw yx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(a>t)throw yx(`Invalid value for '${n}'. Expected ${t} or less.`)}function aI(n){const e=encodeURIComponent;let t="?";for(const a in n)if(n.hasOwnProperty(a)){const i=e(a)+"="+e(n[a]);t=t+i+"&"}return t=t.slice(0,-1),t}var Eh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Eh||(Eh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,c=e.indexOf(n)!==-1;return t||i||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,a,i,c,d,m,y,g,_,E,b=!0,x=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=E,this.retry=b,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,A)=>{this.resolve_=C,this.reject_=A,this.start_()})}start_(){const e=(a,i)=>{if(i){a(!1,new Hd(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const y=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,g)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Eh.NO_ERROR,y=c.getStatus();if(!m||sI(y,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===Eh.ABORT;a(!1,new Hd(!1,null,_));return}const g=this.successCodes_.indexOf(y)!==-1;a(!0,new Hd(g,c))})},t=(a,i)=>{const c=this.resolve_,d=this.reject_,m=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());rI(y)?c(y):c()}catch(y){d(y)}else if(m!==null){const y=K2();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(i.canceled){const y=this.appDelete_?yS():X2();d(y)}else{const y=Y2();d(y)}};this.canceled_?t(!1,new Hd(!1,null,!0)):this.backoffId_=tI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hd{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function oI(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function lI(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cI(n,e){e&&(n["X-Firebase-GMPID"]=e)}function uI(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function dI(n,e,t,a,i,c,d=!0,m=!1){const y=aI(n.urlParams),g=n.url+y,_=Object.assign({},n.headers);return cI(_,e),oI(_,t),lI(_,c),uI(_,a),new iI(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function fI(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t){this._service=e,t instanceof cr?this._location=t:this._location=cr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wh(e,t)}get root(){const e=new cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fI(this._location.path)}get storage(){return this._service}get parent(){const e=hI(this._location.path);if(e===null)return null;const t=new cr(this._location.bucket,e);return new wh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw J2(e)}}function _x(n,e){const t=e?.[G2];return t==null?null:cr.makeFromBucketSpec(t,n)}function mI(n,e,t,a={}){n.host=`${e}:${t}`;const i=Mi(e);i&&(mg(`https://${n.host}/b`),pg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:c}=a;c&&(n._overrideAuthToken=typeof c=="string"?c:Xx(c,n.app.options.projectId))}class pI{constructor(e,t,a,i,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=i,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=gS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$2,this._maxUploadRetryTime=Q2,this._requests=new Set,i!=null?this._bucket=cr.makeFromBucketSpec(i,this._host):this._bucket=_x(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cr.makeFromBucketSpec(this._url,e):this._bucket=_x(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wh(this,e)}_makeRequest(e,t,a,i,c=!0){if(this._deleted)return new eI(yS());{const d=dI(e,this._appId,a,i,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,i).getPromise()}}const bx="@firebase/storage",xx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="storage";function gI(n=_g(),e){n=Ht(n);const a=Rh(n,vS).getImmediate({identifier:e}),i=Qx("storage");return i&&yI(a,...i),a}function yI(n,e,t,a={}){mI(n,e,t,a)}function vI(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),a=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new pI(t,a,i,e,Li)}function _I(){ji(new Ss(vS,vI,"PUBLIC").setMultipleInstances(!0)),Vr(bx,xx,""),Vr(bx,xx,"esm2020")}_I();const bI={apiKey:"AIzaSyDp1wZPZpR82WfGEY7u94RBijlprtfl33Q",authDomain:"dentist-b178b.firebaseapp.com",projectId:"dentist-b178b",storageBucket:"dentist-b178b.firebasestorage.app",messagingSenderId:"289207314447",appId:"1:289207314447:web:780ce9797588d1bf971b7a"},ef=vg(bI),Tp=OE(ef),ie=R2(ef);gI(ef);const zo={async logOut(){try{await l0(Tp)}catch(n){throw new Error("Failed to log out"+n)}},async login(n){try{const t=(await bC(Tp,n.email,n.password)).user,a=await vn(Ie(ie,"users",t.uid));let i;if(!a.exists())i={uid:t.uid,email:t.email??"",role:"admin",allowedPaths:["admin"]},await ki(Ie(ie,"users",t.uid),i);else{const c=a.data();i={uid:t.uid,email:c.email??t.email??"",role:c.role??"partial",allowedPaths:Array.isArray(c.allowedPaths)?c.allowedPaths:[]}}return i}catch(e){if(console.error("Login error:",e),e.code)switch(e.code){case"auth/user-not-found":throw new Error("No user found with this email address");case"auth/wrong-password":throw new Error("Incorrect password");case"auth/invalid-email":throw new Error("Invalid email address");case"auth/user-disabled":throw new Error("This user account has been disabled");case"auth/too-many-requests":throw new Error("Too many failed attempts. Please try again later");case"auth/network-request-failed":throw new Error("Network error. Please check your connection");default:throw new Error(`Authentication failed: ${e.message}`)}throw new Error(`Login failed: ${e.message||e}`)}},async register(n){const e=`secondary-${Date.now()}`,t=vg(ef.options,e),a=OE(t);try{const c=(await _C(a,n.email,n.password)).user,d={uid:c.uid,email:c.email??n.email,displayName:n.displayName,role:n.role,allowedPaths:n.allowedPaths||[]};return await ki(Ie(ie,"users",c.uid),d),d}catch(i){throw new Error("Failed to register: "+(i instanceof Error?i.message:String(i)))}finally{await l0(a).catch(()=>{}),await c1(t).catch(()=>{})}},observeAuthState(n){try{return wC(Tp,async e=>{if(e)try{const t=await vn(Ie(ie,"users",e.uid));if(t.exists()){const a=t.data();n(a)}else n(null)}catch(t){console.error("Erro ao buscar dados do usurio:",t),n(null)}else n(null)})}catch(e){throw new Error("Erro ao observar estado de autenticao: "+e)}}},_S=M.createContext(void 0);function xI({children:n}){const[e,t]=M.useState(null),[a,i]=M.useState(!0),[c,d]=M.useState(null);M.useEffect(()=>{const x=zo.observeAuthState(C=>{t(C),i(!1)});return()=>x()},[]);const b={user:e,loading:a,error:c,login:async x=>{try{i(!0),d(null);const C=await zo.login(x);t(C),i(!1)}catch(C){d(C instanceof Error?C.message:"An error occurred"),i(!1)}},register:async x=>{try{d(null),i(!0);const C=await zo.register(x);t(C),i(!1)}catch(C){d(C instanceof Error?C.message:"An error occurred"),i(!1)}},registerForAdmin:async x=>{try{i(!0),d(null);const C=await zo.register(x);return i(!1),C}catch(C){throw d(C instanceof Error?C.message:"An error occurred"),i(!1),C}},logout:async()=>{try{await zo.logOut(),t(null)}catch(x){d(x instanceof Error?x.message:"An error occurred")}},clearError:()=>{d(null)}};return l.jsx(_S.Provider,{value:b,children:n})}/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ex="popstate";function EI(n={}){function e(a,i){let{pathname:c,search:d,hash:m}=a.location;return ig("",{pathname:c,search:d,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(a,i){return typeof i=="string"?i:Kc(i)}return SI(e,t,null,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wI(){return Math.random().toString(36).substring(2,10)}function wx(n,e){return{usr:n.state,key:n.key,idx:e}}function ig(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?hl(e):e,state:t,key:e&&e.key||a||wI()}}function Kc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function hl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function SI(n,e,t,a={}){let{window:i=document.defaultView,v5Compat:c=!1}=a,d=i.history,m="POP",y=null,g=_();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function _(){return(d.state||{idx:null}).idx}function E(){m="POP";let U=_(),D=U==null?null:U-g;g=U,y&&y({action:m,location:A.location,delta:D})}function b(U,D){m="PUSH";let W=ig(A.location,U,D);g=_()+1;let q=wx(W,g),se=A.createHref(W);try{d.pushState(q,"",se)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(se)}c&&y&&y({action:m,location:A.location,delta:1})}function x(U,D){m="REPLACE";let W=ig(A.location,U,D);g=_();let q=wx(W,g),se=A.createHref(W);d.replaceState(q,"",se),c&&y&&y({action:m,location:A.location,delta:0})}function C(U){return AI(U)}let A={get action(){return m},get location(){return n(i,d)},listen(U){if(y)throw new Error("A history only accepts one active listener");return i.addEventListener(Ex,E),y=U,()=>{i.removeEventListener(Ex,E),y=null}},createHref(U){return e(i,U)},createURL:C,encodeLocation(U){let D=C(U);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:b,replace:x,go(U){return d.go(U)}};return A}function AI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Kc(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function bS(n,e,t="/"){return NI(n,e,t,!1)}function NI(n,e,t,a){let i=typeof e=="string"?hl(e):e,c=ka(i.pathname||"/",t);if(c==null)return null;let d=xS(n);TI(d);let m=null;for(let y=0;m==null&&y<d.length;++y){let g=VI(c);m=MI(d[y],g,a)}return m}function xS(n,e=[],t=[],a=""){let i=(c,d,m)=>{let y={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};y.relativePath.startsWith("/")&&(vt(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length));let g=ja([a,y.relativePath]),_=t.concat(y);c.children&&c.children.length>0&&(vt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),xS(c.children,e,_,g)),!(c.path==null&&!c.index)&&e.push({path:g,score:kI(g,c.index),routesMeta:_})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))i(c,d);else for(let m of ES(c.path))i(c,d,m)}),e}function ES(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,i=t.endsWith("?"),c=t.replace(/\?$/,"");if(a.length===0)return i?[c,""]:[c];let d=ES(a.join("/")),m=[];return m.push(...d.map(y=>y===""?c:[c,y].join("/"))),i&&m.push(...d),m.map(y=>n.startsWith("/")&&y===""?"/":y)}function TI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:OI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var CI=/^:[\w-]+$/,jI=3,DI=2,RI=1,II=10,PI=-2,Sx=n=>n==="*";function kI(n,e){let t=n.split("/"),a=t.length;return t.some(Sx)&&(a+=PI),e&&(a+=DI),t.filter(i=>!Sx(i)).reduce((i,c)=>i+(CI.test(c)?jI:c===""?RI:II),a)}function OI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,i)=>a===e[i])?n[n.length-1]-e[e.length-1]:0}function MI(n,e,t=!1){let{routesMeta:a}=n,i={},c="/",d=[];for(let m=0;m<a.length;++m){let y=a[m],g=m===a.length-1,_=c==="/"?e:e.slice(c.length)||"/",E=Sh({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},_),b=y.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=Sh({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},_)),!E)return null;Object.assign(i,E.params),d.push({params:i,pathname:ja([c,E.pathname]),pathnameBase:zI(ja([c,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(c=ja([c,E.pathnameBase]))}return d}function Sh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=LI(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let c=i[0],d=c.replace(/(.)\/+$/,"$1"),m=i.slice(1);return{params:a.reduce((g,{paramName:_,isOptional:E},b)=>{if(_==="*"){let C=m[b]||"";d=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const x=m[b];return E&&!x?g[_]=void 0:g[_]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:n}}function LI(n,e=!1,t=!0){Jn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,y)=>(a.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(a.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function VI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ka(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function UI(n,e="/"){let{pathname:t,search:a="",hash:i=""}=typeof n=="string"?hl(n):n;return{pathname:t?t.startsWith("/")?t:qI(t,e):e,search:FI(a),hash:HI(i)}}function qI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Cp(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ly(n){let e=BI(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function cy(n,e,t,a=!1){let i;typeof n=="string"?i=hl(n):(i={...n},vt(!i.pathname||!i.pathname.includes("?"),Cp("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),Cp("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),Cp("#","search","hash",i)));let c=n===""||i.pathname==="",d=c?"/":i.pathname,m;if(d==null)m=t;else{let E=e.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),E-=1;i.pathname=b.join("/")}m=E>=0?e[E]:"/"}let y=UI(i,m),g=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(g||_)&&(y.pathname+="/"),y}var ja=n=>n.join("/").replace(/\/\/+/g,"/"),zI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function GI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var wS=["POST","PUT","PATCH","DELETE"];new Set(wS);var $I=["GET",...wS];new Set($I);var fl=M.createContext(null);fl.displayName="DataRouter";var tf=M.createContext(null);tf.displayName="DataRouterState";M.createContext(!1);var SS=M.createContext({isTransitioning:!1});SS.displayName="ViewTransition";var QI=M.createContext(new Map);QI.displayName="Fetchers";var KI=M.createContext(null);KI.displayName="Await";var pr=M.createContext(null);pr.displayName="Navigation";var cu=M.createContext(null);cu.displayName="Location";var gr=M.createContext({outlet:null,matches:[],isDataRoute:!1});gr.displayName="Route";var uy=M.createContext(null);uy.displayName="RouteError";function YI(n,{relative:e}={}){vt(ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=M.useContext(pr),{hash:i,pathname:c,search:d}=uu(n,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:ja([t,c])),a.createHref({pathname:m,search:d,hash:i})}function ml(){return M.useContext(cu)!=null}function Yr(){return vt(ml(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(cu).location}var AS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NS(n){M.useContext(pr).static||M.useLayoutEffect(n)}function yr(){let{isDataRoute:n}=M.useContext(gr);return n?uP():XI()}function XI(){vt(ml(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(fl),{basename:e,navigator:t}=M.useContext(pr),{matches:a}=M.useContext(gr),{pathname:i}=Yr(),c=JSON.stringify(ly(a)),d=M.useRef(!1);return NS(()=>{d.current=!0}),M.useCallback((y,g={})=>{if(Jn(d.current,AS),!d.current)return;if(typeof y=="number"){t.go(y);return}let _=cy(y,JSON.parse(c),i,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ja([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,c,i,n])}var WI=M.createContext(null);function ZI(n){let e=M.useContext(gr).outlet;return e&&M.createElement(WI.Provider,{value:n},e)}function uu(n,{relative:e}={}){let{matches:t}=M.useContext(gr),{pathname:a}=Yr(),i=JSON.stringify(ly(t));return M.useMemo(()=>cy(n,JSON.parse(i),a,e==="path"),[n,i,a,e])}function JI(n,e){return TS(n,e)}function TS(n,e,t,a){vt(ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(pr),{matches:c}=M.useContext(gr),d=c[c.length-1],m=d?d.params:{},y=d?d.pathname:"/",g=d?d.pathnameBase:"/",_=d&&d.route;{let D=_&&_.path||"";CS(y,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let E=Yr(),b;if(e){let D=typeof e=="string"?hl(e):e;vt(g==="/"||D.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${D.pathname}" was given in the \`location\` prop.`),b=D}else b=E;let x=b.pathname||"/",C=x;if(g!=="/"){let D=g.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=bS(n,{pathname:C});Jn(_||A!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Jn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=aP(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},m,D.params),pathname:ja([g,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:ja([g,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),c,t,a);return e&&U?M.createElement(cu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},U):U}function eP(){let n=cP(),e=GI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:c},"ErrorBoundary")," or"," ",M.createElement("code",{style:c},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:i},t):null,d)}var tP=M.createElement(eP,null),nP=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?M.createElement(gr.Provider,{value:this.props.routeContext},M.createElement(uy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rP({routeContext:n,match:e,children:t}){let a=M.useContext(fl);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(gr.Provider,{value:n},t)}function aP(n,e=[],t=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,c=t?.errors;if(c!=null){let y=i.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);vt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),i=i.slice(0,Math.min(i.length,y+1))}let d=!1,m=-1;if(t)for(let y=0;y<i.length;y++){let g=i[y];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=y),g.route.id){let{loaderData:_,errors:E}=t,b=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||b){d=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((y,g,_)=>{let E,b=!1,x=null,C=null;t&&(E=c&&g.route.id?c[g.route.id]:void 0,x=g.route.errorElement||tP,d&&(m<0&&_===0?(CS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):m===_&&(b=!0,C=g.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,_+1)),U=()=>{let D;return E?D=x:b?D=C:g.route.Component?D=M.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=y,M.createElement(rP,{match:g,routeContext:{outlet:y,matches:A,isDataRoute:t!=null},children:D})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?M.createElement(nP,{location:t.location,revalidation:t.revalidation,component:x,error:E,children:U(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):U()},null)}function dy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sP(n){let e=M.useContext(fl);return vt(e,dy(n)),e}function iP(n){let e=M.useContext(tf);return vt(e,dy(n)),e}function oP(n){let e=M.useContext(gr);return vt(e,dy(n)),e}function hy(n){let e=oP(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lP(){return hy("useRouteId")}function cP(){let n=M.useContext(uy),e=iP("useRouteError"),t=hy("useRouteError");return n!==void 0?n:e.errors?.[t]}function uP(){let{router:n}=sP("useNavigate"),e=hy("useNavigate"),t=M.useRef(!1);return NS(()=>{t.current=!0}),M.useCallback(async(i,c={})=>{Jn(t.current,AS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...c}))},[n,e])}var Ax={};function CS(n,e,t){!e&&!Ax[n]&&(Ax[n]=!0,Jn(!1,t))}M.memo(dP);function dP({routes:n,future:e,state:t}){return TS(n,void 0,t,e)}function Nx({to:n,replace:e,state:t,relative:a}){vt(ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext(pr);Jn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=M.useContext(gr),{pathname:d}=Yr(),m=yr(),y=cy(n,ly(c),d,a==="path"),g=JSON.stringify(y);return M.useEffect(()=>{m(JSON.parse(g),{replace:e,state:t,relative:a})},[m,g,a,e,t]),null}function hP(n){return ZI(n.context)}function Je(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fP({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:i,static:c=!1}){vt(!ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=M.useMemo(()=>({basename:d,navigator:i,static:c,future:{}}),[d,i,c]);typeof t=="string"&&(t=hl(t));let{pathname:y="/",search:g="",hash:_="",state:E=null,key:b="default"}=t,x=M.useMemo(()=>{let C=ka(y,d);return C==null?null:{location:{pathname:C,search:g,hash:_,state:E,key:b},navigationType:a}},[d,y,g,_,E,b,a]);return Jn(x!=null,`<Router basename="${d}"> is not able to match the URL "${y}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:M.createElement(pr.Provider,{value:m},M.createElement(cu.Provider,{children:e,value:x}))}function jS({children:n,location:e}){return JI(og(n),e)}function og(n,e=[]){let t=[];return M.Children.forEach(n,(a,i)=>{if(!M.isValidElement(a))return;let c=[...e,i];if(a.type===M.Fragment){t.push.apply(t,og(a.props.children,c));return}vt(a.type===Je,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=og(a.props.children,c)),t.push(d)}),t}var nh="get",rh="application/x-www-form-urlencoded";function nf(n){return n!=null&&typeof n.tagName=="string"}function mP(n){return nf(n)&&n.tagName.toLowerCase()==="button"}function pP(n){return nf(n)&&n.tagName.toLowerCase()==="form"}function gP(n){return nf(n)&&n.tagName.toLowerCase()==="input"}function yP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vP(n,e){return n.button===0&&(!e||e==="_self")&&!yP(n)}function lg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(i=>[t,i]):[[t,a]])},[]))}function _P(n,e){let t=lg(n);return e&&e.forEach((a,i)=>{t.has(i)||e.getAll(i).forEach(c=>{t.append(i,c)})}),t}var Gd=null;function bP(){if(Gd===null)try{new FormData(document.createElement("form"),0),Gd=!1}catch{Gd=!0}return Gd}var xP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jp(n){return n!=null&&!xP.has(n)?(Jn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rh}"`),null):n}function EP(n,e){let t,a,i,c,d;if(pP(n)){let m=n.getAttribute("action");a=m?ka(m,e):null,t=n.getAttribute("method")||nh,i=jp(n.getAttribute("enctype"))||rh,c=new FormData(n)}else if(mP(n)||gP(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||m.getAttribute("action");if(a=y?ka(y,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||nh,i=jp(n.getAttribute("formenctype"))||jp(m.getAttribute("enctype"))||rh,c=new FormData(m,n),!bP()){let{name:g,type:_,value:E}=n;if(_==="image"){let b=g?`${g}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else g&&c.append(g,E)}}else{if(nf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nh,a=null,i=rh,d=n}return c&&i==="text/plain"&&(d=c,c=void 0),{action:a,method:t.toLowerCase(),encType:i,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wP(n,e,t){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&ka(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function SP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function NP(n,e,t){let a=await Promise.all(n.map(async i=>{let c=e.routes[i.route.id];if(c){let d=await SP(c,t);return d.links?d.links():[]}return[]}));return DP(a.flat(1).filter(AP).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Tx(n,e,t,a,i,c){let d=(y,g)=>t[g]?y.route.id!==t[g].route.id:!0,m=(y,g)=>t[g].pathname!==y.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==y.params["*"];return c==="assets"?e.filter((y,g)=>d(y,g)||m(y,g)):c==="data"?e.filter((y,g)=>{let _=a.routes[y.route.id];if(!_||!_.hasLoader)return!1;if(d(y,g)||m(y,g))return!0;if(y.route.shouldRevalidate){let E=y.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function TP(n,e,{includeHydrateFallback:t}={}){return CP(n.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function CP(n){return[...new Set(n)]}function jP(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function DP(n,e){let t=new Set;return new Set(e),n.reduce((a,i)=>{let c=JSON.stringify(jP(i));return t.has(c)||(t.add(c),a.push({key:c,link:i})),a},[])}function DS(){let n=M.useContext(fl);return fy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function RP(){let n=M.useContext(tf);return fy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var my=M.createContext(void 0);my.displayName="FrameworkContext";function RS(){let n=M.useContext(my);return fy(n,"You must render this element inside a <HydratedRouter> element"),n}function IP(n,e){let t=M.useContext(my),[a,i]=M.useState(!1),[c,d]=M.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:g,onMouseLeave:_,onTouchStart:E}=e,b=M.useRef(null);M.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let A=D=>{D.forEach(W=>{d(W.isIntersecting)})},U=new IntersectionObserver(A,{threshold:.5});return b.current&&U.observe(b.current),()=>{U.disconnect()}}},[n]),M.useEffect(()=>{if(a){let A=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(A)}}},[a]);let x=()=>{i(!0)},C=()=>{i(!1),d(!1)};return t?n!=="intent"?[c,b,{}]:[c,b,{onFocus:Ac(m,x),onBlur:Ac(y,C),onMouseEnter:Ac(g,x),onMouseLeave:Ac(_,C),onTouchStart:Ac(E,x)}]:[!1,b,{}]}function Ac(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function PP({page:n,...e}){let{router:t}=DS(),a=M.useMemo(()=>bS(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?M.createElement(OP,{page:n,matches:a,...e}):null}function kP(n){let{manifest:e,routeModules:t}=RS(),[a,i]=M.useState([]);return M.useEffect(()=>{let c=!1;return NP(n,e,t).then(d=>{c||i(d)}),()=>{c=!0}},[n,e,t]),a}function OP({page:n,matches:e,...t}){let a=Yr(),{manifest:i,routeModules:c}=RS(),{basename:d}=DS(),{loaderData:m,matches:y}=RP(),g=M.useMemo(()=>Tx(n,e,y,i,a,"data"),[n,e,y,i,a]),_=M.useMemo(()=>Tx(n,e,y,i,a,"assets"),[n,e,y,i,a]),E=M.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let C=new Set,A=!1;if(e.forEach(D=>{let W=i.routes[D.route.id];!W||!W.hasLoader||(!g.some(q=>q.route.id===D.route.id)&&D.route.id in m&&c[D.route.id]?.shouldRevalidate||W.hasClientLoader?A=!0:C.add(D.route.id))}),C.size===0)return[];let U=wP(n,d,"data");return A&&C.size>0&&U.searchParams.set("_routes",e.filter(D=>C.has(D.route.id)).map(D=>D.route.id).join(",")),[U.pathname+U.search]},[d,m,a,i,g,e,n,c]),b=M.useMemo(()=>TP(_,i),[_,i]),x=kP(_);return M.createElement(M.Fragment,null,E.map(C=>M.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),b.map(C=>M.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),x.map(({key:C,link:A})=>M.createElement("link",{key:C,nonce:t.nonce,...A})))}function MP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IS&&(window.__reactRouterVersion="7.8.0")}catch{}function LP({basename:n,children:e,window:t}){let a=M.useRef();a.current==null&&(a.current=EI({window:t,v5Compat:!0}));let i=a.current,[c,d]=M.useState({action:i.action,location:i.location}),m=M.useCallback(y=>{M.startTransition(()=>d(y))},[d]);return M.useLayoutEffect(()=>i.listen(m),[i,m]),M.createElement(fP,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:i})}var PS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kS=M.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:i,reloadDocument:c,replace:d,state:m,target:y,to:g,preventScrollReset:_,viewTransition:E,...b},x){let{basename:C}=M.useContext(pr),A=typeof g=="string"&&PS.test(g),U,D=!1;if(typeof g=="string"&&A&&(U=g,IS))try{let I=new URL(window.location.href),L=g.startsWith("//")?new URL(I.protocol+g):new URL(g),N=ka(L.pathname,C);L.origin===I.origin&&N!=null?g=N+L.search+L.hash:D=!0}catch{Jn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=YI(g,{relative:i}),[q,se,G]=IP(a,b),he=qP(g,{replace:d,state:m,target:y,preventScrollReset:_,relative:i,viewTransition:E});function O(I){e&&e(I),I.defaultPrevented||he(I)}let T=M.createElement("a",{...b,...G,href:U||W,onClick:D||c?e:O,ref:MP(x,se),target:y,"data-discover":!A&&t==="render"?"true":void 0});return q&&!A?M.createElement(M.Fragment,null,T,M.createElement(PP,{page:W})):T});kS.displayName="Link";var OS=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:i=!1,style:c,to:d,viewTransition:m,children:y,...g},_){let E=uu(d,{relative:g.relative}),b=Yr(),x=M.useContext(tf),{navigator:C,basename:A}=M.useContext(pr),U=x!=null&&GP(E)&&m===!0,D=C.encodeLocation?C.encodeLocation(E).pathname:E.pathname,W=b.pathname,q=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(W=W.toLowerCase(),q=q?q.toLowerCase():null,D=D.toLowerCase()),q&&A&&(q=ka(q,A)||q);const se=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let G=W===D||!i&&W.startsWith(D)&&W.charAt(se)==="/",he=q!=null&&(q===D||!i&&q.startsWith(D)&&q.charAt(D.length)==="/"),O={isActive:G,isPending:he,isTransitioning:U},T=G?e:void 0,I;typeof a=="function"?I=a(O):I=[a,G?"active":null,he?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(O):c;return M.createElement(kS,{...g,"aria-current":T,className:I,ref:_,style:L,to:d,viewTransition:m},typeof y=="function"?y(O):y)});OS.displayName="NavLink";var VP=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:i,state:c,method:d=nh,action:m,onSubmit:y,relative:g,preventScrollReset:_,viewTransition:E,...b},x)=>{let C=FP(),A=HP(m,{relative:g}),U=d.toLowerCase()==="get"?"get":"post",D=typeof m=="string"&&PS.test(m),W=q=>{if(y&&y(q),q.defaultPrevented)return;q.preventDefault();let se=q.nativeEvent.submitter,G=se?.getAttribute("formmethod")||d;C(se||q.currentTarget,{fetcherKey:e,method:G,navigate:t,replace:i,state:c,relative:g,preventScrollReset:_,viewTransition:E})};return M.createElement("form",{ref:x,method:U,action:A,onSubmit:a?y:W,...b,"data-discover":!D&&n==="render"?"true":void 0})});VP.displayName="Form";function UP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MS(n){let e=M.useContext(fl);return vt(e,UP(n)),e}function qP(n,{target:e,replace:t,state:a,preventScrollReset:i,relative:c,viewTransition:d}={}){let m=yr(),y=Yr(),g=uu(n,{relative:c});return M.useCallback(_=>{if(vP(_,e)){_.preventDefault();let E=t!==void 0?t:Kc(y)===Kc(g);m(n,{replace:E,state:a,preventScrollReset:i,relative:c,viewTransition:d})}},[y,m,g,t,a,e,n,i,c,d])}function py(n){Jn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(lg(n)),t=M.useRef(!1),a=Yr(),i=M.useMemo(()=>_P(a.search,t.current?null:e.current),[a.search]),c=yr(),d=M.useCallback((m,y)=>{const g=lg(typeof m=="function"?m(new URLSearchParams(i)):m);t.current=!0,c("?"+g,y)},[c,i]);return[i,d]}var BP=0,zP=()=>`__${String(++BP)}__`;function FP(){let{router:n}=MS("useSubmit"),{basename:e}=M.useContext(pr),t=lP();return M.useCallback(async(a,i={})=>{let{action:c,method:d,encType:m,formData:y,body:g}=EP(a,e);if(i.navigate===!1){let _=i.fetcherKey||zP();await n.fetch(_,t,i.action||c,{preventScrollReset:i.preventScrollReset,formData:y,body:g,formMethod:i.method||d,formEncType:i.encType||m,flushSync:i.flushSync})}else await n.navigate(i.action||c,{preventScrollReset:i.preventScrollReset,formData:y,body:g,formMethod:i.method||d,formEncType:i.encType||m,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function HP(n,{relative:e}={}){let{basename:t}=M.useContext(pr),a=M.useContext(gr);vt(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),c={...uu(n||".",{relative:e})},d=Yr();if(n==null){c.search=d.search;let m=new URLSearchParams(c.search),y=m.getAll("index");if(y.some(_=>_==="")){m.delete("index"),y.filter(E=>E).forEach(E=>m.append("index",E));let _=m.toString();c.search=_?`?${_}`:""}}return(!n||n===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:ja([t,c.pathname])),Kc(c)}function GP(n,{relative:e}={}){let t=M.useContext(SS);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=MS("useViewTransitionState"),i=uu(n,{relative:e});if(!t.isTransitioning)return!1;let c=ka(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=ka(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Sh(i.pathname,d)!=null||Sh(i.pathname,c)!=null}const Dp={home:"/",login:"/login",register:"/register"};function gy(){const n=M.useContext(_S);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function $P(n,e){return e?n?n.role==="admin"?!0:!!n.allowedPaths?.includes(e):!1:!0}const QP=({children:n,required:e})=>{const{user:t,loading:a}=gy();return a?l.jsx("div",{className:"auth-loading-container",children:l.jsxs("div",{className:"auth-loading-content",children:[l.jsx("div",{className:"auth-loading-spinner"}),l.jsx("p",{className:"auth-loading-text",children:"Loading..."})]})}):t?$P(t,e)?n:l.jsx(Nx,{to:"/",replace:!0}):l.jsx(Nx,{to:"/login",replace:!0})};function LS(){const n=yr();return{goTo:i=>{n(i)},goBack:()=>{n(-1)},replace:i=>{n(i,{replace:!0})}}}const mt=({children:n,type:e="button",variant:t="primary",size:a="medium",disabled:i=!1,loading:c=!1,onClick:d,className:m=""})=>{const y=["button",t,a,m].filter(Boolean).join(" ");return l.jsxs("button",{type:e,disabled:i||c,onClick:d,className:y,children:[c&&l.jsx("div",{className:"loading-spinner"}),n]})},le=({label:n,type:e="text",value:t,onChange:a,placeholder:i,required:c=!1,error:d,disabled:m=!1,className:y="",min:g,max:_})=>{const E=["input-field",d?"error":"",y].filter(Boolean).join(" ");return l.jsxs("div",{className:"input-group",children:[l.jsxs("label",{className:"input-label",children:[n,c&&l.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),l.jsx("input",{type:e,value:t,onChange:b=>a(b.target.value),placeholder:i,disabled:m,className:E,required:c,min:g,max:_}),d&&l.jsx("div",{className:"input-error",children:d})]})},KP=({onLogin:n})=>{const[e,t]=M.useState(""),[a,i]=M.useState(""),[c,d]=M.useState(!1),[m,y]=M.useState({}),g=()=>{const E={};return e.trim()?/\S+@\S+\.\S+/.test(e)||(E.email="Please enter a valid email"):E.email="Email is required",a.trim()?a.length<6&&(E.password="Password must be at least 6 characters"):E.password="Password is required",y(E),Object.keys(E).length===0},_=async E=>{if(E.preventDefault(),!!g()){d(!0);try{await n(e,a)}catch(b){console.error("Login failed:",b)}finally{d(!1)}}};return l.jsxs("form",{onSubmit:_,className:"login-form",children:[l.jsx(le,{label:"Email",type:"text",value:e,onChange:t,placeholder:"Enter your email",required:!0,error:m.email,disabled:c}),l.jsx(le,{label:"Password",type:"password",value:a,onChange:i,placeholder:"Enter your password",required:!0,error:m.password,disabled:c}),l.jsx(mt,{type:"submit",variant:"primary",size:"full",loading:c,disabled:c,children:c?"Signing In...":"Login"})]})},Rp=()=>{const{login:n}=gy(),{goTo:e}=LS(),t=async(a,i)=>{await n({email:a,password:i}),e("/admin")};return l.jsx("div",{className:"login-container",children:l.jsx("div",{className:"login-card",children:l.jsxs("div",{className:"login-header",children:[l.jsxs("div",{className:"company-logo",children:["LUNDER",l.jsx("br",{}),"UNDERGROUND SERVICES",l.jsx("br",{}),"CORP"]}),l.jsx("div",{className:"company-subtitle",children:"Engineering Excellence Underground"}),l.jsx(KP,{onLogin:t}),l.jsx("div",{className:"login-footer",children:l.jsx("a",{href:"#",className:"forgot-password",children:"Forgot password?"})})]})})})};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XP=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),Cx=n=>{const e=XP(n);return e.charAt(0).toUpperCase()+e.slice(1)},VS=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),WP=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:i="",children:c,iconNode:d,...m},y)=>M.createElement("svg",{ref:y,...ZP,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:VS("lucide",i),...!c&&!WP(m)&&{"aria-hidden":"true"},...m},[...d.map(([g,_])=>M.createElement(g,_)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(n,e)=>{const t=M.forwardRef(({className:a,...i},c)=>M.createElement(JP,{ref:c,iconNode:e,className:VS(`lucide-${YP(Cx(n))}`,`lucide-${n}`,a),...i}));return t.displayName=Cx(n),t};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],tk=ze("arrow-down",ek);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],rk=ze("arrow-up",nk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cg=ze("bell",ak);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],ik=ze("book",sk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Yc=ze("calendar",ok);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],nl=ze("car",lk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],US=ze("chart-column",ck);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ug=ze("circle-alert",uk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fr=ze("circle-check-big",dk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rl=ze("circle-x",hk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],mk=ze("clipboard-list",fk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],du=ze("clock",pk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Rs=ze("credit-card",gk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Fi=ze("dollar-sign",yk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_k=ze("download",vk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qS=ze("eye",bk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vs=ze("file-text",xk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],wk=ze("files",Ek);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Ak=ze("gauge",Sk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],Tk=ze("handshake",Nk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],yy=ze("house",Ck);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jx=ze("info",jk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Rk=ze("layout-dashboard",Dk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pk=ze("plus",Ik);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ok=ze("refresh-cw",kk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hu=ze("search",Mk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Ah=ze("server",Lk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Uk=ze("square-pen",Vk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Bk=ze("trash",qk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dg=ze("trending-up",zk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],An=ze("triangle-alert",Fk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Gk=ze("truck",Hk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Mr=ze("user-plus",$k);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],BS=ze("user",Qk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xc=ze("users",Kk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],vy=ze("wallet",Yk);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zS=ze("x",Xk),FS=[{value:"dashboard",label:"Dashboard",icon:l.jsx(Rk,{})},{value:"Managment",label:"Managment",icon:l.jsx(wk,{})},{value:"cadastros",label:"Registration",icon:l.jsx(Mr,{})},{value:"avisos",label:"Alerts",icon:l.jsx(cg,{})},{value:"users/",label:"Users",icon:l.jsx(BS,{})},{value:"relatorios",label:"Reports",icon:l.jsx(US,{})}],Wk=({Logo:n,className:e})=>{const t=Yr();return l.jsxs("aside",{className:`sidebar ${e||""}`,children:[l.jsx(n,{}),l.jsx("nav",{className:"sidebar-nav",children:l.jsx("ul",{className:"nav-list",children:FS.map(a=>l.jsx("li",{className:"nav-item",children:l.jsxs(OS,{to:a.value,end:!1,className:({isActive:i})=>`nav-link ${i||t.pathname.endsWith(`/${a.value}`)?"active":""}`,children:[a.icon,a.label]})},a.value))})})]})},Zk=()=>l.jsxs("div",{className:"logo",children:[l.jsx("div",{className:"logo-icon",children:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsxs("div",{className:"logo-text",children:[l.jsx("h2",{className:"company-name",children:"Underground Engineering"}),l.jsx("p",{className:"company-tagline",children:"Admin Panel"})]})]});function Jk(){const{user:n}=gy(),e=n?.displayName||n?.email||"User",t=n?.role==="admin"?"Administrator":"Partial Access",a=e.trim().split(" ").map(i=>i[0]?.toUpperCase()).slice(0,2).join("");return l.jsxs("header",{className:"admin-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("h1",{className:"header-title",children:"Admin Panel"}),l.jsx("p",{className:"header-subtitle",children:"Manage registrations and settings"})]}),l.jsx("div",{className:"header-right",children:l.jsxs("div",{className:"user-info",children:[l.jsx("div",{className:"avatar","aria-hidden":!0,children:a}),l.jsxs("div",{className:"user-texts",children:[l.jsx("div",{className:"user-name",title:e,children:e}),l.jsx("span",{className:`user-role ${n?.role||"partial"}`,children:t})]})]})})]})}function eO(){return l.jsxs("div",{className:"admin-layout",children:[l.jsx(Wk,{Logo:Zk}),l.jsxs("main",{className:"admin-content",children:[l.jsx(Jk,{}),l.jsx(hP,{})]})]})}const tO="modulepreload",nO=function(n){return"/"+n},Dx={},ds=function(e,t,a){let i=Promise.resolve();if(t&&t.length>0){let g=function(_){return Promise.all(_.map(E=>Promise.resolve(E).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var d=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=m?.nonce||m?.getAttribute("nonce");i=g(t.map(_=>{if(_=nO(_),_ in Dx)return;Dx[_]=!0;const E=_.endsWith(".css"),b=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${b}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":tO,E||(x.as="script"),x.crossOrigin="",x.href=_,y&&x.setAttribute("nonce",y),document.head.appendChild(x),E)return new Promise((C,A)=>{x.addEventListener("load",C),x.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${_}`)))})}))}function c(m){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=m,window.dispatchEvent(y),!y.defaultPrevented)throw m}return i.then(m=>{for(const y of m||[])y.status==="rejected"&&c(y.reason);return e().catch(c)})};function rO({columns:n,data:e,onView:t,onEdit:a,onDelete:i,loading:c=!1,emptyMessage:d="No records found"}){return c?l.jsx("div",{className:"data-table",children:l.jsxs("div",{className:"table-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading..."})]})}):e.length===0?l.jsx("div",{className:"data-table",children:l.jsx("div",{className:"table-empty",children:l.jsx("p",{children:d})})}):l.jsx("div",{className:"data-table",children:l.jsx("div",{className:"table-container",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[n.map(m=>l.jsx("th",{style:{width:m.width},className:"table-header-cell",children:m.label},m.key)),(t||a||i)&&l.jsx("th",{className:"table-header-cell actions-header",children:"Actions"})]})}),l.jsx("tbody",{children:e.map((m,y)=>l.jsxs("tr",{className:"table-row",children:[n.map(g=>l.jsx("td",{className:"table-cell",children:g.render?g.render(m[g.key],m):m[g.key]},g.key)),(t||a||i)&&l.jsx("td",{className:"table-cell actions-cell",children:l.jsxs("div",{className:"action-buttons",children:[t&&l.jsx("button",{className:"action-btn view-btn",onClick:()=>t(m),title:"View",children:l.jsx(qS,{})}),a&&l.jsx("button",{className:"action-btn edit-btn",onClick:()=>a(m),title:"Edit",children:l.jsx(Uk,{})}),i&&l.jsx("button",{className:"action-btn delete-btn",onClick:()=>i(m),title:"Delete",children:l.jsx(Bk,{})})]})})]},m.id||y))})]})})})}const Ni={async getAllUsers(){try{const n=_e(ie,"users");return(await Ae(n)).docs.map(a=>{const i=a.data();return{id:a.id,uid:i.uid||a.id,email:i.email||"",displayName:i.displayName||"",role:i.role||"partial",allowedPaths:i.allowedPaths||[],createdAt:i.createdAt?.toDate()||new Date,updatedAt:i.updatedAt?.toDate()||new Date}}).sort((a,i)=>i.createdAt.getTime()-a.createdAt.getTime())}catch(n){throw console.error("Error fetching users:",n),n}},async getUserById(n){const e=Ie(ie,"users",n),t=await vn(e);if(!t.exists())return null;const a=t.data();return{id:t.id,uid:a.uid||t.id,email:a.email||"",displayName:a.displayName||"",role:a.role||"user",allowedPaths:a.allowedPaths||[],createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}},async updateUser(n,e){const t=Ie(ie,"users",n),i={...e,updatedAt:new Date};await er(t,i)},async deleteUser(n){const e=Ie(ie,"users",n);await tr(e)},async getUsersByRole(n){const e=_e(ie,"users"),t=Ee(e,Te("role","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,uid:d.uid||c.id,email:d.email||"",displayName:d.displayName||"",role:d.role||"user",allowedPaths:d.allowedPaths||[],createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},aO=Object.freeze(Object.defineProperty({__proto__:null,userService:Ni},Symbol.toStringTag,{value:"Module"})),Sn={async createClient(n){const e=new Date,t={...n,createdAt:e,updatedAt:e},a=_e(ie,"clients");return{id:(await Zn(a,t)).id,...n,createdAt:e,updatedAt:e}},async getAllClients(){const n=_e(ie,"clients"),e=Ee(n,Me("createdAt","desc"));return(await Ae(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getClientById(n){const e=Ie(ie,"clients",n),t=await vn(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}},async updateClient(n,e){const t=Ie(ie,"clients",n),i={...e,updatedAt:new Date};await er(t,i)},async deleteClient(n){const e=Ie(ie,"clients",n);await tr(e)},async getClientsByState(n){const e=_e(ie,"clients"),t=Ee(e,Te("state","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getClientsByCity(n){const e=_e(ie,"clients");return(await Ae(Ee(e,Te("city","==",n),Me("createdAt","desc")))).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})}},sO=Object.freeze(Object.defineProperty({__proto__:null,clientService:Sn},Symbol.toStringTag,{value:"Module"})),rf={async createService(n){const e=new Date,t={...n,createdAt:e,updatedAt:e},a=_e(ie,"services"),i=await Zn(a,t),c={ft:{value:"ft",label:"Foot (ft)"},box:{value:"box",label:"Box"},fixed:{value:"fixed",label:"Fixed Price"},"":{value:"",label:""}};return{id:i.id,...t,billingUnit:c[n.billingUnit]}},async getAllServices(){const n=_e(ie,"services"),e=Ee(n,Me("createdAt","desc"));return(await Ae(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getServiceById(n){const e=Ie(ie,"services",n),t=await vn(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}},async updateService(n,e){const t=Ie(ie,"services",n),i={...e,updatedAt:new Date};await er(t,i)},async deleteService(n){const e=Ie(ie,"services",n);await tr(e)}},iO=Object.freeze(Object.defineProperty({__proto__:null,serviceService:rf},Symbol.toStringTag,{value:"Module"})),Ti={async createEmployee(n){const e=new Date;let t;n.driverLicenseDocument&&(t=void 0);const{driverLicenseDocument:a,...i}=n,d={...Object.fromEntries(Object.entries(i).filter(([,m])=>m!==void 0)),...t!==void 0&&{driverLicenseDocument:t},createdAt:e,updatedAt:e};try{return{id:(await Zn(_e(ie,"employees"),d)).id,...d}}catch(m){throw console.error("Error creating employee:",m),new Error("Failed to create employee")}},async getAllEmployees(){try{const n=Ee(_e(ie,"employees"),Me("createdAt","desc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error getting employees:",n),new Error("Failed to get employees")}},async getEmployeeById(n){try{const e=Ie(ie,"employees",n),t=await vn(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}:null}catch(e){throw console.error("Error getting employee:",e),new Error("Failed to get employee")}},async getEmployeesByName(n){try{const e=Ee(_e(ie,"employees"),Te("name",">=",n),Te("name","<=",n+""),Me("name"));return(await Ae(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error searching employees by name:",e),new Error("Failed to search employees")}},async getEmployeeByItin(n){try{const e=Ee(_e(ie,"employees"),Te("itinNumber","==",n)),t=await Ae(e);if(t.empty)return null;{const a=t.docs[0];return{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}}}catch(e){throw console.error("Error getting employee by ITIN:",e),new Error("Failed to get employee by ITIN")}},async getEmployeeByDriverLicense(n){try{const e=Ee(_e(ie,"employees"),Te("driverLicenseNumber","==",n)),t=await Ae(e);if(t.empty)return null;{const a=t.docs[0];return{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}}}catch(e){throw console.error("Error getting employee by driver license:",e),new Error("Failed to get employee by driver license")}},async updateEmployee(n,e){try{const t=Ie(ie,"employees",n);let a;e.driverLicenseDocument&&(a=void 0);const{driverLicenseDocument:i,...c}=e,d=Object.fromEntries(Object.entries(c).filter(([,_])=>_!==void 0)),y={...Object.fromEntries(Object.entries(d).filter(([,_])=>_!==void 0)),...a!==void 0&&{driverLicenseDocument:a},updatedAt:new Date};await er(t,y);const g=await this.getEmployeeById(n);if(!g)throw new Error("Employee not found after update");return g}catch(t){throw console.error("Error updating employee:",t),new Error("Failed to update employee")}},async deleteEmployee(n){try{const e=Ie(ie,"employees",n);await tr(e)}catch(e){throw console.error("Error deleting employee:",e),new Error("Failed to delete employee")}},async checkItinExists(n,e){try{const t=Ee(_e(ie,"employees"),Te("itinNumber","==",n)),a=await Ae(t);return e?a.docs.some(i=>i.id!==e):!a.empty}catch(t){throw console.error("Error checking ITIN existence:",t),new Error("Failed to check ITIN existence")}},async checkDriverLicenseExists(n,e){try{const t=Ee(_e(ie,"employees"),Te("driverLicenseNumber","==",n)),a=await Ae(t);return e?a.docs.some(i=>i.id!==e):!a.empty}catch(t){throw console.error("Error checking driver license existence:",t),new Error("Failed to check driver license existence")}},async searchEmployees(n){try{let e=Ee(_e(ie,"employees"));return n.name&&(e=Ee(e,Te("name",">=",n.name),Te("name","<=",n.name+""))),n.itinNumber&&(e=Ee(e,Te("itinNumber","==",n.itinNumber))),n.driverLicenseNumber&&(e=Ee(e,Te("driverLicenseNumber","==",n.driverLicenseNumber))),n.phone&&(e=Ee(e,Te("phone","==",n.phone))),e=Ee(e,Me("createdAt","desc")),(await Ae(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error searching employees:",e),new Error("Failed to search employees")}},async getEmployeeCount(){try{return(await Ae(_e(ie,"employees"))).size}catch(n){throw console.error("Error getting employee count:",n),new Error("Failed to get employee count")}}},oO=Object.freeze(Object.defineProperty({__proto__:null,employeeService:Ti},Symbol.toStringTag,{value:"Module"})),af={async createSubcontractor(n){const e=new Date;let t=[];n.insuranceDocuments&&n.insuranceDocuments.length>0&&(t=[]);const{insuranceDocuments:a,...i}=n,d={...Object.fromEntries(Object.entries(i).filter(([,g])=>g!==void 0)),insuranceDocuments:t,createdAt:e,updatedAt:e},m=_e(ie,"subcontractors");return{id:(await Zn(m,d)).id,...i,insuranceDocuments:t,createdAt:e,updatedAt:e}},async getAllSubcontractors(){const n=_e(ie,"subcontractors"),e=Ee(n,Me("createdAt","desc"));return(await Ae(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getSubcontractorById(n){const e=Ie(ie,"subcontractors",n),t=await vn(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}},async updateSubcontractor(n,e){const t=Ie(ie,"subcontractors",n),i={...e,updatedAt:new Date};await er(t,i)},async deleteSubcontractor(n){const e=Ie(ie,"subcontractors",n);await tr(e)},async getSubcontractorsByState(n){const e=_e(ie,"subcontractors"),t=Ee(e,Te("state","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getSubcontractorsByCity(n){const e=_e(ie,"subcontractors");return(await Ae(Ee(e,Te("city","==",n),Me("createdAt","desc")))).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getSubcontractorsByAvailability(n){const e=_e(ie,"subcontractors"),t=Ee(e,Te("availability","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getSubcontractorsByService(n){const e=_e(ie,"subcontractors"),t=Ee(e,Te("services","array-contains",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},lO=Object.freeze(Object.defineProperty({__proto__:null,subcontractorService:af},Symbol.toStringTag,{value:"Module"})),zt={async createContractService(n){const e=new Date,a={...Object.fromEntries(Object.entries(n).filter(([d,m])=>m!==void 0)),createdAt:e,updatedAt:e},i=_e(ie,"contractServices");return{id:(await Zn(i,a)).id,...n,createdAt:e,updatedAt:e}},async getAllContractServices(){const n=_e(ie,"contractServices"),e=Ee(n,Me("createdAt","desc"));return(await Ae(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getContractServiceById(n){const e=Ie(ie,"contractServices",n),t=await vn(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}},async updateContractService(n,e){const t=Ie(ie,"contractServices",n),i={...e,updatedAt:new Date};await er(t,i)},async deleteContractService(n){const e=Ie(ie,"contractServices",n);await tr(e)},async getContractServicesByClient(n){const e=_e(ie,"contractServices"),t=Ee(e,Te("clientId","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getContractServicesBySubcontractor(n){const e=_e(ie,"contractServices"),t=Ee(e,Te("subcontractorId","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getContractServicesByStatus(n){const e=_e(ie,"contractServices"),t=Ee(e,Te("status","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getContractServicesByType(n){const e=_e(ie,"contractServices"),t=Ee(e,Te("serviceType","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},cO=Object.freeze(Object.defineProperty({__proto__:null,contractServiceService:zt},Symbol.toStringTag,{value:"Module"})),_y={async createFinancing(n){const e=new Date,a={...Object.fromEntries(Object.entries(n).filter(([d,m])=>m!==void 0)),createdAt:e,updatedAt:e},i=_e(ie,"financings");return{id:(await Zn(i,a)).id,...n,createdAt:e,updatedAt:e}},async getAllFinancings(){const n=_e(ie,"financings"),e=Ee(n,Me("createdAt","desc"));return(await Ae(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getFinancingById(n){const e=Ie(ie,"financings",n),t=await vn(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}},async updateFinancing(n,e){const t=Ie(ie,"financings",n),i={...e,updatedAt:new Date};await er(t,i)},async deleteFinancing(n){const e=Ie(ie,"financings",n);await tr(e)},async getFinancingsByProject(n){const e=_e(ie,"financings"),t=Ee(e,Te("projectId","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getFinancingsByClient(n){const e=_e(ie,"financings"),t=Ee(e,Te("clientId","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getFinancingsByStatus(n){const e=_e(ie,"financings"),t=Ee(e,Te("status","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getFinancingsByType(n){const e=_e(ie,"financings"),t=Ee(e,Te("financingType","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},uO=Object.freeze(Object.defineProperty({__proto__:null,financingService:_y},Symbol.toStringTag,{value:"Module"})),ws={async createVehicle(n){const e=new Date,a={...Object.fromEntries(Object.entries(n).filter(([d,m])=>m!==void 0)),createdAt:e,updatedAt:e},i=_e(ie,"vehicles");return{id:(await Zn(i,a)).id,...n,createdAt:e,updatedAt:e}},async getAllVehicles(){const n=_e(ie,"vehicles"),e=Ee(n,Me("createdAt","desc"));return(await Ae(e)).docs.map(i=>{const c=i.data();return{id:i.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}})},async getVehicleById(n){const e=Ie(ie,"vehicles",n),t=await vn(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}},async updateVehicle(n,e){const t=Ie(ie,"vehicles",n),i={...e,updatedAt:new Date};await er(t,i)},async deleteVehicle(n){const e=Ie(ie,"vehicles",n);await tr(e)},async getVehiclesByType(n){const e=_e(ie,"vehicles"),t=Ee(e,Te("vehicleType","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getVehiclesByStatus(n){const e=_e(ie,"vehicles"),t=Ee(e,Te("status","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getVehiclesByLocation(n){const e=_e(ie,"vehicles"),t=Ee(e,Te("location","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})},async getVehiclesByMake(n){const e=_e(ie,"vehicles"),t=Ee(e,Te("make","==",n),Me("createdAt","desc"));return(await Ae(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date}})}},dO=Object.freeze(Object.defineProperty({__proto__:null,vehicleService:ws},Symbol.toStringTag,{value:"Module"})),Lo="bankAccounts",HS={async createBankAccount(n){try{return{id:(await Zn(_e(ie,Lo),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating bank account:",e),new Error("Failed to create bank account")}},async getAllBankAccounts(){try{const n=Ee(_e(ie,Lo),Me("createdAt","desc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching bank accounts:",n),new Error("Failed to fetch bank accounts")}},async getBankAccountById(n){try{const e=Ee(_e(ie,Lo),Te("__name__","==",n)),t=await Ae(e);if(t.empty)return null;const a=t.docs[0];return{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching bank account:",e),new Error("Failed to fetch bank account")}},async updateBankAccount(n,e){try{const t=Ie(ie,Lo,n);await er(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating bank account:",t),new Error("Failed to update bank account")}},async deleteBankAccount(n){try{const e=Ie(ie,Lo,n);await tr(e)}catch(e){throw console.error("Error deleting bank account:",e),new Error("Failed to delete bank account")}},async getActiveBankAccounts(){try{const n=Ee(_e(ie,Lo),Te("isActive","==",!0),Me("accountName","asc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching active bank accounts:",n),new Error("Failed to fetch active bank accounts")}}},_i="creditCards",GS={async createCreditCard(n){try{return{id:(await Zn(_e(ie,_i),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating credit card:",e),new Error("Failed to create credit card")}},async getAllCreditCards(){try{const n=Ee(_e(ie,_i),Me("createdAt","desc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching credit cards:",n),new Error("Failed to fetch credit cards")}},async getCreditCardById(n){try{const e=Ee(_e(ie,_i),Te("__name__","==",n)),t=await Ae(e);if(t.empty)return null;const a=t.docs[0];return{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching credit card:",e),new Error("Failed to fetch credit card")}},async updateCreditCard(n,e){try{const t=Ie(ie,_i,n);await er(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating credit card:",t),new Error("Failed to update credit card")}},async deleteCreditCard(n){try{const e=Ie(ie,_i,n);await tr(e)}catch(e){throw console.error("Error deleting credit card:",e),new Error("Failed to delete credit card")}},async getActiveCreditCards(){try{const n=Ee(_e(ie,_i),Te("isActive","==",!0),Me("cardName","asc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching active credit cards:",n),new Error("Failed to fetch active credit cards")}},async getCreditCardsByTeam(n){try{const e=Ee(_e(ie,_i),Te("assignedTo","==",n),Te("isActive","==",!0),Me("cardName","asc"));return(await Ae(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching credit cards by team:",e),new Error("Failed to fetch credit cards by team")}}},bi="expenseTypes",by={async createExpenseType(n){try{return{id:(await Zn(_e(ie,bi),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating expense type:",e),new Error("Failed to create expense type")}},async getAllExpenseTypes(){try{const n=Ee(_e(ie,bi),Me("name","asc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching expense types:",n),new Error("Failed to fetch expense types")}},async getExpenseTypeById(n){try{const e=Ee(_e(ie,bi),Te("__name__","==",n)),t=await Ae(e);if(t.empty)return null;const a=t.docs[0];return{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching expense type:",e),new Error("Failed to fetch expense type")}},async updateExpenseType(n,e){try{const t=Ie(ie,bi,n);await er(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating expense type:",t),new Error("Failed to update expense type")}},async deleteExpenseType(n){try{const e=Ie(ie,bi,n);await tr(e)}catch(e){throw console.error("Error deleting expense type:",e),new Error("Failed to delete expense type")}},async getActiveExpenseTypes(){try{const n=Ee(_e(ie,bi),Te("isActive","==",!0),Me("name","asc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching active expense types:",n),new Error("Failed to fetch active expense types")}},async getExpenseTypesByCategory(n){try{const e=Ee(_e(ie,bi),Te("category","==",n),Te("isActive","==",!0),Me("name","asc"));return(await Ae(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching expense types by category:",e),new Error("Failed to fetch expense types by category")}}},hs="servicePricing",Rx="pricingHistory",$S={async createServicePricing(n){try{return{id:(await Zn(_e(ie,hs),{...n,createdAt:new Date,updatedAt:new Date})).id,...n,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating service pricing:",e),new Error("Failed to create service pricing")}},async getAllServicePricing(){try{const n=Ee(_e(ie,hs),Me("createdAt","desc"));return(await Ae(n)).docs.map(t=>({id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate()||new Date,updatedAt:t.data().updatedAt?.toDate()||new Date}))}catch(n){throw console.error("Error fetching service pricing:",n),new Error("Failed to fetch service pricing")}},async getServicePricingById(n){try{const e=Ee(_e(ie,hs),Te("__name__","==",n)),t=await Ae(e);if(t.empty)return null;const a=t.docs[0];return{id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error fetching service pricing:",e),new Error("Failed to fetch service pricing")}},async getPricingByService(n){try{const e=Ee(_e(ie,hs),Te("serviceId","==",n),Te("isActive","==",!0),Me("effectiveDate","desc"));return(await Ae(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching pricing by service:",e),new Error("Failed to fetch pricing by service")}},async getPricingByClient(n){try{const e=Ee(_e(ie,hs),Te("clientId","==",n),Te("isActive","==",!0),Me("effectiveDate","desc"));return(await Ae(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Error fetching pricing by client:",e),new Error("Failed to fetch pricing by client")}},async getPricingForServiceAndClient(n,e){try{const t=Ee(_e(ie,hs),Te("serviceId","==",n),Te("clientId","==",e),Te("isActive","==",!0),Me("effectiveDate","desc")),a=await Ae(t);if(a.empty)return null;const i=a.docs[0];return{id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()||new Date,updatedAt:i.data().updatedAt?.toDate()||new Date}}catch(t){throw console.error("Error fetching pricing for service and client:",t),new Error("Failed to fetch pricing for service and client")}},async updateServicePricing(n,e){try{const t=Ie(ie,hs,n);await er(t,{...e,updatedAt:new Date})}catch(t){throw console.error("Error updating service pricing:",t),new Error("Failed to update service pricing")}},async deleteServicePricing(n){try{const e=Ie(ie,hs,n);await tr(e)}catch(e){throw console.error("Error deleting service pricing:",e),new Error("Failed to delete service pricing")}},async createPricingHistory(n){try{return{id:(await Zn(_e(ie,Rx),{...n,createdAt:new Date})).id,...n,createdAt:new Date}}catch(e){throw console.error("Error creating pricing history:",e),new Error("Failed to create pricing history")}},async getPricingHistory(n,e){try{const t=Ee(_e(ie,Rx),Te("serviceId","==",n),Te("clientId","==",e),Me("changeDate","desc"));return(await Ae(t)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()||new Date}))}catch(t){throw console.error("Error fetching pricing history:",t),new Error("Failed to fetch pricing history")}}},QS=()=>{const[n,e]=M.useState({users:[],clients:[],services:[],employees:[],subcontractors:[],contractServices:[],financings:[],vehicles:[],bankAccounts:[],creditCards:[],expenseTypes:[],servicePricing:[]}),[t,a]=M.useState(!0),[i,c]=M.useState(null),d=async()=>{try{a(!0),c(null);const m=new Promise((G,he)=>{setTimeout(()=>he(new Error("Request timeout")),1e4)}),y=Promise.all([Ni.getAllUsers(),Sn.getAllClients(),rf.getAllServices(),Ti.getAllEmployees(),af.getAllSubcontractors(),zt.getAllContractServices(),_y.getAllFinancings(),ws.getAllVehicles(),HS.getAllBankAccounts(),GS.getAllCreditCards(),by.getAllExpenseTypes(),$S.getAllServicePricing()]),[g,_,E,b,x,C,A,U,D,W,q,se]=await Promise.race([y,m]);e({users:g,clients:_,services:E,employees:b,subcontractors:x,contractServices:C,financings:A,vehicles:U,bankAccounts:D,creditCards:W,expenseTypes:q,servicePricing:se})}catch(m){console.error("Error fetching dashboard data:",m),c(m instanceof Error?m.message:"Failed to fetch data"),e({users:[],clients:[],services:[],employees:[],subcontractors:[],contractServices:[],financings:[],vehicles:[],bankAccounts:[],creditCards:[],expenseTypes:[],servicePricing:[]})}finally{a(!1)}};return M.useEffect(()=>{d()},[]),{data:n,loading:t,error:i,refreshData:d}},KS=M.createContext(void 0),YS=()=>{const n=M.useContext(KS);if(n===void 0)throw new Error("useToast must be used within a ToastProvider");return n},XS=({isOpen:n,onClose:e,onConfirm:t,title:a,message:i,confirmText:c="Confirm",cancelText:d="Cancel",type:m="danger",loading:y=!1})=>{if(!n)return null;const g=E=>{E.target===E.currentTarget&&e()},_=E=>{E.key==="Escape"&&e()};return l.jsx("div",{className:"confirmation-modal-overlay",onClick:g,onKeyDown:_,tabIndex:-1,children:l.jsxs("div",{className:"confirmation-modal",children:[l.jsxs("div",{className:"confirmation-modal-header",children:[l.jsx("div",{className:"confirmation-modal-icon",children:l.jsx(An,{className:`icon-${m}`})}),l.jsx("h3",{className:"confirmation-modal-title",children:a}),l.jsx("button",{className:"confirmation-modal-close",onClick:e,disabled:y,"aria-label":"Fechar modal",children:l.jsx(zS,{})})]}),l.jsx("div",{className:"confirmation-modal-body",children:l.jsx("p",{className:"confirmation-modal-message",children:i})}),l.jsxs("div",{className:"confirmation-modal-footer",children:[l.jsx("button",{className:"confirmation-modal-button cancel",onClick:e,disabled:y,children:d}),l.jsx("button",{className:"confirmation-modal-button confirm",onClick:t,disabled:y,children:y?l.jsx("div",{className:"loading-spinner"}):c})]})]})})},hO=[{id:"users",title:"Users",icon:l.jsx(Mr,{}),description:"Manage system users and their permissions",route:"/dashboard/users"},{id:"services",title:"Services",icon:l.jsx(Ah,{}),description:"Manage available services",route:"/dashboard/services"},{id:"clients",title:"Clients",icon:l.jsx(Xc,{}),description:"Manage client information and records",route:"/dashboard/clients"},{id:"employees",title:"Employees",icon:l.jsx(Mr,{}),description:"Manage employee profiles and information",route:"/dashboard/employees"},{id:"subcontractors",title:"Subcontractors",icon:l.jsx(Mr,{}),description:"Manage subcontractor information",route:"/dashboard/subcontractors"},{id:"contract-services",title:"Contract Services",icon:l.jsx(Ah,{}),description:"Manage contracted services",route:"/dashboard/contract-services"},{id:"financings",title:"Financings",icon:l.jsx(Rs,{}),description:"Manage financing information",route:"/dashboard/financings"},{id:"vehicles",title:"Vehicles",icon:l.jsx(nl,{}),description:"Manage vehicle fleet and information",route:"/dashboard/vehicles"},{id:"bank-accounts",title:"Bank Accounts",icon:l.jsx(yy,{}),description:"Manage bank accounts and financial information",route:"/dashboard/bank-accounts"},{id:"credit-cards",title:"Credit Cards",icon:l.jsx(vy,{}),description:"Manage credit cards for teams and operations",route:"/dashboard/credit-cards"},{id:"expense-types",title:"Expense Types",icon:l.jsx(vs,{}),description:"Manage expense categories and types",route:"/dashboard/expense-types"},{id:"service-pricing",title:"Service Pricing",icon:l.jsx(Fi,{}),description:"Manage service pricing by client",route:"/dashboard/service-pricing"}];function fO(){const[n,e]=M.useState(null),{data:t,loading:a,refreshData:i}=QS(),{showSuccess:c,showError:d}=YS(),[m,y]=M.useState({isOpen:!1,record:null}),g=q=>{e(n===q?null:q)},_=q=>({users:"cadastro-usuario",services:"cadastro-servico",clients:"cadastro-clientes",employees:"cadastro-funcionario",subcontractors:"cadastro-subcontratados","contract-services":"cadastro-servicos-contratados",financings:"cadastro-financiamentos",vehicles:"cadastro-veiculos","bank-accounts":"cadastro-conta-bancaria","credit-cards":"cadastro-cartao-credito","expense-types":"cadastro-tipo-despesa","service-pricing":"cadastro-preco-servico"})[q]||"",E=q=>{const G={users:"users",services:"services",clients:"clients",employees:"employees",subcontractors:"subcontractors","contract-services":"contractServices",financings:"financings",vehicles:"vehicles","bank-accounts":"bankAccounts","credit-cards":"creditCards","expense-types":"expenseTypes","service-pricing":"servicePricing"}[q];return(G?t[G]||[]:[]).map(O=>{const T={id:O.id||O.uid||"N/A",name:O.name||O.displayName||O.fullName||"N/A",status:O.status||"active",created:O.createdAt&&typeof O.createdAt=="object"&&"toDate"in O.createdAt?O.createdAt.toDate().toLocaleDateString():"N/A"};switch(q){case"users":return{...T,email:O.email||"N/A",role:O.role||"N/A"};case"clients":return{...T,company:O.company||"N/A",phone:O.phone||"N/A"};case"services":return{...T,description:O.description||"N/A",price:O.price||"N/A"};case"subcontractors":return{...T,company:O.company||"N/A",phone:O.phone||"N/A"};case"contractServices":return{...T,service:O.serviceName||"N/A",client:O.clientName||"N/A"};case"employees":return{...T,driverLicenseDocument:O.driverLicenseDocument||"N/A"};case"financings":return{...T,amount:O.amount||"N/A",status:O.financingStatus||"N/A"};case"vehicles":return{...T,make:O.make||"N/A",model:O.model||"N/A",license:O.licensePlate||"N/A"};default:return T}})},b=q=>{const se=[{key:"id",label:"ID",width:"80px"},{key:"name",label:"Name"},{key:"status",label:"Status",width:"120px",render:G=>l.jsx("span",{className:`status-badge ${G}`,children:G.charAt(0).toUpperCase()+G.slice(1)})},{key:"created",label:"Created",width:"120px"}];switch(q){case"users":return[...se,{key:"email",label:"Email"},{key:"role",label:"Role",width:"120px"}];case"clients":return[...se,{key:"company",label:"Company"},{key:"phone",label:"Phone",width:"140px"}];case"services":return[...se,{key:"description",label:"Description"},{key:"price",label:"Price",width:"100px"}];case"subcontractors":return[...se,{key:"company",label:"Company"},{key:"phone",label:"Phone",width:"140px"}];case"contractServices":return[...se,{key:"service",label:"Service"},{key:"client",label:"Client"}];case"financings":return[...se,{key:"amount",label:"Amount",width:"120px"},{key:"status",label:"Status",width:"120px"}];case"vehicles":return[...se,{key:"make",label:"Make",width:"100px"},{key:"model",label:"Model",width:"100px"},{key:"license",label:"License",width:"100px"}];default:return se}},x=q=>{console.log("View record:",q),alert(`Visualizando ${q.name} (ID: ${q.id})

Funcionalidade de visualizao ser implementada em breve.`)},C=q=>{if(console.log("Edit record:",q),console.log("Selected section:",n),!n){alert("Por favor, selecione uma seo primeiro clicando em um dos cards acima.");return}const se=_(n);console.log("Navigating to:",se),se?window.location.href=`/admin/${se}?edit=${q.id}`:(console.error("Route not found for section:",n),alert("Rota no encontrada para a seo selecionada."))},A=async q=>{y({isOpen:!0,record:q})},U=async()=>{if(m.record)try{const{userService:q}=await ds(async()=>{const{userService:R}=await Promise.resolve().then(()=>aO);return{userService:R}},[]),{clientService:se}=await ds(async()=>{const{clientService:R}=await Promise.resolve().then(()=>sO);return{clientService:R}},void 0),{serviceService:G}=await ds(async()=>{const{serviceService:R}=await Promise.resolve().then(()=>iO);return{serviceService:R}},void 0),{employeeService:he}=await ds(async()=>{const{employeeService:R}=await Promise.resolve().then(()=>oO);return{employeeService:R}},void 0),{subcontractorService:O}=await ds(async()=>{const{subcontractorService:R}=await Promise.resolve().then(()=>lO);return{subcontractorService:R}},void 0),{contractServiceService:T}=await ds(async()=>{const{contractServiceService:R}=await Promise.resolve().then(()=>cO);return{contractServiceService:R}},void 0),{financingService:I}=await ds(async()=>{const{financingService:R}=await Promise.resolve().then(()=>uO);return{financingService:R}},void 0),{vehicleService:L}=await ds(async()=>{const{vehicleService:R}=await Promise.resolve().then(()=>dO);return{vehicleService:R}},void 0),N=String(m.record.id);switch(n){case"users":await q.deleteUser(N);break;case"clients":await se.deleteClient(N);break;case"services":await G.deleteService(N);break;case"employees":await he.deleteEmployee(N);break;case"subcontractors":await O.deleteSubcontractor(N);break;case"contractServices":await T.deleteContractService(N);break;case"financings":await I.deleteFinancing(N);break;case"vehicles":await L.deleteVehicle(N);break;default:throw new Error("Tipo de seo desconhecido")}await i(),c("Excludo!",`${m.record.name} removido com sucesso!`)}catch(q){console.error("Error deleting record:",q),d("Falha!",`Falha ao excluir ${m.record.name}: ${q instanceof Error?q.message:"Erro desconhecido"}`)}finally{y({isOpen:!1,record:null})}},D=()=>{if(console.log("Add new record"),console.log("Selected section:",n),!n){alert("Por favor, selecione uma seo primeiro clicando em um dos cards acima.");return}const q=_(n);console.log("Navigating to:",q),q?window.location.href=`/admin/${q}`:(console.error("Route not found for section:",n),alert("Rota no encontrada para a seo selecionada."))},W=q=>{const se=E(q),G=b(q);return l.jsxs("div",{className:"section-content",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("h3",{children:["Manage ",q.charAt(0).toUpperCase()+q.slice(1)]}),l.jsxs("button",{className:"add-button",onClick:D,children:[l.jsx(Pk,{}),"Add New"]})]}),l.jsx(rO,{columns:G,data:se,onView:x,onEdit:C,onDelete:A,loading:a,emptyMessage:""})]})};return l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"dashboard-content",children:[l.jsx("div",{className:"sections-grid",children:hO.map(q=>l.jsxs("div",{className:`section-card ${n===q.id?"active":""}`,onClick:()=>g(q.id),children:[l.jsx("div",{className:"section-icon",children:q.icon}),l.jsxs("div",{className:"section-info",children:[l.jsx("h3",{children:q.title}),l.jsx("p",{children:q.description})]})]},q.id))}),n&&l.jsx("div",{className:"section-details",children:W(n)})]}),l.jsx(XS,{isOpen:m.isOpen,onClose:()=>y({isOpen:!1,record:null}),onConfirm:U,title:"Confirmar Excluso",message:`Tem certeza que deseja excluir "${m.record?.name}"? Esta ao no pode ser desfeita.`,confirmText:"Excluir",cancelText:"Cancelar",type:"danger"})]})}const mO=()=>{const n=yr(),e=[{id:"cadastro-usuario",title:"Users",description:"Register and manage system users",icon:l.jsx(Mr,{}),path:"cadastro-usuario"},{id:"cadastro-servico",title:"Services",description:"Register available services",icon:l.jsx(Ah,{}),path:"cadastro-servico"},{id:"cadastro-clientes",title:"Clients",description:"Register company clients",icon:l.jsx(Xc,{}),path:"cadastro-clientes"},{id:"cadastro-funcionario",title:"Employees",description:"Register employees",icon:l.jsx(BS,{}),path:"cadastro-funcionario"},{id:"cadastro-subcontratados",title:"Subcontractors",description:"Register service providers",icon:l.jsx(Tk,{}),path:"cadastro-subcontratados"},{id:"cadastro-servicos-contratados",title:"Contract Services",description:"Register contracted services",icon:l.jsx(ik,{}),path:"cadastro-servicos-contratados"},{id:"cadastro-financiamentos",title:"Financing",description:"Register financing options",icon:l.jsx(Rs,{}),path:"cadastro-financiamentos"},{id:"cadastro-veiculos",title:"Vehicles",description:"Register fleet vehicles",icon:l.jsx(nl,{}),path:"cadastro-veiculos"},{id:"cadastro-conta-bancaria",title:"Bank Accounts",description:"Register bank accounts",icon:l.jsx(yy,{}),path:"cadastro-conta-bancaria"},{id:"cadastro-cartao-credito",title:"Credit Cards",description:"Register credit cards",icon:l.jsx(vy,{}),path:"cadastro-cartao-credito"},{id:"cadastro-tipo-despesa",title:"Expense Types",description:"Register expense categories",icon:l.jsx(vs,{}),path:"cadastro-tipo-despesa"},{id:"cadastro-preco-servico",title:"Service Pricing",description:"Register service prices",icon:l.jsx(Fi,{}),path:"cadastro-preco-servico"}],t=a=>{n(`/admin/${a}`)};return l.jsxs("div",{className:"cadastros",children:[l.jsxs("div",{className:"cadastros-header",children:[l.jsx("h1",{children:"System Registration"}),l.jsx("p",{children:"Select the type of registration you want to perform"})]}),l.jsx("div",{className:"cadastros-grid",children:e.map(a=>l.jsxs("div",{className:"registration-card",onClick:()=>t(a.path),children:[l.jsx("div",{className:"card-icon",children:a.icon}),l.jsxs("div",{className:"card-content",children:[l.jsx("h3",{children:a.title}),l.jsx("p",{children:a.description})]})]},a.id))})]})},pO=()=>{const n=yr(),e=[{id:"manutencao-veiculos",title:"Vehicle Maintenance",description:"Vehicle maintenance alerts",icon:l.jsx(nl,{}),path:"manutencao-veiculos"},{id:"termino-projeto",title:"Project Completion",description:"Project completion alerts",icon:l.jsx(fr,{}),path:"termino-projeto"},{id:"pagamento-subcontratados",title:"Subcontractor Payment",description:"Subcontractor payment alerts",icon:l.jsx(Rs,{}),path:"pagamento-subcontratados"},{id:"recebimento-cliente",title:"Client Payment",description:"Client payment alerts",icon:l.jsx(Fi,{}),path:"recebimento-cliente"},{id:"pagamento-servicos-contratados",title:"Contracted Services Payment",description:"Contracted services payment alerts",icon:l.jsx(Rs,{}),path:"pagamento-servicos-contratados"}],t=a=>{n(`/admin/${a}`)};return l.jsxs("div",{className:"avisos",children:[l.jsxs("div",{className:"avisos-header",children:[l.jsx("h1",{children:"Alerts"}),l.jsx("p",{children:"Select the type of alert you want to view"})]}),l.jsx("div",{className:"avisos-grid",children:e.map(a=>l.jsxs("div",{className:"aviso-card",onClick:()=>t(a.path),children:[l.jsx("div",{className:"aviso-card-icon",children:a.icon}),l.jsxs("div",{className:"aviso-card-content",children:[l.jsx("h3",{children:a.title}),l.jsx("p",{children:a.description})]})]},a.id))})]})},gO=()=>{const n=yr(),[e,t]=M.useState([]),[a,i]=M.useState([]),[c,d]=M.useState(!0),[m,y]=M.useState(""),[g,_]=M.useState("all"),[E,b]=M.useState("all"),[x,C]=M.useState("all"),A=I=>I<0||I<=7?"high":I<=30?"medium":"low",U=I=>{const L=new Date;L.setHours(0,0,0,0);const N=new Date(I);return N.setHours(0,0,0,0),N<L?"overdue":"pending"},D=I=>{const L=new Date;L.setHours(0,0,0,0);const N=new Date(I);N.setHours(0,0,0,0);const R=N.getTime()-L.getTime();return Math.ceil(R/(1e3*60*60*24))},W=I=>{const L=[];let N=1;return I.forEach(R=>{if(!R.id)return;const P=`${R.make} ${R.model}`,J=R.lastMaintenanceDate||"";if(R.nextMaintenanceDate){const de=new Date(R.nextMaintenanceDate),K=D(de),ce=U(de),ye=A(K);L.push({id:`maintenance-${R.id}-${N++}`,vehicleId:R.id,vehicleName:P,licensePlate:R.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:R.nextMaintenanceDate,status:ce,priority:ye,description:"Manuteno programada",lastMaintenance:J,nextMaintenance:R.nextMaintenanceDate})}if(R.licensePlateRenewalDate){const de=new Date(R.licensePlateRenewalDate),K=D(de),ce=U(de),ye=A(K);L.push({id:`plate-${R.id}-${N++}`,vehicleId:R.id,vehicleName:P,licensePlate:R.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:R.licensePlateRenewalDate,status:ce,priority:ye,description:"Renovao de placa",lastMaintenance:J,nextMaintenance:R.nextMaintenanceDate||""})}if(R.dotRenewalDate){const de=new Date(R.dotRenewalDate),K=D(de),ce=U(de),ye=A(K);L.push({id:`dot-${R.id}-${N++}`,vehicleId:R.id,vehicleName:P,licensePlate:R.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:R.dotRenewalDate,status:ce,priority:ye,description:"Renovao DOT",lastMaintenance:J,nextMaintenance:R.nextMaintenanceDate||""})}if(R.insuranceExpiry){const de=new Date(R.insuranceExpiry),K=D(de),ce=U(de),ye=A(K);L.push({id:`insurance-${R.id}-${N++}`,vehicleId:R.id,vehicleName:P,licensePlate:R.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:R.insuranceExpiry,status:ce,priority:ye,description:"Expirao do seguro",lastMaintenance:J,nextMaintenance:R.nextMaintenanceDate||""})}if(R.registrationExpiry){const de=new Date(R.registrationExpiry),K=D(de),ce=U(de),ye=A(K);L.push({id:`registration-${R.id}-${N++}`,vehicleId:R.id,vehicleName:P,licensePlate:R.licensePlate,alertType:"date",currentValue:0,limitValue:0,dueDate:R.registrationExpiry,status:ce,priority:ye,description:"Expirao do registro",lastMaintenance:J,nextMaintenance:R.nextMaintenanceDate||""})}}),L};M.useEffect(()=>{(async()=>{try{d(!0);const L=await ws.getAllVehicles(),N=W(L);t(N),i(N)}catch(L){console.error("Erro ao buscar alertas de veculos:",L)}finally{d(!1)}})()},[]),M.useEffect(()=>{let I=e;m&&(I=I.filter(L=>L.vehicleName.toLowerCase().includes(m.toLowerCase())||L.licensePlate.toLowerCase().includes(m.toLowerCase())||L.description.toLowerCase().includes(m.toLowerCase()))),g!=="all"&&(I=I.filter(L=>L.alertType===g)),E!=="all"&&(I=I.filter(L=>L.status===E)),x!=="all"&&(I=I.filter(L=>L.priority===x)),i(I)},[e,m,g,E,x]);const q=I=>{switch(I){case"date":return l.jsx(Yc,{});case"mileage":return l.jsx(Ak,{});case"hours":return l.jsx(du,{});default:return l.jsx(nl,{})}},se=I=>{switch(I){case"completed":return l.jsx(fr,{className:"status-icon completed"});case"overdue":return l.jsx(rl,{className:"status-icon overdue"});case"pending":return l.jsx(An,{className:"status-icon pending"});default:return l.jsx(An,{className:"status-icon pending"})}},G=I=>{switch(I){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},he=I=>{switch(I.alertType){case"date":return`Due: ${new Date(I.dueDate).toLocaleDateString()}`;case"mileage":return`${I.currentValue.toLocaleString()} / ${I.limitValue.toLocaleString()} km`;case"hours":return`${I.currentValue} / ${I.limitValue} hours`;default:return""}},O=async I=>{try{const L=e.find(P=>P.id===I);if(!L||!L.vehicleId)return;if(L.id.startsWith("maintenance-")){const P=new Date().toISOString().split("T")[0];await ws.updateVehicle(L.vehicleId,{lastMaintenanceDate:P})}else L.id.startsWith("plate-")||L.id.startsWith("dot-")||L.id.startsWith("insurance-")||L.id.startsWith("registration-");t(P=>P.filter(J=>J.id!==I)),i(P=>P.filter(J=>J.id!==I));const N=await ws.getAllVehicles(),R=W(N);t(R)}catch(L){console.error("Erro ao marcar alerta como concludo:",L)}},T=I=>{const L=e.find(N=>N.id===I);L&&L.vehicleId&&console.log("View details for vehicle:",L.vehicleId)};return c?l.jsx("div",{className:"vehicle-alert",children:l.jsx("div",{className:"loading",children:"Loading alerts..."})}):l.jsxs("div",{className:"vehicle-alert",children:[l.jsxs("div",{className:"alert-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{children:"Vehicle Maintenance Alerts"}),l.jsx("p",{children:"Monitor and manage vehicle maintenance schedules"})]}),l.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),l.jsxs("div",{className:"alert-filters",children:[l.jsxs("div",{className:"search-box",children:[l.jsx(hu,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Search vehicles, license plates, or descriptions...",value:m,onChange:I=>y(I.target.value)})]}),l.jsxs("div",{className:"filter-group",children:[l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Type:"}),l.jsxs("select",{value:g,onChange:I=>_(I.target.value),children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"date",children:"By Date"}),l.jsx("option",{value:"mileage",children:"By Mileage"}),l.jsx("option",{value:"hours",children:"By Hours"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Status:"}),l.jsxs("select",{value:E,onChange:I=>b(I.target.value),children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"overdue",children:"Overdue"}),l.jsx("option",{value:"completed",children:"Completed"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Priority:"}),l.jsxs("select",{value:x,onChange:I=>C(I.target.value),children:[l.jsx("option",{value:"all",children:"All Priorities"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"low",children:"Low"})]})]})]})]}),l.jsx("div",{className:"alerts-grid",children:a.length===0?l.jsxs("div",{className:"no-alerts",children:[l.jsx(nl,{}),l.jsx("h3",{children:"No alerts found"}),l.jsx("p",{children:"No vehicle maintenance alerts match your current filters."})]}):a.map(I=>l.jsxs("div",{className:"alert-card",children:[l.jsxs("div",{className:"alert-card-header",children:[l.jsxs("div",{className:"alert-type",children:[q(I.alertType),l.jsxs("span",{className:"type-label",children:[I.alertType==="date"&&"Date",I.alertType==="mileage"&&"Mileage",I.alertType==="hours"&&"Hours"]})]}),l.jsxs("div",{className:"alert-priority",children:[l.jsx("div",{className:"priority-dot",style:{backgroundColor:G(I.priority)}}),l.jsx("span",{className:"priority-label",children:I.priority})]})]}),l.jsxs("div",{className:"alert-card-content",children:[l.jsxs("div",{className:"vehicle-info",children:[l.jsx("h3",{children:I.vehicleName}),l.jsx("p",{className:"license-plate",children:I.licensePlate})]}),l.jsxs("div",{className:"alert-details",children:[l.jsx("p",{className:"description",children:I.description}),l.jsx("p",{className:"alert-value",children:he(I)})]}),l.jsxs("div",{className:"alert-dates",children:[l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Last Maintenance:"}),l.jsx("span",{className:"date-value",children:new Date(I.lastMaintenance).toLocaleDateString()})]}),l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Next Maintenance:"}),l.jsx("span",{className:"date-value",children:new Date(I.nextMaintenance).toLocaleDateString()})]})]})]}),l.jsxs("div",{className:"alert-card-footer",children:[l.jsxs("div",{className:"alert-status",children:[se(I.status),l.jsx("span",{className:"status-label",children:I.status})]}),l.jsxs("div",{className:"alert-actions",children:[l.jsx("button",{className:"action-button secondary",onClick:()=>T(I.id),children:"View Details"}),I.status!=="completed"&&l.jsx("button",{className:"action-button primary",onClick:()=>O(I.id),children:"Mark Complete"})]})]})]},I.id))})]})};var WS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ix=Si.createContext&&Si.createContext(WS),yO=["attr","size","title"];function vO(n,e){if(n==null)return{};var t=_O(n,e),a,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(i=0;i<c.length;i++)a=c[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function _O(n,e){if(n==null)return{};var t={};for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){if(e.indexOf(a)>=0)continue;t[a]=n[a]}return t}function Nh(){return Nh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},Nh.apply(this,arguments)}function Px(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,a)}return t}function Th(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Px(Object(t),!0).forEach(function(a){bO(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Px(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function bO(n,e,t){return e=xO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xO(n){var e=EO(n,"string");return typeof e=="symbol"?e:e+""}function EO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var a=t.call(n,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZS(n){return n&&n.map((e,t)=>Si.createElement(e.tag,Th({key:t},e.attr),ZS(e.child)))}function jt(n){return e=>Si.createElement(wO,Nh({attr:Th({},n.attr)},e),ZS(n.child))}function wO(n){var e=t=>{var{attr:a,size:i,title:c}=n,d=vO(n,yO),m=i||t.size||"1em",y;return t.className&&(y=t.className),n.className&&(y=(y?y+" ":"")+n.className),Si.createElement("svg",Nh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:y,style:Th(Th({color:n.color||t.color},t.style),n.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),c&&Si.createElement("title",null,c),n.children)};return Ix!==void 0?Si.createElement(Ix.Consumer,null,t=>e(t)):e(WS)}function SO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(n)}function fu(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(n)}function AO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(n)}function NO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function kx(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(n)}function TO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(n)}function Ch(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(n)}function mr(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(n)}function CO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(n)}function jO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(n)}function al(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(n)}function JS(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(n)}function sf(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(n)}function eA(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(n)}function DO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(n)}function of(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(n)}function sl(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(n)}function tA(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(n)}function RO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(n)}function IO(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(n)}function Lr(n){return jt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}const Oi=({label:n,options:e,value:t,onChange:a,placeholder:i="Select options...",error:c,required:d=!1,disabled:m=!1})=>{const[y,g]=M.useState(!1),_=()=>{g(!y)},E=x=>{t.includes(x)?a(t.filter(C=>C!==x)):a([...t,x])},b=()=>{if(t.length===0)return i;if(t.length===1){const x=e.find(C=>C.value===t[0]);return x?x.label:t[0]}return`${t.length} items selected`};return l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[n,d&&l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("div",{className:`multiselect ${c?"error":""} ${m?"disabled":""}`,children:[l.jsxs("div",{className:"multiselect-trigger",onClick:m?void 0:_,children:[l.jsx("span",{className:"multiselect-value",children:b()}),l.jsx("span",{className:`multiselect-arrow ${y?"open":""}`,children:""})]}),y&&l.jsx("div",{className:"multiselect-dropdown",children:e.map(x=>l.jsxs("div",{className:`multiselect-option ${t.includes(x.value)?"selected":""}`,onClick:()=>E(x.value),children:[l.jsx("span",{className:"option-checkbox",children:t.includes(x.value)?l.jsx(AO,{className:"check-icon"}):""}),l.jsx("span",{className:"option-label",children:x.label})]},x.value))})]}),c&&l.jsx("span",{className:"error-message",children:c})]})},PO=()=>{const[n]=py(),e=n.get("edit"),t=!!e,[a,i]=M.useState({email:"",password:"",displayName:"",role:"partial",allowedPaths:[]}),c=FS.map(({value:q,label:se})=>({value:q,label:se})),[d,m]=M.useState({}),[y,g]=M.useState(!1),[_,E]=M.useState(!1);M.useEffect(()=>{t&&e&&(E(!0),Ni.getUserById(e).then(q=>{q&&i({email:q.email||"",password:"",displayName:q.displayName||"",role:q.role||"partial",allowedPaths:q.allowedPaths||[]})}).catch(q=>{console.error("Error loading user:",q),m({submit:"Erro ao carregar dados do usurio"})}).finally(()=>{E(!1)}))},[t,e]);const[b,x]=M.useState(""),C=a.role==="admin",A=(q,se)=>{i(G=>{const he={...G,[q]:se};return q==="role"&&se==="admin"&&(he.allowedPaths=[]),he}),d[q]&&m(G=>({...G,[q]:""})),b&&x("")},U=()=>{const q={};return a.email?/\S+@\S+\.\S+/.test(a.email)||(q.email="Please enter a valid email"):q.email="Email is required",!t&&!a.password?q.password="Password is required":!t&&a.password&&a.password.length<6&&(q.password="Password must be at least 6 characters"),a.displayName||(q.displayName="Display name is required"),a.role==="partial"&&a.allowedPaths.length===0&&(q.allowedPaths="Please select at least one allowed path"),m(q),Object.keys(q).length===0},D=async q=>{if(q.preventDefault(),!!U()){g(!0),x(""),m({});try{if(t&&e)await Ni.updateUser(e,{email:a.email,displayName:a.displayName,role:a.role,allowedPaths:a.allowedPaths}),x("Usurio atualizado com sucesso!");else{const se={email:a.email,password:a.password,displayName:a.displayName,role:a.role,allowedPaths:a.allowedPaths};await zo.register(se),x("Usurio criado com sucesso!")}t||i({email:"",password:"",displayName:"",role:"partial",allowedPaths:[]}),m({}),setTimeout(()=>{x("")},3e3)}catch(se){m({submit:"Failed to create user: "+(se instanceof Error?se.message:String(se))})}finally{g(!1)}}},W=()=>{i({email:"",password:"",displayName:"",role:"partial",allowedPaths:[]}),m({}),x("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:t?"Edit User":"Create New User"}),l.jsx("p",{className:"page-subtitle",children:t?"Update user information and permissions":"Add a new user to the system with specific permissions and access rights"})]}),l.jsxs("div",{className:`form-container ${y||_?"form-loading":""}`,children:[_&&l.jsx("div",{className:"status-message info-message",children:"Carregando dados do usurio..."}),b&&l.jsx("div",{className:"status-message success-message",children:b}),d.submit&&l.jsx("div",{className:"status-message error-message",children:d.submit}),l.jsxs("form",{onSubmit:D,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Lr,{className:"section-icon"}),"User Information"]}),l.jsx(le,{label:"Email Address",type:"email",value:a.email,onChange:q=>A("email",q),placeholder:"user@company.com",error:d.email,required:!0,disabled:y}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Display Name",type:"text",value:a.displayName,onChange:q=>A("displayName",q),placeholder:"John Doe",error:d.displayName,required:!0,disabled:y}),l.jsx(le,{label:t?"New Password (optional)":"Password",type:"password",value:a.password,onChange:q=>A("password",q),placeholder:t?"Leave empty to keep current password":"Enter secure password",error:d.password,required:!t,disabled:y})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sl,{className:"section-icon"}),"Role & Permissions"]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["User Role ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:a.role,onChange:q=>A("role",q.target.value),className:"role-select",disabled:y,children:[l.jsx("option",{value:"partial",children:"Partial Access User"}),l.jsx("option",{value:"admin",children:"Administrator"})]}),l.jsx("small",{className:"form-help-text",children:C?"Administrators have full access to all system features":"Partial access users can only access selected pages"})]}),!C&&l.jsx(Oi,{label:"Allowed Pages",options:c,value:a.allowedPaths,onChange:q=>A("allowedPaths",q),placeholder:"Select which pages this user can access...",error:d.allowedPaths,required:!C,disabled:C||y})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:y||_,children:y?t?"Updating User...":"Creating User...":t?"Update User":"Create User"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:W,disabled:y,children:"Cancel"})]})]})]})]})},kO=({label:n,options:e,value:t,onChange:a,placeholder:i="Select an option",error:c,required:d=!1,disabled:m=!1})=>{const[y,g]=M.useState(!1),_=()=>{g(!y)},E=x=>{a(x),g(!1)},b=()=>{if(!t)return i;const x=e.find(C=>C.value===t);return x?x.label:t};return l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:[n,d&&l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("div",{className:`select-input ${c?"error":""}`,children:[l.jsxs("div",{className:"select-trigger",onClick:_,style:{cursor:m?"not-allowed":"pointer"},children:[l.jsx("span",{className:"select-value",children:b()}),l.jsx(NO,{className:`select-arrow ${y?"open":""}`})]}),y&&l.jsx("div",{className:"select-dropdown",children:e.map(x=>l.jsx("div",{className:`select-option ${t===x.value?"selected":""}`,onClick:()=>E(x.value),children:l.jsx("span",{className:"option-label",children:x.label})},x.value))})]}),c&&l.jsx("p",{className:"error-message",children:c})]})},OO=()=>{const[n,e]=M.useState({serviceCode:"",serviceName:"",billingUnit:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),y=[{value:"ft",label:"Foot (ft)"},{value:"box",label:"Box"},{value:"fixed",label:"Fixed Price"}],g=(x,C)=>{e(A=>({...A,[x]:C})),t[x]&&a(A=>({...A,[x]:""})),d&&m("")},_=()=>{const x={};return n.serviceCode.trim()||(x.serviceCode="Service Code is required"),n.serviceName.trim()||(x.serviceName="Service Name is required"),n.billingUnit||(x.billingUnit="Billing Unit is required"),a(x),Object.keys(x).length===0},E=async x=>{if(x.preventDefault(),!!_()){c(!0),m(""),a({});try{const C=await rf.createService(n);console.log("Service created:",C),m("Service registered successfully!"),e({serviceCode:"",serviceName:"",billingUnit:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(C){a({submit:"Failed to register service: "+(C instanceof Error?C.message:String(C))})}finally{c(!1)}}},b=()=>{e({serviceCode:"",serviceName:"",billingUnit:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Service"}),l.jsx("p",{className:"page-subtitle",children:"Create a new service with billing configuration and pricing details"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:E,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(of,{className:"section-icon"}),"Service Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Service Code",type:"text",value:n.serviceCode,onChange:x=>g("serviceCode",x),placeholder:"SRV-001",error:t.serviceCode,required:!0,disabled:i}),l.jsx(le,{label:"Service Name",type:"text",value:n.serviceName,onChange:x=>g("serviceName",x),placeholder:"Enter descriptive service name",error:t.serviceName,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Billing Configuration"]}),l.jsx(kO,{label:"Billing Unit",options:y,value:n.billingUnit,onChange:x=>g("billingUnit",x),placeholder:"Select how this service is billed",error:t.billingUnit,required:!0,disabled:i}),l.jsx("small",{className:"form-help-text",children:"Choose the unit of measurement for billing this service to clients"})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Service...":"Save Service"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:b,disabled:i,children:"Cancel"})]})]})]})]})},MO=()=>{const[n]=py(),e=n.get("edit"),t=!!e,[a,i]=M.useState({name:"",state:"",city:"",address:"",personPhone:"",officePhone:"",projectNumber:"",projectContractDate:"",projectFinalDate:"",projectDeadline:""}),[c,d]=M.useState({}),[m,y]=M.useState(!1),[g,_]=M.useState(!1),[E,b]=M.useState("");M.useEffect(()=>{t&&e&&(_(!0),Sn.getClientById(e).then(D=>{D&&i({name:D.name||"",state:D.state||"",city:D.city||"",address:D.address||"",personPhone:D.personPhone||"",officePhone:D.officePhone||"",projectNumber:D.projectNumber||"",projectContractDate:D.projectContractDate||"",projectFinalDate:D.projectFinalDate||"",projectDeadline:D.projectDeadline||""})}).catch(D=>{console.error("Error loading client:",D),d({submit:"Erro ao carregar dados do cliente"})}).finally(()=>{_(!1)}))},[t,e]);const x=(D,W)=>{i(q=>({...q,[D]:W})),c[D]&&d(q=>({...q,[D]:""})),E&&b("")},C=()=>{const D={};return a.name.trim()||(D.name="Name is required"),a.state.trim()||(D.state="State is required"),a.city.trim()||(D.city="City is required"),a.address.trim()||(D.address="Address is required"),a.personPhone.trim()||(D.personPhone="Person Phone is required"),a.officePhone.trim()||(D.officePhone="Office Phone is required"),a.projectNumber.trim()||(D.projectNumber="Project Number is required"),a.projectContractDate||(D.projectContractDate="Contract Date is required"),a.projectFinalDate||(D.projectFinalDate="Final Date is required"),a.projectContractDate&&a.projectFinalDate&&new Date(a.projectFinalDate)<new Date(a.projectContractDate)&&(D.projectFinalDate="Final date cannot be before contract date"),d(D),Object.keys(D).length===0},A=async D=>{if(D.preventDefault(),!!C()){y(!0),b(""),d({});try{if(console.log("Client data to save:",a),t&&e)await Sn.updateClient(e,a),b("Cliente atualizado com sucesso!");else{const W=await Sn.createClient(a);console.log("New client:",W),b("Cliente registrado com sucesso!")}t||i({name:"",state:"",city:"",address:"",personPhone:"",officePhone:"",projectNumber:"",projectContractDate:"",projectFinalDate:"",projectDeadline:""}),d({}),setTimeout(()=>{b("")},6e3)}catch(W){d({submit:"Failed to register client: "+(W instanceof Error?W.message:String(W))})}finally{y(!1)}}},U=()=>{i({name:"",state:"",city:"",address:"",personPhone:"",officePhone:"",projectNumber:"",projectContractDate:new Date().toISOString().split("T")[0],projectFinalDate:new Date().toISOString().split("T")[0],projectDeadline:""}),d({}),b("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:t?"Edit Client":"Register Client"}),l.jsx("p",{className:"page-subtitle",children:t?"Update client information and project details":"Create a new client profile with project details and contact information"})]}),l.jsxs("div",{className:`form-container ${m||g?"form-loading":""}`,children:[g&&l.jsx("div",{className:"status-message info-message",children:"Carregando dados do cliente..."}),E&&l.jsx("div",{className:"status-message success-message",children:E}),c.submit&&l.jsx("div",{className:"status-message error-message",children:c.submit}),l.jsxs("form",{onSubmit:A,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Lr,{className:"section-icon"}),"Client Information"]}),l.jsx(le,{label:"Client Name",type:"text",value:a.name,onChange:D=>x("name",D),placeholder:"Enter the client's full name",error:c.name,required:!0,disabled:m})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sf,{className:"section-icon"}),"Location Details"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"State",type:"text",value:a.state,onChange:D=>x("state",D),placeholder:"e.g., California",error:c.state,required:!0,disabled:m}),l.jsx(le,{label:"City",type:"text",value:a.city,onChange:D=>x("city",D),placeholder:"e.g., Los Angeles",error:c.city,required:!0,disabled:m})]}),l.jsx(le,{label:"Address",type:"text",value:a.address,onChange:D=>x("address",D),placeholder:"Enter the complete address",error:c.address,required:!0,disabled:m})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(eA,{className:"section-icon"}),"Contact Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Personal Phone",type:"text",value:a.personPhone,onChange:D=>x("personPhone",D),placeholder:"(555) 123-4567",error:c.personPhone,required:!0,disabled:m}),l.jsx(le,{label:"Office Phone",type:"text",value:a.officePhone,onChange:D=>x("officePhone",D),placeholder:"(555) 987-6543",error:c.officePhone,required:!0,disabled:m})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(tA,{className:"section-icon"}),"Project Details"]}),l.jsx(le,{label:"Project Number",type:"text",value:a.projectNumber,onChange:D=>x("projectNumber",D),placeholder:"PRJ-2024-001",error:c.projectNumber,required:!0,disabled:m}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Contract Date",type:"date",value:a.projectContractDate,onChange:D=>x("projectContractDate",D),error:c.projectContractDate,required:!0,disabled:m}),l.jsx(le,{label:"Final Date",type:"date",value:a.projectFinalDate,onChange:D=>x("projectFinalDate",D),error:c.projectFinalDate,required:!0,disabled:m})]}),l.jsx(le,{label:"Project Deadline",type:"text",value:a.projectDeadline,onChange:D=>x("projectDeadline",D),placeholder:"e.g., 90 days, 6 months, December 2024",error:c.projectDeadline,disabled:m})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:m||g,children:m?t?"Updating Client...":"Saving Client...":t?"Update Client":"Save Client"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:U,disabled:m,children:"Cancel"})]})]})]})]})},LO=()=>{const[n]=py(),e=n.get("edit"),t=!!e,[a,i]=M.useState({name:"",address:"",itinNumber:"",driverLicenseNumber:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelationship:""}),[c,d]=M.useState({}),[m,y]=M.useState(!1),[g,_]=M.useState(!1),[E,b]=M.useState(""),[x,C]=M.useState(!1);M.useEffect(()=>{t&&e&&(_(!0),Ti.getEmployeeById(e).then(T=>{T&&i({name:T.name||"",address:T.address||"",itinNumber:T.itinNumber||"",driverLicenseNumber:T.driverLicenseNumber||"",phone:T.phone||"",emergencyContactName:T.emergencyContactName||"",emergencyContactPhone:T.emergencyContactPhone||"",emergencyContactRelationship:T.emergencyContactRelationship||""})}).catch(T=>{console.error("Error loading employee:",T),d({submit:"Erro ao carregar dados do funcionrio"})}).finally(()=>{_(!1)}))},[t,e]);const A=(T,I)=>{i(L=>({...L,[T]:I})),c[T]&&d(L=>({...L,[T]:""})),E&&b("")},U=T=>{const I=T.target.files?.[0];I&&i(L=>({...L,driverLicenseDocument:I})),c.driverLicenseDocument&&d(L=>({...L,driverLicenseDocument:""}))},D=T=>{T.preventDefault(),C(!0)},W=T=>{T.preventDefault(),C(!1)},q=T=>{T.preventDefault(),C(!1);const I=T.dataTransfer.files[0];I&&I.type==="application/pdf"&&i(L=>({...L,driverLicenseDocument:I}))},se=()=>{i(T=>({...T,driverLicenseDocument:void 0}))},G=()=>{const T={};return a.name.trim()||(T.name="Name is required"),a.address.trim()||(T.address="Address is required"),a.itinNumber.trim()||(T.itinNumber="ITIN Number is required"),a.driverLicenseNumber.trim()||(T.driverLicenseNumber="Driver License Number is required"),a.phone.trim()||(T.phone="Phone is required"),a.emergencyContactName.trim()||(T.emergencyContactName="Emergency Contact Name is required"),a.emergencyContactPhone.trim()||(T.emergencyContactPhone="Emergency Contact Phone is required"),a.emergencyContactRelationship.trim()||(T.emergencyContactRelationship="Relationship is required"),d(T),Object.keys(T).length===0},he=async T=>{if(T.preventDefault(),!!G()){y(!0),b(""),d({});try{console.log("Employee data to save:",a),t&&e?(await Ti.updateEmployee(e,a),b("Employee updated successfully!")):(await Ti.createEmployee(a),b("Employee registered successfully!"),i({name:"",address:"",itinNumber:"",driverLicenseNumber:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelationship:""}),d({})),setTimeout(()=>{b("")},3e3)}catch(I){d({submit:`Failed to ${t?"update":"register"} employee: `+(I instanceof Error?I.message:String(I))})}finally{y(!1)}}},O=()=>{i({name:"",address:"",itinNumber:"",driverLicenseNumber:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelationship:""}),d({}),b(""),_(!1)};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:t?"Edit Employee":"Register Employee"}),l.jsx("p",{className:"page-subtitle",children:t?"Update employee profile with personal details and emergency contact information":"Create a new employee profile with personal details and emergency contact information"})]}),l.jsxs("div",{className:`form-container ${m&&!g?"form-loading":""}`,children:[g&&l.jsx("div",{className:"status-message info-message",children:"Loading employee data..."}),E&&l.jsx("div",{className:"status-message success-message",children:E}),c.submit&&l.jsx("div",{className:"status-message error-message",children:c.submit}),l.jsxs("form",{onSubmit:he,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Lr,{className:"section-icon"}),"Personal Information"]}),l.jsx(le,{label:"Full Name",type:"text",value:a.name,onChange:T=>A("name",T),placeholder:"Enter employee's full name",error:c.name,required:!0,disabled:m}),l.jsx(le,{label:"Address",type:"text",value:a.address,onChange:T=>A("address",T),placeholder:"Enter complete address",error:c.address,required:!0,disabled:m}),l.jsx(le,{label:"Phone",type:"text",value:a.phone,onChange:T=>A("phone",T),placeholder:"(555) 123-4567",error:c.phone,required:!0,disabled:m})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(al,{className:"section-icon"}),"Documentation"]}),l.jsx(le,{label:"ITIN Number",type:"text",value:a.itinNumber,onChange:T=>A("itinNumber",T),placeholder:"XXX-XX-XXXX",error:c.itinNumber,required:!0,disabled:m}),l.jsx(le,{label:"Driver License Number",type:"text",value:a.driverLicenseNumber,onChange:T=>A("driverLicenseNumber",T),placeholder:"Enter driver license number",error:c.driverLicenseNumber,required:!0,disabled:m}),l.jsxs("div",{className:"file-upload-container",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Driver License Document (PDF)"," ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("label",{className:`file-upload-label ${x?"dragover":""}`,onDragOver:D,onDragLeave:W,onDrop:q,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px 16px",border:"3px dashed #0ea5e9",borderRadius:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",minHeight:"120px",width:"100%",boxSizing:"border-box"},children:[l.jsx("div",{style:{fontSize:"32px",marginBottom:"8px",opacity:.8},children:""}),l.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:x?"#059669":"#0ea5e9",textAlign:"center"},children:x?"Drop file here to upload":"Click to upload driver license document"}),l.jsx("input",{type:"file",accept:".pdf",onChange:U,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1},disabled:m})]})]}),a.driverLicenseDocument&&l.jsxs("div",{className:"file-upload-name",children:[l.jsx("span",{children:a.driverLicenseDocument.name}),l.jsx("button",{type:"button",onClick:se,className:"file-remove-btn",disabled:m,children:""})]}),c.driverLicenseDocument&&l.jsx("span",{className:"error-message",children:c.driverLicenseDocument})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(SO,{className:"section-icon"}),"Emergency Contact"]}),l.jsx(le,{label:"Emergency Contact Name",type:"text",value:a.emergencyContactName,onChange:T=>A("emergencyContactName",T),placeholder:"Enter emergency contact's full name",error:c.emergencyContactName,required:!0,disabled:m}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Emergency Contact Phone",type:"text",value:a.emergencyContactPhone,onChange:T=>A("emergencyContactPhone",T),placeholder:"(555) 987-6543",error:c.emergencyContactPhone,required:!0,disabled:m}),l.jsx(le,{label:"Relationship",type:"text",value:a.emergencyContactRelationship,onChange:T=>A("emergencyContactRelationship",T),placeholder:"e.g., Spouse, Parent, Sibling",error:c.emergencyContactRelationship,required:!0,disabled:m})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:m||g,children:m?t?"Updating Employee...":"Saving Employee...":t?"Update Employee":"Save Employee"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:O,disabled:m,children:"Cancel"})]})]})]})]})},VO=()=>{const[n,e]=M.useState({companyName:"",contactPerson:"",email:"",phone:"",state:"",city:"",address:"",itinNumber:"",services:[],licenseNumber:"",insuranceExpiry:"",insuranceDocuments:[],certifications:[],hourlyRate:void 0,paymentTerms:"30",availability:"available",notes:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),[y,g]=M.useState(!1),_=[{value:"excavation",label:"Excavation"},{value:"trenching",label:"Trenching"},{value:"underground_utilities",label:"Underground Utilities"},{value:"concrete_work",label:"Concrete Work"},{value:"asphalt_paving",label:"Asphalt Paving"},{value:"landscaping",label:"Landscaping"},{value:"drainage",label:"Drainage Systems"},{value:"electrical",label:"Electrical Work"},{value:"plumbing",label:"Plumbing"},{value:"surveying",label:"Surveying"},{value:"equipment_rental",label:"Equipment Rental"},{value:"traffic_control",label:"Traffic Control"}],E=[{value:"osha_10",label:"OSHA 10-Hour"},{value:"osha_30",label:"OSHA 30-Hour"},{value:"confined_space",label:"Confined Space Entry"},{value:"hazmat",label:"HAZMAT Certification"},{value:"crane_operator",label:"Crane Operator"},{value:"welding",label:"Welding Certification"},{value:"electrical",label:"Electrical License"},{value:"plumbing",label:"Plumbing License"},{value:"general_contractor",label:"General Contractor License"}],b=(G,he)=>{e(O=>({...O,[G]:he})),t[G]&&a(O=>({...O,[G]:""})),d&&m("")},x=G=>{const he=Array.from(G.target.files||[]);he.length>0&&e(O=>({...O,insuranceDocuments:[...O.insuranceDocuments||[],...he]}))},C=G=>{G.preventDefault(),g(!0)},A=G=>{G.preventDefault(),g(!1)},U=G=>{G.preventDefault(),g(!1);const he=Array.from(G.dataTransfer.files).filter(O=>O.type==="application/pdf");he.length>0&&e(O=>({...O,insuranceDocuments:[...O.insuranceDocuments||[],...he]}))},D=G=>{e(he=>({...he,insuranceDocuments:he.insuranceDocuments?.filter((O,T)=>T!==G)||[]}))},W=()=>{const G={};return n.companyName.trim()||(G.companyName="Company name is required"),n.contactPerson.trim()||(G.contactPerson="Contact person is required"),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(G.email="Please enter a valid email"):G.email="Email is required",n.phone.trim()||(G.phone="Phone number is required"),n.state.trim()||(G.state="State is required"),n.city.trim()||(G.city="City is required"),n.address.trim()||(G.address="Address is required"),n.itinNumber.trim()||(G.itinNumber="ITIN Number is required"),n.services.length===0&&(G.services="Please select at least one service"),n.paymentTerms||(G.paymentTerms="Payment terms are required"),n.hourlyRate!==void 0&&n.hourlyRate<0&&(G.hourlyRate="Hourly rate cannot be negative"),(!n.insuranceExpiry||!n.insuranceExpiry.trim())&&(G.insuranceExpiry="Insurance expiry date is required"),a(G),Object.keys(G).length===0},q=async G=>{if(G.preventDefault(),!!W()){c(!0),m(""),a({});try{await af.createSubcontractor(n),m("Subcontractor registered successfully!"),e({companyName:"",contactPerson:"",email:"",phone:"",state:"",city:"",address:"",itinNumber:"",services:[],licenseNumber:"",insuranceExpiry:"",insuranceDocuments:[],certifications:[],hourlyRate:void 0,paymentTerms:"30",availability:"available",notes:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(he){a({submit:"Failed to register subcontractor: "+(he instanceof Error?he.message:String(he))})}finally{c(!1)}}},se=()=>{e({companyName:"",contactPerson:"",email:"",phone:"",state:"",city:"",address:"",itinNumber:"",services:[],licenseNumber:"",insuranceExpiry:"",insuranceDocuments:[],certifications:[],hourlyRate:void 0,paymentTerms:"30",availability:"available",notes:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Subcontractor"}),l.jsx("p",{className:"page-subtitle",children:"Add a new subcontractor to the system with their services, certifications, and contact information"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:q,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(JS,{className:"section-icon"}),"Company Information"]}),l.jsx(le,{label:"Company Name",type:"text",value:n.companyName,onChange:G=>b("companyName",G),placeholder:"Enter the company name",error:t.companyName,required:!0,disabled:i}),l.jsx(le,{label:"Contact Person",type:"text",value:n.contactPerson,onChange:G=>b("contactPerson",G),placeholder:"Enter the main contact person",error:t.contactPerson,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(eA,{className:"section-icon"}),"Contact Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Email",type:"email",value:n.email,onChange:G=>b("email",G),placeholder:"company@example.com",error:t.email,required:!0,disabled:i}),l.jsx(le,{label:"Phone",type:"text",value:n.phone,onChange:G=>b("phone",G),placeholder:"(555) 123-4567",error:t.phone,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sf,{className:"section-icon"}),"Location Details"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"State",type:"text",value:n.state,onChange:G=>b("state",G),placeholder:"e.g., California",error:t.state,required:!0,disabled:i}),l.jsx(le,{label:"City",type:"text",value:n.city,onChange:G=>b("city",G),placeholder:"e.g., Los Angeles",error:t.city,required:!0,disabled:i})]}),l.jsx(le,{label:"Address",type:"text",value:n.address,onChange:G=>b("address",G),placeholder:"Enter the complete address",error:t.address,required:!0,disabled:i}),l.jsx(le,{label:"ITIN Number",type:"text",value:n.itinNumber,onChange:G=>b("itinNumber",G),placeholder:"XXX-XX-XXXX",error:t.itinNumber,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(tA,{className:"section-icon"}),"Services & Capabilities"]}),l.jsx(Oi,{label:"Services Offered",options:_,value:n.services,onChange:G=>b("services",G),placeholder:"Select the services this subcontractor offers...",error:t.services,required:!0,disabled:i}),l.jsx(Oi,{label:"Certifications",options:E,value:n.certifications||[],onChange:G=>b("certifications",G),placeholder:"Select relevant certifications...",disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sl,{className:"section-icon"}),"Business Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"License Number",type:"text",value:n.licenseNumber||"",onChange:G=>b("licenseNumber",G),placeholder:"Enter license number if applicable",disabled:i}),l.jsx(le,{label:"Insurance Expiry Date",type:"date",value:n.insuranceExpiry||"",onChange:G=>b("insuranceExpiry",G),error:t.insuranceExpiry,required:!0,disabled:i})]}),l.jsxs("div",{className:"file-upload-container",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Insurance Documents (PDF) ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("label",{className:`file-upload-label ${y?"dragover":""}`,onDragOver:C,onDragLeave:A,onDrop:U,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px 16px",border:"3px dashed #0ea5e9",borderRadius:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",minHeight:"120px",width:"100%",boxSizing:"border-box"},children:[l.jsx("div",{style:{fontSize:"32px",marginBottom:"8px",opacity:.8},children:""}),l.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:y?"#059669":"#0ea5e9",textAlign:"center"},children:y?"Drop files here to upload":"Click to upload insurance documents"}),l.jsx("input",{type:"file",accept:".pdf",multiple:!0,onChange:x,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",zIndex:1},disabled:i})]})]}),n.insuranceDocuments&&n.insuranceDocuments.length>0&&l.jsx("div",{className:"file-upload-list",children:n.insuranceDocuments.map((G,he)=>l.jsxs("div",{className:"file-upload-name",children:[l.jsx("span",{children:G.name}),l.jsx("button",{type:"button",onClick:()=>D(he),className:"file-remove-btn",disabled:i,children:""})]},he))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Hourly Rate",type:"text",value:n.hourlyRate?.toString()||"",onChange:G=>b("hourlyRate",G?parseFloat(G):0),placeholder:"Enter hourly rate (optional)",error:t.hourlyRate,disabled:i}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Payment Terms ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.paymentTerms,onChange:G=>b("paymentTerms",G.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"7",children:"7 days after execution"}),l.jsx("option",{value:"15",children:"15 days after execution"}),l.jsx("option",{value:"30",children:"30 days after execution"})]}),t.paymentTerms&&l.jsx("span",{className:"error-message",children:t.paymentTerms})]})]}),l.jsx("div",{className:"form-row",children:l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Availability ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.availability,onChange:G=>b("availability",G.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"available",children:"Available"}),l.jsx("option",{value:"busy",children:"Busy"}),l.jsx("option",{value:"unavailable",children:"Unavailable"})]})]})})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Additional Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Notes"}),l.jsx("textarea",{value:n.notes||"",onChange:G=>b("notes",G.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Subcontractor...":"Save Subcontractor"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:se,disabled:i,children:"Cancel"})]})]})]})]})},UO=()=>{const[n,e]=M.useState({serviceName:"",clientId:"",clientName:"",subcontractorId:"",subcontractorName:"",projectNumber:"",contractNumber:"",startDate:"",endDate:"",estimatedDuration:"",status:"pending",serviceType:"",description:"",location:{address:"",city:"",state:"",zipCode:""},budget:{estimatedCost:0,actualCost:0,currency:"USD"},requirements:[],deliverables:[],notes:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),y=[{value:"excavation",label:"Excavation"},{value:"trenching",label:"Trenching"},{value:"underground_utilities",label:"Underground Utilities"},{value:"concrete_work",label:"Concrete Work"},{value:"asphalt_paving",label:"Asphalt Paving"},{value:"landscaping",label:"Landscaping"},{value:"drainage",label:"Drainage Systems"},{value:"electrical",label:"Electrical Work"},{value:"plumbing",label:"Plumbing"},{value:"surveying",label:"Surveying"},{value:"equipment_rental",label:"Equipment Rental"},{value:"traffic_control",label:"Traffic Control"}],g=[{value:"permits",label:"Permits Required"},{value:"safety_equipment",label:"Safety Equipment"},{value:"environmental_clearance",label:"Environmental Clearance"},{value:"traffic_control",label:"Traffic Control Plan"},{value:"utility_marking",label:"Utility Marking"},{value:"soil_testing",label:"Soil Testing"},{value:"surveying",label:"Surveying Required"},{value:"inspections",label:"Regular Inspections"},{value:"insurance",label:"Insurance Coverage"},{value:"bonding",label:"Performance Bond"}],_=[{value:"excavation_complete",label:"Excavation Complete"},{value:"utilities_installed",label:"Utilities Installed"},{value:"backfill_complete",label:"Backfill Complete"},{value:"paving_complete",label:"Paving Complete"},{value:"landscaping_complete",label:"Landscaping Complete"},{value:"final_inspection",label:"Final Inspection"},{value:"as_built_drawings",label:"As-Built Drawings"},{value:"warranty_documentation",label:"Warranty Documentation"},{value:"cleanup_complete",label:"Site Cleanup Complete"},{value:"final_report",label:"Final Project Report"}],E=(D,W)=>{e(q=>({...q,[D]:W})),t[D]&&a(q=>({...q,[D]:""})),d&&m("")},b=(D,W)=>{e(q=>({...q,location:{...q.location,[D]:W}})),t[D]&&a(q=>({...q,[D]:""}))},x=(D,W)=>{e(q=>({...q,budget:{...q.budget,[D]:W}})),t[D]&&a(q=>({...q,[D]:""}))},C=()=>{const D={};return n.serviceName.trim()||(D.serviceName="Service name is required"),n.clientId.trim()||(D.clientId="Client ID is required"),n.clientName.trim()||(D.clientName="Client name is required"),n.projectNumber.trim()||(D.projectNumber="Project number is required"),n.contractNumber.trim()||(D.contractNumber="Contract number is required"),n.startDate||(D.startDate="Start date is required"),n.endDate||(D.endDate="End date is required"),n.startDate&&n.endDate&&new Date(n.endDate)<new Date(n.startDate)&&(D.endDate="End date cannot be before start date"),n.estimatedDuration.trim()||(D.estimatedDuration="Estimated duration is required"),n.serviceType.trim()||(D.serviceType="Service type is required"),n.description.trim()||(D.description="Description is required"),n.location.address.trim()||(D.address="Address is required"),n.location.city.trim()||(D.city="City is required"),n.location.state.trim()||(D.state="State is required"),n.budget.estimatedCost<=0&&(D.estimatedCost="Estimated cost must be greater than 0"),n.budget.currency.trim()||(D.currency="Currency is required"),a(D),Object.keys(D).length===0},A=async D=>{if(D.preventDefault(),!!C()){c(!0),m(""),a({});try{console.log("Contract service data to save:",n);const W=await zt.createContractService(n);console.log("New contract service:",W),m("Contract service registered successfully!"),e({serviceName:"",clientId:"",clientName:"",subcontractorId:"",subcontractorName:"",projectNumber:"",contractNumber:"",startDate:"",endDate:"",estimatedDuration:"",status:"pending",serviceType:"",description:"",location:{address:"",city:"",state:"",zipCode:""},budget:{estimatedCost:0,actualCost:0,currency:"USD"},requirements:[],deliverables:[],notes:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(W){a({submit:"Failed to register contract service: "+(W instanceof Error?W.message:String(W))})}finally{c(!1)}}},U=()=>{e({serviceName:"",clientId:"",clientName:"",subcontractorId:"",subcontractorName:"",projectNumber:"",contractNumber:"",startDate:"",endDate:"",estimatedDuration:"",status:"pending",serviceType:"",description:"",location:{address:"",city:"",state:"",zipCode:""},budget:{estimatedCost:0,actualCost:0,currency:"USD"},requirements:[],deliverables:[],notes:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Contract Service"}),l.jsx("p",{className:"page-subtitle",children:"Create a new contract service with project details, budget, and requirements"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:A,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(al,{className:"section-icon"}),"Service Information"]}),l.jsx(le,{label:"Service Name",type:"text",value:n.serviceName,onChange:D=>E("serviceName",D),placeholder:"Enter the service name",error:t.serviceName,required:!0,disabled:i}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Client ID",type:"text",value:n.clientId,onChange:D=>E("clientId",D),placeholder:"Enter client ID",error:t.clientId,required:!0,disabled:i}),l.jsx(le,{label:"Client Name",type:"text",value:n.clientName,onChange:D=>E("clientName",D),placeholder:"Enter client name",error:t.clientName,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Project Number",type:"text",value:n.projectNumber,onChange:D=>E("projectNumber",D),placeholder:"PRJ-2024-001",error:t.projectNumber,required:!0,disabled:i}),l.jsx(le,{label:"Contract Number",type:"text",value:n.contractNumber,onChange:D=>E("contractNumber",D),placeholder:"CNT-2024-001",error:t.contractNumber,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(fu,{className:"section-icon"}),"Project Timeline"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Start Date",type:"date",value:n.startDate,onChange:D=>E("startDate",D),error:t.startDate,required:!0,disabled:i}),l.jsx(le,{label:"End Date",type:"date",value:n.endDate,onChange:D=>E("endDate",D),error:t.endDate,required:!0,disabled:i})]}),l.jsx(le,{label:"Estimated Duration",type:"text",value:n.estimatedDuration,onChange:D=>E("estimatedDuration",D),placeholder:"e.g., 30 days, 3 months, 6 weeks",error:t.estimatedDuration,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(kx,{className:"section-icon"}),"Service Details"]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Service Type ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.serviceType,onChange:D=>E("serviceType",D.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"",children:"Select service type"}),y.map(D=>l.jsx("option",{value:D.value,children:D.label},D.value))]}),t.serviceType&&l.jsx("small",{className:"form-error",children:t.serviceType})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Description ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("textarea",{value:n.description,onChange:D=>E("description",D.target.value),placeholder:"Enter detailed service description...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i}),t.description&&l.jsx("small",{className:"form-error",children:t.description})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sf,{className:"section-icon"}),"Location Information"]}),l.jsx(le,{label:"Address",type:"text",value:n.location.address,onChange:D=>b("address",D),placeholder:"Enter the complete address",error:t.address,required:!0,disabled:i}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"City",type:"text",value:n.location.city,onChange:D=>b("city",D),placeholder:"e.g., Los Angeles",error:t.city,required:!0,disabled:i}),l.jsx(le,{label:"State",type:"text",value:n.location.state,onChange:D=>b("state",D),placeholder:"e.g., California",error:t.state,required:!0,disabled:i})]}),l.jsx(le,{label:"ZIP Code",type:"text",value:n.location.zipCode||"",onChange:D=>b("zipCode",D),placeholder:"e.g., 90210",disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Budget Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Estimated Cost",type:"text",value:n.budget.estimatedCost.toString(),onChange:D=>x("estimatedCost",D?parseFloat(D):0),placeholder:"Enter estimated cost",error:t.estimatedCost,required:!0,disabled:i}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Currency ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.budget.currency,onChange:D=>x("currency",D.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"USD",children:"USD - US Dollar"}),l.jsx("option",{value:"EUR",children:"EUR - Euro"}),l.jsx("option",{value:"BRL",children:"BRL - Brazilian Real"}),l.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"})]}),t.currency&&l.jsx("small",{className:"form-error",children:t.currency})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(kx,{className:"section-icon"}),"Requirements & Deliverables"]}),l.jsx(Oi,{label:"Requirements",options:g,value:n.requirements,onChange:D=>E("requirements",D),placeholder:"Select project requirements...",disabled:i}),l.jsx(Oi,{label:"Deliverables",options:_,value:n.deliverables,onChange:D=>E("deliverables",D),placeholder:"Select expected deliverables...",disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(al,{className:"section-icon"}),"Additional Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Notes"}),l.jsx("textarea",{value:n.notes||"",onChange:D=>E("notes",D.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Contract Service...":"Save Contract Service"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:U,disabled:i,children:"Cancel"})]})]})]})]})},qO=()=>{const[n,e]=M.useState({projectId:"",projectName:"",clientId:"",clientName:"",financingType:"loan",lenderName:"",lenderContact:"",lenderPhone:"",lenderEmail:"",loanAmount:0,interestRate:0,termMonths:0,monthlyPayment:0,startDate:"",maturityDate:"",status:"pending",collateral:[],requirements:[],notes:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),y=[{value:"loan",label:"Business Loan"},{value:"credit_line",label:"Credit Line"},{value:"equipment_financing",label:"Equipment Financing"},{value:"working_capital",label:"Working Capital"},{value:"construction_loan",label:"Construction Loan"}],g=[{value:"real_estate",label:"Real Estate"},{value:"equipment",label:"Equipment"},{value:"vehicles",label:"Vehicles"},{value:"accounts_receivable",label:"Accounts Receivable"},{value:"inventory",label:"Inventory"},{value:"personal_guarantee",label:"Personal Guarantee"},{value:"cash_collateral",label:"Cash Collateral"},{value:"securities",label:"Securities"}],_=[{value:"financial_statements",label:"Financial Statements"},{value:"tax_returns",label:"Tax Returns"},{value:"business_plan",label:"Business Plan"},{value:"credit_report",label:"Credit Report"},{value:"insurance",label:"Insurance Documentation"},{value:"legal_documents",label:"Legal Documents"},{value:"appraisal",label:"Property/Equipment Appraisal"},{value:"environmental_assessment",label:"Environmental Assessment"}],E=(A,U)=>{e(D=>({...D,[A]:U})),t[A]&&a(D=>({...D,[A]:""})),d&&m("")},b=()=>{const A={};return n.projectId.trim()||(A.projectId="Project ID is required"),n.projectName.trim()||(A.projectName="Project name is required"),n.clientId.trim()||(A.clientId="Client ID is required"),n.clientName.trim()||(A.clientName="Client name is required"),n.lenderName.trim()||(A.lenderName="Lender name is required"),n.lenderContact.trim()||(A.lenderContact="Lender contact is required"),n.lenderPhone.trim()||(A.lenderPhone="Lender phone is required"),n.lenderEmail.trim()?/\S+@\S+\.\S+/.test(n.lenderEmail)||(A.lenderEmail="Please enter a valid email"):A.lenderEmail="Lender email is required",n.loanAmount<=0&&(A.loanAmount="Loan amount must be greater than 0"),n.interestRate<0&&(A.interestRate="Interest rate cannot be negative"),n.termMonths<=0&&(A.termMonths="Term must be greater than 0"),n.monthlyPayment<=0&&(A.monthlyPayment="Monthly payment must be greater than 0"),n.startDate||(A.startDate="Start date is required"),n.maturityDate||(A.maturityDate="Maturity date is required"),n.startDate&&n.maturityDate&&new Date(n.maturityDate)<=new Date(n.startDate)&&(A.maturityDate="Maturity date must be after start date"),a(A),Object.keys(A).length===0},x=async A=>{if(A.preventDefault(),!!b()){c(!0),m(""),a({});try{await _y.createFinancing(n),m("Financing registered successfully!"),e({projectId:"",projectName:"",clientId:"",clientName:"",financingType:"loan",lenderName:"",lenderContact:"",lenderPhone:"",lenderEmail:"",loanAmount:0,interestRate:0,termMonths:0,monthlyPayment:0,startDate:"",maturityDate:"",status:"pending",collateral:[],requirements:[],notes:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(U){a({submit:"Failed to register financing: "+(U instanceof Error?U.message:String(U))})}finally{c(!1)}}},C=()=>{e({projectId:"",projectName:"",clientId:"",clientName:"",financingType:"loan",lenderName:"",lenderContact:"",lenderPhone:"",lenderEmail:"",loanAmount:0,interestRate:0,termMonths:0,monthlyPayment:0,startDate:"",maturityDate:"",status:"pending",collateral:[],requirements:[],notes:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Financing"}),l.jsx("p",{className:"page-subtitle",children:"Create a new financing record with loan details, terms, and requirements"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:x,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(al,{className:"section-icon"}),"Project Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Project ID",type:"text",value:n.projectId,onChange:A=>E("projectId",A),placeholder:"PRJ-2024-001",error:t.projectId,required:!0,disabled:i}),l.jsx(le,{label:"Project Name",type:"text",value:n.projectName,onChange:A=>E("projectName",A),placeholder:"Enter project name",error:t.projectName,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Client ID",type:"text",value:n.clientId,onChange:A=>E("clientId",A),placeholder:"CLI-2024-001",error:t.clientId,required:!0,disabled:i}),l.jsx(le,{label:"Client Name",type:"text",value:n.clientName,onChange:A=>E("clientName",A),placeholder:"Enter client name",error:t.clientName,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Ch,{className:"section-icon"}),"Financing Details"]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Financing Type ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("select",{value:n.financingType,onChange:A=>E("financingType",A.target.value),className:"role-select",disabled:i,children:y.map(A=>l.jsx("option",{value:A.value,children:A.label},A.value))})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Loan Amount",type:"text",value:n.loanAmount.toString(),onChange:A=>E("loanAmount",A?parseFloat(A):0),placeholder:"Enter loan amount",error:t.loanAmount,required:!0,disabled:i}),l.jsx(le,{label:"Interest Rate (%)",type:"text",value:n.interestRate.toString(),onChange:A=>E("interestRate",A?parseFloat(A):0),placeholder:"Enter interest rate",error:t.interestRate,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Term (Months)",type:"text",value:n.termMonths.toString(),onChange:A=>E("termMonths",A?parseInt(A):0),placeholder:"Enter term in months",error:t.termMonths,required:!0,disabled:i}),l.jsx(le,{label:"Monthly Payment",type:"text",value:n.monthlyPayment.toString(),onChange:A=>E("monthlyPayment",A?parseFloat(A):0),placeholder:"Enter monthly payment",error:t.monthlyPayment,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Lr,{className:"section-icon"}),"Lender Information"]}),l.jsx(le,{label:"Lender Name",type:"text",value:n.lenderName,onChange:A=>E("lenderName",A),placeholder:"Enter lender name",error:t.lenderName,required:!0,disabled:i}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Lender Contact",type:"text",value:n.lenderContact,onChange:A=>E("lenderContact",A),placeholder:"Enter contact person",error:t.lenderContact,required:!0,disabled:i}),l.jsx(le,{label:"Lender Phone",type:"text",value:n.lenderPhone,onChange:A=>E("lenderPhone",A),placeholder:"(555) 123-4567",error:t.lenderPhone,required:!0,disabled:i})]}),l.jsx(le,{label:"Lender Email",type:"email",value:n.lenderEmail,onChange:A=>E("lenderEmail",A),placeholder:"lender@example.com",error:t.lenderEmail,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(fu,{className:"section-icon"}),"Timeline"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Start Date",type:"date",value:n.startDate,onChange:A=>E("startDate",A),error:t.startDate,required:!0,disabled:i}),l.jsx(le,{label:"Maturity Date",type:"date",value:n.maturityDate,onChange:A=>E("maturityDate",A),error:t.maturityDate,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sl,{className:"section-icon"}),"Collateral & Requirements"]}),l.jsx(Oi,{label:"Collateral",options:g,value:n.collateral,onChange:A=>E("collateral",A),placeholder:"Select collateral types...",disabled:i}),l.jsx(Oi,{label:"Requirements",options:_,value:n.requirements,onChange:A=>E("requirements",A),placeholder:"Select required documents...",disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Additional Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Notes"}),l.jsx("textarea",{value:n.notes||"",onChange:A=>E("notes",A.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Financing...":"Save Financing"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:C,disabled:i,children:"Cancel"})]})]})]})]})},BO=()=>{const[n,e]=M.useState({vehicleType:"truck",make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",licensePlateRenewalDate:"",color:"",fuelType:"diesel",engineSize:"",transmission:"manual",mileage:0,monthlyMileageHistory:[],financingStatus:"not_financed",dotNumber:"",dotRenewalDate:"",purchaseDate:"",purchasePrice:0,currentValue:0,insuranceProvider:"",insurancePolicyNumber:"",insuranceExpiry:"",registrationExpiry:"",maintenanceSchedule:"monthly",lastMaintenanceDate:"",nextMaintenanceDate:"",status:"active",assignedTo:"",location:"",notes:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),y=(b,x)=>{e(C=>({...C,[b]:x})),t[b]&&a(C=>({...C,[b]:""})),d&&m("")},g=()=>{const b={};return n.make.trim()||(b.make="Make is required"),n.model.trim()||(b.model="Model is required"),(n.year<1900||n.year>new Date().getFullYear()+1)&&(b.year="Please enter a valid year"),n.vin.trim()||(b.vin="VIN is required"),n.licensePlate.trim()||(b.licensePlate="License plate is required"),n.licensePlateRenewalDate||(b.licensePlateRenewalDate="License plate renewal date is required"),n.color.trim()||(b.color="Color is required"),n.engineSize.trim()||(b.engineSize="Engine size is required"),n.mileage<0&&(b.mileage="Mileage cannot be negative"),n.purchaseDate||(b.purchaseDate="Purchase date is required"),n.purchasePrice<=0&&(b.purchasePrice="Purchase price must be greater than 0"),n.currentValue<0&&(b.currentValue="Current value cannot be negative"),n.insuranceProvider.trim()||(b.insuranceProvider="Insurance provider is required"),n.insurancePolicyNumber.trim()||(b.insurancePolicyNumber="Insurance policy number is required"),n.insuranceExpiry||(b.insuranceExpiry="Insurance expiry date is required"),n.registrationExpiry||(b.registrationExpiry="Registration expiry date is required"),n.location.trim()||(b.location="Location is required"),n.dotNumber.trim()||(b.dotNumber="DOT Number is required"),n.dotRenewalDate||(b.dotRenewalDate="DOT renewal date is required"),a(b),Object.keys(b).length===0},_=async b=>{if(b.preventDefault(),!!g()){c(!0),m(""),a({});try{await ws.createVehicle(n),m("Vehicle registered successfully!"),e({vehicleType:"truck",make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",licensePlateRenewalDate:"",color:"",fuelType:"diesel",engineSize:"",transmission:"manual",mileage:0,monthlyMileageHistory:[],financingStatus:"not_financed",dotNumber:"",dotRenewalDate:"",purchaseDate:"",purchasePrice:0,currentValue:0,insuranceProvider:"",insurancePolicyNumber:"",insuranceExpiry:"",registrationExpiry:"",maintenanceSchedule:"monthly",lastMaintenanceDate:"",nextMaintenanceDate:"",status:"active",assignedTo:"",location:"",notes:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(x){a({submit:"Failed to register vehicle: "+(x instanceof Error?x.message:String(x))})}finally{c(!1)}}},E=()=>{e({vehicleType:"truck",make:"",model:"",year:new Date().getFullYear(),vin:"",licensePlate:"",licensePlateRenewalDate:"",color:"",fuelType:"diesel",engineSize:"",transmission:"manual",mileage:0,monthlyMileageHistory:[],financingStatus:"not_financed",dotNumber:"",dotRenewalDate:"",purchaseDate:"",purchasePrice:0,currentValue:0,insuranceProvider:"",insurancePolicyNumber:"",insuranceExpiry:"",registrationExpiry:"",maintenanceSchedule:"monthly",lastMaintenanceDate:"",nextMaintenanceDate:"",status:"active",assignedTo:"",location:"",notes:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Vehicle"}),l.jsx("p",{className:"page-subtitle",children:"Add a new vehicle to the fleet with specifications, insurance, and maintenance information"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:_,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(IO,{className:"section-icon"}),"Vehicle Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Vehicle Type ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.vehicleType,onChange:b=>y("vehicleType",b.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"truck",children:"Truck"}),l.jsx("option",{value:"excavator",children:"Excavator"}),l.jsx("option",{value:"bulldozer",children:"Bulldozer"}),l.jsx("option",{value:"crane",children:"Crane"}),l.jsx("option",{value:"loader",children:"Loader"}),l.jsx("option",{value:"compactor",children:"Compactor"}),l.jsx("option",{value:"grader",children:"Grader"}),l.jsx("option",{value:"dump_truck",children:"Dump Truck"}),l.jsx("option",{value:"concrete_mixer",children:"Concrete Mixer"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Make",type:"text",value:n.make,onChange:b=>y("make",b),placeholder:"e.g., Caterpillar, John Deere",error:t.make,required:!0,disabled:i}),l.jsx(le,{label:"Model",type:"text",value:n.model,onChange:b=>y("model",b),placeholder:"e.g., 320D, 950M",error:t.model,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Year",type:"text",value:n.year.toString(),onChange:b=>y("year",b?parseInt(b):new Date().getFullYear()),placeholder:"2024",error:t.year,required:!0,disabled:i}),l.jsx(le,{label:"Color",type:"text",value:n.color,onChange:b=>y("color",b),placeholder:"e.g., Yellow, White",error:t.color,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"VIN",type:"text",value:n.vin,onChange:b=>y("vin",b),placeholder:"Enter VIN number",error:t.vin,required:!0,disabled:i}),l.jsx(le,{label:"License Plate",type:"text",value:n.licensePlate,onChange:b=>y("licensePlate",b),placeholder:"Enter license plate",error:t.licensePlate,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"License Plate Renewal Date",type:"date",value:n.licensePlateRenewalDate,onChange:b=>y("licensePlateRenewalDate",b),error:t.licensePlateRenewalDate,required:!0,disabled:i}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Financing Status ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.financingStatus,onChange:b=>y("financingStatus",b.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"not_financed",children:"Not Financed"}),l.jsx("option",{value:"financed",children:"Financed"})]}),t.financingStatus&&l.jsx("span",{className:"error-message",children:t.financingStatus})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"DOT Number",type:"text",value:n.dotNumber,onChange:b=>y("dotNumber",b),placeholder:"Enter DOT number",error:t.dotNumber,required:!0,disabled:i}),l.jsx(le,{label:"DOT Renewal Date",type:"date",value:n.dotRenewalDate,onChange:b=>y("dotRenewalDate",b),error:t.dotRenewalDate,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(of,{className:"section-icon"}),"Technical Specifications"]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Fuel Type ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.fuelType,onChange:b=>y("fuelType",b.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"diesel",children:"Diesel"}),l.jsx("option",{value:"gasoline",children:"Gasoline"}),l.jsx("option",{value:"electric",children:"Electric"}),l.jsx("option",{value:"hybrid",children:"Hybrid"}),l.jsx("option",{value:"lpg",children:"LPG"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Transmission ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.transmission,onChange:b=>y("transmission",b.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"manual",children:"Manual"}),l.jsx("option",{value:"automatic",children:"Automatic"}),l.jsx("option",{value:"cvt",children:"CVT"})]})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Engine Size",type:"text",value:n.engineSize,onChange:b=>y("engineSize",b),placeholder:"e.g., 6.7L, 4.5L",error:t.engineSize,required:!0,disabled:i}),l.jsx(le,{label:"Mileage",type:"text",value:n.mileage.toString(),onChange:b=>y("mileage",b?parseInt(b):0),placeholder:"Enter current mileage",error:t.mileage,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Purchase Information"]}),l.jsx(le,{label:"Purchase Date",type:"date",value:n.purchaseDate,onChange:b=>y("purchaseDate",b),error:t.purchaseDate,required:!0,disabled:i}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Purchase Price",type:"text",value:n.purchasePrice.toString(),onChange:b=>y("purchasePrice",b?parseFloat(b):0),placeholder:"Enter purchase price",error:t.purchasePrice,required:!0,disabled:i}),l.jsx(le,{label:"Current Value",type:"text",value:n.currentValue.toString(),onChange:b=>y("currentValue",b?parseFloat(b):0),placeholder:"Enter current value",error:t.currentValue,required:!0,disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sl,{className:"section-icon"}),"Insurance Information"]}),l.jsx(le,{label:"Insurance Provider",type:"text",value:n.insuranceProvider,onChange:b=>y("insuranceProvider",b),placeholder:"Enter insurance provider",error:t.insuranceProvider,required:!0,disabled:i}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Policy Number",type:"text",value:n.insurancePolicyNumber,onChange:b=>y("insurancePolicyNumber",b),placeholder:"Enter policy number",error:t.insurancePolicyNumber,required:!0,disabled:i}),l.jsx(le,{label:"Insurance Expiry",type:"date",value:n.insuranceExpiry,onChange:b=>y("insuranceExpiry",b),error:t.insuranceExpiry,required:!0,disabled:i})]}),l.jsx(le,{label:"Registration Expiry",type:"date",value:n.registrationExpiry,onChange:b=>y("registrationExpiry",b),error:t.registrationExpiry,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(fu,{className:"section-icon"}),"Maintenance Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Maintenance Schedule ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.maintenanceSchedule,onChange:b=>y("maintenanceSchedule",b.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"monthly",children:"Monthly"}),l.jsx("option",{value:"quarterly",children:"Quarterly"}),l.jsx("option",{value:"annually",children:"Annually"}),l.jsx("option",{value:"as_needed",children:"As Needed"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Last Maintenance Date",type:"date",value:n.lastMaintenanceDate,onChange:b=>y("lastMaintenanceDate",b),disabled:i}),l.jsx(le,{label:"Next Maintenance Date",type:"date",value:n.nextMaintenanceDate,onChange:b=>y("nextMaintenanceDate",b),disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(sf,{className:"section-icon"}),"Location & Assignment"]}),l.jsx(le,{label:"Location",type:"text",value:n.location,onChange:b=>y("location",b),placeholder:"Enter current location",error:t.location,required:!0,disabled:i}),l.jsx(le,{label:"Assigned To",type:"text",value:n.assignedTo||"",onChange:b=>y("assignedTo",b),placeholder:"Enter assigned operator (optional)",disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Additional Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Notes"}),l.jsx("textarea",{value:n.notes||"",onChange:b=>y("notes",b.target.value),placeholder:"Enter any additional notes or special requirements...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Vehicle...":"Save Vehicle"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:E,disabled:i,children:"Cancel"})]})]})]})]})},zO=()=>{const[n,e]=M.useState({accountName:"",bankName:"",accountNumber:"",routingNumber:"",accountType:"checking",balance:0,currency:"USD",isActive:!0,description:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),y=[{value:"checking",label:"Checking Account"},{value:"savings",label:"Savings Account"},{value:"business",label:"Business Account"}],g=[{value:"USD",label:"USD - US Dollar"},{value:"BRL",label:"BRL - Brazilian Real"},{value:"EUR",label:"EUR - Euro"}],_=(C,A)=>{e(U=>({...U,[C]:A})),t[C]&&a(U=>({...U,[C]:""})),d&&m("")},E=()=>{const C={};return n.accountName.trim()||(C.accountName="Account name is required"),n.bankName.trim()||(C.bankName="Bank name is required"),n.accountNumber.trim()||(C.accountNumber="Account number is required"),n.routingNumber.trim()||(C.routingNumber="Routing number is required"),n.accountType||(C.accountType="Account type is required"),n.balance<0&&(C.balance="Balance cannot be negative"),n.currency||(C.currency="Currency is required"),a(C),Object.keys(C).length===0},b=async C=>{if(C.preventDefault(),!!E()){c(!0),m(""),a({});try{await HS.createBankAccount(n),m("Bank account registered successfully!"),e({accountName:"",bankName:"",accountNumber:"",routingNumber:"",accountType:"checking",balance:0,currency:"USD",isActive:!0,description:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(A){a({submit:"Failed to register bank account: "+(A instanceof Error?A.message:String(A))})}finally{c(!1)}}},x=()=>{e({accountName:"",bankName:"",accountNumber:"",routingNumber:"",accountType:"checking",balance:0,currency:"USD",isActive:!0,description:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Bank Account"}),l.jsx("p",{className:"page-subtitle",children:"Add a new bank account to the financial management system"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:b,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Ch,{className:"section-icon"}),"Account Information"]}),l.jsx(le,{label:"Account Name",type:"text",value:n.accountName,onChange:C=>_("accountName",C),placeholder:"e.g., Main Business Account",error:t.accountName,required:!0,disabled:i}),l.jsx(le,{label:"Bank Name",type:"text",value:n.bankName,onChange:C=>_("bankName",C),placeholder:"e.g., Bank of America",error:t.bankName,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(JS,{className:"section-icon"}),"Account Details"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Account Number",type:"text",value:n.accountNumber,onChange:C=>_("accountNumber",C),placeholder:"Enter account number",error:t.accountNumber,required:!0,disabled:i}),l.jsx(le,{label:"Routing Number",type:"text",value:n.routingNumber,onChange:C=>_("routingNumber",C),placeholder:"Enter routing number",error:t.routingNumber,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Account Type ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("select",{value:n.accountType,onChange:C=>_("accountType",C.target.value),className:"role-select",disabled:i,children:y.map(C=>l.jsx("option",{value:C.value,children:C.label},C.value))}),t.accountType&&l.jsx("span",{className:"error-message",children:t.accountType})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Currency ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("select",{value:n.currency,onChange:C=>_("currency",C.target.value),className:"role-select",disabled:i,children:g.map(C=>l.jsx("option",{value:C.value,children:C.label},C.value))}),t.currency&&l.jsx("span",{className:"error-message",children:t.currency})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Financial Information"]}),l.jsx(le,{label:"Current Balance",type:"number",value:n.balance.toString(),onChange:C=>_("balance",C?parseFloat(C):0),placeholder:"0.00",error:t.balance,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(of,{className:"section-icon"}),"Additional Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Description"}),l.jsx("textarea",{value:n.description||"",onChange:C=>_("description",C.target.value),placeholder:"Enter any additional notes about this account...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"form-label",children:[l.jsx("input",{type:"checkbox",checked:n.isActive,onChange:C=>_("isActive",C.target.checked),disabled:i}),l.jsx("span",{style:{marginLeft:"8px"},children:"Account is active"})]})})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Account...":"Save Account"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:x,disabled:i,children:"Cancel"})]})]})]})]})},FO=()=>{const[n,e]=M.useState({cardName:"",cardNumber:"",cardType:"visa",bankName:"",assignedTo:"",creditLimit:0,currentBalance:0,expiryDate:"",isActive:!0,monthlyLimit:0,description:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),y=[{value:"visa",label:"Visa"},{value:"mastercard",label:"Mastercard"},{value:"amex",label:"American Express"},{value:"discover",label:"Discover"}],g=(x,C)=>{e(A=>({...A,[x]:C})),t[x]&&a(A=>({...A,[x]:""})),d&&m("")},_=()=>{const x={};return n.cardName.trim()||(x.cardName="Card name is required"),n.cardNumber.trim()||(x.cardNumber="Card number is required"),n.cardType||(x.cardType="Card type is required"),n.bankName.trim()||(x.bankName="Bank name is required"),n.assignedTo.trim()||(x.assignedTo="Assigned to is required"),n.creditLimit<0&&(x.creditLimit="Credit limit cannot be negative"),n.currentBalance<0&&(x.currentBalance="Current balance cannot be negative"),n.expiryDate||(x.expiryDate="Expiry date is required"),a(x),Object.keys(x).length===0},E=async x=>{if(x.preventDefault(),!!_()){c(!0),m(""),a({});try{await GS.createCreditCard(n),m("Credit card registered successfully!"),e({cardName:"",cardNumber:"",cardType:"visa",bankName:"",assignedTo:"",creditLimit:0,currentBalance:0,expiryDate:"",isActive:!0,monthlyLimit:0,description:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(C){a({submit:"Failed to register credit card: "+(C instanceof Error?C.message:String(C))})}finally{c(!1)}}},b=()=>{e({cardName:"",cardNumber:"",cardType:"visa",bankName:"",assignedTo:"",creditLimit:0,currentBalance:0,expiryDate:"",isActive:!0,monthlyLimit:0,description:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Credit Card"}),l.jsx("p",{className:"page-subtitle",children:"Add a new credit card for team operations"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:E,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Ch,{className:"section-icon"}),"Card Information"]}),l.jsx(le,{label:"Card Name",type:"text",value:n.cardName,onChange:x=>g("cardName",x),placeholder:"e.g., Team 1 Operations Card",error:t.cardName,required:!0,disabled:i}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Card Number (Last 4 digits)",type:"text",value:n.cardNumber,onChange:x=>g("cardNumber",x),placeholder:"1234",error:t.cardNumber,required:!0,disabled:i}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Card Type ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("select",{value:n.cardType,onChange:x=>g("cardType",x.target.value),className:"role-select",disabled:i,children:y.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))}),t.cardType&&l.jsx("span",{className:"error-message",children:t.cardType})]})]}),l.jsx(le,{label:"Bank Name",type:"text",value:n.bankName,onChange:x=>g("bankName",x),placeholder:"e.g., Bank of America",error:t.bankName,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Lr,{className:"section-icon"}),"Assignment"]}),l.jsx(le,{label:"Assigned To",type:"text",value:n.assignedTo,onChange:x=>g("assignedTo",x),placeholder:"e.g., Team 1, Operations Manager",error:t.assignedTo,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Financial Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Credit Limit",type:"number",value:n.creditLimit.toString(),onChange:x=>g("creditLimit",x?parseFloat(x):0),placeholder:"0.00",error:t.creditLimit,required:!0,disabled:i}),l.jsx(le,{label:"Current Balance",type:"number",value:n.currentBalance.toString(),onChange:x=>g("currentBalance",x?parseFloat(x):0),placeholder:"0.00",error:t.currentBalance,required:!0,disabled:i})]}),l.jsx(le,{label:"Monthly Limit (Optional)",type:"number",value:n.monthlyLimit?.toString()||"",onChange:x=>g("monthlyLimit",x?parseFloat(x):0),placeholder:"0.00",disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(fu,{className:"section-icon"}),"Expiry Information"]}),l.jsx(le,{label:"Expiry Date",type:"date",value:n.expiryDate,onChange:x=>g("expiryDate",x),error:t.expiryDate,required:!0,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(Ch,{className:"section-icon"}),"Additional Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Description"}),l.jsx("textarea",{value:n.description||"",onChange:x=>g("description",x.target.value),placeholder:"Enter any additional notes about this card...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"form-label",children:[l.jsx("input",{type:"checkbox",checked:n.isActive,onChange:x=>g("isActive",x.target.checked),disabled:i}),l.jsx("span",{style:{marginLeft:"8px"},children:"Card is active"})]})})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Card...":"Save Card"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:b,disabled:i,children:"Cancel"})]})]})]})]})},HO=()=>{const[n,e]=M.useState({name:"",category:"operational",description:"",isActive:!0,requiresApproval:!1,maxAmount:0}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),y=[{value:"operational",label:"Operational"},{value:"administrative",label:"Administrative"},{value:"equipment",label:"Equipment"},{value:"fuel",label:"Fuel"},{value:"maintenance",label:"Maintenance"},{value:"insurance",label:"Insurance"},{value:"other",label:"Other"}],g=(x,C)=>{e(A=>({...A,[x]:C})),t[x]&&a(A=>({...A,[x]:""})),d&&m("")},_=()=>{const x={};return n.name.trim()||(x.name="Expense type name is required"),n.category||(x.category="Category is required"),n.maxAmount&&n.maxAmount<0&&(x.maxAmount="Maximum amount cannot be negative"),a(x),Object.keys(x).length===0},E=async x=>{if(x.preventDefault(),!!_()){c(!0),m(""),a({});try{await by.createExpenseType(n),m("Expense type registered successfully!"),e({name:"",category:"operational",description:"",isActive:!0,requiresApproval:!1,maxAmount:0}),a({}),setTimeout(()=>{m("")},6e3)}catch(C){a({submit:"Failed to register expense type: "+(C instanceof Error?C.message:String(C))})}finally{c(!1)}}},b=()=>{e({name:"",category:"operational",description:"",isActive:!0,requiresApproval:!1,maxAmount:0}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Expense Type"}),l.jsx("p",{className:"page-subtitle",children:"Add a new expense type for financial management"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:E,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(al,{className:"section-icon"}),"Basic Information"]}),l.jsx(le,{label:"Expense Type Name",type:"text",value:n.name,onChange:x=>g("name",x),placeholder:"e.g., Fuel Expenses, Equipment Maintenance",error:t.name,required:!0,disabled:i}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Category ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("select",{value:n.category,onChange:x=>g("category",x.target.value),className:"role-select",disabled:i,children:y.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))}),t.category&&l.jsx("span",{className:"error-message",children:t.category})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Financial Information"]}),l.jsx(le,{label:"Maximum Amount (Optional)",type:"number",value:n.maxAmount?.toString()||"",onChange:x=>g("maxAmount",x?parseFloat(x):0),placeholder:"0.00",error:t.maxAmount,disabled:i})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(of,{className:"section-icon"}),"Settings"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Description"}),l.jsx("textarea",{value:n.description||"",onChange:x=>g("description",x.target.value),placeholder:"Enter a description for this expense type...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"form-label",children:[l.jsx("input",{type:"checkbox",checked:n.isActive,onChange:x=>g("isActive",x.target.checked),disabled:i}),l.jsx("span",{style:{marginLeft:"8px"},children:"Expense type is active"})]})}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"form-label",children:[l.jsx("input",{type:"checkbox",checked:n.requiresApproval,onChange:x=>g("requiresApproval",x.target.checked),disabled:i}),l.jsx("span",{style:{marginLeft:"8px"},children:"Requires approval"})]})})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Expense Type...":"Save Expense Type"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:b,disabled:i,children:"Cancel"})]})]})]})]})},GO=()=>{const[n,e]=M.useState({serviceId:"",clientId:"",price:0,currency:"USD",effectiveDate:"",endDate:"",isActive:!0,notes:""}),[t,a]=M.useState({}),[i,c]=M.useState(!1),[d,m]=M.useState(""),[y,g]=M.useState([]),[_,E]=M.useState([]),b=[{value:"USD",label:"USD - US Dollar"},{value:"BRL",label:"BRL - Brazilian Real"},{value:"EUR",label:"EUR - Euro"}];M.useEffect(()=>{(async()=>{try{const[W,q]=await Promise.all([rf.getAllServices(),Sn.getAllClients()]);g(W),E(q)}catch(W){console.error("Error loading data:",W)}})()},[]);const x=(D,W)=>{e(q=>({...q,[D]:W})),t[D]&&a(q=>({...q,[D]:""})),d&&m("")},C=()=>{const D={};return n.serviceId||(D.serviceId="Service is required"),n.clientId||(D.clientId="Client is required"),n.price<=0&&(D.price="Price must be greater than 0"),n.currency||(D.currency="Currency is required"),n.effectiveDate||(D.effectiveDate="Effective date is required"),a(D),Object.keys(D).length===0},A=async D=>{if(D.preventDefault(),!!C()){c(!0),m(""),a({});try{await $S.createServicePricing(n),m("Service pricing registered successfully!"),e({serviceId:"",clientId:"",price:0,currency:"USD",effectiveDate:"",endDate:"",isActive:!0,notes:""}),a({}),setTimeout(()=>{m("")},6e3)}catch(W){a({submit:"Failed to register service pricing: "+(W instanceof Error?W.message:String(W))})}finally{c(!1)}}},U=()=>{e({serviceId:"",clientId:"",price:0,currency:"USD",effectiveDate:"",endDate:"",isActive:!0,notes:""}),a({}),m("")};return l.jsxs("div",{className:"form-page-content",children:[l.jsxs("div",{className:"content-header",children:[l.jsx("h1",{className:"page-title",children:"Register Service Pricing"}),l.jsx("p",{className:"page-subtitle",children:"Set specific pricing for services by client"})]}),l.jsxs("div",{className:`form-container ${i?"form-loading":""}`,children:[d&&l.jsx("div",{className:"status-message success-message",children:d}),t.submit&&l.jsx("div",{className:"status-message error-message",children:t.submit}),l.jsxs("form",{onSubmit:A,className:"modern-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Service and Client Selection"]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Service ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.serviceId,onChange:D=>x("serviceId",D.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"",children:"Select a service"}),y.map(D=>l.jsxs("option",{value:D.id,children:[D.serviceName," (",D.serviceCode,")"]},D.id))]}),t.serviceId&&l.jsx("span",{className:"error-message",children:t.serviceId})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Client ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{value:n.clientId,onChange:D=>x("clientId",D.target.value),className:"role-select",disabled:i,children:[l.jsx("option",{value:"",children:"Select a client"}),_.map(D=>l.jsx("option",{value:D.id,children:D.name},D.id))]}),t.clientId&&l.jsx("span",{className:"error-message",children:t.clientId})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(mr,{className:"section-icon"}),"Pricing Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Price",type:"number",value:n.price.toString(),onChange:D=>x("price",D?parseFloat(D):0),placeholder:"0.00",error:t.price,required:!0,disabled:i}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label",children:["Currency ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("select",{value:n.currency,onChange:D=>x("currency",D.target.value),className:"role-select",disabled:i,children:b.map(D=>l.jsx("option",{value:D.value,children:D.label},D.value))}),t.currency&&l.jsx("span",{className:"error-message",children:t.currency})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(fu,{className:"section-icon"}),"Date Information"]}),l.jsxs("div",{className:"form-row",children:[l.jsx(le,{label:"Effective Date",type:"date",value:n.effectiveDate,onChange:D=>x("effectiveDate",D),error:t.effectiveDate,required:!0,disabled:i}),l.jsx(le,{label:"End Date (Optional)",type:"date",value:n.endDate||"",onChange:D=>x("endDate",D),disabled:i})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("h3",{className:"form-section-title",children:[l.jsx(al,{className:"section-icon"}),"Additional Information"]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Notes"}),l.jsx("textarea",{value:n.notes||"",onChange:D=>x("notes",D.target.value),placeholder:"Enter any additional notes about this pricing...",className:"form-textarea",style:{backgroundColor:"#ffffff",color:"#000000"},rows:4,disabled:i})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"form-label",children:[l.jsx("input",{type:"checkbox",checked:n.isActive,onChange:D=>x("isActive",D.target.checked),disabled:i}),l.jsx("span",{style:{marginLeft:"8px"},children:"Pricing is active"})]})})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx(mt,{type:"submit",variant:"primary",disabled:i,children:i?"Saving Pricing...":"Save Pricing"}),l.jsx(mt,{type:"button",variant:"secondary",onClick:U,disabled:i,children:"Cancel"})]})]})]})]})},Ox="projectProgress",$O=(n,e,t)=>{if(t>=100)return"completed";const a=new Date;a.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=new Date(e);c.setHours(0,0,0,0);const d=c.getTime()-a.getTime();if(Math.ceil(d/(1e3*60*60*24))<0)return"delayed";const y=(c.getTime()-i.getTime())/(1e3*60*60*24),g=(a.getTime()-i.getTime())/(1e3*60*60*24);if(y<=0)return t>=100?"completed":"delayed";const _=Math.max(0,Math.min(100,g/y*100));return t<_-15?"at-risk":"on-track"},QO=n=>{const e=new Date,a=new Date(n).getTime()-e.getTime(),i=Math.ceil(a/(1e3*60*60*24));return i<0||i<=7?"high":i<=30?"medium":"low"},wa={async getProjectProgress(n){try{const e=Ie(ie,Ox,n),t=await vn(e);return t.exists()?t.data().progress||0:null}catch(e){return console.error("Error getting project progress:",e),null}},async saveProjectProgress(n,e,t=new Date().toISOString().split("T")[0]){try{const a=Ie(ie,Ox,n);await ki(a,{progress:e,lastUpdate:t,updatedAt:new Date},{merge:!0})}catch(a){throw console.error("Error saving project progress:",a),a}},async getAllProjectAlerts(){try{const n=await Sn.getAllClients(),e=await zt.getAllContractServices(),t=[];for(const a of n){if(!a.projectNumber||!a.projectDeadline)continue;const i=a.id||a.projectNumber,c=await this.getProjectProgress(i),d=e.filter(D=>D.clientId===a.id&&D.projectNumber===a.projectNumber);let m="Infrastructure",y=`Project ${a.projectNumber}`,g=`Project ${a.projectNumber}`;if(d.length>0){const D=d[0];m=D.serviceType||"Infrastructure",y=D.serviceName||y,g=D.description||g}const _=a.projectContractDate||d[0]?.startDate||new Date().toISOString().split("T")[0],E=a.projectDeadline||d[0]?.endDate||a.projectFinalDate||new Date().toISOString().split("T")[0],b=c!==null?c:0,x=$O(_,E,b),C=QO(E),A="N/A",U=a.updatedAt?a.updatedAt.toISOString().split("T")[0]:new Date().toISOString().split("T")[0];t.push({id:i,projectId:i,projectName:y,clientName:a.name,clientId:a.id||"",projectType:m,startDate:_,plannedEndDate:E,actualProgress:b,status:x,priority:C,description:g,responsiblePerson:A,lastUpdate:U})}return t}catch(n){throw console.error("Error fetching project alerts:",n),n}},async updateProjectProgress(n,e){try{const t=new Date().toISOString().split("T")[0];await this.saveProjectProgress(n,e,t)}catch(t){throw console.error("Error updating project progress:",t),t}},async markProjectAsCompleted(n){try{await this.saveProjectProgress(n,100)}catch(e){throw console.error("Error marking project as completed:",e),e}}},KO=()=>{const n=yr(),[e,t]=M.useState([]),[a,i]=M.useState([]),[c,d]=M.useState(!0),[m,y]=M.useState(""),[g,_]=M.useState("all"),[E,b]=M.useState("all"),[x,C]=M.useState(null),[A,U]=M.useState(!1),[D,W]=M.useState(!1),[q,se]=M.useState(0);M.useEffect(()=>{(async()=>{try{d(!0);const de=await wa.getAllProjectAlerts();t(de),i(de)}catch(de){console.error("Error fetching project alerts:",de)}finally{d(!1)}})()},[]),M.useEffect(()=>{let J=e;m&&(J=J.filter(de=>de.projectName.toLowerCase().includes(m.toLowerCase())||de.clientName.toLowerCase().includes(m.toLowerCase())||de.description.toLowerCase().includes(m.toLowerCase()))),g!=="all"&&(J=J.filter(de=>de.status===g)),E!=="all"&&(J=J.filter(de=>de.priority===E)),i(J)},[e,m,g,E]);const G=J=>{switch(J){case"completed":return l.jsx(fr,{className:"status-icon completed"});case"delayed":return l.jsx(An,{className:"status-icon delayed"});case"at-risk":return l.jsx(du,{className:"status-icon at-risk"});case"on-track":return l.jsx(fr,{className:"status-icon on-track"});default:return l.jsx(An,{className:"status-icon pending"})}},he=J=>{switch(J){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},O=J=>{switch(J){case"completed":return"#10b981";case"on-track":return"#3b82f6";case"at-risk":return"#f59e0b";case"delayed":return"#ef4444";default:return"#6b7280"}},T=J=>{const de=new Date,ce=new Date(J).getTime()-de.getTime();return Math.ceil(ce/(1e3*60*60*24))},I=J=>{const de=e.find(K=>K.id===J);de&&(C(de),U(!0))},L=J=>{const de=e.find(K=>K.id===J);de&&(C(de),W(!0),se(de.actualProgress),U(!0))},N=()=>{C(null),W(!1),U(!1)},R=async()=>{if(x)try{await wa.updateProjectProgress(x.projectId,q);const J=await wa.getAllProjectAlerts();t(J);const de=J.find(K=>K.id===x.id);de&&C(de),W(!1)}catch(J){console.error("Error saving progress:",J)}},P=async()=>{if(x)try{await wa.markProjectAsCompleted(x.projectId);const J=await wa.getAllProjectAlerts();t(J),i(J),N()}catch(J){console.error("Error marking project as completed:",J)}};return l.jsxs("div",{className:"project-alert",children:[l.jsxs("div",{className:"alert-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{children:"Project Completion Alerts"}),l.jsx("p",{children:"Monitor and manage project completion schedules"})]}),l.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),l.jsxs("div",{className:"filters-section",children:[l.jsxs("div",{className:"search-box",children:[l.jsx(hu,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Search by project name, client, or description",value:m,onChange:J=>y(J.target.value)})]}),l.jsxs("div",{className:"filters-group",children:[l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Status:"}),l.jsxs("select",{value:g,onChange:J=>_(J.target.value),children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"on-track",children:"On Track"}),l.jsx("option",{value:"at-risk",children:"At Risk"}),l.jsx("option",{value:"delayed",children:"Delayed"}),l.jsx("option",{value:"completed",children:"Completed"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Priority:"}),l.jsxs("select",{value:E,onChange:J=>b(J.target.value),children:[l.jsx("option",{value:"all",children:"All Priorities"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"low",children:"Low"})]})]})]})]}),l.jsx("div",{className:"alerts-grid",children:c?l.jsx("div",{className:"loading",children:"Loading project alerts..."}):a.length===0?l.jsxs("div",{className:"no-alerts",children:[l.jsx(An,{}),l.jsx("h3",{children:"No alerts found"}),l.jsx("p",{children:"No project alerts match your current filters."})]}):a.map(J=>{const de=T(J.plannedEndDate),K=de<0,ce=de<=7&&de>=0;return l.jsxs("div",{className:"alert-card",children:[l.jsxs("div",{className:"alert-header-card",children:[l.jsxs("div",{className:"project-info",children:[l.jsx("h3",{children:J.projectName}),l.jsx("p",{className:"client-name",children:J.clientName})]}),l.jsxs("div",{className:"status-badge",style:{backgroundColor:O(J.status)},children:[G(J.status),l.jsx("span",{children:J.status.replace("-"," ").toUpperCase()})]})]}),l.jsxs("div",{className:"alert-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Type:"}),l.jsx("span",{className:"value",children:J.projectType})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Progress:"}),l.jsxs("span",{className:"value",children:[J.actualProgress,"%"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"End Date:"}),l.jsx("span",{className:"value",children:J.plannedEndDate})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Responsible:"}),l.jsx("span",{className:"value",children:J.responsiblePerson})]})]}),l.jsxs("div",{className:"alert-footer",children:[l.jsxs("div",{className:"priority-indicator",children:[l.jsx("div",{className:"priority-dot",style:{backgroundColor:he(J.priority)}}),l.jsx("span",{children:J.priority.toUpperCase()})]}),l.jsx("div",{className:"days-remaining",children:K?l.jsxs("span",{className:"overdue",children:["Overdue by ",Math.abs(de)," days"]}):ce?l.jsxs("span",{className:"urgent",children:[de," days remaining"]}):l.jsxs("span",{className:"normal",children:[de," days remaining"]})})]}),l.jsxs("div",{className:"alert-actions",children:[l.jsx("button",{className:"action-btn secondary",onClick:()=>I(J.id),children:"View Details"}),l.jsx("button",{className:"action-btn primary",onClick:()=>L(J.id),children:"Update Progress"})]})]},J.id)})}),A&&x&&l.jsx("div",{className:"modal-overlay",onClick:N,children:l.jsxs("div",{className:"modal-content",onClick:J=>J.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Project Details"}),l.jsx("button",{className:"close-button",onClick:N,children:"X"})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"project-info-section",children:[l.jsx("h3",{children:x.projectName}),l.jsxs("p",{className:"client-info",children:["Client: ",x.clientName]}),l.jsxs("div",{className:"status-priority-row",children:[l.jsxs("div",{className:"status-badge",style:{backgroundColor:O(x.status)},children:[G(x.status),l.jsx("span",{children:x.status.replace("-"," ").toUpperCase()})]}),l.jsx("div",{className:"priority-badge",style:{backgroundColor:he(x.priority)},children:x.priority.toUpperCase()})]})]}),l.jsxs("div",{className:"project-details-grid",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Project Type:"}),l.jsx("span",{children:x.projectType})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Responsible Person:"}),l.jsx("span",{children:x.responsiblePerson})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Start Date:"}),l.jsx("span",{children:x.startDate})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Planned End Date:"}),l.jsx("span",{children:x.plannedEndDate})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Last Update:"}),l.jsx("span",{children:x.lastUpdate})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Days Remaining:"}),l.jsx("span",{className:T(x.plannedEndDate)<0?"overdue":T(x.plannedEndDate)<=7?"urgent":"normal",children:T(x.plannedEndDate)<0?`Overdue by ${Math.abs(T(x.plannedEndDate))} days`:`${T(x.plannedEndDate)} days remaining`})]})]}),l.jsxs("div",{className:"progress-section",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("label",{children:"Progress:"}),D?l.jsxs("div",{className:"progress-edit",children:[l.jsx("input",{type:"number",min:"0",max:"100",value:q,onChange:J=>se(Number(J.target.value)),className:"progress-input"}),l.jsx("button",{className:"save-button",onClick:R,children:"Save"}),l.jsx("button",{className:"cancel-button",onClick:()=>W(!1),children:"Cancel"})]}):l.jsx("button",{className:"edit-button",onClick:()=>W(!0),children:"Edit"})]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${x.actualProgress}%`}})}),l.jsxs("span",{className:"progress-text",children:[x.actualProgress,"%"]})]}),l.jsxs("div",{className:"description-section",children:[l.jsx("label",{children:"Description:"}),l.jsx("p",{children:x.description})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"action-button secondary",onClick:N,children:"Close"}),x.status!=="completed"&&l.jsx("button",{className:"action-button primary",onClick:P,children:"Mark as Completed"})]})]})})]})},hg="clientPayments",Mx=(n,e)=>{if(n.projectDeadline)return n.projectDeadline;if(n.projectFinalDate)return n.projectFinalDate;if(e?.endDate)return e.endDate;{const t=new Date;return t.setDate(t.getDate()+30),t.toISOString().split("T")[0]}},Lx=(n,e,t)=>{const a=new Date().getFullYear(),i=n.projectNumber||n.id?.substring(0,6)||"0000",c=e?.contractNumber?.substring(0,4)||t?.toString().padStart(3,"0")||"001";return`INV-${a}-${i}-${c}`},Vx=(n,e=!1,t=!1)=>{if(t)return"cancelled";if(e)return"paid";const a=new Date;a.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=a.getTime()-i.getTime();return Math.ceil(c/(1e3*60*60*24))>0?"overdue":"pending"},Ux=(n,e,t)=>{if(e==="paid"||e==="cancelled")return"low";if(e==="overdue")return"high";const a=new Date;a.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=i.getTime()-a.getTime(),d=Math.ceil(c/(1e3*60*60*24));return d<=7||t>=5e3?"high":d<=30||t>=2e3?"medium":"low"},qx=async n=>{try{const e=Ie(ie,hg,n),t=await vn(e);if(t.exists()){const a=t.data();return{isPaid:a.isPaid===!0,isCancelled:a.isCancelled===!0,lastReminder:a.lastReminder,reminderCount:a.reminderCount||0}}return{isPaid:!1,isCancelled:!1,reminderCount:0}}catch(e){return console.error("Error checking payment status:",e),{isPaid:!1,isCancelled:!1,reminderCount:0}}},Sa={async markPaymentAsPaid(n){try{const e=Ie(ie,hg,n);await ki(e,{isPaid:!0,paidDate:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error marking payment as paid:",e),e}},async sendReminder(n){try{const e=Ie(ie,hg,n),t=await vn(e),i=(t.exists()?t.data():{}).reminderCount||0;await ki(e,{reminderCount:i+1,lastReminder:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error sending reminder:",e),e}},async getAllClientPaymentAlerts(){try{const n=await Sn.getAllClients(),e=await zt.getAllContractServices(),t=new Map;e.forEach(i=>{if(i.clientId){const c=t.get(i.clientId)||[];c.push(i),t.set(i.clientId,c)}});const a=[];for(const i of n){if(!i.id)continue;const c=t.get(i.id)||[];if(c.length===0&&i.projectNumber){const d=Mx(i),m=Lx(i),y=`client_${i.id}_project`,g=await qx(y),_=0,E=Vx(d,g.isPaid,g.isCancelled);if(d&&(i.projectNumber||i.projectDeadline)){const b=Ux(d,E,_);a.push({id:y,clientName:i.name,clientId:i.id,invoiceNumber:m,amount:_,dueDate:d,status:E,priority:b,paymentMethod:"transfer",description:`Payment for project ${i.projectNumber||i.id}`,lastReminder:g.lastReminder||i.updatedAt.toISOString().split("T")[0],reminderCount:g.reminderCount||0})}}else for(let d=0;d<c.length;d++){const m=c[d];if(m.status==="cancelled")continue;const y=Mx(i,m),g=Lx(i,m,d),_=`client_${i.id}_service_${m.id||d}`,E=m.budget.actualCost||m.budget.estimatedCost||0,b=await qx(_),x=Vx(y,b.isPaid,b.isCancelled),C=Ux(y,x,E);a.push({id:_,clientName:i.name,clientId:i.id,invoiceNumber:g,amount:E,dueDate:y,status:x,priority:C,paymentMethod:"transfer",description:m.description||`Payment for ${m.serviceName}`,lastReminder:b.lastReminder||m.updatedAt.toISOString().split("T")[0],reminderCount:b.reminderCount||0,contractServiceId:m.id})}}return a}catch(n){throw console.error("Error fetching client payment alerts:",n),n}},async getPaymentAlertsByClient(n){return(await this.getAllClientPaymentAlerts()).filter(t=>t.clientId===n)}},YO=()=>{const n=yr(),[e,t]=M.useState([]),[a,i]=M.useState([]),[c,d]=M.useState(!0),[m,y]=M.useState(""),[g,_]=M.useState("all"),[E,b]=M.useState("all"),[x,C]=M.useState("all");M.useEffect(()=>{(async()=>{try{d(!0);const T=await Sa.getAllClientPaymentAlerts();t(T),i(T)}catch(T){console.error("Error fetching client payment alerts:",T)}finally{d(!1)}})()},[]),M.useEffect(()=>{let O=e;m&&(O=O.filter(T=>T.clientName.toLowerCase().includes(m.toLowerCase())||T.clientId.toLowerCase().includes(m.toLowerCase())||T.invoiceNumber.toLowerCase().includes(m.toLowerCase()))),g!=="all"&&(O=O.filter(T=>T.status===g)),E!=="all"&&(O=O.filter(T=>T.priority===E)),x!=="all"&&(O=O.filter(T=>T.paymentMethod===x)),i(O)},[e,m,g,E,x]);const A=O=>{switch(O){case"paid":return l.jsx(fr,{className:"status-icon"});case"overdue":return l.jsx(rl,{className:"status-icon"});case"pending":return l.jsx(An,{className:"status-icon"});case"cancelled":return l.jsx(rl,{className:"status-icon"});default:return l.jsx(An,{className:"status-icon"})}},U=O=>{switch(O){case"high":return"#dc2626";case"medium":return"#f59e0b";case"low":return"#059669";default:return"#6b7280"}},D=O=>{switch(O){case"paid":return"#059669";case"overdue":return"#dc2626";case"pending":return"#f59e0b";case"cancelled":return"#6b7280";default:return"#6b7280"}},W=O=>{const T=new Date,I=new Date(O),L=T.getTime()-I.getTime();return Math.ceil(L/(1e3*60*60*24))},q=O=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(O),se=async O=>{try{await Sa.markPaymentAsPaid(O);const T=await Sa.getAllClientPaymentAlerts();t(T),i(T)}catch(T){console.error("Error marking payment as paid:",T)}},G=async O=>{try{await Sa.sendReminder(O);const T=await Sa.getAllClientPaymentAlerts();t(T),i(T)}catch(T){console.error("Error sending reminder:",T)}},he=O=>{console.log("View details for alert:",O)};return c?l.jsx("div",{className:"client-payment-alert",children:l.jsx("div",{className:"loading",children:"Loading payments alerts..."})}):l.jsxs("div",{className:"client-payment-alert",children:[l.jsxs("div",{className:"alert-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{children:"Client Payment Alerts"}),l.jsx("p",{children:"Monitor and manage client payment schedules"})]}),l.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),l.jsxs("div",{className:"filters-section",children:[l.jsxs("div",{className:"search-box",children:[l.jsx(hu,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Search by client name, invoice number or clientID",value:m,onChange:O=>y(O.target.value)})]}),l.jsxs("div",{className:"filters-group",children:[l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Status:"}),l.jsxs("select",{value:g,onChange:O=>_(O.target.value),children:[l.jsx("option",{value:"all",children:"All status"}),l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"overdue",children:"Overdue"}),l.jsx("option",{value:"paid",children:"Paid"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Priority:"}),l.jsxs("select",{value:E,onChange:O=>b(O.target.value),children:[l.jsx("option",{value:"all",children:"All priorities"}),l.jsx("option",{value:"low",children:"High"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"Low"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Payment Method:"}),l.jsxs("select",{value:x,onChange:O=>C(O.target.value),children:[l.jsx("option",{value:"all",children:"All methods"}),l.jsx("option",{value:"cash",children:"Cash"}),l.jsx("option",{value:"transfer",children:"Transfer"}),l.jsx("option",{value:"check",children:"Check"}),l.jsx("option",{value:"pix",children:"Pix"})]})]})]})]}),l.jsx("div",{className:"alerts-container",children:a.length===0?l.jsxs("div",{className:"no-alerts",children:[l.jsx(An,{}),l.jsx("h3",{children:"No alerts found"}),l.jsx("p",{children:"No payment alerts match your current filters."})]}):l.jsx("div",{className:"alerts-grid",children:a.map(O=>{const T=W(O.dueDate),I=T>0;return l.jsxs("div",{className:"alert-card",children:[l.jsxs("div",{className:"alert-header-card",children:[l.jsxs("div",{className:"client-info",children:[l.jsx("h3",{children:O.clientName}),l.jsx("p",{className:"invoice-number",children:O.invoiceNumber})]}),l.jsxs("div",{className:"status-badge",style:{backgroundColor:D(O.status)},children:[A(O.status),l.jsx("span",{children:O.status.toUpperCase()})]})]}),l.jsxs("div",{className:"alert-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Amount:"}),l.jsx("span",{className:"value amount",children:q(O.amount)})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Due Date:"}),l.jsx("span",{className:"value",children:O.dueDate})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Payment Method:"}),l.jsx("span",{className:"value",children:O.paymentMethod.toUpperCase()})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Client ID:"}),l.jsx("span",{className:"value",children:O.clientId})]})]}),l.jsxs("div",{className:"alert-footer",children:[l.jsxs("div",{className:"priority-indicator",children:[l.jsx("div",{className:"priority-dot",style:{backgroundColor:U(O.priority)}}),l.jsx("span",{children:O.priority.toUpperCase()})]}),l.jsx("div",{className:"overdue-info",children:I?l.jsxs("span",{className:"overdue",children:[T," days overdue"]}):l.jsxs("span",{className:"normal",children:["Due in ",Math.abs(T)," days"]})})]}),l.jsxs("div",{className:"alert-actions",children:[l.jsx("button",{className:"action-btn secondary",onClick:()=>he(O.id),children:"View Details"}),O.status!=="paid"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"action-btn warning",onClick:()=>G(O.id),children:["Send Reminder (",O.reminderCount,")"]}),l.jsx("button",{className:"action-btn primary",onClick:()=>se(O.id),children:"Mark as Paid"})]})]})]},O.id)})})})]})},nA="subcontractorPayments",XO=(n,e)=>{const t=new Date(n),a=parseInt(e);return t.setDate(t.getDate()+a),t.toISOString().split("T")[0]},WO=(n,e=!1)=>{if(e)return"paid";const t=new Date;t.setHours(0,0,0,0);const a=new Date(n);a.setHours(0,0,0,0);const i=a.getTime()-t.getTime(),c=Math.ceil(i/(1e3*60*60*24));return c<0?"overdue":c===0?"due-today":"pending"},ZO=(n,e)=>{if(e==="paid")return"low";if(e==="overdue"||e==="due-today")return"high";const t=new Date;t.setHours(0,0,0,0);const a=new Date(n);a.setHours(0,0,0,0);const i=a.getTime()-t.getTime(),c=Math.ceil(i/(1e3*60*60*24));return c<=3?"high":c<=7?"medium":"low"},JO=async n=>{try{const e=Ie(ie,nA,n),t=await vn(e);return t.exists()?t.data().isPaid===!0:!1}catch(e){return console.error("Error checking payment status:",e),!1}},wi={async markPaymentAsPaid(n){try{const e=Ie(ie,nA,n);await ki(e,{isPaid:!0,paidDate:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error marking payment as paid:",e),e}},async getAllSubcontractorPaymentAlerts(){try{const n=await zt.getAllContractServices(),e=await af.getAllSubcontractors(),t=new Map;e.forEach(c=>{c.id&&t.set(c.id,c)});const a=[],i=n.filter(c=>c.subcontractorId&&c.status!=="cancelled");for(const c of i){if(!c.subcontractorId)continue;const d=t.get(c.subcontractorId);if(!d)continue;const m=`${c.id}_${c.subcontractorId}`,y=await JO(m),g=XO(c.endDate,d.paymentTerms),_=c.budget.actualCost||c.budget.estimatedCost||0,E=WO(g,y),b=ZO(g,E),x=c.updatedAt?c.updatedAt.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],C=c.endDate||x;a.push({id:m,subcontractorId:c.subcontractorId,subcontractor:d,contractServiceId:c.id||"",lastServiceDate:C,nextPaymentDate:g,amountDue:_,currency:c.budget.currency,status:E,priority:b,description:c.description,responsiblePerson:"N/A",lastUpdate:x,serviceDescription:c.description,projectReference:c.projectNumber})}return a}catch(n){throw console.error("Error fetching subcontractor payment alerts:",n),n}},async getPaymentAlertsBySubcontractor(n){return(await this.getAllSubcontractorPaymentAlerts()).filter(t=>t.subcontractorId===n)}},eM=()=>{const n=yr(),[e,t]=M.useState([]),[a,i]=M.useState([]),[c,d]=M.useState(!0),[m,y]=M.useState(""),[g,_]=M.useState("all"),[E,b]=M.useState("all"),[x,C]=M.useState("all"),[A,U]=M.useState(null),[D,W]=M.useState(!1);M.useEffect(()=>{(async()=>{try{d(!0);const R=await wi.getAllSubcontractorPaymentAlerts();t(R),i(R)}catch(R){console.error("Error fetching subcontractor payment alerts:",R)}finally{d(!1)}})()},[]),M.useEffect(()=>{let N=e;m&&(N=N.filter(R=>R.subcontractor.companyName.toLowerCase().includes(m.toLowerCase())||R.subcontractor.contactPerson.toLowerCase().includes(m.toLowerCase())||R.description.toLowerCase().includes(m.toLowerCase())||R.projectReference?.toLowerCase().includes(m.toLowerCase()))),g!=="all"&&(N=N.filter(R=>R.status===g)),E!=="all"&&(N=N.filter(R=>R.priority===E)),x!=="all"&&(N=N.filter(R=>R.subcontractor.paymentTerms===x)),i(N)},[e,m,g,E,x]);const q=N=>{switch(N){case"paid":return l.jsx(fr,{className:"status-icon paid"});case"overdue":return l.jsx(rl,{className:"status-icon overdue"});case"due-today":return l.jsx(An,{className:"status-icon due-today"});case"pending":return l.jsx(du,{className:"status-icon pending"});default:return l.jsx(An,{className:"status-icon pending"})}},se=N=>{switch(N){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},G=N=>{switch(N){case"paid":return"#10b981";case"due-today":return"#f59e0b";case"overdue":return"#ef4444";case"pending":return"#3b82f6";default:return"#6b7280"}},he=N=>{const R=new Date,J=new Date(N).getTime()-R.getTime();return Math.ceil(J/(1e3*60*60*24))},O=(N,R)=>new Intl.NumberFormat("en-US",{style:"currency",currency:R}).format(N),T=N=>{const R=e.find(P=>P.id===N);R&&(U(R),W(!0))},I=async N=>{try{await wi.markPaymentAsPaid(N);const R=await wi.getAllSubcontractorPaymentAlerts();if(t(R),i(R),A&&A.id===N){const P=R.find(J=>J.id===N);P&&U(P)}}catch(R){console.error("Error marking payment as paid:",R)}},L=()=>{U(null),W(!1)};return c?l.jsx("div",{className:"subcontractor-payment-alert",children:l.jsx("div",{className:"loading",children:"Loading subcontractor alerts..."})}):l.jsxs("div",{className:"subcontractor-payment-alert",children:[l.jsxs("div",{className:"alert-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{children:"Subcontractor Payment Alerts"}),l.jsx("p",{children:"Monitor and manage subcontractor payment schedules"})]}),l.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),l.jsxs("div",{className:"alert-filters",children:[l.jsxs("div",{className:"search-box",children:[l.jsx(hu,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Search by company, contact, description, or project reference...",value:m,onChange:N=>y(N.target.value)})]}),l.jsxs("div",{className:"filter-group",children:[l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Status:"}),l.jsxs("select",{value:g,onChange:N=>_(N.target.value),children:[l.jsx("option",{value:"all",children:"All status"}),l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"overdue",children:"Due Today"}),l.jsx("option",{value:"due-today",children:"Overdue"}),l.jsx("option",{value:"paid",children:"Paid"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Priority:"}),l.jsxs("select",{value:E,onChange:N=>b(N.target.value),children:[l.jsx("option",{value:"all",children:"All priorities"}),l.jsx("option",{value:"low",children:"High"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"Low"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Payment Terms:"}),l.jsxs("select",{value:x,onChange:N=>C(N.target.value),children:[l.jsx("option",{value:"all",children:"All terms"}),l.jsx("option",{value:"7",children:"7 days"}),l.jsx("option",{value:"15",children:"15 days"}),l.jsx("option",{value:"30",children:"30 days"})]})]})]})]}),l.jsxs("div",{className:"alerts-grid",children:[a.length===0?l.jsxs("div",{className:"no-alerts",children:[l.jsx(Rs,{}),l.jsx("h3",{children:"No alerts found"}),l.jsx("p",{children:"No subcontractor payment alerts match your current filters."})]}):a.map(N=>{const R=he(N.nextPaymentDate),P=R<0,J=R===0,de=R<=7&&R>=0;return l.jsxs("div",{className:"alert-card",children:[l.jsxs("div",{className:"alert-card-header",children:[l.jsxs("div",{className:"subcontractor-info",children:[l.jsx("h3",{children:N.subcontractor.companyName}),l.jsx("p",{className:"contact-person",children:N.subcontractor.contactPerson})]}),l.jsxs("div",{className:"status-badge",style:{backgroundColor:G(N.status)},children:[q(N.status),l.jsx("span",{children:N.status.replace("-"," ").toUpperCase()})]})]}),l.jsxs("div",{className:"alert-card-content",children:[l.jsxs("div",{className:"payment-info",children:[l.jsxs("div",{className:"amount-due",children:[l.jsx(Fi,{className:"amount-icon"}),l.jsx("span",{className:"amount",children:O(N.amountDue,N.currency)})]}),l.jsxs("div",{className:"payment-date",children:[l.jsx(Yc,{className:"date-icon"}),l.jsx("span",{className:"date-label",children:"Due:"}),l.jsx("span",{className:"date-value",children:N.nextPaymentDate})]})]}),l.jsxs("div",{className:"alert-details",children:[l.jsx("p",{className:"description",children:N.description}),N.projectReference&&l.jsxs("p",{className:"project-ref",children:["Project: ",N.projectReference]})]}),l.jsxs("div",{className:"subcontractor-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Payment Terms:"}),l.jsxs("span",{className:"value",children:[N.subcontractor.paymentTerms," days"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Hourly Rate:"}),l.jsxs("span",{className:"value",children:[O(N.subcontractor.hourlyRate||0,N.currency),"/hr"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Services:"}),l.jsx("span",{className:"value",children:N.subcontractor.services.join(", ")})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Responsible:"}),l.jsx("span",{className:"value",children:N.responsiblePerson})]})]})]}),l.jsxs("div",{className:"alert-card-footer",children:[l.jsxs("div",{className:"priority-indicator",children:[l.jsx("div",{className:"priority-dot",style:{backgroundColor:se(N.priority)}}),l.jsx("span",{children:N.priority.toUpperCase()})]}),l.jsx("div",{className:"days-remaining",children:P?l.jsxs("span",{className:"overdue",children:["Overdue by ",Math.abs(R)," days"]}):J?l.jsx("span",{className:"due-today",children:"Due today"}):de?l.jsxs("span",{className:"urgent",children:[R," days remaining"]}):l.jsxs("span",{className:"normal",children:[R," days remaining"]})})]}),l.jsxs("div",{className:"alert-actions",children:[l.jsx("button",{className:"action-btn secondary",onClick:()=>T(N.id),children:"View Details"}),N.status!=="paid"&&l.jsx("button",{className:"action-btn primary",onClick:()=>I(N.id),children:"Mark as Paid"})]})]},N.id)}),D&&A&&l.jsx("div",{className:"modal-overlay",onClick:L,children:l.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Payment Details"}),l.jsx("button",{className:"close-button",onClick:L,children:"X"})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"subcontractor-info-section",children:[l.jsx("h3",{children:A.subcontractor.companyName}),l.jsxs("p",{className:"contact-info",children:["Contact: ",A.subcontractor.contactPerson]}),l.jsxs("div",{className:"status-priority-row",children:[l.jsxs("div",{className:"status-badge",style:{backgroundColor:G(A.status)},children:[q(A.status),l.jsx("span",{children:A.status.replace("-"," ").toUpperCase()})]}),l.jsx("div",{className:"priority-badge",style:{backgroundColor:se(A.priority)},children:A.priority.toUpperCase()})]})]}),l.jsxs("div",{className:"payment-details-grid",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Amount Due:"}),l.jsx("span",{className:"amount-large",children:O(A.amountDue,A.currency)})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Due Date:"}),l.jsx("span",{children:A.nextPaymentDate})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Last Service Date:"}),l.jsx("span",{children:A.lastServiceDate})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Payment Terms:"}),l.jsxs("span",{children:[A.subcontractor.paymentTerms," days"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Hourly Rate:"}),l.jsxs("span",{children:[O(A.subcontractor.hourlyRate||0,A.currency),"/hr"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Responsible Person:"}),l.jsx("span",{children:A.responsiblePerson})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Services:"}),l.jsx("span",{children:A.subcontractor.services.join(", ")})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Contact Info:"}),l.jsxs("span",{children:[A.subcontractor.phone," "," ",A.subcontractor.email]})]}),A.projectReference&&l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Project Reference:"}),l.jsx("span",{children:A.projectReference})]})]}),l.jsxs("div",{className:"description-section",children:[l.jsx("label",{children:"Service Description:"}),l.jsx("p",{children:A.serviceDescription||A.description})]}),A.subcontractor.notes&&l.jsxs("div",{className:"notes-section",children:[l.jsx("label",{children:"Notes:"}),l.jsx("p",{children:A.subcontractor.notes})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"action-button secondary",onClick:L,children:"Close"}),l.jsx("button",{className:"action-button secondary",onClick:()=>n("/admin/cadastro-subcontratados"),children:"View Subcontractor"}),A.status!=="paid"&&l.jsx("button",{className:"action-button primary",onClick:()=>{I(A.id),L()},children:"Mark as Paid"})]})]})})]})]})},rA="contractedServicePayments",tM=(n,e)=>{const t=new Date(n),a=parseInt(e);return t.setDate(t.getDate()+a),t.toISOString().split("T")[0]},nM=(n,e=!1)=>{if(e)return"paid";const t=new Date;t.setHours(0,0,0,0);const a=new Date(n);a.setHours(0,0,0,0);const i=a.getTime()-t.getTime(),c=Math.ceil(i/(1e3*60*60*24));return c<0?"overdue":c===0?"due-today":"pending"},rM=(n,e,t)=>{if(e==="paid")return"low";if(e==="overdue"||e==="due-today")return"high";const a=new Date;a.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const c=i.getTime()-a.getTime(),d=Math.ceil(c/(1e3*60*60*24));return d<=7||t>=5e3?"high":d<=30||t>=2e3?"medium":"low"},aM=async n=>{try{const e=Ie(ie,rA,n),t=await vn(e);return t.exists()?t.data().isPaid===!0:!1}catch(e){return console.error("Error checking payment status:",e),!1}},sM=n=>n>=1e5?"60":n>=5e4?"45":n>=2e4?"30":n>=5e3?"15":"7",jh={async markPaymentAsPaid(n){try{const e=Ie(ie,rA,n);await ki(e,{isPaid:!0,paidDate:new Date().toISOString().split("T")[0],updatedAt:new Date},{merge:!0})}catch(e){throw console.error("Error marking payment as paid:",e),e}},async getAllContractedServicePaymentAlerts(){try{const n=await zt.getAllContractServices(),e=await Sn.getAllClients(),t=new Map;e.forEach(c=>{c.id&&t.set(c.id,c)});const a=[],i=n.filter(c=>c.status!=="cancelled");for(const c of i){if(!c.id)continue;const d=`contracted_service_${c.id}`,m=await aM(d),y=c.budget.actualCost||c.budget.estimatedCost||0,g=sM(y),_=tM(c.endDate,g),E=nM(_,m),b=rM(_,E,y),x=c.updatedAt?c.updatedAt.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],C=c.endDate||x,U=(c.clientId?t.get(c.clientId):null)?.name||"N/A";a.push({id:d,contractServiceId:c.id,contractService:c,lastServiceDate:C,nextPaymentDate:_,amountDue:y,currency:c.budget.currency,status:E,priority:b,description:c.description||`Payment for ${c.serviceName}`,responsiblePerson:U,lastUpdate:x,serviceDescription:c.description,projectReference:c.projectNumber,paymentTerms:g})}return a}catch(n){throw console.error("Error fetching contracted service payment alerts:",n),n}},async getPaymentAlertsByContractService(n){return(await this.getAllContractedServicePaymentAlerts()).filter(t=>t.contractServiceId===n)}},iM=()=>{const n=yr(),[e,t]=M.useState([]),[a,i]=M.useState([]),[c,d]=M.useState(!0),[m,y]=M.useState(""),[g,_]=M.useState("all"),[E,b]=M.useState("all"),[x,C]=M.useState("all"),[A,U]=M.useState(null),[D,W]=M.useState(!1);M.useEffect(()=>{(async()=>{try{d(!0);const R=await jh.getAllContractedServicePaymentAlerts();t(R),i(R)}catch(R){console.error("Error fetching contracted service payment alerts:",R),t([]),i([])}finally{d(!1)}})()},[]),M.useEffect(()=>{let N=e;m&&(N=N.filter(R=>R.contractService.serviceName.toLowerCase().includes(m.toLowerCase())||R.contractService.clientName.toLowerCase().includes(m.toLowerCase())||R.description.toLowerCase().includes(m.toLowerCase())||R.projectReference?.toLowerCase().includes(m.toLowerCase())||R.contractService.contractNumber.toLowerCase().includes(m.toLowerCase()))),g!=="all"&&(N=N.filter(R=>R.status===g)),E!=="all"&&(N=N.filter(R=>R.priority===E)),x!=="all"&&(N=N.filter(R=>R.paymentTerms===x)),i(N)},[e,m,g,E,x]);const q=N=>{switch(N){case"paid":return l.jsx(fr,{className:"status-icon paid"});case"overdue":return l.jsx(rl,{className:"status-icon overdue"});case"due-today":return l.jsx(An,{className:"status-icon due-today"});case"pending":return l.jsx(du,{className:"status-icon pending"});default:return l.jsx(An,{className:"status-icon pending"})}},se=N=>{switch(N){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},G=N=>{switch(N){case"paid":return"#10b981";case"due-today":return"#f59e0b";case"overdue":return"#ef4444";case"pending":return"#3b82f6";default:return"#6b7280"}},he=N=>{const R=new Date,J=new Date(N).getTime()-R.getTime();return Math.ceil(J/(1e3*60*60*24))},O=(N,R)=>new Intl.NumberFormat("en-US",{style:"currency",currency:R}).format(N),T=N=>{const R=e.find(P=>P.id===N);R&&(U(R),W(!0))},I=async N=>{try{await jh.markPaymentAsPaid(N),t(R=>R.map(P=>P.id===N?{...P,status:"paid",lastUpdate:new Date().toISOString().split("T")[0]}:P)),i(R=>R.map(P=>P.id===N?{...P,status:"paid",lastUpdate:new Date().toISOString().split("T")[0]}:P)),A&&A.id===N&&U({...A,status:"paid",lastUpdate:new Date().toISOString().split("T")[0]})}catch(R){console.error("Error marking payment as paid:",R)}},L=()=>{U(null),W(!1)};return c?l.jsx("div",{className:"contracted-service-payment-alert",children:l.jsx("div",{className:"loading",children:"Loading contracted service payment alerts..."})}):l.jsxs("div",{className:"contracted-service-payment-alert",children:[l.jsxs("div",{className:"alert-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{children:"Contracted Service Payment Alerts"}),l.jsx("p",{children:"Monitor and manage contracted service payment schedules"})]}),l.jsx("button",{className:"back-button",onClick:()=>n("/admin/avisos"),children:" Back to Alerts"})]}),l.jsxs("div",{className:"alert-filters",children:[l.jsxs("div",{className:"search-box",children:[l.jsx(hu,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Search by service name, client, contract number, or project reference",value:m,onChange:N=>y(N.target.value)})]}),l.jsxs("div",{className:"filter-group",children:[l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Status:"}),l.jsxs("select",{value:g,onChange:N=>_(N.target.value),children:[l.jsx("option",{value:"all",children:"All status"}),l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"due-today",children:"Due Today"}),l.jsx("option",{value:"overdue",children:"Overdue"}),l.jsx("option",{value:"paid",children:"Paid"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Priority:"}),l.jsxs("select",{value:E,onChange:N=>b(N.target.value),children:[l.jsx("option",{value:"all",children:"All priorities"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"low",children:"Low"})]})]}),l.jsxs("div",{className:"filter-item",children:[l.jsx("label",{children:"Payment Terms:"}),l.jsxs("select",{value:x,onChange:N=>C(N.target.value),children:[l.jsx("option",{value:"all",children:"All terms"}),l.jsx("option",{value:"7",children:"7 days"}),l.jsx("option",{value:"15",children:"15 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"45",children:"45 days"}),l.jsx("option",{value:"60",children:"60 days"})]})]})]})]}),l.jsx("div",{className:"alerts-grid",children:a.length===0?l.jsxs("div",{className:"no-alerts",children:[l.jsx(Rs,{}),l.jsx("h3",{children:"No alerts found"}),l.jsx("p",{children:"No contracted service payment alerts match your current filters."})]}):a.map(N=>{const R=he(N.nextPaymentDate),P=R<0,J=R===0,de=R<=7&&R>=0;return l.jsxs("div",{className:"alert-card",children:[l.jsxs("div",{className:"alert-card-header",children:[l.jsxs("div",{className:"service-info",children:[l.jsx("h3",{children:N.contractService.serviceName}),l.jsx("p",{className:"client-name",children:N.contractService.clientName})]}),l.jsxs("div",{className:"status-badge",style:{backgroundColor:G(N.status)},children:[q(N.status),l.jsx("span",{children:N.status.replace("-"," ").toUpperCase()})]})]}),l.jsxs("div",{className:"alert-card-content",children:[l.jsxs("div",{className:"payment-info",children:[l.jsxs("div",{className:"amount-due",children:[l.jsx(Fi,{className:"amount-icon"}),l.jsx("span",{className:"amount",children:O(N.amountDue,N.currency)})]}),l.jsxs("div",{className:"payment-date",children:[l.jsx(Yc,{className:"date-icon"}),l.jsx("span",{className:"date-label",children:"Due:"}),l.jsx("span",{className:"date-value",children:N.nextPaymentDate})]})]}),l.jsxs("div",{className:"alert-details",children:[l.jsx("p",{className:"description",children:N.description}),l.jsxs("div",{className:"contract-info",children:[l.jsxs("span",{className:"contract-number",children:["Contract: ",N.contractService.contractNumber]}),N.projectReference&&l.jsxs("span",{className:"project-ref",children:["Project: ",N.projectReference]})]})]}),l.jsxs("div",{className:"service-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Service Type:"}),l.jsx("span",{className:"value",children:N.contractService.serviceType})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Payment Terms:"}),l.jsxs("span",{className:"value",children:[N.paymentTerms," days"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Location:"}),l.jsxs("span",{className:"value",children:[N.contractService.location.city,","," ",N.contractService.location.state]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Responsible:"}),l.jsx("span",{className:"value",children:N.responsiblePerson})]})]})]}),l.jsxs("div",{className:"alert-card-footer",children:[l.jsxs("div",{className:"priority-indicator",children:[l.jsx("div",{className:"priority-dot",style:{backgroundColor:se(N.priority)}}),l.jsx("span",{children:N.priority.toUpperCase()})]}),l.jsx("div",{className:"days-remaining",children:P?l.jsxs("span",{className:"overdue",children:["Overdue by ",Math.abs(R)," days"]}):J?l.jsx("span",{className:"due-today",children:"Due today"}):de?l.jsxs("span",{className:"urgent",children:[R," days remaining"]}):l.jsxs("span",{className:"normal",children:[R," days remaining"]})})]}),l.jsxs("div",{className:"alert-actions",children:[l.jsx("button",{className:"action-btn secondary",onClick:()=>T(N.id),children:"View Details"}),N.status!=="paid"&&l.jsx("button",{className:"action-btn primary",onClick:()=>I(N.id),children:"Mark as Paid"})]})]},N.id)})}),D&&A&&l.jsx("div",{className:"modal-overlay",onClick:L,children:l.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Payment Details"}),l.jsx("button",{className:"close-button",onClick:L,children:"X"})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"service-info-section",children:[l.jsx("h3",{children:A.contractService.serviceName}),l.jsxs("p",{className:"client-info",children:["Client: ",A.contractService.clientName]}),l.jsxs("div",{className:"status-priority-row",children:[l.jsxs("div",{className:"status-badge",style:{backgroundColor:G(A.status)},children:[q(A.status),l.jsx("span",{children:A.status.replace("-"," ").toUpperCase()})]}),l.jsx("div",{className:"priority-badge",style:{backgroundColor:se(A.priority)},children:A.priority.toUpperCase()})]})]}),l.jsxs("div",{className:"payment-details-grid",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Amount Due:"}),l.jsx("span",{className:"amount-large",children:O(A.amountDue,A.currency)})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Due Date:"}),l.jsx("span",{children:A.nextPaymentDate})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Last Service Date:"}),l.jsx("span",{children:A.lastServiceDate})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Payment Terms:"}),l.jsxs("span",{children:[A.paymentTerms," days"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Contract Number:"}),l.jsx("span",{children:A.contractService.contractNumber})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Service Type:"}),l.jsx("span",{children:A.contractService.serviceType})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Location:"}),l.jsxs("span",{children:[A.contractService.location.address,","," ",A.contractService.location.city,","," ",A.contractService.location.state]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Responsible Person:"}),l.jsx("span",{children:A.responsiblePerson})]}),A.projectReference&&l.jsxs("div",{className:"detail-item",children:[l.jsx("label",{children:"Project Reference:"}),l.jsx("span",{children:A.projectReference})]})]}),l.jsxs("div",{className:"budget-section",children:[l.jsx("label",{children:"Budget Information:"}),l.jsxs("div",{className:"budget-details",children:[l.jsxs("div",{className:"budget-item",children:[l.jsx("span",{className:"budget-label",children:"Estimated Cost:"}),l.jsx("span",{className:"budget-value",children:O(A.contractService.budget.estimatedCost,A.currency)})]}),l.jsxs("div",{className:"budget-item",children:[l.jsx("span",{className:"budget-label",children:"Actual Cost:"}),l.jsx("span",{className:"budget-value",children:A.contractService.budget.actualCost?O(A.contractService.budget.actualCost,A.currency):"Not available"})]})]})]}),l.jsxs("div",{className:"description-section",children:[l.jsx("label",{children:"Service Description:"}),l.jsx("p",{children:A.serviceDescription||A.description})]}),A.contractService.notes&&l.jsxs("div",{className:"notes-section",children:[l.jsx("label",{children:"Notes:"}),l.jsx("p",{children:A.contractService.notes})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"action-button secondary",onClick:L,children:"Close"}),l.jsx("button",{className:"action-button secondary",onClick:()=>n("/admin/cadastro-servicos-contratados"),children:"View Contracted Services"}),A.status!=="paid"&&l.jsx("button",{className:"action-button primary",onClick:()=>{I(A.id),L()},children:"Mark as Paid"})]})]})})]})},oM=n=>n?.split(" ").map(e=>e[0]?.toUpperCase()).slice(0,2).join(""),Bx=n=>n?n.toLocaleDateString("pt-BR"):"-",lM=async n=>{try{await navigator.clipboard.writeText(n)}catch(e){console.error("Erro ao copiar texto:",e)}};function cM({isOpen:n,onClose:e,user:t}){if(M.useEffect(()=>{if(!n)return;const i=c=>{c.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[n,e]),!n||!t)return null;const a=i=>{i.target===i.currentTarget&&e()};return l.jsx("div",{className:"view-modal-overlay",onClick:a,children:l.jsxs("div",{className:"view-modal",role:"dialog","aria-modal":"true","aria-labelledby":"view-user-title",children:[l.jsxs("div",{className:"view-modal-header",children:[l.jsx("div",{className:"avatar",children:oM(t.displayName)}),l.jsxs("div",{className:"title-wrap",children:[l.jsx("h3",{id:"view-user-title",children:t.displayName||"No name"}),l.jsx("p",{className:"subtitle",title:t.email,children:t.email})]}),l.jsx("span",{className:`role-chip ${t.role}`,children:t.role==="admin"?"Admin":"Partial"}),l.jsx("button",{className:"close-btn",onClick:e,"aria-label":"Close",children:"x"})]}),l.jsx("div",{className:"view-modal-body",children:l.jsxs("div",{className:"info-grid",children:[l.jsxs("div",{className:"info-card",children:[l.jsx("h4",{className:"card-title",children:"Profile"}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:"Name"}),l.jsx("span",{className:"info-value",children:t.displayName||"-"})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:"Email"}),l.jsxs("span",{className:"info-value",title:t.email,children:[t.email,l.jsx("button",{className:"copy-btn",onClick:()=>lM(t.email),children:l.jsx(TO,{})})]})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:"UID"}),l.jsx("span",{className:"info-value",title:t.uid,children:t.uid})]})]}),l.jsxs("div",{className:"info-card",children:[l.jsx("h4",{className:"card-title",children:"Permissions"}),t.role!=="admin"&&(!t.allowedPaths||t.allowedPaths.length===0)&&l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:"Permissions"}),l.jsx("span",{className:"info-value",children:"No permissions"})]}),t.role==="admin"&&l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:"Permissions"}),l.jsx("span",{className:"info-value",children:"Full access"})]}),t.allowedPaths&&t.allowedPaths.length>0&&l.jsx("div",{className:"permissions",children:t.allowedPaths.map(i=>l.jsx("span",{className:"permission-pill",children:i},i))})]}),l.jsxs("div",{className:"info-card",children:[l.jsx("h4",{className:"card-title",children:"Dates"}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:"Created At"}),l.jsx("span",{className:"info-value",children:Bx(t.createdAt)})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:"Updated At"}),l.jsx("span",{className:"info-value",children:Bx(t.updatedAt)})]})]})]})}),l.jsx("div",{className:"view-modal-footer",children:l.jsx("button",{className:"btn secondary",onClick:e,children:"Fechar"})})]})})}function uM({isOpen:n,onClose:e,user:t,onSave:a}){const i=M.useMemo(()=>({displayName:t?.displayName??"",role:t?.role??"partial",allowedPaths:t?.allowedPaths??[],email:t?.email??""}),[t]),[c,d]=M.useState(i),[m,y]=M.useState(!1),[g,_]=M.useState({});M.useEffect(()=>{d(i),_({})},[i]),M.useEffect(()=>{if(!n)return;const A=U=>{U.key==="Escape"&&e()};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[n,e]);const E=()=>{const A={};return c.displayName.trim()||(A.displayName="Provide the name"),c.email?.trim()||(A.email="Provide the email"),_(A),Object.keys(A).length===0},b=A=>{A.target===A.currentTarget&&e()},x=A=>U=>{d(D=>({...D,[A]:U}))},C=async A=>{if(A.preventDefault(),!!E())try{y(!0),await a({displayName:c.displayName,email:c.email,role:c.role,allowedPaths:c.allowedPaths})}finally{y(!1)}};return!n||!t?null:l.jsx("div",{className:"edit-modal-overlay",onClick:b,children:l.jsxs("div",{className:"edit-modal",role:"dialog","aria-modal":"true","aria-labelledby":"edit-user-title",children:[l.jsxs("div",{className:"edit-modal-header",children:[l.jsx("h3",{id:"edit-user-title",children:"Edit User"}),l.jsx("button",{className:"close-btn",onClick:e,"aria-label":"Close",children:"x"})]}),l.jsxs("form",{className:"edit-modal-body",onSubmit:C,children:[l.jsxs("div",{className:"form-row",children:[l.jsx("label",{htmlFor:"displayName",className:"form-label",children:"Name"}),l.jsxs("div",{className:"form-field",children:[l.jsx("input",{type:"text",id:"displayName",value:c.displayName,onChange:A=>x("displayName")(A.target.value),placeholder:"User name"}),g.displayName&&l.jsx("span",{className:"error-text",children:g.displayName})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),l.jsx("div",{className:"form-field",children:l.jsx("input",{id:"email",type:"email",value:c.email,onChange:A=>x("email")(A.target.value)})})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{htmlFor:"role",className:"form-label",children:"Profile"}),l.jsx("div",{className:"form-field",children:l.jsxs("select",{id:"role",value:c.role,onChange:A=>x("role")(A.target.value),children:[l.jsx("option",{value:"admin",children:"Admin"}),l.jsx("option",{value:"partial",children:"Partial"})]})})]}),l.jsxs("div",{className:"form-row",children:[l.jsx("label",{className:"form-label",children:"Permissions"}),l.jsxs("div",{className:"form-field",children:[l.jsx("textarea",{rows:3,placeholder:"Enter allowed paths (comma-separated)",value:c.allowedPaths.join(", "),onChange:A=>x("allowedPaths")(A.target.value.split(",").map(U=>U.trim()).filter(Boolean))}),l.jsx("span",{className:"hint-text",children:'Let empty for "No permissions". If profile is Admin, will be "Full access".'})]})]}),l.jsxs("div",{className:"edit-modal-footer",children:[l.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:m,children:"Cancel"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Saving...":"Save"})]})]})]})})}function dM(){const{showSuccess:n,showError:e}=YS(),[t,a]=M.useState([]),[i,c]=M.useState(!0),[d,m]=M.useState(null),[y,g]=M.useState({isOpen:!1,record:null}),[_,E]=M.useState({isOpen:!1,user:null}),[b,x]=M.useState({isOpen:!1,user:null}),[C,A]=M.useState(""),[U,D]=M.useState("all"),[W,q]=M.useState("name"),[se,G]=M.useState({totalUsers:0,adminUsers:0,partialUsers:0,recentUsers:0}),he=P=>{const J=new Date,de=new Date(J.getTime()-10080*60*1e3);G({totalUsers:P.length,adminUsers:P.filter(K=>K.role==="admin").length,partialUsers:P.filter(K=>K.role==="partial").length,recentUsers:P.filter(K=>K.createdAt>de).length})},O=()=>{let P=[...t];return C.trim()&&(P=P.filter(J=>J.displayName?.toLowerCase().includes(C.toLowerCase())||J.email.toLowerCase().includes(C.toLowerCase()))),U!=="all"&&(P=P.filter(J=>J.role===U)),P.sort((J,de)=>{switch(W){case"name":return(J.displayName||"").localeCompare(de.displayName||"");case"email":return J.email.localeCompare(de.email);case"createdAt":return de.createdAt.getTime()-J.createdAt.getTime();default:return 0}}),P};M.useEffect(()=>{(async()=>{try{c(!0),m(null);const J=await Ni.getAllUsers();a(J),he(J)}catch(J){console.error("Error loading users:",J),m(J instanceof Error?J.message:"Failed to fetch users")}finally{c(!1)}})()},[]);const T=async P=>{g({isOpen:!0,record:P})},I=async()=>{if(y.record)try{await Ni.deleteUser(String(y.record.id)),a(P=>P.filter(J=>J.id!==y.record.id)),he(t),n("Excludo!",`${y.record.displayName} removido com sucesso!`)}catch(P){console.error("Error deleting user:",P),e("Falha!",`Falha ao excluir ${y.record.displayName}: ${P instanceof Error?P.message:"Erro desconhecido"}`),m(P instanceof Error?P.message:"Falha ao excluir usurio")}finally{g({isOpen:!1,record:null})}},L=P=>{E({isOpen:!0,user:P})},N=async P=>{if(!b.user)return;const J=b.user.id;await Ni.updateUser(J,{displayName:P.displayName,role:P.role,allowedPaths:P.allowedPaths,email:P.email}),a(de=>{const K=de.map(ce=>ce.id===J?{...ce,...P,updatedAt:new Date}:ce);return he(K),K}),x({isOpen:!1,user:null}),n("Atualizado!",`${b.user.displayName} atualizado com sucesso!`)},R=P=>{x({isOpen:!0,user:P})};return l.jsxs("div",{className:"users-container",children:[l.jsx("div",{className:"users-header",children:l.jsx("h1",{children:"Users management"})}),i&&l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading users..."})]}),d&&l.jsxs("div",{className:"error-container",children:[l.jsxs("p",{children:["Error: ",d]}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Try again"})]}),!i&&!d&&l.jsx("div",{className:"metrics-section",children:l.jsxs("div",{className:"metrics-grid",children:[l.jsxs("div",{className:"metric-card",children:[l.jsx("div",{className:"metric-icon total",children:l.jsx(Lr,{})}),l.jsxs("div",{className:"metric-content",children:[l.jsx("h3",{children:se.totalUsers}),l.jsx("p",{children:"Total Users"})]})]}),l.jsxs("div",{className:"metric-card",children:[l.jsx("div",{className:"metric-icon admin",children:l.jsx(sl,{})}),l.jsxs("div",{className:"metric-content",children:[l.jsx("h3",{children:se.adminUsers}),l.jsx("p",{children:"Administrators"})]})]}),l.jsxs("div",{className:"metric-card",children:[l.jsx("div",{className:"metric-icon partial",children:l.jsx(Lr,{})}),l.jsxs("div",{className:"metric-content",children:[l.jsx("h3",{children:se.partialUsers}),l.jsx("p",{children:"Partial Users"})]})]}),l.jsxs("div",{className:"metric-card",children:[l.jsx("div",{className:"metric-icon recent",children:l.jsx(Lr,{})}),l.jsxs("div",{className:"metric-content",children:[l.jsx("h3",{children:se.recentUsers}),l.jsx("p",{children:"Recent (7 days)"})]})]})]})}),!i&&!d&&l.jsx("div",{className:"filters-section",children:l.jsxs("div",{className:"filters-container",children:[l.jsx("div",{className:"search-container",children:l.jsx("input",{type:"text",placeholder:"Search users...",value:C,onChange:P=>A(P.target.value),className:"search-input"})}),l.jsxs("div",{className:"filter-controls",children:[l.jsxs("select",{value:U,onChange:P=>D(P.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All Roles"}),l.jsx("option",{value:"admin",children:"Administrators"}),l.jsx("option",{value:"partial",children:"Partial Users"})]}),l.jsxs("select",{value:W,onChange:P=>q(P.target.value),className:"filter-select",children:[l.jsx("option",{value:"name",children:"Sort by Name"}),l.jsx("option",{value:"email",children:"Sort by Email"}),l.jsx("option",{value:"createdAt",children:"Sort by Date"})]}),l.jsx("button",{onClick:()=>{A(""),D("all"),q("name")},className:"clear-filters-btn",children:"Clear Filters"})]})]})}),!i&&!d&&O().length>0&&l.jsx("div",{className:"users-grid",children:O().map(P=>l.jsxs("div",{className:"user-card",children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("div",{className:"user-info",children:[l.jsx(Lr,{className:"user-icon"}),l.jsx("h3",{className:"user-name",children:P.displayName||"No name"})]}),l.jsxs("div",{className:`role-badge ${P.role}`,children:[l.jsx(sl,{className:"role-icon"}),P.role==="admin"?"Admin":"Partial"]})]}),l.jsxs("div",{className:"card-content",children:[l.jsx("p",{className:"user-email",children:P.email}),l.jsxs("p",{className:"user-paths",children:["Permissions:"," ",P.allowedPaths?.length&&P.allowedPaths?.length>0?P.allowedPaths?.join(", "):P.role==="admin"?"Full access":"No permissions"]})]}),l.jsxs("div",{className:"card-actions",children:[l.jsx("button",{className:"action-btn view",onClick:()=>L(P),children:l.jsx(jO,{})}),l.jsx("button",{className:"action-btn edit",onClick:()=>R(P),children:l.jsx(CO,{})}),l.jsx("button",{className:"action-btn delete",onClick:()=>T(P),children:l.jsx(RO,{})})]})]},P.uid))}),!i&&!d&&t.length===0&&l.jsxs("div",{className:"empty-container",children:[l.jsx(Lr,{className:"empty-icon"}),l.jsx("p",{children:"No users found"}),l.jsx("p",{className:"empty-subtitle",children:"Users will be shown here when they are created"})]}),!i&&!d&&O().length===0&&t.length>0&&l.jsxs("div",{className:"empty-container",children:[l.jsx(DO,{className:"empty-icon"}),l.jsx("p",{children:"No users found matching your filters"}),l.jsx("p",{className:"empty-subtitle",children:"Try adjusting your search or filter criteria"})]}),l.jsx(XS,{isOpen:y.isOpen,onClose:()=>g({isOpen:!1,record:null}),onConfirm:I,title:"Confirmar Excluso",message:`Tem certeza que deseja excluir "${y.record?.displayName}"? Esta ao no pode ser desfeita.`,confirmText:"Excluir",cancelText:"Cancelar",type:"danger"}),l.jsx(cM,{isOpen:_.isOpen,onClose:()=>E({isOpen:!1,user:null}),user:_.user}),l.jsx(uM,{isOpen:b.isOpen,onClose:()=>x({isOpen:!1,user:null}),user:b.user,onSave:N})]})}const yt=(n,e="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(n),Ea=(n,e,t)=>{if(!e||!t)return!0;const a=typeof n=="string"?new Date(n):n;return a.setHours(0,0,0,0),e.setHours(0,0,0,0),t.setHours(0,0,0,0),a>=e&&a<=t},hM=()=>{const[n,e]=M.useState(!1),[t,a]=M.useState(null);return{loading:n,error:t,generateReportData:async(d,m,y)=>{try{switch(e(!0),a(null),d){case"client-payments":{const _=(await Sa.getAllClientPaymentAlerts()).filter(E=>Ea(E.dueDate,m,y));return{columns:["Client Name","Invoice Number","Amount","Due Date","Status","Payment Date"],rows:_.map(E=>[E.clientName,E.invoiceNumber,yt(E.amount,"USD"),E.dueDate,E.status.charAt(0).toUpperCase()+E.status.slice(1),E.status==="paid"?E.dueDate:"-"])}}case"subcontractor-payments":{const _=(await wi.getAllSubcontractorPaymentAlerts()).filter(E=>Ea(E.nextPaymentDate,m,y));return{columns:["Company Name","Contact Person","Service","Amount Due","Payment Date","Status"],rows:_.map(E=>[E.subcontractor.companyName||"N/A",E.subcontractor.contactPerson||"N/A",E.serviceDescription||"N/A",yt(E.amountDue,E.currency),E.nextPaymentDate,E.status==="paid"?"Paid":E.status==="overdue"?"Overdue":E.status==="due-today"?"Due Today":"Pending"])}}case"project-costs":{const g=await zt.getAllContractServices(),_=await Sn.getAllClients(),E=new Map(_.map(x=>[x.id||"",x])),b=g.filter(x=>x.startDate?Ea(x.startDate,m,y):!1);return{columns:["Project Name","Client","Budget","Spent","Remaining","Status"],rows:b.map(x=>{const C=x.clientId?E.get(x.clientId):null,A=x.budget.estimatedCost||0,U=x.budget.actualCost||0,D=A-U;return[x.serviceName,C?.name||x.clientName||"N/A",yt(A,x.budget.currency),yt(U,x.budget.currency),yt(D,x.budget.currency),x.status==="completed"?"Completed":x.status==="in_progress"?"In Progress":x.status==="cancelled"?"Cancelled":"Pending"]})}}case"vehicle-maintenance":{const _=(await ws.getAllVehicles()).filter(E=>E.nextMaintenanceDate?Ea(E.nextMaintenanceDate,m,y):!1);return{columns:["Vehicle","License Plate","Last Maintenance","Next Maintenance","Type","Status"],rows:_.map(E=>[`${E.make} ${E.model}`,E.licensePlate,E.lastMaintenanceDate||"N/A",E.nextMaintenanceDate||"N/A",E.maintenanceSchedule?E.maintenanceSchedule.charAt(0).toUpperCase()+E.maintenanceSchedule.slice(1):"N/A",E.status==="active"?"Active":E.status==="maintenance"?"Maintenance":E.status==="retired"?"Retired":"Sold"])}}case"contracted-services":{const g=await zt.getAllContractServices(),_=await Sn.getAllClients(),E=new Map(_.map(x=>[x.id||"",x])),b=g.filter(x=>x.startDate?Ea(x.startDate,m,y):!1);return{columns:["Service Name","Client","Start Date","End Date","Status","Budget","Spent"],rows:b.map(x=>{const C=x.clientId?E.get(x.clientId):null;return[x.serviceName,C?.name||x.clientName||"N/A",x.startDate,x.endDate,x.status==="completed"?"Completed":x.status==="in_progress"?"In Progress":x.status==="cancelled"?"Cancelled":"Pending",yt(x.budget.estimatedCost||0,x.budget.currency),yt(x.budget.actualCost||0,x.budget.currency)]})}}case"client-overview":{const g=await Sn.getAllClients(),_=await zt.getAllContractServices(),E=new Map;return _.forEach(b=>{if(b.clientId){const x=E.get(b.clientId)||[];x.push(b),E.set(b.clientId,x)}}),{columns:["Client Name","Total Projects","Active Projects","Total Revenue","Payment Status"],rows:g.map(b=>{const x=E.get(b.id||"")||[],C=x.filter(D=>D.status==="in_progress"),A=x.reduce((D,W)=>D+(W.budget.actualCost||W.budget.estimatedCost||0),0);return[b.name,x.length.toString(),C.length.toString(),yt(A,"USD"),"Good"]})}}case"expense-breakdown":{const g=await zt.getAllContractServices(),_=new Map;g.forEach(b=>{const x=b.budget.actualCost||0,C=b.budget.estimatedCost||0,A=x>0?x:C,U=b.serviceType||"Other",D=_.get(U)||{total:0,count:0};_.set(U,{total:D.total+A,count:D.count+1})});const E=Array.from(_.values()).reduce((b,x)=>b+x.total,0);return{columns:["Category","Amount","Percentage","Count","Average"],rows:Array.from(_.entries()).map(([b,x])=>{const C=E>0?(x.total/E*100).toFixed(0):"0",A=x.count>0?yt(x.total/x.count,"USD"):"$0";return[b,yt(x.total,"USD"),`${C}%`,x.count.toString(),A]})}}case"service-pricing":{const g=await zt.getAllContractServices(),_=await Sn.getAllClients(),E=new Map(_.map(b=>[b.id||"",b]));return{columns:["Service","Client","Price","Cost","Margin","Status"],rows:g.map(b=>{const x=b.clientId?E.get(b.clientId):null,C=b.budget.estimatedCost||0,A=b.budget.actualCost||0,U=C>0?((C-A)/C*100).toFixed(0):"0";return[b.serviceName,x?.name||b.clientName||"N/A",yt(C,b.budget.currency),yt(A,b.budget.currency),`${U}%`,b.status==="completed"?"Completed":b.status==="in_progress"?"Active":"Pending"]})}}case"alerts-summary":{const g=await Sa.getAllClientPaymentAlerts(),_=await wi.getAllSubcontractorPaymentAlerts(),E=await jh.getAllContractedServicePaymentAlerts(),b=await wa.getAllProjectAlerts(),x={"Payment Due":{total:0,critical:0,high:0,medium:0,low:0},"Vehicle Maintenance":{total:0,critical:0,high:0,medium:0,low:0},"Project Deadline":{total:0,critical:0,high:0,medium:0,low:0},"Contract Expiry":{total:0,critical:0,high:0,medium:0,low:0}};return[...g,..._,...E].forEach(C=>{const A="Payment Due";x[A].total++,C.priority==="high"?x[A].high++:C.priority==="medium"?x[A].medium++:x[A].low++,(C.status==="overdue"||C.status==="due-today")&&x[A].critical++}),b.forEach(C=>{const A="Project Deadline";x[A].total++,C.priority==="high"?x[A].high++:C.priority==="medium"?x[A].medium++:x[A].low++,C.status==="delayed"&&x[A].critical++}),{columns:["Alert Type","Count","Critical","High","Medium","Low"],rows:Object.entries(x).map(([C,A])=>[C,A.total.toString(),A.critical.toString(),A.high.toString(),A.medium.toString(),A.low.toString()])}}case"project-completion":{const _=(await wa.getAllProjectAlerts()).filter(E=>E.startDate?Ea(E.startDate,m,y):!1);return{columns:["Project","Progress","Start Date","End Date","Days Remaining","Status"],rows:_.map(E=>{const b=new Date,C=new Date(E.plannedEndDate).getTime()-b.getTime(),A=Math.ceil(C/(1e3*60*60*24));return[E.projectName,`${E.actualProgress}%`,E.startDate,E.plannedEndDate,A>0?A.toString():"0",E.status==="completed"?"Completed":E.status==="delayed"?"Delayed":E.status==="at-risk"?"At Risk":"On Track"]})}}case"cash-flow":{const g=await zt.getAllContractServices(),_=new Map;g.forEach(C=>{if(!C.startDate)return;const A=new Date(C.startDate),U=`${A.toLocaleString("en-US",{month:"long"})} ${A.getFullYear()}`,D=_.get(U)||{income:0,expenses:0},W=C.budget.estimatedCost||0,q=C.budget.actualCost||0;_.set(U,{income:D.income+W,expenses:D.expenses+q})});const E=Array.from(_.entries()).sort((C,A)=>{const U=new Date(C[0]);return new Date(A[0]).getTime()-U.getTime()});let b=0;const x=E.slice(0,5).map(([C,A])=>{const U=A.income-A.expenses;return b+=U,[C,yt(A.income,"USD"),yt(A.expenses,"USD"),yt(U,"USD"),"N/A",yt(b,"USD")]});return{columns:["Month","Income","Expenses","Net","Change","Balance"],rows:x}}case"employee-hours":{const g=await Ti.getAllEmployees();return{columns:["Employee","Regular Hours","Overtime","Total Hours","Status"],rows:g.map(_=>[_.name,"160","0","160","Active"])}}default:return{columns:["Item","Value","Status"],rows:[["No data available","N/A","N/A"]]}}}catch(g){return console.error("Error generating report data:",g),a(g instanceof Error?g.message:"Failed to generate report"),{columns:["Error"],rows:[["Failed to load data"]]}}finally{e(!1)}},getReportMetrics:async(d,m,y)=>{try{switch(d){case"client-payments":{const _=(await Sa.getAllClientPaymentAlerts()).filter(x=>Ea(x.dueDate,m,y)),E=_.filter(x=>x.status==="paid").reduce((x,C)=>x+C.amount,0),b=_.filter(x=>x.status==="pending"||x.status==="overdue").reduce((x,C)=>x+C.amount,0);return[{label:"Total Received",value:yt(E)},{label:"Pending",value:yt(b)}]}case"subcontractor-payments":{const _=(await wi.getAllSubcontractorPaymentAlerts()).filter(x=>Ea(x.nextPaymentDate,m,y)),E=_.filter(x=>x.status==="paid").reduce((x,C)=>x+C.amountDue,0),b=_.filter(x=>x.status!=="paid").reduce((x,C)=>x+C.amountDue,0);return[{label:"Total Paid",value:yt(E)},{label:"Due",value:yt(b)}]}case"project-costs":{const _=(await zt.getAllContractServices()).filter(x=>x.startDate?Ea(x.startDate,m,y):!1),E=_.reduce((x,C)=>x+(C.budget.estimatedCost||0),0),b=_.reduce((x,C)=>x+(C.budget.actualCost||0),0);return[{label:"Total Budget",value:yt(E)},{label:"Spent",value:yt(b)}]}case"vehicle-maintenance":{const g=await ws.getAllVehicles(),_=g.filter(b=>b.status==="active"),E=g.filter(b=>b.nextMaintenanceDate?new Date(b.nextMaintenanceDate)<=new Date&&b.status==="active":!1);return[{label:"Active Vehicles",value:_.length.toString()},{label:"Maintenance Due",value:E.length.toString()}]}case"contracted-services":{const g=await zt.getAllContractServices(),_=g.filter(b=>b.status==="in_progress"),E=g.filter(b=>b.status==="completed");return[{label:"Active Services",value:_.length.toString()},{label:"Completed",value:E.length.toString()}]}case"client-overview":{const g=await Sn.getAllClients(),E=(await zt.getAllContractServices()).filter(b=>b.status==="in_progress");return[{label:"Total Clients",value:g.length.toString()},{label:"Active Projects",value:E.length.toString()}]}case"expense-breakdown":{const _=(await zt.getAllContractServices()).reduce((b,x)=>b+(x.budget.actualCost||x.budget.estimatedCost||0),0),E=await by.getAllExpenseTypes();return[{label:"Total Expenses",value:yt(_)},{label:"Categories",value:E.length.toString()}]}case"service-pricing":{const g=await zt.getAllContractServices(),_=g.reduce((b,x)=>{const C=x.budget.estimatedCost||0,A=x.budget.actualCost||0;return b+(C>0?(C-A)/C*100:0)},0),E=g.length>0?(_/g.length).toFixed(0):"0";return[{label:"Services",value:g.length.toString()},{label:"Avg. Margin",value:`${E}%`}]}case"alerts-summary":{const g=await Sa.getAllClientPaymentAlerts(),_=await wi.getAllSubcontractorPaymentAlerts(),E=await jh.getAllContractedServicePaymentAlerts(),b=await wa.getAllProjectAlerts(),x=[...g,..._,...E],C=[...x.filter(A=>A.status==="overdue"||A.status==="due-today"),...b.filter(A=>A.status==="delayed")];return[{label:"Active Alerts",value:x.length.toString()},{label:"Critical",value:C.length.toString()}]}case"project-completion":{const g=await wa.getAllProjectAlerts(),_=g.filter(b=>b.status==="on-track"),E=g.filter(b=>b.status==="delayed");return[{label:"On Schedule",value:_.length.toString()},{label:"Delayed",value:E.length.toString()}]}case"cash-flow":{const g=await zt.getAllContractServices(),_=g.reduce((x,C)=>x+(C.budget.estimatedCost||0),0),E=g.reduce((x,C)=>x+(C.budget.actualCost||0),0),b=_-E;return[{label:"Net Income",value:yt(b)},{label:"Change",value:"N/A"}]}case"employee-hours":{const g=await Ti.getAllEmployees();return[{label:"Total Hours",value:"N/A"},{label:"Employees",value:g.length.toString()}]}default:return[]}}catch(g){return console.error("Error getting report metrics:",g),[]}}}},fM=()=>{const[n,e]=M.useState("30"),[t,a]=M.useState("all"),[i,c]=M.useState(""),[d,m]=M.useState(""),[y,g]=M.useState(!1),[_,E]=M.useState(null),[b,x]=M.useState(null),[C,A]=M.useState([]),[U,D]=M.useState(!1),{generateReportData:W,getReportMetrics:q}=hM(),se=[{id:"client-payments",title:"Client Payments Report",description:"Detailed report of payments received from clients, including overdue and pending amounts",category:"financial",icon:l.jsx(Fi,{}),color:"#10b981"},{id:"subcontractor-payments",title:"Subcontractor Payments",description:"Payment history and outstanding amounts for all subcontractors",category:"financial",icon:l.jsx(Rs,{}),color:"#f59e0b"},{id:"project-costs",title:"Project Costs Analysis",description:"Comprehensive breakdown of costs per project including labor, materials, and overhead",category:"financial",icon:l.jsx(dg,{}),color:"#3b82f6"},{id:"vehicle-maintenance",title:"Vehicle Maintenance Log",description:"Complete maintenance history and upcoming service schedules for all vehicles",category:"operational",icon:l.jsx(Gk,{}),color:"#8b5cf6"},{id:"contracted-services",title:"Contracted Services Status",description:"Overview of all contracted services with status, deadlines, and payment schedules",category:"operational",icon:l.jsx(mk,{}),color:"#06b6d4"},{id:"client-overview",title:"Client Portfolio Overview",description:"Summary of all clients, active projects, payment history, and satisfaction metrics",category:"management",icon:l.jsx(Xc,{}),color:"#ec4899"},{id:"expense-breakdown",title:"Expense Breakdown by Type",description:"Categorized expenses showing distribution across different expense types and categories",category:"financial",icon:l.jsx(US,{}),color:"#ef4444"},{id:"service-pricing",title:"Service Pricing Analysis",description:"Service pricing comparison across clients with profitability and margin analysis",category:"financial",icon:l.jsx(vs,{}),color:"#14b8a6"},{id:"alerts-summary",title:"Alerts & Notifications Summary",description:"Consolidated view of all active alerts including payments, maintenance, and deadlines",category:"management",icon:l.jsx(ug,{}),color:"#f97316"},{id:"project-completion",title:"Project Completion Report",description:"Track project progress, completion rates, timeline adherence, and resource utilization",category:"operational",icon:l.jsx(fr,{}),color:"#84cc16"},{id:"cash-flow",title:"Cash Flow Statement",description:"Detailed cash flow analysis showing income, expenses, and net cash position over time",category:"financial",icon:l.jsx(dg,{}),color:"#6366f1"},{id:"employee-hours",title:"Employee Hours & Payroll",description:"Employee work hours, overtime, payroll costs, and productivity metrics",category:"management",icon:l.jsx(Yc,{}),color:"#a855f7"}],G=()=>{const N=new Date;N.setHours(23,59,59,999);let R=new Date;if(n==="7")R.setDate(N.getDate()-7);else if(n==="30")R.setDate(N.getDate()-30);else if(n==="90")R.setDate(N.getDate()-90);else if(n==="custom")if(i&&d)R=new Date(i),N.setTime(new Date(d).getTime()),N.setHours(23,59,59,999);else return{};return R.setHours(0,0,0,0),{startDate:R,endDate:N}};M.useEffect(()=>{(async()=>{try{const{startDate:R,endDate:P}=G(),J=await Promise.all(se.map(async de=>{const K=await q(de.id,R,P);return{...de,metrics:K.length>0?K:void 0}}));A(J)}catch(R){console.error("Error loading report metrics:",R)}})()},[n,i,d]);const he=C.filter(N=>t==="all"?!0:N.category===t),O=()=>{switch(n){case"7":return"Last 7 days";case"30":return"Last 30 days";case"90":return"Last 90 days";case"custom":return i&&d?`${i} to ${d}`:"Custom period";default:return"Last 30 days"}},T=async N=>{E(N),g(!0),x(null),D(!0);try{const{startDate:R,endDate:P}=G(),J=await W(N.id,R,P);x(J)}catch(R){console.error("Error loading report data:",R),x({columns:["Error"],rows:[["Failed to load report data"]]})}finally{D(!1)}},I=()=>{g(!1),E(null),x(null)},L=()=>{if(!_||!b)return;let N=`${_.title} - ${O()}

`;N+=b.columns.join(",")+`
`,b.rows.forEach(de=>{N+=de.join(",")+`
`});const R=new Blob([N],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a"),J=URL.createObjectURL(R);P.setAttribute("href",J),P.setAttribute("download",`${_.id}-${new Date().toISOString().split("T")[0]}.csv`),P.style.visibility="hidden",document.body.appendChild(P),P.click(),document.body.removeChild(P)};return l.jsxs("div",{className:"reports",children:[l.jsxs("div",{className:"reports-header",children:[l.jsx("h1",{children:"Reports & Analytics"}),l.jsx("p",{children:"Generate comprehensive reports and export data for analysis"})]}),l.jsxs("div",{className:"reports-filters",children:[l.jsxs("div",{className:"filter-section",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Report Period:"}),l.jsxs("div",{className:"period-buttons",children:[l.jsx("button",{className:`period-btn ${n==="7"?"active":""}`,onClick:()=>e("7"),children:"Last 7 days"}),l.jsx("button",{className:`period-btn ${n==="30"?"active":""}`,onClick:()=>e("30"),children:"Last 30 days"}),l.jsx("button",{className:`period-btn ${n==="90"?"active":""}`,onClick:()=>e("90"),children:"Last 90 days"}),l.jsx("button",{className:`period-btn ${n==="custom"?"active":""}`,onClick:()=>e("custom"),children:"Custom"})]})]}),n==="custom"&&l.jsxs("div",{className:"custom-date-range",children:[l.jsxs("div",{className:"date-input-group",children:[l.jsx("label",{children:"Start Date:"}),l.jsx("input",{type:"date",value:i,onChange:N=>c(N.target.value)})]}),l.jsxs("div",{className:"date-input-group",children:[l.jsx("label",{children:"End Date:"}),l.jsx("input",{type:"date",value:d,onChange:N=>m(N.target.value)})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Category:"}),l.jsxs("div",{className:"category-buttons",children:[l.jsx("button",{className:`category-btn ${t==="all"?"active":""}`,onClick:()=>a("all"),children:"All Reports"}),l.jsx("button",{className:`category-btn ${t==="financial"?"active":""}`,onClick:()=>a("financial"),children:"Financial"}),l.jsx("button",{className:`category-btn ${t==="operational"?"active":""}`,onClick:()=>a("operational"),children:"Operational"}),l.jsx("button",{className:`category-btn ${t==="management"?"active":""}`,onClick:()=>a("management"),children:"Management"})]})]})]}),l.jsxs("div",{className:"period-info",children:[l.jsx(Yc,{}),l.jsxs("span",{children:["Generating reports for: ",O()]})]})]}),l.jsx("div",{className:"reports-grid",children:he.map(N=>l.jsxs("div",{className:"report-card",children:[l.jsxs("div",{className:"report-card-header",children:[l.jsx("div",{className:"report-icon",style:{backgroundColor:N.color},children:N.icon}),l.jsx("div",{className:"report-category",children:l.jsx("span",{className:`category-badge ${N.category}`,children:N.category})})]}),l.jsxs("div",{className:"report-card-content",children:[l.jsx("h3",{children:N.title}),l.jsx("p",{children:N.description}),N.metrics&&l.jsx("div",{className:"report-metrics",children:N.metrics.map((R,P)=>l.jsxs("div",{className:"metric-item",children:[l.jsx("span",{className:"metric-label",children:R.label}),l.jsx("span",{className:"metric-value",children:R.value})]},P))})]}),l.jsx("div",{className:"report-card-footer",children:l.jsxs("button",{className:"view-details-btn",onClick:()=>T(N),children:[l.jsx(qS,{}),"View Details"]})})]},N.id))}),he.length===0&&l.jsxs("div",{className:"no-reports",children:[l.jsx(vs,{}),l.jsx("h3",{children:"No reports found"}),l.jsx("p",{children:"Try adjusting your filters to see more reports."})]}),y&&_&&l.jsx("div",{className:"modal-overlay",onClick:I,children:l.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"modal-title",children:[l.jsx("div",{className:"modal-icon",style:{backgroundColor:_.color},children:_.icon}),l.jsxs("div",{children:[l.jsx("h2",{children:_.title}),l.jsx("p",{className:"modal-subtitle",children:O()})]})]}),l.jsx("button",{className:"close-modal-btn",onClick:I,children:l.jsx(zS,{})})]}),l.jsx("div",{className:"modal-body",children:U?l.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:l.jsx("p",{children:"Carregando dados do relatrio..."})}):b?l.jsx("div",{className:"table-container",children:l.jsxs("table",{className:"report-table",children:[l.jsx("thead",{children:l.jsx("tr",{children:b.columns.map((N,R)=>l.jsx("th",{children:N},R))})}),l.jsx("tbody",{children:b.rows.length>0?b.rows.map((N,R)=>l.jsx("tr",{children:N.map((P,J)=>l.jsx("td",{children:P},J))},R)):l.jsx("tr",{children:l.jsx("td",{colSpan:b.columns.length,style:{textAlign:"center",padding:"2rem"},children:"Nenhum dado disponvel para o perodo selecionado"})})})]})}):l.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:l.jsx("p",{children:"Erro ao carregar dados do relatrio"})})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"modal-btn secondary",onClick:I,children:"Close"}),b&&l.jsxs("button",{className:"modal-btn primary",onClick:L,children:[l.jsx(_k,{}),"Export CSV"]})]})]})})]})};function zx(){const{data:n,loading:e,refreshData:t}=QS(),{goTo:a}=LS(),i=M.useMemo(()=>[{id:"users",title:"Total Users",count:n.users.length,icon:l.jsx(Xc,{}),color:"#0ea5e9",trend:{value:12,isPositive:!0},route:"/admin/cadastro-usuario"},{id:"clients",title:"Clients",count:n.clients.length,icon:l.jsx(Mr,{}),color:"#8b5cf6",trend:{value:8,isPositive:!0},route:"/admin/cadastro-clientes"},{id:"employees",title:"Employees",count:n.employees.length,icon:l.jsx(Mr,{}),color:"#10b981",trend:{value:5,isPositive:!1},route:"/admin/cadastro-funcionario"},{id:"services",title:"Services",count:n.services.length,icon:l.jsx(Ah,{}),color:"#f59e0b",route:"/admin/cadastro-servico"},{id:"subcontractors",title:"Subcontractors",count:n.subcontractors.length,icon:l.jsx(Mr,{}),color:"#06b6d4",route:"/admin/cadastro-subcontratados"},{id:"contract-services",title:"Contract Services",count:n.contractServices.length,icon:l.jsx(vs,{}),color:"#ec4899",route:"/admin/cadastro-servicos-contratados"},{id:"vehicles",title:"Vehicles",count:n.vehicles.length,icon:l.jsx(nl,{}),color:"#6366f1",route:"/admin/cadastro-veiculos"},{id:"financings",title:"Financings",count:n.financings.length,icon:l.jsx(Rs,{}),color:"#ef4444",route:"/admin/cadastro-financiamentos"},{id:"bank-accounts",title:"Bank Accounts",count:n.bankAccounts.length,icon:l.jsx(yy,{}),color:"#14b8a6",route:"/admin/cadastro-conta-bancaria"},{id:"credit-cards",title:"Credit Cards",count:n.creditCards.length,icon:l.jsx(vy,{}),color:"#f97316",route:"/admin/cadastro-cartao-credito"},{id:"expense-types",title:"Expense Types",count:n.expenseTypes.length,icon:l.jsx(vs,{}),color:"#84cc16",route:"/admin/cadastro-tipo-despesa"},{id:"service-pricing",title:"Service Pricing",count:n.servicePricing.length,icon:l.jsx(Fi,{}),color:"#a855f7",route:"/admin/cadastro-preco-servico"}],[n]),c=M.useMemo(()=>[{id:"1",type:"warning",title:"Payment Overdue",message:"Invoice #2024-045 from ABC Corp is 5 days overdue",time:"2 hours ago"},{id:"2",type:"error",title:"Vehicle Maintenance",message:"Ford F-150 (ABC-1234) requires urgent maintenance",time:"5 hours ago"},{id:"3",type:"info",title:"New Client Added",message:"John Doe Services LLC has been added to the system",time:"1 day ago"},{id:"4",type:"success",title:"Contract Completed",message:"Pipeline Installation project completed successfully",time:"2 days ago"},{id:"5",type:"warning",title:"License Expiring",message:"Driver's license for Maria Silva expires in 15 days",time:"3 days ago"}],[]),d=M.useMemo(()=>i.reduce((_,E)=>_+E.count,0),[i]),m=_=>{_&&(window.location.href=_)},y=async()=>{await t()},g=_=>{switch(_){case"warning":return l.jsx(ug,{});case"error":return l.jsx(ug,{});case"info":return l.jsx(cg,{});case"success":return l.jsx(fr,{});default:return l.jsx(cg,{})}};return e?l.jsx("div",{className:"dashboard",children:l.jsxs("div",{className:"dashboard-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading dashboard data..."})]})}):l.jsxs("div",{className:"dashboard",children:[l.jsx("div",{className:"dashboard-header",children:l.jsxs("div",{className:"dashboard-header-content",children:[l.jsxs("div",{className:"dashboard-header-text",children:[l.jsx("h1",{children:"Dashboard Overview"}),l.jsx("p",{children:"Monitor and manage your business operations"})]}),l.jsxs("button",{className:"refresh-button",onClick:y,children:[l.jsx(Ok,{}),"Refresh Data"]})]})}),l.jsxs("div",{className:"dashboard-summary",children:[l.jsxs("div",{className:"summary-card summary-card-primary",children:[l.jsx("div",{className:"summary-card-icon",children:l.jsx(dg,{})}),l.jsxs("div",{className:"summary-card-content",children:[l.jsx("h3",{children:"Total Records"}),l.jsx("p",{className:"summary-card-value",children:d}),l.jsx("span",{className:"summary-card-label",children:"Across all categories"})]})]}),l.jsxs("div",{className:"summary-card summary-card-success",children:[l.jsx("div",{className:"summary-card-icon",children:l.jsx(fr,{})}),l.jsxs("div",{className:"summary-card-content",children:[l.jsx("h3",{children:"Active Services"}),l.jsx("p",{className:"summary-card-value",children:n.contractServices.length}),l.jsx("span",{className:"summary-card-label",children:"Currently running"})]})]}),l.jsxs("div",{className:"summary-card summary-card-warning",children:[l.jsx("div",{className:"summary-card-icon",children:l.jsx(du,{})}),l.jsxs("div",{className:"summary-card-content",children:[l.jsx("h3",{children:"Pending Alerts"}),l.jsx("p",{className:"summary-card-value",children:c.filter(_=>_.type==="warning"||_.type==="error").length}),l.jsx("span",{className:"summary-card-label",children:"Require attention"})]})]}),l.jsxs("div",{className:"summary-card summary-card-info",children:[l.jsx("div",{className:"summary-card-icon",children:l.jsx(Xc,{})}),l.jsxs("div",{className:"summary-card-content",children:[l.jsx("h3",{children:"Team Members"}),l.jsx("p",{className:"summary-card-value",children:n.employees.length+n.users.length}),l.jsx("span",{className:"summary-card-label",children:"Users & Employees"})]})]})]}),l.jsxs("div",{className:"dashboard-content",children:[l.jsxs("div",{className:"dashboard-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"System Statistics"}),l.jsx("p",{children:"Real-time data from your database"})]}),l.jsx("div",{className:"stats-grid",children:i.map(_=>l.jsxs("div",{className:"stat-card",onClick:()=>m(_.route),style:{cursor:_.route?"pointer":"default"},children:[l.jsxs("div",{className:"stat-card-header",children:[l.jsx("div",{className:"stat-card-icon",style:{background:`${_.color}15`,color:_.color},children:_.icon}),_.trend&&l.jsxs("div",{className:`stat-trend ${_.trend.isPositive?"positive":"negative"}`,children:[_.trend.isPositive?l.jsx(rk,{}):l.jsx(tk,{}),l.jsxs("span",{children:[_.trend.value,"%"]})]})]}),l.jsxs("div",{className:"stat-card-content",children:[l.jsx("h3",{children:_.title}),l.jsx("p",{className:"stat-count",style:{color:_.color},children:_.count}),l.jsx("span",{className:"stat-label",children:"Registered"})]})]},_.id))})]}),l.jsxs("div",{className:"dashboard-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Recent Alerts"}),l.jsx("p",{children:"Latest notifications and system alerts"})]}),l.jsx("div",{className:"alerts-container",children:c.map(_=>l.jsxs("div",{className:`alert-card alert-${_.type}`,children:[l.jsx("div",{className:"alert-icon",children:g(_.type)}),l.jsxs("div",{className:"alert-content",children:[l.jsxs("div",{className:"alert-header",children:[l.jsx("h4",{children:_.title}),l.jsx("span",{className:"alert-time",children:_.time})]}),l.jsx("p",{children:_.message})]})]},_.id))}),l.jsx("div",{className:"alerts-footer",children:l.jsx("button",{className:"view-all-button",onClick:()=>a("/admin/avisos"),children:"View All Alerts"})})]}),l.jsxs("div",{className:"dashboard-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Quick Actions"}),l.jsx("p",{children:"Frequently used operations"})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/cadastro-clientes",children:[l.jsx(Mr,{}),l.jsx("span",{children:"Add New Client"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/cadastro-servicos-contratados",children:[l.jsx(vs,{}),l.jsx("span",{children:"New Service Contract"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/cadastro-funcionario",children:[l.jsx(Mr,{}),l.jsx("span",{children:"Add Employee"})]}),l.jsxs("button",{className:"quick-action-btn",onClick:()=>window.location.href="/admin/relatorios",children:[l.jsx(vs,{}),l.jsx("span",{children:"Generate Report"})]})]})]})]})]})}function mM(){return l.jsx(jS,{children:l.jsxs(Je,{path:"/",element:l.jsx(eO,{}),children:[l.jsx(Je,{index:!0,element:l.jsx(zx,{})}),l.jsx(Je,{path:"dashboard",element:l.jsx(zx,{})}),l.jsx(Je,{path:"managment",element:l.jsx(fO,{})}),l.jsx(Je,{path:"cadastros",element:l.jsx(mO,{})}),l.jsx(Je,{path:"avisos",element:l.jsx(pO,{})}),l.jsx(Je,{path:"users",element:l.jsx(dM,{})}),l.jsx(Je,{path:"relatorios",element:l.jsx(fM,{})}),l.jsx(Je,{path:"manutencao-veiculos",element:l.jsx(gO,{})}),l.jsx(Je,{path:"termino-projeto",element:l.jsx(KO,{})}),l.jsx(Je,{path:"pagamento-subcontratados",element:l.jsx(eM,{})}),l.jsx(Je,{path:"recebimento-cliente",element:l.jsx(YO,{})}),l.jsx(Je,{path:"pagamento-servicos-contratados",element:l.jsx(iM,{})}),l.jsx(Je,{path:"cadastro-usuario",element:l.jsx(PO,{})}),l.jsx(Je,{path:"cadastro-servico",element:l.jsx(OO,{})}),l.jsx(Je,{path:"cadastro-clientes",element:l.jsx(MO,{})}),l.jsx(Je,{path:"cadastro-funcionario",element:l.jsx(LO,{})}),l.jsx(Je,{path:"cadastro-subcontratados",element:l.jsx(VO,{})}),l.jsx(Je,{path:"cadastro-servicos-contratados",element:l.jsx(UO,{})}),l.jsx(Je,{path:"cadastro-financiamentos",element:l.jsx(qO,{})}),l.jsx(Je,{path:"cadastro-veiculos",element:l.jsx(BO,{})}),l.jsx(Je,{path:"cadastro-conta-bancaria",element:l.jsx(zO,{})}),l.jsx(Je,{path:"cadastro-cartao-credito",element:l.jsx(FO,{})}),l.jsx(Je,{path:"cadastro-tipo-despesa",element:l.jsx(HO,{})}),l.jsx(Je,{path:"cadastro-preco-servico",element:l.jsx(GO,{})})]})})}function pM(){function n(){return l.jsx("div",{children:"Register"})}return l.jsx(LP,{children:l.jsxs(jS,{children:[l.jsx(Je,{path:Dp.home,element:l.jsx(Rp,{})}),l.jsx(Je,{path:Dp.login,element:l.jsx(Rp,{})}),l.jsx(Je,{path:Dp.register,element:l.jsx(n,{})}),l.jsx(Je,{path:"*",element:l.jsx(Rp,{})}),l.jsx(Je,{path:"/admin/*",element:l.jsx(QP,{required:"admin",children:l.jsx(mM,{})})})]})})}const gM=({id:n,type:e,title:t,message:a,duration:i=3e3,onClose:c})=>{M.useEffect(()=>{const m=setTimeout(()=>{c(n)},i);return()=>clearTimeout(m)});const d=()=>{switch(e){case"success":return l.jsx(fr,{className:"toast-icon success"});case"error":return l.jsx(rl,{className:"toast-icon error"});case"warning":return l.jsx(An,{className:"toast-icon warning"});case"info":return l.jsx(jx,{className:"toast-icon info"});default:return l.jsx(jx,{className:"toast-icon info"})}};return l.jsx("div",{className:`toast toast-${e}`,children:l.jsxs("div",{className:"toast-content",children:[d(),l.jsxs("div",{className:"toast-text",children:[l.jsx("h3",{className:"toast-title",children:t}),l.jsx("p",{className:"toast-message",children:a})]}),l.jsx("button",{className:"toast-close",onClick:()=>c(n),"aria-label":"Close toast",children:"x"})]})})},yM=({children:n})=>{const[e,t]=M.useState([]),a=M.useCallback(_=>{const E=Math.random().toString(36).substr(2,9),b={..._,id:E};t(x=>[...x,b])},[]),i=M.useCallback(_=>{t(E=>E.filter(b=>b.id!==_))},[]),c=M.useCallback((_,E,b=5e3)=>{a({type:"success",title:_,message:E,duration:b})},[a]),d=M.useCallback((_,E,b=7e3)=>{a({type:"error",title:_,message:E,duration:b})},[a]),m=M.useCallback((_,E,b=6e3)=>{a({type:"warning",title:_,message:E,duration:b})},[a]),y=M.useCallback((_,E,b=5e3)=>{a({type:"info",title:_,message:E,duration:b})},[a]),g={toasts:e,showToast:a,hideToast:i,showSuccess:c,showError:d,showWarning:m,showInfo:y};return l.jsxs(KS.Provider,{value:g,children:[n,l.jsx("div",{className:"toast-container",children:e.map(_=>l.jsx(gM,{..._,onClose:i},_.id))})]})};function vM(){return l.jsx(yM,{children:l.jsx(xI,{children:l.jsx(pM,{})})})}VN.createRoot(document.getElementById("root")).render(l.jsx(M.StrictMode,{children:l.jsx(vM,{})}));
